var cdwpb;
/******/ (function() { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./dist/js-sdk-legacy/src/main/Client.js":
/*!***********************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/Client.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var SystemBootstrapper_1 = __importDefault(__webpack_require__(/*! ./core/SystemBootstrapper */ "./dist/js-sdk-legacy/src/main/core/SystemBootstrapper.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ./technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ./events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ConfigurationFields_1 = __webpack_require__(/*! ./core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var CdApiFacade_1 = __importDefault(__webpack_require__(/*! ./api/CdApiFacade */ "./dist/js-sdk-legacy/src/main/api/CdApiFacade.js"));
var Client = /*#__PURE__*/function () {
  function Client() {
    _classCallCheck(this, Client);
  }
  return _createClass(Client, [{
    key: "autoStart",
    value: function autoStart(remoteConfigurationLoadedCallback) {
      var _this = this;
      // Create the cdApi facade here so we can get the configurations
      var cdApiFacade = new CdApiFacade_1["default"]();
      cdApiFacade.getConfigurations(function (configurations) {
        if (!configurations) {
          // Log is not really doing something here since we don't have the log server url, hence will never get the logs address
          Logger_1["default"].error('Failed starting the JS SDK. Received invalid start configurations');
          return;
        }
        // Make sure we have a wup server URL otherwise there is no point to continue
        if (!configurations.getWupServerURL()) {
          Logger_1["default"].error('Missing server URL. Unable to start the library.');
          return;
        }
        if (configurations.getUseUrlWorker() && configurations.getWorkerUrl() === '') {
          Logger_1["default"].error('Failed starting the JS SDK. Received invalid WorkerUrl configuration');
          return;
        }
        // Load the system components
        _this.start(cdApiFacade, configurations, remoteConfigurationLoadedCallback);
      });
    }
  }, {
    key: "manualStart",
    value: function manualStart(configurations, wupServerUrl, remoteConfigurationLoadedCallback, cdApi) {
      var cdApiFacade = new CdApiFacade_1["default"](undefined, cdApi);
      this.start(cdApiFacade, configurations, remoteConfigurationLoadedCallback);
    }
  }, {
    key: "start",
    value: function start(cdApiFacade, configurations, remoteConfigurationLoadedCallback) {
      var _this$systemBootstrap;
      this._cdApiFacade = cdApiFacade;
      this._startupConfigurations = configurations;
      this._configurationLoadedCallback = remoteConfigurationLoadedCallback;
      this.systemBootstrapper = new SystemBootstrapper_1["default"]();
      cdApiFacade.createClientInterface(this, configurations.getClientSettings());
      this.systemBootstrapper.start(cdApiFacade, configurations);
      Logger_1["default"].info("Got server address: ".concat(configurations.getWupServerURL()));
      var pm = this.systemBootstrapper.getPerfMonitor();
      pm.startMonitor('t.timeTillServerConfig');
      pm.startMonitor('t.timeTillDataCollect'); // will be stopped in the MouseEvents startFeature
      this.configurationService = this.systemBootstrapper.getConfigurationService();
      this.sessionService = this.systemBootstrapper.getSessionService();
      this.configurationService.setConfigurationLoadedCallback(remoteConfigurationLoadedCallback);
      this.systemBootstrapper.getFeatureService().buildFrameRelatedLists();
      this.systemBootstrapper.getFeatureBuilder().buildFeatures();
      Logger_1["default"].info('Started default features collection');
      this.systemBootstrapper.getFeatureService().runDefault();
      this.systemBootstrapper.getApiBridge().enableApi();
      this.systemBootstrapper.getContextMgr().initContextHandling();
      this.systemBootstrapper.registerPostLoadEvents();
      (_this$systemBootstrap = this.systemBootstrapper.getMuidService()) === null || _this$systemBootstrap === void 0 || _this$systemBootstrap.initMuid();
      var enableStartupCustomerSessionId = this.systemBootstrapper.getConfigurationRepository().get(ConfigurationFields_1.ConfigurationFields.enableStartupCustomerSessionId);
      // Start a new session or resume an existing one...
      enableStartupCustomerSessionId ? this.sessionService.startNewSession() : this.sessionService.resumeOrStartSession();
    }
  }, {
    key: "stop",
    value: function stop() {
      this.systemBootstrapper.stop();
    }
  }, {
    key: "pause",
    value: function pause() {
      window.postMessage({
        type: 'cdChangeState',
        toState: 'pause'
      }, window.location.href);
    }
  }, {
    key: "resume",
    value: function resume() {
      window.postMessage({
        type: 'cdChangeState',
        toState: 'run'
      }, window.location.href);
    }
  }, {
    key: "updateCustomerSessionID",
    value: function updateCustomerSessionID(customerSessionID) {
      window.postMessage({
        type: 'cdSetCsid',
        csid: customerSessionID
      }, window.location.href);
    }
  }, {
    key: "changeContext",
    value: function changeContext(contextName) {
      window.postMessage({
        type: 'ContextChange',
        context: contextName
      }, window.location.href);
    }
  }, {
    key: "startNewSession",
    value: function startNewSession(customerSessionID) {
      window.postMessage({
        type: 'ResetSession',
        resetReason: 'customerApi',
        csid: customerSessionID
      }, window.location.href);
    }
  }, {
    key: "setCustomerBrand",
    value: function setCustomerBrand(brand) {
      window.postMessage({
        type: 'cdSetCustomerBrand',
        brand: brand
      }, window.location.href);
    }
  }, {
    key: "restart",
    value: function restart() {
      this.stop();
      this.start(this._cdApiFacade, this._startupConfigurations, this._configurationLoadedCallback);
    }
    /**
     * flush(), setCoordinatesMasking(), and submitCustomElement()
     * are methods appended to window.cdApi object using the
     * createClientInterface of the CdApiFacade class
     */
  }, {
    key: "flush",
    value: function flush() {
      this.systemBootstrapper.flushAllMessages();
    }
    /**
     * @param isEnabled
     */
  }, {
    key: "setCoordinatesMasking",
    value: function setCoordinatesMasking(isEnabled) {
      this.systemBootstrapper.handleCoordinatesMaskingConfigurationUpdate(isEnabled);
    }
    /**
     * @param customElement
     */
  }, {
    key: "submitCustomElement",
    value: function submitCustomElement(customElement) {
      var messageBus = this.systemBootstrapper.getMessageBus();
      messageBus.publish(MessageBusEventType_1.MessageBusEventType.CustomElementSubmitted, customElement);
    }
  }]);
}();
exports["default"] = Client;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/api/ApiCommandType.js":
/*!***********************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/api/ApiCommandType.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ApiCommandType = void 0;
exports.ApiCommandType = {
  ContextChangeCommand: 'ContextChange',
  ResetSessionCommand: 'ResetSession',
  CustomerMetadataCommand: 'cdCustomerMetadata',
  ChangeStateCommand: 'cdChangeState',
  SetCsidCommand: 'cdSetCsid',
  SetPsidCommand: 'cdSetPsid',
  SetCustomerBrand: 'cdSetCustomerBrand'
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/api/ApiContractName.js":
/*!************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/api/ApiContractName.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ApiContractName = void 0;
exports.ApiContractName = {
  GetConfigurations: 'getConfigurations',
  ConfigurationKeys: 'configurationKeys',
  RestartFunction: 'restart',
  ClientFacade: 'client'
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/api/ApiEventType.js":
/*!*********************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/api/ApiEventType.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ApiEventType = void 0;
exports.ApiEventType = {
  NewSessionStartedEvent: 'cdNewSessionStartedEvent',
  StateChangedEvent: 'cdStateChangedEvent',
  HeartBeatEvent: 'cdHeartbeat',
  RestoredMuidEvent: 'RestoredMuidEvent'
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/api/CdApiFacade.js":
/*!********************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/api/CdApiFacade.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * The cdApi facade exposes the various apis available for the SDK to use.
 * This API should be used for querying configurations external to the SDK if available.
 */
var ApiContractName_1 = __webpack_require__(/*! ./ApiContractName */ "./dist/js-sdk-legacy/src/main/api/ApiContractName.js");
var StartupConfigurations_1 = __importDefault(__webpack_require__(/*! ./StartupConfigurations */ "./dist/js-sdk-legacy/src/main/api/StartupConfigurations.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var URLFieldsExtractor_1 = __importDefault(__webpack_require__(/*! ../technicalServices/URLFieldsExtractor */ "./dist/js-sdk-legacy/src/main/technicalServices/URLFieldsExtractor.js"));
var URLBuilder_1 = __importDefault(__webpack_require__(/*! ../technicalServices/URLBuilder */ "./dist/js-sdk-legacy/src/main/technicalServices/URLBuilder.js"));
var APIConfigurationKey_1 = __webpack_require__(/*! ../contract/APIConfigurationKey */ "./dist/js-sdk-legacy/src/main/contract/APIConfigurationKey.js");
var CDAPIException_1 = __importDefault(__webpack_require__(/*! ../core/exceptions/CDAPIException */ "./dist/js-sdk-legacy/src/main/core/exceptions/CDAPIException.js"));
var ClientSettingsKey_1 = __webpack_require__(/*! ../contract/ClientSettingsKey */ "./dist/js-sdk-legacy/src/main/contract/ClientSettingsKey.js");
var ConfigMapper_1 = __webpack_require__(/*! ../core/ConfigMapper */ "./dist/js-sdk-legacy/src/main/core/ConfigMapper.js");
var CdApiFacade = /*#__PURE__*/function () {
  function CdApiFacade(utils, cdApi) {
    _classCallCheck(this, CdApiFacade);
    this._cdApi = cdApi;
    this._utils = utils;
  }
  /**
   * Helper function to always get the relevant cdApi
   * When coming from Npm flow -> this._cdApi
   * When coming from legacy flow -> window.cdApi
   */
  return _createClass(CdApiFacade, [{
    key: "cdApi",
    value: function cdApi() {
      // this._cdApi != undefined only on NPM.
      return this._cdApi || window.cdApi;
    }
    /**
     * Get the customer session ID if available by callback
     * @param callback
     */
  }, {
    key: "getCustomerSessionID",
    value: function getCustomerSessionID(callback) {
      this._getFromApiOrEmpty('getCustomerSessionID', function (csnum) {
        callback(csnum);
      });
    }
    /**
     * Get the log server url if available by callback. This function should not be used since its deprecated. Use getConfigurations instead.
     * @param callback
     */
  }, {
    key: "getLogServerAddress",
    value: function getLogServerAddress(callback) {
      this._getFromApiOrEmpty('getLogServerAddress', function (url) {
        callback(url);
      });
    }
    /**
     * Get the server url if available by callback. This function should not be used since its deprecated. Use getConfigurations instead.
     * @param callback
     */
  }, {
    key: "getServerAddress",
    value: function getServerAddress(callback) {
      this._getFromApiOrEmpty('getCustomerConfigLocation', function (url) {
        callback(url);
      });
    }
    /**
     * Get all configurations in a single api which receives a dictionary of configurations on initialization
     * @param callback
     */
  }, {
    key: "getConfigurations",
    value: function getConfigurations(callback) {
      var _this = this;
      var wupServerURL = null;
      // If we have the getConfigurations API
      if (this.isApiAvailable(ApiContractName_1.ApiContractName.GetConfigurations)) {
        this._getFromApiOrEmpty(ApiContractName_1.ApiContractName.GetConfigurations, function (configurations) {
          var startupConfigurations = null;
          // If we have configuration keys and configurations we try to extract the configurations
          if (configurations) {
            if (configurations.isWupServerURLProxy) {
              wupServerURL = configurations.wupServerURL;
            } else if (configurations[APIConfigurationKey_1.APIConfigurationKey.wupServerURL]) {
              wupServerURL = URLBuilder_1["default"].buildCustomServerUrl(configurations[APIConfigurationKey_1.APIConfigurationKey.wupServerURL]);
            } else if (configurations[APIConfigurationKey_1.APIConfigurationKey.customerID] && configurations[APIConfigurationKey_1.APIConfigurationKey.serverURL]) {
              wupServerURL = URLBuilder_1["default"].build(configurations[APIConfigurationKey_1.APIConfigurationKey.serverURL], configurations[APIConfigurationKey_1.APIConfigurationKey.customerID]);
            } else {
              throw new Error('Invalid serverURL or cid. Parameter is empty');
            }
            var configurationMapper = new ConfigMapper_1.ConfigMapper();
            startupConfigurations = configurationMapper.mapStartupConfigurations(wupServerURL, configurations);
          }
          callback(startupConfigurations);
        });
      } else {
        this.getLogServerAddress(function (defaultLogAddress) {
          // get server url
          _this.getServerAddress(function (configUrl) {
            var extractedFields = URLFieldsExtractor_1["default"].extract(configUrl);
            wupServerURL = URLBuilder_1["default"].build(extractedFields.serverURL, extractedFields.cid);
            callback(new StartupConfigurations_1["default"](wupServerURL, defaultLogAddress, null, false, '', null));
          });
        });
      }
    }
  }, {
    key: "createClientInterface",
    value: function createClientInterface(client, clientSettings) {
      if (!this.isCDAPIAvailable()) {
        Logger_1["default"].error('Failed setting client facade. cdApi is unavailable.');
        throw new CDAPIException_1["default"]('Failed setting client facade. cdApi is unavailable.');
      }
      var clientObject = {};
      clientObject.setCoordinatesMasking = function (mouseMasking) {
        client.setCoordinatesMasking(mouseMasking);
      };
      if (clientSettings && clientSettings[ClientSettingsKey_1.ClientSettingsKey.enableRestart]) {
        clientObject.restart = function () {
          client.restart();
        };
      }
      if (clientSettings && clientSettings[ClientSettingsKey_1.ClientSettingsKey.enableFlush]) {
        clientObject.flush = function () {
          client.flush();
        };
      }
      if (clientSettings && clientSettings[ClientSettingsKey_1.ClientSettingsKey.enableCustomElements]) {
        clientObject.submitCustomElement = function (customElement) {
          client.submitCustomElement(customElement);
        };
      }
      // This object will be set on the cdApi object
      this.cdApi()[ApiContractName_1.ApiContractName.ClientFacade] = clientObject;
    }
  }, {
    key: "isCDAPIAvailable",
    value: function isCDAPIAvailable() {
      // If there is no cdApi at all
      if (!this.cdApi()) {
        return false;
      }
      return true;
    }
  }, {
    key: "isApiAvailable",
    value: function isApiAvailable(api) {
      // If there is no cdApi at all
      if (!this.cdApi()) {
        return false;
      }
      // If the client didn't implement the specific api...
      if (!this.cdApi()[api]) {
        return false;
      }
      return true;
    }
  }, {
    key: "_getFromApiOrEmpty",
    value: function _getFromApiOrEmpty(api, callback) {
      var retryCount = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      // If the client didn't implement the cdApi or it wasn't loaded yet...
      if (!this.cdApi()) {
        if (retryCount >= 20) {
          Logger_1["default"].error('Failed getting cdApi after all retries.');
          return;
        }
        // Log the warning only on the first attempt so we don't flood ourselves with logs
        if (retryCount === 0) {
          Logger_1["default"].warn("cdApi not found in retry ".concat(retryCount));
        }
        retryCount++;
        setTimeout(this._getFromApiOrEmpty.bind(this, api, callback, retryCount), 100); // the bind is for the callback to pass
        return;
      }
      // If the client didn't implement the specific api...
      if (!this.cdApi()[api]) {
        Logger_1["default"].warn("User did not implement cdApi method: ".concat(api));
        callback('');
        return;
      }
      try {
        this.cdApi()[api](callback);
      } catch (ex) {
        Logger_1["default"].error("An error has occurred while calling cdApi ".concat(api, " function. Exception was thrown from client implementation."), ex);
        // After we logged the error from cdApi implementation we rethrow the exception so that caller can handle it.
        throw ex;
      }
    }
  }]);
}();
exports["default"] = CdApiFacade;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/api/ClientEventService.js":
/*!***************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/api/ClientEventService.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var ApiEventType_1 = __webpack_require__(/*! ./ApiEventType */ "./dist/js-sdk-legacy/src/main/api/ApiEventType.js");
var ClientEventService = /*#__PURE__*/function () {
  function ClientEventService() {
    _classCallCheck(this, ClientEventService);
  }
  return _createClass(ClientEventService, [{
    key: "publishNewSessionStartedEvent",
    value: function publishNewSessionStartedEvent(sid) {
      window.postMessage({
        type: ApiEventType_1.ApiEventType.NewSessionStartedEvent,
        event: {
          sessionID: sid
        }
      }, window.location.href);
    }
  }, {
    key: "publishStateChangedEvent",
    value: function publishStateChangedEvent(state) {
      window.postMessage({
        type: ApiEventType_1.ApiEventType.StateChangedEvent,
        event: {
          state: state
        }
      }, window.location.href);
    }
  }, {
    key: "publishRestoredMuidEvent",
    value: function publishRestoredMuidEvent(muid) {
      window.postMessage({
        type: ApiEventType_1.ApiEventType.RestoredMuidEvent,
        event: {
          muid: muid
        }
      }, window.location.href);
    }
  }]);
}();
exports["default"] = ClientEventService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/api/CollectionSettings.js":
/*!***************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/api/CollectionSettings.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var ElementSettings_1 = __importDefault(__webpack_require__(/*! ./ElementSettings */ "./dist/js-sdk-legacy/src/main/api/ElementSettings.js"));
var CustomInputElementSettings_1 = __importDefault(__webpack_require__(/*! ./CustomInputElementSettings */ "./dist/js-sdk-legacy/src/main/api/CustomInputElementSettings.js"));
var APIConfigurationKey_1 = __webpack_require__(/*! ../contract/APIConfigurationKey */ "./dist/js-sdk-legacy/src/main/contract/APIConfigurationKey.js");
var AgentType_1 = __webpack_require__(/*! ../contract/AgentType */ "./dist/js-sdk-legacy/src/main/contract/AgentType.js");
var CollectionMode_1 = __webpack_require__(/*! ../contract/CollectionMode */ "./dist/js-sdk-legacy/src/main/contract/CollectionMode.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var CollectionSettings = /*#__PURE__*/function () {
  function CollectionSettings(collectionSettings) {
    var _collectionSettings$A, _collectionSettings$A2;
    _classCallCheck(this, CollectionSettings);
    this._elementSettings = new ElementSettings_1["default"](collectionSettings === null || collectionSettings === void 0 ? void 0 : collectionSettings[APIConfigurationKey_1.APIConfigurationKey.elementSettings]);
    this._customInputElementSettings = new CustomInputElementSettings_1["default"](collectionSettings === null || collectionSettings === void 0 ? void 0 : collectionSettings[APIConfigurationKey_1.APIConfigurationKey.customInputElementSettings]);
    this._agentType = this._validateAgentType(collectionSettings === null || collectionSettings === void 0 || (_collectionSettings$A = collectionSettings[APIConfigurationKey_1.APIConfigurationKey.mode]) === null || _collectionSettings$A === void 0 ? void 0 : _collectionSettings$A.agentType);
    this._collectionMode = this._setAgentCollectionMode(collectionSettings === null || collectionSettings === void 0 || (_collectionSettings$A2 = collectionSettings[APIConfigurationKey_1.APIConfigurationKey.mode]) === null || _collectionSettings$A2 === void 0 ? void 0 : _collectionSettings$A2.collectionMode);
  }
  return _createClass(CollectionSettings, [{
    key: "getElementSettings",
    value: function getElementSettings() {
      return this._elementSettings;
    }
  }, {
    key: "getCustomInputElementSettings",
    value: function getCustomInputElementSettings() {
      return this._customInputElementSettings;
    }
  }, {
    key: "getAgentType",
    value: function getAgentType() {
      return this._agentType;
    }
  }, {
    key: "getAgentMode",
    value: function getAgentMode() {
      return this._collectionMode;
    }
    /**
     *
     * @param collectionMode
     * @returns {string|*|string}
     * agentType: primary -> collectionMode: full
     * agentType: secondary -> collectionMode: full or lean
     */
  }, {
    key: "_setAgentCollectionMode",
    value: function _setAgentCollectionMode(collectionMode) {
      if (this._agentType === AgentType_1.AgentType.PRIMARY) {
        return CollectionMode_1.CollectionMode.FULL;
      }
      return this._validateAgentMode(collectionMode);
    }
  }, {
    key: "_validateAgentType",
    value: function _validateAgentType(agentType) {
      if (Object.values(AgentType_1.AgentType).includes(agentType)) {
        return agentType;
      }
      var defaultAgentType = AgentType_1.AgentType.PRIMARY;
      if (agentType !== undefined) {
        // Warn only if an invalid value was actually provided
        Logger_1["default"].warn("Invalid agent type: ".concat(agentType, ". Defaulting to ").concat(defaultAgentType, " agent type."));
      }
      return defaultAgentType;
    }
  }, {
    key: "_validateAgentMode",
    value: function _validateAgentMode(collectionMode) {
      if (Object.values(CollectionMode_1.CollectionMode).includes(collectionMode)) {
        return collectionMode;
      }
      var defaultCollectionMode = CollectionMode_1.CollectionMode.LEAN;
      if (collectionMode !== undefined) {
        // Warn only if an invalid value was actually provided
        Logger_1["default"].warn("Invalid collection mode: ".concat(collectionMode, ". Defaulting to ").concat(defaultCollectionMode, " collection mode."));
      }
      return defaultCollectionMode;
    }
  }]);
}();
exports["default"] = CollectionSettings;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/api/CoordinatesMaskingConfigurationUpdater.js":
/*!***********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/api/CoordinatesMaskingConfigurationUpdater.js ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var CDUtils_1 = __importDefault(__webpack_require__(/*! ../technicalServices/CDUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/CDUtils.js"));
/**
 * this class is a bridge for handling the collection of mouse coordinates.
 * the class takes effect when:
 * 1. server configurations loaded
 * 2. setCoordinatesMasking API function was fired.
 * the class updates the configuration repository 'enableCoordinatesMasking' field which
 * is being consumed by the 'MouseEventCollector' class.
 */
var CoordinatesMaskingConfigurationUpdater = /*#__PURE__*/function () {
  function CoordinatesMaskingConfigurationUpdater(configurationRepository) {
    _classCallCheck(this, CoordinatesMaskingConfigurationUpdater);
    this._configurationRepository = configurationRepository;
  }
  return _createClass(CoordinatesMaskingConfigurationUpdater, [{
    key: "onConfigUpdate",
    value: function onConfigUpdate(serverConfigurations) {
      var isEnabled = serverConfigurations.get(ConfigurationFields_1.ConfigurationFields.enableCoordinatesMasking);
      this._setConfigurationKey(isEnabled);
    }
  }, {
    key: "updateConfig",
    value: function updateConfig(isEnable) {
      this._handleConfigurationUpdate(isEnable);
    }
  }, {
    key: "_handleConfigurationUpdate",
    value: function _handleConfigurationUpdate(isEnabled) {
      if (!CDUtils_1["default"].isBoolean(isEnabled)) {
        Logger_1["default"].warn("Invalid argument type: ".concat(isEnabled));
        return;
      }
      Logger_1["default"].info("Set coordinates masking API was called, is enabled: ".concat(isEnabled));
      this._setConfigurationKey(isEnabled);
    }
  }, {
    key: "_setConfigurationKey",
    value: function _setConfigurationKey(value) {
      this._configurationRepository.set(ConfigurationFields_1.ConfigurationFields.enableCoordinatesMasking, value);
    }
  }]);
}();
exports["default"] = CoordinatesMaskingConfigurationUpdater;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/api/CustomInputElementSettings.js":
/*!***********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/api/CustomInputElementSettings.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var ConfigurationFields_1 = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var CustomInputElementSettings = /*#__PURE__*/function () {
  function CustomInputElementSettings(customInputElementSettings) {
    _classCallCheck(this, CustomInputElementSettings);
    this._parentElementSelector = customInputElementSettings ? customInputElementSettings[ConfigurationFields_1.ConfigurationFields.parentElementSelector] : null;
    this._childElementWithCustomAttribute = customInputElementSettings ? customInputElementSettings[ConfigurationFields_1.ConfigurationFields.childElementWithCustomAttribute] : null;
    this._elementDataAttribute = customInputElementSettings ? customInputElementSettings[ConfigurationFields_1.ConfigurationFields.elementDataAttribute] : null;
    this._customButtons = customInputElementSettings ? customInputElementSettings[ConfigurationFields_1.ConfigurationFields.customButtons] : null;
  }
  return _createClass(CustomInputElementSettings, [{
    key: "getParentElementSelector",
    value: function getParentElementSelector() {
      return this._parentElementSelector;
    }
  }, {
    key: "getChildElementWithCustomAttribute",
    value: function getChildElementWithCustomAttribute() {
      return this._childElementWithCustomAttribute;
    }
  }, {
    key: "getElementDataAttribute",
    value: function getElementDataAttribute() {
      return this._elementDataAttribute;
    }
  }, {
    key: "getCustomButtons",
    value: function getCustomButtons() {
      return this._customButtons;
    }
  }]);
}();
exports["default"] = CustomInputElementSettings;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/api/CustomerApiBridge.js":
/*!**************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/api/CustomerApiBridge.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var ApiCommandType_1 = __webpack_require__(/*! ./ApiCommandType */ "./dist/js-sdk-legacy/src/main/api/ApiCommandType.js");
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var CustomerApiBridge = /*#__PURE__*/function () {
  function CustomerApiBridge(pauseResumeMgr, messageBus, cdApiFacade, utils) {
    _classCallCheck(this, CustomerApiBridge);
    this._pauseResumeMgr = pauseResumeMgr;
    this._messageBus = messageBus;
    this._cdApiFacade = cdApiFacade;
    this._utils = utils;
    this._createCommandToBusMessageMapping();
  }
  return _createClass(CustomerApiBridge, [{
    key: "enableApi",
    value: function enableApi() {
      Logger_1["default"].info('Enabling api calls');
      this._onApiMessageBinded = this._onApiMessage.bind(this);
      this._utils.addEventListener(window, 'message', this._onApiMessageBinded, true);
    }
  }, {
    key: "disableApi",
    value: function disableApi() {
      Logger_1["default"].info('Disabling api calls');
      this._utils.removeEventListener(window, 'message', this._onApiMessageBinded, true);
    }
  }, {
    key: "getCustomerSessionID",
    value: function getCustomerSessionID(callback) {
      this._cdApiFacade.getCustomerSessionID(function (customerSessionID) {
        callback(customerSessionID);
      });
    }
  }, {
    key: "getLogServerAddress",
    value: function getLogServerAddress(callback) {
      this._cdApiFacade.getLogServerAddress(function (url) {
        callback(url);
      });
    }
  }, {
    key: "getServerAddress",
    value: function getServerAddress(callback) {
      this._cdApiFacade.getServerAddress(function (url) {
        callback(url);
      });
    }
  }, {
    key: "getConfigurations",
    value: function getConfigurations(callback) {
      this._cdApiFacade.getConfigurations(function (configurations) {
        callback(configurations);
      });
    }
    /**
     * Method posts a window message once a session reset occurs. Exposes a session reset event
     * @param snum
     */
  }, {
    key: "notifySessionReset",
    value: function notifySessionReset(snum) {
      if (this._pauseResumeMgr.isCustomerApiEnabled()) {
        window.postMessage({
          type: 'SNumNotification',
          cdSNum: snum
        }, window.location.href);
      }
    }
  }, {
    key: "isApiAvailable",
    value: function isApiAvailable(api) {
      return this._cdApiFacade.isApiAvailable(api);
    }
  }, {
    key: "_onApiMessage",
    value: function _onApiMessage(e) {
      // make sure that the message posted from the same tab
      var apiMsg = e.data;
      var msgType = apiMsg.type;
      if (msgType === undefined) {
        // we may be in IE <=9 which passes only strings so the msg may be stringified
        try {
          apiMsg = JSON.parse(apiMsg);
          msgType = apiMsg.type;
        } catch (ex) {
          // Swallow exception
        }
      }
      if (msgType === ApiCommandType_1.ApiCommandType.ChangeStateCommand || this._pauseResumeMgr.isCustomerApiEnabled() && this._apiCommandToBusMessageMapping[msgType]) {
        // even when api is disabled we should enable running the pause/resume api
        e.preventDefault && e.preventDefault(); // IE8 does not support
        e.stopPropagation && e.stopPropagation();
        this._messageBus.publish(this._apiCommandToBusMessageMapping[msgType], apiMsg);
      }
    }
  }, {
    key: "_createCommandToBusMessageMapping",
    value: function _createCommandToBusMessageMapping() {
      this._apiCommandToBusMessageMapping = {};
      this._apiCommandToBusMessageMapping[ApiCommandType_1.ApiCommandType.ContextChangeCommand] = MessageBusEventType_1.MessageBusEventType.ApiContextChangeEvent;
      this._apiCommandToBusMessageMapping[ApiCommandType_1.ApiCommandType.ResetSessionCommand] = MessageBusEventType_1.MessageBusEventType.ApiResetSessionEvent;
      this._apiCommandToBusMessageMapping[ApiCommandType_1.ApiCommandType.CustomerMetadataCommand] = MessageBusEventType_1.MessageBusEventType.ApiCustomerMetadataEvent;
      this._apiCommandToBusMessageMapping[ApiCommandType_1.ApiCommandType.ChangeStateCommand] = MessageBusEventType_1.MessageBusEventType.ApiChangeStateEvent;
      this._apiCommandToBusMessageMapping[ApiCommandType_1.ApiCommandType.SetCsidCommand] = MessageBusEventType_1.MessageBusEventType.ApiSetCsidEvent;
      this._apiCommandToBusMessageMapping[ApiCommandType_1.ApiCommandType.SetPsidCommand] = MessageBusEventType_1.MessageBusEventType.ApiSetPsidEvent;
      this._apiCommandToBusMessageMapping[ApiCommandType_1.ApiCommandType.SetCustomerBrand] = MessageBusEventType_1.MessageBusEventType.ApiSetCustomerBrand;
    }
  }]);
}();
exports["default"] = CustomerApiBridge;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/api/ElementSettings.js":
/*!************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/api/ElementSettings.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var ConfigurationFields_1 = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var ElementSettings = /*#__PURE__*/function () {
  function ElementSettings(elementSettings) {
    _classCallCheck(this, ElementSettings);
    this._customElementAttribute = elementSettings ? elementSettings[ConfigurationFields_1.ConfigurationFields.customElementAttribute] : null;
    this._attributesToMask = elementSettings ? elementSettings[ConfigurationFields_1.ConfigurationFields.maskElementsAttributes] : null;
    this._keyEventsMaskSpecialChars = elementSettings ? elementSettings[ConfigurationFields_1.ConfigurationFields.keyEventsMaskSpecialChars] : null;
  }
  return _createClass(ElementSettings, [{
    key: "getCustomElementAttribute",
    value: function getCustomElementAttribute() {
      return this._customElementAttribute;
    }
  }, {
    key: "getAttributesToMask",
    value: function getAttributesToMask() {
      return this._attributesToMask;
    }
  }, {
    key: "getKeyEventsMaskSpecialChars",
    value: function getKeyEventsMaskSpecialChars() {
      return this._keyEventsMaskSpecialChars;
    }
  }]);
}();
exports["default"] = ElementSettings;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/api/StartupConfigurations.js":
/*!******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/api/StartupConfigurations.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CollectionSettings_1 = __importDefault(__webpack_require__(/*! ./CollectionSettings */ "./dist/js-sdk-legacy/src/main/api/CollectionSettings.js"));
var StartupConfigurations = /*#__PURE__*/function () {
  function StartupConfigurations(wupServerURL, logServerURL, enableFramesProcessing, enableCustomElementsProcessing, enableSameSiteNoneAndSecureCookies, useUrlWorker, workerUrl, isWupServerURLProxy, clientSettings, collectionSettings, enableStartupCustomerSessionId, mutationMaxChunkSize, mutationChunkDelayMs, passwordIdMaskingList, enableUnmaskedValues, allowedUnmaskedValuesList, enableCoordinatesMasking, isFlutterApp, enableMinifiedWupUri, enableMinifiedLogUri, maxShadowDepth, iframeLoadingTimeout, elementCategories, elementAttributes, enableMathDetect, enableBrowserDisplayDetect, enableGraphCard, useLegacyZeroTimeout) {
    _classCallCheck(this, StartupConfigurations);
    this._wupServerURL = wupServerURL;
    this._logServerURL = logServerURL;
    this._enableFramesProcessing = enableFramesProcessing;
    this._enableCustomElementsProcessing = enableCustomElementsProcessing;
    this._enableSameSiteNoneAndSecureCookies = enableSameSiteNoneAndSecureCookies;
    this._useUrlWorker = useUrlWorker;
    this._workerUrl = workerUrl;
    this._isWupServerURLProxy = isWupServerURLProxy;
    this._clientSettings = clientSettings;
    this._collectionSettings = collectionSettings || new CollectionSettings_1["default"]();
    this._enableStartupCustomerSessionId = enableStartupCustomerSessionId;
    this._mutationMaxChunkSize = mutationMaxChunkSize || 0;
    this._mutationChunkDelayMs = mutationChunkDelayMs || 100;
    this._passwordIdMaskingList = passwordIdMaskingList;
    this._enableUnmaskedValues = enableUnmaskedValues || false;
    this._allowedUnmaskedValuesList = allowedUnmaskedValuesList || [];
    this._enableCoordinatesMasking = enableCoordinatesMasking || false;
    this._isFlutterApp = isFlutterApp || false;
    this._enableMinifiedWupUri = enableMinifiedWupUri !== undefined ? enableMinifiedWupUri : true;
    this._enableMinifiedLogUri = enableMinifiedLogUri !== undefined ? enableMinifiedLogUri : false;
    this._maxShadowDepth = maxShadowDepth || 0;
    this._iframeLoadingTimeout = iframeLoadingTimeout || 5000;
    this._elementCategories = elementCategories;
    this._elementAttributes = elementAttributes;
    this._enableMathDetect = enableMathDetect;
    this._enableBrowserDisplayDetect = enableBrowserDisplayDetect;
    this._enableGraphCard = enableGraphCard;
    this._useLegacyZeroTimeout = useLegacyZeroTimeout;
  }
  return _createClass(StartupConfigurations, [{
    key: "getWupServerURL",
    value: function getWupServerURL() {
      return this._wupServerURL;
    }
  }, {
    key: "getLogServerURL",
    value: function getLogServerURL() {
      return this._logServerURL;
    }
  }, {
    key: "isMinifiedLogUriEnabled",
    value: function isMinifiedLogUriEnabled() {
      return this._enableMinifiedLogUri;
    }
  }, {
    key: "getEnableFramesProcessing",
    value: function getEnableFramesProcessing() {
      return this._enableFramesProcessing;
    }
  }, {
    key: "getEnableCustomElementsProcessing",
    value: function getEnableCustomElementsProcessing() {
      return this._enableCustomElementsProcessing;
    }
  }, {
    key: "getEnableSameSiteNoneAndSecureCookies",
    value: function getEnableSameSiteNoneAndSecureCookies() {
      return this._enableSameSiteNoneAndSecureCookies;
    }
  }, {
    key: "getUseUrlWorker",
    value: function getUseUrlWorker() {
      return this._useUrlWorker;
    }
  }, {
    key: "getWorkerUrl",
    value: function getWorkerUrl() {
      return this._workerUrl;
    }
  }, {
    key: "getIsWupServerURLProxy",
    value: function getIsWupServerURLProxy() {
      return this._isWupServerURLProxy;
    }
  }, {
    key: "getClientSettings",
    value: function getClientSettings() {
      return this._clientSettings;
    }
  }, {
    key: "getCollectionSettings",
    value: function getCollectionSettings() {
      return this._collectionSettings;
    }
  }, {
    key: "getEnableStartupCustomerSessionId",
    value: function getEnableStartupCustomerSessionId() {
      return this._enableStartupCustomerSessionId;
    }
  }, {
    key: "getMutationMaxChunkSize",
    value: function getMutationMaxChunkSize() {
      return this._mutationMaxChunkSize;
    }
  }, {
    key: "getMutationChunkDelayMs",
    value: function getMutationChunkDelayMs() {
      return this._mutationChunkDelayMs;
    }
  }, {
    key: "getPasswordIdMaskingList",
    value: function getPasswordIdMaskingList() {
      return this._passwordIdMaskingList;
    }
  }, {
    key: "isUnmaskedValuesEnabled",
    value: function isUnmaskedValuesEnabled() {
      return this._enableUnmaskedValues;
    }
  }, {
    key: "getAllowedUnmaskedValuesList",
    value: function getAllowedUnmaskedValuesList() {
      return this._allowedUnmaskedValuesList;
    }
  }, {
    key: "isCoordinatesMaskingEnabled",
    value: function isCoordinatesMaskingEnabled() {
      return this._enableCoordinatesMasking;
    }
  }, {
    key: "isFlutterApp",
    value: function isFlutterApp() {
      return this._isFlutterApp;
    }
  }, {
    key: "isMinifiedWupUriEnabled",
    value: function isMinifiedWupUriEnabled() {
      return this._enableMinifiedWupUri;
    }
  }, {
    key: "getMaxShadowDepth",
    value: function getMaxShadowDepth() {
      return this._maxShadowDepth;
    }
  }, {
    key: "getIframeLoadingTimeout",
    value: function getIframeLoadingTimeout() {
      return this._iframeLoadingTimeout;
    }
  }, {
    key: "getElementCategories",
    value: function getElementCategories() {
      return this._elementCategories;
    }
  }, {
    key: "getElementAttributes",
    value: function getElementAttributes() {
      return this._elementAttributes;
    }
  }, {
    key: "isMathDetectEnabled",
    value: function isMathDetectEnabled() {
      return this._enableMathDetect;
    }
  }, {
    key: "isBrowserDisplayDetectEnabled",
    value: function isBrowserDisplayDetectEnabled() {
      return this._enableBrowserDisplayDetect;
    }
  }, {
    key: "isGraphCardEnabled",
    value: function isGraphCardEnabled() {
      return this._enableGraphCard;
    }
  }, {
    key: "getUseLegacyZeroTimeout",
    value: function getUseLegacyZeroTimeout() {
      return this._useLegacyZeroTimeout;
    }
  }]);
}();
exports["default"] = StartupConfigurations;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js":
/*!*****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/DataCollector.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



/**
 * Base class for all data collectors in the system.
 *
 * Feature Settings Properties:
 * @property {string} configKey - Unique identifier for the feature configuration
 * @property {boolean} isDefault - Whether the feature is enabled by default
 * @property {boolean} shouldRunPerContext - Whether the feature should run for each context (like iframe)
 * @property {boolean} shouldRunPerSession - Whether the feature should run for each session
 * @property {boolean} shouldRun - Master switch for the feature
 * @property {boolean} isFrameRelated - Whether the feature is related to iframe functionality
 * @property {boolean} runInSlave - Whether the feature should run in slave mode
 * @property {boolean} runInLean - Whether the feature should run in lean mode
 * @property {boolean} runInUns - Whether the feature should run in uns mode
 * @property {boolean} isRunning - Runtime state indicator
 * @property {Object|null} instance - Holds the instance of the feature when it's running
 *
 * Feature Modes:
 * - Slave Mode: Features that run in slave mode are executed in a separate context, typically used for
 *   features that need to run in iframes or other isolated contexts. These features are initialized
 *   separately from the main context and can operate independently. Used in the slave system loader
 *   to determine which features should be loaded in the slave context.
 *
 * - Lean Mode: Features that run in lean mode are included in the lean version of the application.
 *   These features are essential for basic functionality and are selected based on the collection mode.
 *   The lean mode is used to optimize performance by only loading necessary features. Used in
 *   FeaturesList.registerLeanFeatures() to determine which features should be included in the lean version.
 *
 * - Uns Mode: Features that run in uns mode are executed in an unsecured context. These features
 *   typically handle sensitive data or operations that require special security considerations.
 *   They are only enabled when the application is running in an unsecured environment. Used in
 *   various features like BrowserPropsFeature and ContextPropsFeature to determine if they should
 *   run in unsecured contexts.
 */
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDUtils_1 = __importDefault(__webpack_require__(/*! ../technicalServices/CDUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/CDUtils.js"));
var DataCollector = /*#__PURE__*/function () {
  function DataCollector() {
    _classCallCheck(this, DataCollector);
  }
  return _createClass(DataCollector, [{
    key: "startFeature",
    value:
    /**
     * Starts the feature. Override this method in subclasses to implement feature-specific startup logic.
     */
    function startFeature() {}
    /**
     * Stops the feature. Override this method in subclasses to implement feature-specific cleanup logic.
     */
  }, {
    key: "stopFeature",
    value: function stopFeature() {}
    /**
     * Updates the feature configuration. Override this method in subclasses to handle configuration changes.
     */
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {}
    /**
     * Sends data to the queue. Override this method in subclasses to implement data collection logic.
     */
  }, {
    key: "sendToQueue",
    value: function sendToQueue() {}
    // There is a bug in jquery (1.7.1) that timestamp doesn't work correctly (ie, firefox)
    // The bug is defined in http://bugs.jquery.com/ticket/10755
    // The timestamp in FF is from the opening of the browser
    // timestamp doesn't always exist
  }, {
    key: "getEventTimestamp",
    value: function getEventTimestamp() {
      return CDUtils_1["default"].dateNow();
    }
    /**
     * Gets the timestamp from an event object.
     * @param {Event} e - The event object
     * @returns {number} The event timestamp or 0 if not available
     */
  }, {
    key: "getTimestampFromEvent",
    value: function getTimestampFromEvent(e) {
      return e.timeStamp ? CDUtils_1["default"].cutDecimalPointDigits(e.timeStamp, 3) : 0;
    }
  }]);
}();
exports["default"] = DataCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/FeatureService.js":
/*!******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/FeatureService.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var BrowserContext_1 = __importDefault(__webpack_require__(/*! ../core/browsercontexts/BrowserContext */ "./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContext.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var FeatureService = /*#__PURE__*/function () {
  /**
   * This class manages all the feature execution by configuration.
   * @param featuresList FeaturesList object
   * @param {FramesHandler} frameHandler is used to run features on frames
   * @param {ConfigurationRepository} configurationRepository
   * @param {DOMUtils} domUtils
   * @param {BrowserContextsCache} browserContextsCache Contains a map of browser contexts (e.g. custom handlers) collected by designated event handlers
   * @constructor
   */
  function FeatureService(featuresList, frameHandler, configurationRepository, domUtils, utils, browserContextsCache) {
    _classCallCheck(this, FeatureService);
    this._features = featuresList;
    this._frameHandler = frameHandler;
    this._configurationRepository = configurationRepository;
    this._domUtils = domUtils;
    this._cdUtils = utils;
    this._browserContextsCache = browserContextsCache;
    this.callMethod = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.useLegacyZeroTimeout) ? this._cdUtils.asyncCall : this._cdUtils.asyncTimeoutCall;
    // This is a super hack to initialize the component for backwards compatibility.
    this.buildFrameRelatedLists();
  }
  // TODO: Get rid of this crap. We can get this by iterating over the features instead of building these arrays.
  return _createClass(FeatureService, [{
    key: "buildFrameRelatedLists",
    value: function buildFrameRelatedLists() {
      this._frameRelatedDefaultFeatures = this._collectFrameRelated(this._features.getDefaultFeatures());
      this._frameRelatedNonDefaultFeatures = this._collectFrameRelated(this._features.getNonDefaultFeatures());
    }
  }, {
    key: "runDefault",
    value: function runDefault() {
      var _this = this;
      Logger_1["default"].info('Running default features');
      // We don't check configuration was updated here like in the other feature runs because default features
      // run before configuration arrives from the server
      if (document.readyState === 'complete') {
        // Already fully loaded
        this._runFeatures(this._features.getDefaultFeatures(), this._frameRelatedDefaultFeatures);
      } else {
        window.addEventListener('load', function () {
          _this._runFeatures(_this._features.getDefaultFeatures(), _this._frameRelatedDefaultFeatures);
        }, {
          once: true
        });
      }
    }
  }, {
    key: "stopDefault",
    value: function stopDefault() {
      Logger_1["default"].info('Stopping default features');
      this._stopFeatures(this._features.getDefaultFeatures(), this._frameRelatedDefaultFeatures);
    }
  }, {
    key: "runPerSessionFeatures",
    value: function runPerSessionFeatures() {
      Logger_1["default"].info('Running per session features');
      if (!this._configurationRepository.isConfigurationUpdatedFromServer()) {
        Logger_1["default"].info("We didn't receive configurations from the server yet. Skipping per session features start until configuration arrives.");
        return;
      }
      // Start the per session features according to the configuration
      this._startFeatures(this._features.getPerSessionFeatures());
    }
  }, {
    key: "stopPerSessionFeatures",
    value: function stopPerSessionFeatures() {
      Logger_1["default"].info('Stopping per session features');
      this._stopFeatures(this._features.getPerSessionFeatures());
    }
  }, {
    key: "runNonDefault",
    value: function runNonDefault() {
      Logger_1["default"].info('Running non default features');
      if (!this._configurationRepository.isConfigurationUpdatedFromServer()) {
        Logger_1["default"].info("We didn't receive configurations from the server yet. Skipping non default features start until configuration arrives.");
        return;
      }
      this._runFeatures(this._features.getNonDefaultFeatures(), this._frameRelatedNonDefaultFeatures);
    }
  }, {
    key: "stopNonDefault",
    value: function stopNonDefault() {
      Logger_1["default"].info('Stopping non default features');
      this._stopFeatures(this._features.getNonDefaultFeatures(), this._frameRelatedNonDefaultFeatures);
    }
  }, {
    key: "runPerContextFeatures",
    value: function runPerContextFeatures(contextData) {
      Logger_1["default"].info('Running per context features');
      if (!this._configurationRepository.isConfigurationUpdatedFromServer()) {
        Logger_1["default"].info("We didn't receive configurations from the server yet. Skipping per context features start until configuration arrives.");
        return;
      }
      this._runFeatures(this._features.getPerContextFeatures());
      if (contextData.name !== 'cd_auto') {
        // pass the frame related features to the FrameHandler that will start them
        this._frameRelatedDefaultFeatures && this._frameHandler.startFeatures(this._frameRelatedDefaultFeatures);
      }
    }
  }, {
    key: "stopPerContextFeatures",
    value: function stopPerContextFeatures() {
      Logger_1["default"].info('Stopping per context features');
      this._stopFeatures(this._features.getPerContextFeatures());
    }
  }, {
    key: "stopAllFeatures",
    value: function stopAllFeatures() {
      Logger_1["default"].info('Stopping all features');
      this.stopDefault();
      this.stopNonDefault();
      this.stopPerSessionFeatures();
      this.stopPerContextFeatures();
    }
  }, {
    key: "updateRunByConfig",
    value: function updateRunByConfig(configurationRepository) {
      Logger_1["default"].info('Updating features configuration');
      this._updateFeatures(this._features.getDefaultFeatures(), configurationRepository);
      this._updateFeatures(this._features.getNonDefaultFeatures(), configurationRepository);
      this._updateFeatures(this._features.getPerContextFeatures(), configurationRepository);
      // Don't run the per session features here. They are started once a new session starts.
      // Running them here, will cause them to run every configuration load which is every page
    }
    /**
     * Run available registered features against the provided browserContext
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "runFeaturesOnBrowserContext",
    value: function runFeaturesOnBrowserContext(browserContext) {
      var _this2 = this;
      var defaultFeatures = this._features.getDefaultFeatures();
      if (defaultFeatures) {
        this._browserContextsCache.unRegisterContextFeatures(browserContext.Context, defaultFeatures);
        Object.keys(defaultFeatures).forEach(function (featureKey) {
          var feature = defaultFeatures[featureKey];
          if (feature.shouldRun && feature.isFrameRelated) {
            feature.isRunning = true;
            feature.instance && _this2.callMethod.call(feature.instance.startFeature, feature.instance, browserContext);
          }
        });
      }
    }
    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopFeaturesOnBrowserContextRemove",
    value: function stopFeaturesOnBrowserContextRemove(browserContext) {
      var _this3 = this;
      var defaultFeatures = this._features.getDefaultFeatures();
      if (defaultFeatures) {
        this._browserContextsCache.unRegisterContextFeatures(browserContext.Context, defaultFeatures);
        Object.keys(defaultFeatures).forEach(function (featureKey) {
          var feature = defaultFeatures[featureKey];
          if (feature.shouldRun && feature.isFrameRelated && feature.isRunning) {
            feature.instance && _this3.callMethod.call(feature.instance.stopFeature, feature.instance, browserContext);
          }
        });
      }
    }
  }, {
    key: "_runFeatures",
    value: function _runFeatures(features, frameRelatedFeatures) {
      var _this4 = this;
      if (features) {
        Object.keys(features).forEach(function (featureKey) {
          var feature = features[featureKey];
          if (feature.shouldRun) {
            _this4.callMethod.call(feature.instance.startFeature, feature.instance, new BrowserContext_1["default"](window.self));
            feature.isRunning = true;
          }
        });
      }
      // TODO: Refactor this shit. Why is this here and why the duplicate startFeatures????
      if (frameRelatedFeatures) {
        // pass the frame related features to the FrameHandler that will start them
        this._frameHandler.startFeatures(frameRelatedFeatures);
        this._domUtils.onPageLoad(window, function () {
          _this4._frameHandler.startFeatures(frameRelatedFeatures);
        });
      }
    }
  }, {
    key: "_stopFeatures",
    value: function _stopFeatures(features, frameRelatedFeatures) {
      var _this5 = this;
      if (features) {
        Object.keys(features).forEach(function (featureKey) {
          var feature = features[featureKey];
          feature.instance.stopFeature && _this5.callMethod.call(feature.instance.stopFeature, feature.instance, new BrowserContext_1["default"](window.self));
          feature.isRunning = false;
        });
      }
      if (frameRelatedFeatures) {
        // pass the frame related features to the FrameHandler that will start them
        this._frameHandler.stopFeatures(frameRelatedFeatures);
      }
    }
  }, {
    key: "_actOnFeature",
    value: function _actOnFeature(feature, actFunc) {
      // for frame related also call framesHandler, in any case call it on window
      if (feature.isFrameRelated) {
        this._frameHandler[actFunc](feature); // The frameHandler will call start / update with callAsync
      }
      feature.instance[actFunc] && this.callMethod.call(feature.instance[actFunc], feature.instance, new BrowserContext_1["default"](window.self));
    }
    /**
     * Start the list of features according to the configuration. Features will be run even, if already started
     * @param features
     * @private
     */
  }, {
    key: "_startFeatures",
    value: function _startFeatures(features) {
      var _this6 = this;
      if (!features) {
        return;
      }
      Object.keys(features).forEach(function (featureKey) {
        var currFeature = features[featureKey];
        // Get the configuration indicating if the feature is enabled or disabled
        var configShouldRun = _this6._configurationRepository.get(currFeature.configKey);
        if (typeof configShouldRun === 'boolean') {
          currFeature.shouldRun = configShouldRun;
        }
        if (currFeature.shouldRun) {
          _this6._actOnFeature(currFeature, 'startFeature');
          currFeature.isRunning = true;
        }
      });
    }
    /**
     * Re-start features against available browser contexts
     * @param features
     * @private
     */
  }, {
    key: "_startFeatureOnBrowserContexts",
    value: function _startFeatureOnBrowserContexts(feature) {
      var _this7 = this;
      if (!feature.isFrameRelated) return;
      var browserContexts = this._browserContextsCache.browserContexts;
      browserContexts.forEach(function (browserContext) {
        if (feature.shouldRun && !_this7._browserContextsCache.hasFeature(browserContext.Context, feature)) {
          _this7._browserContextsCache.registerContextFeature(browserContext.Context, feature);
          _this7.callMethod.call(feature.instance.startFeature, feature.instance, browserContext);
          feature.isRunning = true;
        }
      });
    }
    /**
     * Stop features against available browser contexts
     * @param feature
     * @private
     */
  }, {
    key: "_stopFeatureOnBrowserContexts",
    value: function _stopFeatureOnBrowserContexts(feature) {
      var _this8 = this;
      if (!feature.isFrameRelated) return;
      var browserContexts = this._browserContextsCache.browserContexts;
      browserContexts.forEach(function (browserContext) {
        if (_this8._browserContextsCache.hasFeature(browserContext.Context, feature)) {
          _this8.callMethod.call(feature.instance.stopFeature, feature.instance, browserContext);
        }
        feature.isRunning = false;
        if (_this8._browserContextsCache.exists(browserContext.Context)) {
          _this8._browserContextsCache.unRegisterContextFeature(browserContext.Context, feature);
        }
        _this8._browserContextsCache.remove(browserContext.Context);
      });
    }
    /**
     * Update a feature config against available browser contexts
     * @param feature
     * @private
     */
  }, {
    key: "_updateFeatureConfigOnBrowserContexts",
    value: function _updateFeatureConfigOnBrowserContexts(feature) {
      var _this9 = this;
      if (!feature.isFrameRelated) return;
      var browserContexts = this._browserContextsCache.browserContexts;
      browserContexts.forEach(function (browserContext) {
        if (_this9._browserContextsCache.hasFeature(browserContext.Context, feature)) {
          _this9.callMethod.call(feature.instance.updateFeatureConfig, feature.instance, browserContext);
        }
      });
    }
  }, {
    key: "_updateFeatures",
    value: function _updateFeatures(features, configurationRepository) {
      var _this0 = this;
      if (!features) {
        return;
      }
      Object.keys(features).forEach(function (featureKey) {
        var currFeature = features[featureKey];
        var configShouldRun = configurationRepository.get(currFeature.configKey);
        if (typeof configShouldRun === 'boolean') {
          currFeature.shouldRun = configShouldRun;
        }
        if (currFeature.isRunning && !currFeature.shouldRun) {
          _this0._actOnFeature(currFeature, 'stopFeature');
          _this0._stopFeatureOnBrowserContexts(currFeature);
          currFeature.isRunning = false;
        } else if (!currFeature.isRunning && currFeature.shouldRun) {
          _this0._actOnFeature(currFeature, 'startFeature');
          _this0._startFeatureOnBrowserContexts(currFeature);
          currFeature.isRunning = true;
        }
        if (currFeature.isRunning) {
          // in this case shouldRun == true
          // update the feature with the retrieved configuration
          _this0._actOnFeature(currFeature, 'updateFeatureConfig');
          _this0._updateFeatureConfigOnBrowserContexts(currFeature);
        }
      });
    }
  }, {
    key: "_collectFrameRelated",
    value: function _collectFrameRelated(features) {
      var frameRelatedFeatures = [];
      if (features) {
        Object.keys(features).forEach(function (featureKey) {
          var feature = features[featureKey];
          if (feature.isFrameRelated) {
            frameRelatedFeatures.push(feature);
          }
        });
      }
      return frameRelatedFeatures;
    }
  }]);
}();
exports["default"] = FeatureService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/FeaturesBuilder.js":
/*!*******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/FeaturesBuilder.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
/*
 *
 * @param allFeatures: A FeatureList object contains all the features
 * @param utils: utilites object supplied to the features that needs it
 * @param elements: An Elements object supplied to the features that needs it
 * @param mutationObserver
 * @param dataQueue: The Q that each of the features will fill with data
 * @param sessionService: handles sid and csid
 * @param muidService: handles and holds muid
 * @param perfMonitor: sends performance data, start and end times for features
 * @param sensorDataQ: handles history buffer for sensor events near touch events
 * @param msgBus: communicator between modules
 * @constructor
 */
var FeaturesBuilder = /*#__PURE__*/function () {
  /* eslint-disable no-bitwise, no-restricted-syntax */
  function FeaturesBuilder(allFeatures, configurationRepository, utils, elements, mutationObserver, dataQueue, devDebugDataQ, configurations, sessionService, muidService, muidEncryptedService, perfMonitor, sensorDataQ, msgBus, cidCache, sameCharService, maskingService, contextMgr) {
    _classCallCheck(this, FeaturesBuilder);
    this._features = allFeatures;
    this._configurationRepository = configurationRepository; // Don't remove! Its used by the features
    this._utils = utils;
    this._elements = elements; // TODO: consider to change name to elementUtils
    this._mutationObserver = mutationObserver;
    this._dataQ = dataQueue;
    this._devDebugDataQueue = devDebugDataQ;
    this._sessionService = sessionService;
    this._muidService = muidService;
    this._muidEncryptedService = muidEncryptedService;
    this._perfMonitor = perfMonitor;
    this._sensorDataQ = sensorDataQ;
    this._msgBus = msgBus;
    this._cidCache = cidCache;
    this._sameCharService = sameCharService;
    this._maskingService = maskingService;
    this._configurations = configurations;
    this._contextMgr = contextMgr;
  }
  return _createClass(FeaturesBuilder, [{
    key: "buildFeatures",
    value: function buildFeatures() {
      var me = this;
      function buildFeaturesInList(featureList) {
        if (!featureList) {
          return;
        }
        Object.keys(featureList).forEach(function (featureKey) {
          var feature = featureList[featureKey];
          try {
            feature.init.apply(me);
          } catch (e) {
            var name = feature.name || featureKey;
            Logger_1["default"].error("Failed to initialize feature \"".concat(name, "\": ").concat(e.message, "\nStack: ").concat(e.stack));
            // Its a static list, so it will remove it from all parts of code.
            // Best option for now, because if we don't delete the item, it will use it as null which cause to error in other parts of code
            delete featureList[featureKey]; // Remove the feature if it fails initialization
          }
        });
      }
      buildFeaturesInList(this._features.list);
    }
  }]);
}();
exports["default"] = FeaturesBuilder;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/FeaturesList.js":
/*!****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/FeaturesList.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function get() {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
  __setModuleDefault(result, mod);
  return result;
};
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Events = __importStar(__webpack_require__(/*! ./events */ "./dist/js-sdk-legacy/src/main/collectors/events/index.js"));
var Static = __importStar(__webpack_require__(/*! ./static */ "./dist/js-sdk-legacy/src/main/collectors/static/index.js"));
var PerContext = __importStar(__webpack_require__(/*! ./perContext */ "./dist/js-sdk-legacy/src/main/collectors/perContext/index.js"));
var Misc = __importStar(__webpack_require__(/*! ./misc */ "./dist/js-sdk-legacy/src/main/collectors/misc/index.js"));
var JqueryElementsHandler_1 = __importDefault(__webpack_require__(/*! ./events/handlers/JqueryElementsHandler */ "./dist/js-sdk-legacy/src/main/collectors/events/handlers/JqueryElementsHandler.js"));
var CrossDomainMuidCollector_1 = __importStar(__webpack_require__(/*! ./identity/CrossDomainMuidCollector */ "./dist/js-sdk-legacy/src/main/collectors/identity/CrossDomainMuidCollector.js"));
var InputEvents_1 = __importStar(__webpack_require__(/*! ./events/InputEvents */ "./dist/js-sdk-legacy/src/main/collectors/events/InputEvents.js"));
var CustomInputEvents_1 = __importDefault(__webpack_require__(/*! ./events/CustomInputEvents */ "./dist/js-sdk-legacy/src/main/collectors/events/CustomInputEvents.js"));
var ClickEvents_1 = __importStar(__webpack_require__(/*! ./events/ClickEvents */ "./dist/js-sdk-legacy/src/main/collectors/events/ClickEvents.js"));
var SelectElementEvents_1 = __importStar(__webpack_require__(/*! ./events/SelectElementEvents */ "./dist/js-sdk-legacy/src/main/collectors/events/SelectElementEvents.js"));
var FormEvents_1 = __importStar(__webpack_require__(/*! ./events/FormEvents */ "./dist/js-sdk-legacy/src/main/collectors/events/FormEvents.js"));
var PrivateBrowsingDetector_1 = __importDefault(__webpack_require__(/*! ./static/PrivateBrowsingDetector */ "./dist/js-sdk-legacy/src/main/collectors/static/PrivateBrowsingDetector.js"));
var PointerHoverDetector_1 = __importDefault(__webpack_require__(/*! ./static/PointerHoverDetector */ "./dist/js-sdk-legacy/src/main/collectors/static/PointerHoverDetector.js"));
var SiteMapper_1 = __importDefault(__webpack_require__(/*! ../technicalServices/SiteMapper */ "./dist/js-sdk-legacy/src/main/technicalServices/SiteMapper.js"));
var ScriptsRepository_1 = __importDefault(__webpack_require__(/*! ./perContext/ScriptsRepository */ "./dist/js-sdk-legacy/src/main/collectors/perContext/ScriptsRepository.js"));
var DOMUtils_1 = __importDefault(__webpack_require__(/*! ../technicalServices/DOMUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/DOMUtils.js"));
var CDUtils_1 = __importDefault(__webpack_require__(/*! ../technicalServices/CDUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/CDUtils.js"));
var MutationEmitter_1 = __importDefault(__webpack_require__(/*! ../services/MutationEmitter */ "./dist/js-sdk-legacy/src/main/services/MutationEmitter.js"));
var StandardInputEventsEmitter_1 = __importDefault(__webpack_require__(/*! ../services/StandardInputEventsEmitter */ "./dist/js-sdk-legacy/src/main/services/StandardInputEventsEmitter.js"));
var EventAggregator_1 = __importDefault(__webpack_require__(/*! ../system/EventAggregator */ "./dist/js-sdk-legacy/src/main/system/EventAggregator.js"));
var StandardOnClickEventsEmitter_1 = __importDefault(__webpack_require__(/*! ../services/StandardOnClickEventsEmitter */ "./dist/js-sdk-legacy/src/main/services/StandardOnClickEventsEmitter.js"));
var StandardOnChangeEventsEmitter_1 = __importDefault(__webpack_require__(/*! ../services/StandardOnChangeEventsEmitter */ "./dist/js-sdk-legacy/src/main/services/StandardOnChangeEventsEmitter.js"));
var StandardOnFormEventsEmitter_1 = __importDefault(__webpack_require__(/*! ../services/StandardOnFormEventsEmitter */ "./dist/js-sdk-legacy/src/main/services/StandardOnFormEventsEmitter.js"));
var SyntheticMaskInputEventsHandler_1 = __importDefault(__webpack_require__(/*! ../services/SyntheticMaskInputEventsHandler */ "./dist/js-sdk-legacy/src/main/services/SyntheticMaskInputEventsHandler.js"));
var SyntheticAutotabInputEventsHandler_1 = __importDefault(__webpack_require__(/*! ../services/SyntheticAutotabInputEventsHandler */ "./dist/js-sdk-legacy/src/main/services/SyntheticAutotabInputEventsHandler.js"));
var FocusEventEmitter_1 = __importDefault(__webpack_require__(/*! ../emitters/FocusEventEmitter */ "./dist/js-sdk-legacy/src/main/emitters/FocusEventEmitter.js"));
var BlurEventEmitter_1 = __importDefault(__webpack_require__(/*! ../emitters/BlurEventEmitter */ "./dist/js-sdk-legacy/src/main/emitters/BlurEventEmitter.js"));
var ResizeEventEmitter_1 = __importDefault(__webpack_require__(/*! ../emitters/ResizeEventEmitter */ "./dist/js-sdk-legacy/src/main/emitters/ResizeEventEmitter.js"));
var DOMContentLoadedEventEmitter_1 = __importDefault(__webpack_require__(/*! ../emitters/DOMContentLoadedEventEmitter */ "./dist/js-sdk-legacy/src/main/emitters/DOMContentLoadedEventEmitter.js"));
var VisibilityChangeEventEmitter_1 = __importDefault(__webpack_require__(/*! ../emitters/VisibilityChangeEventEmitter */ "./dist/js-sdk-legacy/src/main/emitters/VisibilityChangeEventEmitter.js"));
var ScrollEventEmitter_1 = __importDefault(__webpack_require__(/*! ../emitters/ScrollEventEmitter */ "./dist/js-sdk-legacy/src/main/emitters/ScrollEventEmitter.js"));
var WindowMessageEventEmitter_1 = __importDefault(__webpack_require__(/*! ../services/WindowMessageEventEmitter */ "./dist/js-sdk-legacy/src/main/services/WindowMessageEventEmitter.js"));
var DeviceOrientationEventEmitter_1 = __importDefault(__webpack_require__(/*! ../emitters/DeviceOrientationEventEmitter */ "./dist/js-sdk-legacy/src/main/emitters/DeviceOrientationEventEmitter.js"));
var BeforeInstallPromptEventEmitter_1 = __importDefault(__webpack_require__(/*! ../emitters/BeforeInstallPromptEventEmitter */ "./dist/js-sdk-legacy/src/main/emitters/BeforeInstallPromptEventEmitter.js"));
var CutEventEmitter_1 = __importDefault(__webpack_require__(/*! ../emitters/CutEventEmitter */ "./dist/js-sdk-legacy/src/main/emitters/CutEventEmitter.js"));
var CopyEventEmitter_1 = __importDefault(__webpack_require__(/*! ../emitters/CopyEventEmitter */ "./dist/js-sdk-legacy/src/main/emitters/CopyEventEmitter.js"));
var PasteEventEmitter_1 = __importDefault(__webpack_require__(/*! ../emitters/PasteEventEmitter */ "./dist/js-sdk-legacy/src/main/emitters/PasteEventEmitter.js"));
var ElementFocusEventEmitter_1 = __importDefault(__webpack_require__(/*! ../emitters/ElementFocusEventEmitter */ "./dist/js-sdk-legacy/src/main/emitters/ElementFocusEventEmitter.js"));
var ElementBlurEventEmitter_1 = __importDefault(__webpack_require__(/*! ../emitters/ElementBlurEventEmitter */ "./dist/js-sdk-legacy/src/main/emitters/ElementBlurEventEmitter.js"));
var StandardCustomInputEmitter_1 = __importDefault(__webpack_require__(/*! ../services/StandardCustomInputEmitter */ "./dist/js-sdk-legacy/src/main/services/StandardCustomInputEmitter.js"));
var dataCollectors = [{
  name: 'MouseEvents',
  className: Events.MouseEventCollector,
  init: function init() {
    return function () {
      if (this._configurations.isFlutterApp()) {
        this._features.list.MouseEvents.instance = new Events.FlutterMouseEventCollector(this._msgBus, this._dataQ, this._utils, this._maskingService, DOMUtils_1["default"], this._configurations);
      } else {
        this._features.list.MouseEvents.instance = new Events.MouseEventCollector(this._utils, DOMUtils_1["default"], this._elements, this._dataQ, this._maskingService, this._configurations);
      }
    };
  }
}, {
  name: 'KeyEvents',
  className: Events.KeyEventCollector,
  init: function init() {
    return function () {
      if (this._configurations.isFlutterApp()) {
        this._features.list.KeyEvents.instance = new Events.FlutterKeyEventCollector(this._msgBus, this._dataQ, this._utils, this._maskingService);
      } else {
        this._features.list.KeyEvents.instance = new Events.KeyEventCollector(this._configurationRepository, this._utils, this._elements, this._dataQ, this._msgBus, this._sameCharService, this._maskingService, this._configurations);
      }
    };
  }
}, {
  name: 'TouchEvents',
  className: Events.TouchEventCollector,
  init: function init() {
    return function () {
      if (this._configurations.isFlutterApp()) {
        this._features.list.TouchEvents.instance = new Events.FlutterTouchEventCollector(this._msgBus, this._dataQ, this._utils, this._maskingService);
      } else {
        this._features.list.TouchEvents.instance = new Events.TouchEventCollector(this._utils, this._elements, this._dataQ, this._msgBus, this._maskingService, this._configurations);
      }
    };
  }
}, {
  name: 'ClipboardEvents',
  className: Events.ClipboardEventCollector,
  init: function init() {
    return function () {
      var clipboardEventsBuilder = new Events.ClipboardEventCollector.Builder(this._utils, this._elements, this._dataQ, this._configurations);
      var cutEventEmitter = new CutEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"]);
      var copyEventEmitter = new CopyEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"]);
      var pasteEventEmitter = new PasteEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"]);
      clipboardEventsBuilder.withMessageBus(this._msgBus).withCutEventEmitter(cutEventEmitter).withCopyEventEmitter(copyEventEmitter).withPasteEventEmitter(pasteEventEmitter);
      this._features.list.ClipboardEvents.instance = clipboardEventsBuilder.build();
    };
  }
}, {
  name: 'ElementEvents',
  className: Events.ElementEventCollector,
  init: function init() {
    return function () {
      if (this._configurations.isFlutterApp()) {
        this._features.list.ElementEvents.instance = new Events.FlutterElementEventsCollector(this._msgBus, this._dataQ, this._utils, this._contextMgr, this._maskingService);
      } else {
        var standardInputEventsEmitter = new StandardInputEventsEmitter_1["default"](this._msgBus, EventAggregator_1["default"], this._utils);
        var standardOnClickEventsEmitter = new StandardOnClickEventsEmitter_1["default"](this._msgBus, EventAggregator_1["default"], this._utils);
        var standardOnChangeEventsEmitter = new StandardOnChangeEventsEmitter_1["default"](this._msgBus, EventAggregator_1["default"], this._utils);
        var elementFocusEventEmitter = new ElementFocusEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"], this._utils);
        var elementBlurEventEmitter = new ElementBlurEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"], this._utils);
        var standardOnFormEventsEmitter = new StandardOnFormEventsEmitter_1["default"](this._msgBus, EventAggregator_1["default"], this._utils);
        var standardCustomInputEmitter = new StandardCustomInputEmitter_1["default"](this._msgBus, EventAggregator_1["default"], this._utils);
        var jQueryElementListenerSiteMapper = new SiteMapper_1["default"](MutationObserver, this._utils, DOMUtils_1["default"], 'jQueryElementListenerConfig', null, false);
        var jqueryElementsHandler = (0, JqueryElementsHandler_1["default"])(standardInputEventsEmitter, standardOnClickEventsEmitter, standardOnChangeEventsEmitter, standardOnFormEventsEmitter);
        var elementEventsBuilder = new Events.ElementEventCollector.Builder(this._configurationRepository, this._utils, DOMUtils_1["default"], this._elements, this._dataQ, this._configurations);
        var mutationEmitter = new MutationEmitter_1["default"](this._msgBus);
        var syntheticMaskInputEventsHandler = new SyntheticMaskInputEventsHandler_1["default"](this._msgBus, EventAggregator_1["default"], this._utils);
        var syntheticAutotabInputEventsHandler = new SyntheticAutotabInputEventsHandler_1["default"](this._msgBus, EventAggregator_1["default"], this._utils);
        elementEventsBuilder.withjQueryElementListenerSiteMapper(jQueryElementListenerSiteMapper);
        elementEventsBuilder.withMessageBus(this._msgBus);
        elementEventsBuilder.withMutationEmitter(mutationEmitter);
        elementEventsBuilder.withjQueryElementsHandler(jqueryElementsHandler);
        elementEventsBuilder.withInputEvents(InputEvents_1["default"], InputEvents_1.inputSelectors, this._maskingService);
        elementEventsBuilder.withStandardInputEventsEmitter(standardInputEventsEmitter);
        elementEventsBuilder.withSyntheticMaskInputEventsHandler(syntheticMaskInputEventsHandler);
        elementEventsBuilder.withSyntheticAutotabInputEventsHandler(syntheticAutotabInputEventsHandler);
        elementEventsBuilder.withClickEvents(ClickEvents_1["default"], ClickEvents_1.onClickSelectors);
        elementEventsBuilder.withStandardOnClickEventsEmitter(standardOnClickEventsEmitter);
        elementEventsBuilder.withSelectElementEvents(SelectElementEvents_1["default"], SelectElementEvents_1.onSelectSelectors);
        elementEventsBuilder.withElementFocusEventsEmitter(elementFocusEventEmitter);
        elementEventsBuilder.withElementBlurEventsEmitter(elementBlurEventEmitter);
        elementEventsBuilder.withStandardOnChangeEventsEmitter(standardOnChangeEventsEmitter);
        elementEventsBuilder.withFormEvents(FormEvents_1["default"], FormEvents_1.onFormSelectors);
        elementEventsBuilder.withStandardOnFormEventsEmitter(standardOnFormEventsEmitter);
        elementEventsBuilder.withCustomInputEventEmitter(CustomInputEvents_1["default"], standardCustomInputEmitter);
        this._features.list.ElementEvents.instance = elementEventsBuilder.build();
      }
    };
  }
}, {
  name: 'WindowEvents',
  className: Events.WindowEventCollector,
  init: function init() {
    return function () {
      var windowEventCollectorBuilder = new Events.WindowEventCollector.Builder(this._configurationRepository, CDUtils_1["default"], this._dataQ);
      var focusEventEmitter = new FocusEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"]);
      var blurEventEmitter = new BlurEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"]);
      var resizeEventEmitter = new ResizeEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"]);
      var domContentLoadedEventEmitter = new DOMContentLoadedEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"]);
      var visibilityChangeEventEmitter = new VisibilityChangeEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"]);
      var scrollEventEmitter = new ScrollEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"]);
      windowEventCollectorBuilder.withMessageBus(this._msgBus);
      windowEventCollectorBuilder.withFocusEventEmitter(focusEventEmitter);
      windowEventCollectorBuilder.withBlurEventEmitter(blurEventEmitter);
      windowEventCollectorBuilder.withResizeEventEmitter(resizeEventEmitter);
      windowEventCollectorBuilder.withDOMContentLoadedEventEmitter(domContentLoadedEventEmitter);
      windowEventCollectorBuilder.withVisibilityChangeEventEmitter(visibilityChangeEventEmitter);
      windowEventCollectorBuilder.withScrollEventEmitter(scrollEventEmitter);
      this._features.list.WindowEvents.instance = windowEventCollectorBuilder.build();
    };
  }
}, {
  name: 'MetadataCollector',
  className: Misc.MetadataCollector,
  init: function init() {
    return function () {
      var metadataSiteMapper = new SiteMapper_1["default"](MutationObserver, this._utils, DOMUtils_1["default"], 'metadataConfig', null, false);
      this._features.list.MetadataCollector.instance = new Misc.MetadataCollector(this._configurationRepository, this._dataQ, metadataSiteMapper, this._utils);
    };
  }
}, {
  name: 'TabsEvents',
  className: Events.TabEventCollector,
  init: function init() {
    return function () {
      this._features.list.TabsEvents.instance = new Events.TabEventCollector(this._utils, this._dataQ);
    };
  }
}, {
  name: 'DoNotTrack',
  className: Static.DoNotTrackFeature,
  init: function init() {
    return function () {
      this._features.list.DoNotTrack.instance = new Static.DoNotTrackFeature(this._dataQ);
    };
  }
}, {
  name: 'BrowserProps',
  className: Static.BrowserPropsFeature,
  init: function init() {
    return function () {
      this._features.list.BrowserProps.instance = new Static.BrowserPropsFeature(this._dataQ, PointerHoverDetector_1["default"], this._utils, this._configurationRepository, this._configurations);
    };
  }
}, {
  name: 'IsPrivateBrowsing',
  className: Static.IsPrivateBrowsingFeature,
  init: function init() {
    return function () {
      var privateBrowsingDetector = new PrivateBrowsingDetector_1["default"]();
      this._features.list.IsPrivateBrowsing.instance = new Static.IsPrivateBrowsingFeature(this._dataQ, privateBrowsingDetector);
    };
  }
}, {
  name: 'FontsDetectionFeature',
  className: Static.FontCollectionFeature,
  init: function init() {
    return function () {
      this._features.list.FontsDetectionFeature.instance = new Static.FontCollectionFeature(this._utils, DOMUtils_1["default"], this._dataQ, this._configurationRepository);
    };
  }
}, {
  name: 'GraphicDetectFeature',
  className: Static.GraphicDetectFeature,
  init: function init() {
    return function () {
      this._features.list.GraphicDetectFeature.instance = new Static.GraphicDetectFeature(this._dataQ, this._configurations);
    };
  }
}, {
  name: 'BrowserDetect',
  className: Static.BrowserDetect,
  init: function init() {
    return function () {
      this._features.list.BrowserDetect.instance = new Static.BrowserDetect(this._dataQ);
    };
  }
}, {
  name: 'FilesFeature',
  className: Misc.FilesFeature,
  init: function init() {
    return function () {
      this._features.list.FilesFeature.instance = new Misc.FilesFeature(this._configurationRepository, this._utils, this._sessionService, this._muidService, this._cidCache);
    };
  }
}, {
  name: 'UserPermissions',
  className: Static.UserPermissions,
  init: function init() {
    return function () {
      this._features.list.UserPermissions.instance = new Static.UserPermissions(this._dataQ);
    };
  }
}, {
  name: 'MediaDevicesFeature',
  className: Static.MediaDevicesFeature,
  init: function init() {
    return function () {
      this._features.list.MediaDevicesFeature.instance = new Static.MediaDevicesFeature(this._dataQ);
    };
  }
}, {
  name: 'ContextPropsFeature',
  className: PerContext.ContextPropsFeature,
  init: function init() {
    return function () {
      this._features.list.ContextPropsFeature.instance = new PerContext.ContextPropsFeature(this._dataQ, DOMUtils_1["default"], this._perfMonitor, this._configurationRepository);
    };
  }
}, {
  name: 'GfxRenderingFeature',
  className: Static.GfxRenderingFeature,
  init: function init() {
    return function () {
      this._features.list.GfxRenderingFeature.instance = new Static.GfxRenderingFeature(this._dataQ, CDUtils_1["default"]);
    };
  }
}, {
  name: 'AudioDetectFeature',
  className: Static.AudioDetectFeature,
  init: function init() {
    return function () {
      this._features.list.AudioDetectFeature.instance = new Static.AudioDetectFeature(this._dataQ, CDUtils_1["default"]);
    };
  }
}, {
  name: 'EncryptedMuidFeature',
  className: Static.EncryptedMuidFeature,
  init: function init() {
    return function () {
      this._features.list.EncryptedMuidFeature.instance = new Static.EncryptedMuidFeature(this._devDebugDataQueue, this._muidEncryptedService);
    };
  }
}, {
  name: 'ScriptsFeature',
  className: PerContext.ScriptsFeature,
  init: function init() {
    return function () {
      var scriptsRepository = new ScriptsRepository_1["default"](this._utils);
      this._features.list.ScriptsFeature.instance = new PerContext.ScriptsFeature(this._dataQ, scriptsRepository);
    };
  }
}, {
  name: 'AccelerometerEvents',
  className: Events.AccelerometerEventCollector,
  init: function init() {
    return function () {
      this._features.list.AccelerometerEvents.instance = new Events.AccelerometerEventCollector(this._configurationRepository, this._utils, this._sensorDataQ);
    };
  }
}, {
  name: 'PinchZoomEvents',
  className: Events.PinchZoomEventCollector,
  init: function init() {
    return function () {
      this._features.list.PinchZoomEvents.instance = new Events.PinchZoomEventCollector(this._utils, this._elements, this._dataQ, this._msgBus, this._configurations);
    };
  }
}, {
  name: 'ScriptEvents',
  className: Events.ScriptEventCollector,
  init: function init() {
    return function () {
      this._features.list.ScriptEvents.instance = new Events.ScriptEventCollector(this._utils, this._dataQ);
    };
  }
}, {
  name: 'NetInfoEvents',
  className: Events.NetInfoEventCollector,
  init: function init() {
    return function () {
      this._features.list.NetInfoEvents.instance = new Events.NetInfoEventCollector(this._utils, this._dataQ);
    };
  }
}, {
  name: 'DeviceOrientationCollector',
  className: Events.DeviceOrientationCollector,
  init: function init() {
    return function () {
      this._features.list.DeviceOrientationCollector.instance = new Events.DeviceOrientationCollector(this._utils, this._dataQ);
    };
  }
}, {
  name: 'TapEvents',
  className: Events.TapEventCollector,
  init: function init() {
    return function () {
      this._features.list.TapEvents.instance = new Events.TapEventCollector(this._configurationRepository, this._utils, this._elements, this._dataQ, this._maskingService, this._configurations);
    };
  }
}, {
  name: 'LocationEvents',
  className: Events.LocationCollector,
  init: function init() {
    return function () {
      this._features.list.LocationEvents.instance = new Events.LocationCollector(this._dataQ, this._utils, this._configurationRepository);
    };
  }
}, {
  name: 'StorageEvents',
  className: Events.StorageEventCollector,
  init: function init() {
    return function () {
      this._features.list.StorageEvents.instance = new Events.StorageEventCollector(this._utils, this._elements, this._dataQ, this._msgBus);
    };
  }
}, {
  name: 'PrintEvents',
  className: Events.PrintEventCollector,
  init: function init() {
    return function () {
      this._features.list.PrintEvents.instance = new Events.PrintEventCollector(this._utils, this._dataQ);
    };
  }
}, {
  name: 'LightSensorEvents',
  className: Events.LightSensorEventCollector,
  init: function init() {
    return function () {
      this._features.list.LightSensorEvents.instance = new Events.LightSensorEventCollector(this._dataQ, this._utils, this._configurationRepository);
    };
  }
}, {
  name: 'CrossDomain',
  className: CrossDomainMuidCollector_1["default"],
  init: function init() {
    return function () {
      var crossDomainBuilder = new CrossDomainMuidCollector_1["default"].Builder(this._configurationRepository, this._dataQ, this._utils, DOMUtils_1["default"], CrossDomainMuidCollector_1.CrossmuidEventType);
      var windowMessageEventEmitter = new WindowMessageEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"]);
      crossDomainBuilder.withMessageBus(this._msgBus);
      crossDomainBuilder.withWindowMessageEventEmitter(windowMessageEventEmitter);
      this._features.list.CrossDomain.instance = crossDomainBuilder.build();
    };
  }
}, {
  name: 'OrientationEvents',
  className: Events.OrientationEventCollector,
  init: function init() {
    return function () {
      var deviceOrientationEventEmitter = new DeviceOrientationEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"]);
      this._features.list.OrientationEvents.instance = new Events.OrientationEventCollector(this._configurationRepository, this._utils, this._sensorDataQ, this._msgBus, deviceOrientationEventEmitter);
    };
  }
}, {
  name: 'BeforeInstallPromptEvents',
  className: Events.BeforeInstallPromptEventCollector,
  init: function init() {
    return function () {
      var beforeInstallPromptEventEmitter = new BeforeInstallPromptEventEmitter_1["default"](this._msgBus, EventAggregator_1["default"]);
      this._features.list.BeforeInstallPromptEvents.instance = new Events.BeforeInstallPromptEventCollector(this._dataQ, this._utils, this._msgBus, beforeInstallPromptEventEmitter);
    };
  }
}, {
  name: 'Navigator',
  className: Static.NavigatorFeature,
  init: function init() {
    return function () {
      this._features.list.Navigator.instance = new Static.NavigatorFeature(this._devDebugDataQueue);
    };
  }
}, {
  name: 'KeyboardLayoutFeature',
  className: Static.KeyboardLayoutFeature,
  init: function init() {
    return function () {
      this._features.list.KeyboardLayoutFeature.instance = new Static.KeyboardLayoutFeature(this._dataQ);
    };
  }
}, {
  name: 'StorageFeature',
  className: Static.StorageFeature,
  init: function init() {
    return function () {
      this._features.list.StorageFeature.instance = new Static.StorageFeature(this._dataQ, this._devDebugDataQueue);
    };
  }
}, {
  name: 'BatteryStatusCollector',
  className: Events.BatteryStatusCollector,
  init: function init() {
    return function () {
      this._features.list.BatteryStatusCollector.instance = new Events.BatteryStatusCollector(this._dataQ, this._utils);
    };
  }
}, {
  name: 'FontEmojiFeature',
  className: Static.FontEmojiFeature,
  init: function init() {
    return function () {
      this._features.list.FontEmojiFeature.instance = new Static.FontEmojiFeature(this._devDebugDataQueue);
    };
  }
}, {
  name: 'FontMathFeature',
  className: Static.FontMathFeature,
  init: function init() {
    return function () {
      this._features.list.FontMathFeature.instance = new Static.FontMathFeature(this._devDebugDataQueue);
    };
  }
}, {
  name: 'FontWidthFeature',
  className: Static.FontWidthFeature,
  init: function init() {
    return function () {
      this._features.list.FontWidthFeature.instance = new Static.FontWidthFeature(this._devDebugDataQueue);
    };
  }
}, {
  name: 'ScreenHighResFeature',
  className: Static.ScreenHighResFeature,
  init: function init() {
    return function () {
      this._features.list.ScreenHighResFeature.instance = new Static.ScreenHighResFeature(this._devDebugDataQueue);
    };
  }
}, {
  name: 'BrowserExtensionEvents',
  className: Static.BrowserExtensionsCollector,
  init: function init() {
    return function () {
      this._features.list.BrowserExtensionEvents.instance = new Static.BrowserExtensionsCollector(this._configurationRepository, this._utils, DOMUtils_1["default"], this._dataQ);
    };
  }
}, {
  name: 'AdblockerListsCollector',
  className: Static.AdblockerListsCollector,
  init: function init() {
    return function () {
      this._features.list.AdblockerListsCollector.instance = new Static.AdblockerListsCollector(this._devDebugDataQueue);
    };
  }
}, {
  name: 'WebglCollector',
  className: Static.WebglCollector,
  init: function init() {
    return function () {
      this._features.list.WebglCollector.instance = new Static.WebglCollector(this._devDebugDataQueue);
    };
  }
}, {
  name: 'DRMDataCollector',
  className: Static.DRMDataCollector,
  init: function init() {
    return function () {
      this._features.list.DRMDataCollector.instance = new Static.DRMDataCollector(this._devDebugDataQueue);
    };
  }
}, {
  name: 'WebRTCDataCollector',
  className: Static.WebRTCDataCollector,
  init: function init() {
    return function () {
      this._features.list.WebRTCDataCollector.instance = new Static.WebRTCDataCollector(this._dataQ);
    };
  }
}, {
  name: 'SpeechVoiceCollector',
  className: Static.SpeechVoiceCollector,
  init: function init() {
    return function () {
      this._features.list.SpeechVoiceCollector.instance = new Static.SpeechVoiceCollector(this._devDebugDataQueue);
    };
  }
}];
var FeaturesList = /*#__PURE__*/function () {
  function FeaturesList() {
    _classCallCheck(this, FeaturesList);
  }
  return _createClass(FeaturesList, null, [{
    key: "register",
    value: function register() {
      var _this = this;
      FeaturesList.list = {};
      dataCollectors.forEach(function (feature) {
        _this._addFeature(feature);
      });
    }
  }, {
    key: "registerLeanFeatures",
    value: function registerLeanFeatures() {
      var _this2 = this;
      FeaturesList.list = {};
      dataCollectors.forEach(function (feature) {
        if (feature.className.getDefaultSettings().runInLean) {
          _this2._addFeature(feature);
        }
      });
    }
  }, {
    key: "getDefaultFeatures",
    value: function getDefaultFeatures() {
      return this.getFeaturesByCondition(function (feature) {
        return feature.isDefault;
      });
    }
  }, {
    key: "getPerContextFeatures",
    value: function getPerContextFeatures() {
      return this.getFeaturesByCondition(function (feature) {
        return feature.shouldRunPerContext;
      });
    }
  }, {
    key: "getPerSessionFeatures",
    value: function getPerSessionFeatures() {
      return this.getFeaturesByCondition(function (feature) {
        return feature.shouldRunPerSession;
      });
    }
  }, {
    key: "getNonDefaultFeatures",
    value: function getNonDefaultFeatures() {
      return this.getFeaturesByCondition(function (feature) {
        return !feature.isDefault && !feature.shouldRunPerContext && !feature.shouldRunPerSession;
      });
    }
  }, {
    key: "getFeaturesByCondition",
    value: function getFeaturesByCondition(condition) {
      var features = {};
      Object.keys(FeaturesList.list).forEach(function (featureKey) {
        var feature = FeaturesList.list[featureKey];
        if (condition(feature)) {
          features[featureKey] = feature;
        }
      });
      return features;
    }
  }, {
    key: "_addFeature",
    value: function _addFeature(feature) {
      var collectorStaticSetup = feature.className.getDefaultSettings();
      // Creating a new object reference to ensure that multiple instances of the same class do not share or modify each other's data.
      var collectorSetup = _objectSpread({}, collectorStaticSetup);
      var name = feature.name;
      collectorSetup.init = feature.init();
      FeaturesList.list[name] = collectorSetup;
    }
  }]);
}();
_defineProperty(FeaturesList, "list", void 0);
exports["default"] = FeaturesList;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/SensorGateKeeper.js":
/*!********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/SensorGateKeeper.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var CDUtils_1 = __importDefault(__webpack_require__(/*! ../technicalServices/CDUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/CDUtils.js"));
var SensorGateKeeper = /*#__PURE__*/function () {
  function SensorGateKeeper(sessionInfoService, configurationRepository) {
    _classCallCheck(this, SensorGateKeeper);
    this.configurationRepository = configurationRepository;
    this.sessionInfoService = sessionInfoService;
    this.isMotionOnSessionStart = this.configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isMotionOnSessionStart);
    this.motionPaddingOnSessionStartMSec = this.configurationRepository.get(ConfigurationFields_1.ConfigurationFields.motionPaddingOnSessionStartMSec);
  }
  return _createClass(SensorGateKeeper, [{
    key: "configure",
    value: function configure() {
      this.isMotionOnSessionStart = this.configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isMotionOnSessionStart);
      this.motionPaddingOnSessionStartMSec = this.configurationRepository.get(ConfigurationFields_1.ConfigurationFields.motionPaddingOnSessionStartMSec);
      if (this.isMotionOnSessionStart) {
        Logger_1["default"].info("Motion on session start is enabled, collecting motion events for ".concat(this.motionPaddingOnSessionStartMSec / 1000, " seconds."));
      }
    }
  }, {
    key: "isOpen",
    value: function isOpen() {
      return this.isMotionOnSessionStart && CDUtils_1["default"].dateNow() - this.motionPaddingOnSessionStartMSec < this.sessionInfoService.getStartTime();
    }
  }]);
}();
exports["default"] = SensorGateKeeper;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/AccelerometerEventCollector.js":
/*!**************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/AccelerometerEventCollector.js ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.GyroEventStructure = exports.AccelerometerEventStructure = exports.SENSOR_TYPE = exports.PERMISSION_STATE = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
// Constants for configuration and event handling
var DEFAULT_SAMPLE_PERIOD = 0;
var DEFAULT_DECIMAL_PRECISION = 4;
var DEFAULT_INVALID_VALUE = -1;
var DEFAULT_GYRO_VALUE = 0;
// Permission states
exports.PERMISSION_STATE = {
  GRANTED: 'granted',
  DENIED: 'denied',
  PROMPT: 'prompt'
};
// Sensor types
exports.SENSOR_TYPE = {
  ACCELEROMETER: 'accelerometer',
  GYROSCOPE: 'gyroscope'
};
var featureSettings = {
  configKey: 'isAccelerometerEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
exports.AccelerometerEventStructure = ['eventSequence', 'timestamp', 'x', 'y', 'z'];
exports.GyroEventStructure = ['eventSequence', 'timestamp', 'absolute', 'alpha', 'beta', 'gamma'];
/**
 * Collects accelerometer and gyroscope data from device motion events
 * Handles permission checks and data processing for motion sensors
 */
var AccelerometerEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  /**
   * @param {Object} configurationRepository - Repository for configuration values
   * @param {Object} utils - Utility functions
   * @param {Object} dataQueue - Queue for storing collected data
   * @param {Object} [navigatorObj=window.navigator] - Navigator object (for testing)
   * @param {Object} [windowObj=window] - Window object (for testing)
   */
  function AccelerometerEventCollector(configurationRepository, utils, dataQueue) {
    var _this;
    var navigatorObj = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : window.navigator;
    var windowObj = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : window;
    _classCallCheck(this, AccelerometerEventCollector);
    _this = _callSuper(this, AccelerometerEventCollector);
    _this._configurationRepository = configurationRepository;
    _this._utils = utils;
    _this._dataQueue = dataQueue;
    _this._storageUtils = _this._utils.StorageUtils;
    _this._navigator = navigatorObj;
    _this._window = windowObj;
    // Initialize configuration values
    _this._samplePeriod = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.accelerometerEventsSamplePeriod) || DEFAULT_SAMPLE_PERIOD;
    _this._samplePeriodGyro = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.gyroEventsSamplePeriod) || DEFAULT_SAMPLE_PERIOD;
    // Initialize state tracking
    _this._lastAccelerometerData = {
      x: 0,
      y: 0,
      z: 0,
      time: 0
    };
    _this._lastGyroData = {
      alpha: 0,
      beta: 0,
      gamma: 0,
      time: 0
    };
    // Initialize permission states
    _this._hasAccelerometerPermission = false;
    _this._hasGyroscopePermission = false;
    // Bind event handler
    _this._onAccelerometerventFunc = _this._onAccelerometerEvent.bind(_this);
    return _this;
  }
  /**
   * Checks and updates sensor permissions
   * Handles two cases:
   * 1. Browsers without Permissions API - defaults to allowed access
   * 2. Browsers with Permissions API - checks actual permissions
   * Each permission is checked independently to prevent one failure from affecting the other
   * @private
   * @returns {Promise<void>}
   */
  _inherits(AccelerometerEventCollector, _DataCollector_1$defa);
  return _createClass(AccelerometerEventCollector, [{
    key: "_checkPermissions",
    value: (function () {
      var _checkPermissions2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var _this$_navigator$perm;
        var accelerometerPermission, gyroscopePermission, _t, _t2;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              if ((_this$_navigator$perm = this._navigator.permissions) !== null && _this$_navigator$perm !== void 0 && _this$_navigator$perm.query) {
                _context.n = 1;
                break;
              }
              // Fallback for browsers without Permissions API
              this._hasAccelerometerPermission = true;
              this._hasGyroscopePermission = true;
              Logger_1["default"].debug('Permissions API not available, defaulting to allowed access');
              return _context.a(2);
            case 1:
              _context.p = 1;
              _context.n = 2;
              return this._navigator.permissions.query({
                name: exports.SENSOR_TYPE.ACCELEROMETER
              });
            case 2:
              accelerometerPermission = _context.v;
              this._hasAccelerometerPermission = accelerometerPermission.state === exports.PERMISSION_STATE.GRANTED;
              _context.n = 4;
              break;
            case 3:
              _context.p = 3;
              _t = _context.v;
              Logger_1["default"].warn('Failed to check accelerometer permission:', _t);
              this._hasAccelerometerPermission = true;
            case 4:
              _context.p = 4;
              _context.n = 5;
              return this._navigator.permissions.query({
                name: exports.SENSOR_TYPE.GYROSCOPE
              });
            case 5:
              gyroscopePermission = _context.v;
              this._hasGyroscopePermission = gyroscopePermission.state === exports.PERMISSION_STATE.GRANTED;
              _context.n = 7;
              break;
            case 6:
              _context.p = 6;
              _t2 = _context.v;
              Logger_1["default"].warn('Failed to check gyroscope permission:', _t2);
              this._hasGyroscopePermission = true;
            case 7:
              if (!this._hasAccelerometerPermission && !this._hasGyroscopePermission) {
                Logger_1["default"].warn('Both accelerometer and gyroscope permissions are denied');
              }
            case 8:
              return _context.a(2);
          }
        }, _callee, this, [[4, 6], [1, 3]]);
      }));
      function _checkPermissions() {
        return _checkPermissions2.apply(this, arguments);
      }
      return _checkPermissions;
    }()
    /**
     * Processes accelerometer data from device motion event
     * @private
     * @param {Object} acceleration - Acceleration data
     * @param {number} time - Current timestamp
     */
    )
  }, {
    key: "_processAccelerometerData",
    value: function _processAccelerometerData(acceleration, time) {
      if (!acceleration || time - this._lastAccelerometerData.time <= this._samplePeriod) {
        return;
      }
      var x = this._utils.isUndefinedNull(acceleration.x) ? DEFAULT_INVALID_VALUE : this._utils.cutDecimalPointDigits(acceleration.x, DEFAULT_DECIMAL_PRECISION);
      var y = this._utils.isUndefinedNull(acceleration.y) ? DEFAULT_INVALID_VALUE : this._utils.cutDecimalPointDigits(acceleration.y, DEFAULT_DECIMAL_PRECISION);
      var z = this._utils.isUndefinedNull(acceleration.z) ? DEFAULT_INVALID_VALUE : this._utils.cutDecimalPointDigits(acceleration.z, DEFAULT_DECIMAL_PRECISION);
      if (x !== this._lastAccelerometerData.x || y !== this._lastAccelerometerData.y || z !== this._lastAccelerometerData.z) {
        var eventSeq = this._storageUtils.getAndUpdateEventSequenceNumber();
        this._lastAccelerometerData = {
          x: x,
          y: y,
          z: z,
          time: time
        };
        this._dataQueue.addToQueue('accelerometer_events', [null, eventSeq, time, x, y, z]);
        Logger_1["default"].isDebug() && Logger_1["default"].debug("Accelerometer data: timestamp:".concat(time, " x,y,z:").concat(x, ",").concat(y, ",").concat(z));
      }
    }
    /**
     * Processes gyroscope data from device motion event
     * @private
     * @param {Object} rotationRate - Rotation rate data
     * @param {boolean} absolute - Whether rotation is absolute
     * @param {number} time - Current timestamp
     */
  }, {
    key: "_processGyroData",
    value: function _processGyroData(rotationRate, absolute, time) {
      if (!rotationRate || time - this._lastGyroData.time <= this._samplePeriodGyro) {
        return;
      }
      var alpha = this._utils.isUndefinedNull(rotationRate.alpha) ? DEFAULT_GYRO_VALUE : this._utils.cutDecimalPointDigits(rotationRate.alpha, DEFAULT_DECIMAL_PRECISION);
      var beta = this._utils.isUndefinedNull(rotationRate.beta) ? DEFAULT_GYRO_VALUE : this._utils.cutDecimalPointDigits(rotationRate.beta, DEFAULT_DECIMAL_PRECISION);
      var gamma = this._utils.isUndefinedNull(rotationRate.gamma) ? DEFAULT_GYRO_VALUE : this._utils.cutDecimalPointDigits(rotationRate.gamma, DEFAULT_DECIMAL_PRECISION);
      if (alpha !== this._lastGyroData.alpha || beta !== this._lastGyroData.beta || gamma !== this._lastGyroData.gamma) {
        var eventSeq = this._storageUtils.getAndUpdateEventSequenceNumber();
        this._lastGyroData = {
          alpha: alpha,
          beta: beta,
          gamma: gamma,
          time: time
        };
        this._dataQueue.addToQueue('gyro_events', [null, eventSeq, time, absolute, alpha, beta, gamma]);
        Logger_1["default"].isDebug() && Logger_1["default"].debug("Gyro data: timestamp:".concat(time, " alpha,beta,gamma:").concat(alpha, ",").concat(beta, ",").concat(gamma));
      }
    }
    /**
     * Handles device motion events
     * @private
     * @param {DeviceMotionEvent} e - Device motion event
     * @returns {boolean}
     */
  }, {
    key: "_onAccelerometerEvent",
    value: function _onAccelerometerEvent(e) {
      if (!e) {
        return true;
      }
      var time = this._utils.dateNow();
      if (this._hasAccelerometerPermission && e.accelerationIncludingGravity) {
        this._processAccelerometerData(e.accelerationIncludingGravity, time);
      }
      if (this._hasGyroscopePermission && e.rotationRate) {
        this._processGyroData(e.rotationRate, e.absolute || false, time);
      }
      return true;
    }
    /**
     * Starts collecting device motion data
     * @returns {Promise<void>}
     */
  }, {
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.n) {
            case 0:
              if (this._window.DeviceMotionEvent) {
                _context2.n = 1;
                break;
              }
              Logger_1["default"].debug('DeviceMotionEvent not supported in this environment');
              return _context2.a(2);
            case 1:
              _context2.n = 2;
              return this._checkPermissions();
            case 2:
              if (this._hasAccelerometerPermission || this._hasGyroscopePermission) {
                this._utils.addEventListener(this._window, 'devicemotion', this._onAccelerometerventFunc);
                Logger_1["default"].debug('Device motion event listener added successfully');
              } else {
                Logger_1["default"].warn('Device motion event listener not added due to missing permissions');
              }
            case 3:
              return _context2.a(2);
          }
        }, _callee2, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
    /**
     * Stops collecting device motion data
     */
    )
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      if (this._window.DeviceMotionEvent) {
        this._utils.removeEventListener(this._window, 'devicemotion', this._onAccelerometerventFunc);
        Logger_1["default"].debug('Device motion event listener removed');
      }
    }
    /**
     * Updates feature configuration
     */
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      var newSamplePeriod = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.accelerometerEventsSamplePeriod);
      var newSamplePeriodGyro = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.gyroEventsSamplePeriod);
      if (newSamplePeriod !== undefined) {
        this._samplePeriod = newSamplePeriod;
      }
      if (newSamplePeriodGyro !== undefined) {
        this._samplePeriodGyro = newSamplePeriodGyro;
      }
      Logger_1["default"].debug("Updated sample periods - Accelerometer: ".concat(this._samplePeriod, ", Gyro: ").concat(this._samplePeriodGyro));
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = AccelerometerEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/BatteryStatusCollector.js":
/*!*********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/BatteryStatusCollector.js ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BatteryStatusStructure = void 0;
/**
 * Collects battery status information from the device.
 *
 * Features:
 * - Tracks battery level changes
 * - Monitors charging status
 * - Handles secure context requirements
 * - Graceful error handling
 * - Clean event listener management
 *
 * Security and Permissions:
 * - The Battery Status API is only available in secure contexts (HTTPS)
 * - Starting from Chrome 103, the API requires a secure context to prevent potential privacy concerns
 * - While not currently listed in the Permissions-Policy specification, the API follows similar security principles
 * - The API is considered a sensitive feature that could potentially be used for fingerprinting
 * - Access to battery information is restricted to the same origin by default
 *
 * Browser Support:
 * - Chrome (since version 103 with secure context requirement)
 * - Edge (based on Chromium)
 * - Opera (based on Chromium)
 *
 * Note: This API should be used with consideration for user privacy and battery impact.
 * Frequent polling of battery status can affect device performance and battery life.
 */
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var featureSettings = {
  configKey: 'isBatteryStatusFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
exports.BatteryStatusStructure = ['eventSequence', 'timestamp', 'chargeLevel', 'isCharging', 'powerSource'];
var BatteryStatusCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  /**
   * @param {Object} dataQueue - Queue for storing collected data
   * @param {Object} utils - Utility functions
   * @param {Object} [navigator=window.navigator] - Navigator object for battery API access
   */
  function BatteryStatusCollector(dataQueue, utils) {
    var _this;
    var navigator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window.navigator;
    _classCallCheck(this, BatteryStatusCollector);
    _this = _callSuper(this, BatteryStatusCollector);
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._storageUtils = utils.StorageUtils;
    _this._navigator = navigator;
    _this._battery = null;
    // Bind event handlers to maintain proper 'this' context
    _this._onLevelChangeEventFunc = _this._onLevelChangeEventFunc.bind(_this);
    _this._onChargingChangeEventFunc = _this._onChargingChangeEventFunc.bind(_this);
    return _this;
  }
  /**
   * Starts collecting battery status data
   * @returns {Promise<void>}
   */
  _inherits(BatteryStatusCollector, _DataCollector_1$defa);
  return _createClass(BatteryStatusCollector, [{
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var _t;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              _context.p = 0;
              _context.n = 1;
              return this.getBatteryManager();
            case 1:
              this._battery = _context.v;
              this._setupEventListeners();
              _context.n = 2;
              return this._sendData();
            case 2:
              _context.n = 4;
              break;
            case 3:
              _context.p = 3;
              _t = _context.v;
              Logger_1["default"].error("Failed to start battery status collector: ".concat(_t.message || _t));
            case 4:
              return _context.a(2);
          }
        }, _callee, this, [[0, 3]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
    /**
     * Stops collecting battery status data
     */
    )
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._cleanupEventListeners();
      this._battery = null;
    }
    /**
     * Sets up event listeners for battery status changes
     * @private
     */
  }, {
    key: "_setupEventListeners",
    value: function _setupEventListeners() {
      if (!this._battery) return;
      this._battery.addEventListener('levelchange', this._onLevelChangeEventFunc);
      this._battery.addEventListener('chargingchange', this._onChargingChangeEventFunc);
    }
    /**
     * Removes event listeners
     * @private
     */
  }, {
    key: "_cleanupEventListeners",
    value: function _cleanupEventListeners() {
      if (!this._battery) return;
      this._battery.removeEventListener('levelchange', this._onLevelChangeEventFunc);
      this._battery.removeEventListener('chargingchange', this._onChargingChangeEventFunc);
    }
    /**
     * Gets the battery manager instance
     * @returns {Promise<BatteryManager>}
     * @throws {Error}
     */
  }, {
    key: "getBatteryManager",
    value: (function () {
      var _getBatteryManager = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {
        var _t2;
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.p = _context2.n) {
            case 0:
              _context2.p = 0;
              _context2.n = 1;
              return this._navigator.getBattery();
            case 1:
              return _context2.a(2, _context2.v);
            case 2:
              _context2.p = 2;
              _t2 = _context2.v;
              throw new Error("Failed to get battery manager: ".concat(_t2.message || _t2));
            case 3:
              return _context2.a(2);
          }
        }, _callee2, this, [[0, 2]]);
      }));
      function getBatteryManager() {
        return _getBatteryManager.apply(this, arguments);
      }
      return getBatteryManager;
    }()
    /**
     * Handles battery level change events
     * @private
     */
    )
  }, {
    key: "_onLevelChangeEventFunc",
    value: function _onLevelChangeEventFunc(e) {
      this._sendData(e.currentTarget);
    }
    /**
     * Handles battery charging status change events
     * @private
     */
  }, {
    key: "_onChargingChangeEventFunc",
    value: function _onChargingChangeEventFunc(e) {
      this._sendData(e.currentTarget);
    }
    /**
     * Sends battery status data to the queue
     * @private
     * @param {BatteryManager} battery - Battery manager instance
     */
  }, {
    key: "_sendData",
    value: function _sendData() {
      var battery = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._battery;
      if (!battery) return;
      var eventSeq = this._storageUtils.getAndUpdateEventSequenceNumber();
      var time = this._utils.dateNow();
      this._dataQueue.addToQueue('battery_status', this._utils.convertToArrayByMap(exports.BatteryStatusStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        chargeLevel: battery.level,
        isCharging: battery.charging,
        powerSource: 0
      }));
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = BatteryStatusCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/BeforeInstallPromptEventCollector.js":
/*!********************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/BeforeInstallPromptEventCollector.js ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var featureSettings = {
  configKey: 'isBeforeInstallPrompt',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
exports.EventStructure = ['eventSequence', 'timestamp', 'platforms', 'relativeTime'];
var BeforeInstallPromptEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function BeforeInstallPromptEventCollector(dataQueue, utils, MessageBus, BeforeInstallPromptEventEmitter) {
    var _this;
    _classCallCheck(this, BeforeInstallPromptEventCollector);
    _this = _callSuper(this, BeforeInstallPromptEventCollector);
    _defineProperty(_this, "_onBeforeInstallPrompt", function (event) {
      var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var time = _this.getEventTimestamp();
      var relativeTimestamp = _this.getTimestampFromEvent(event);
      var platforms = event.platforms ? event.platforms.join(',') : '';
      _this._dataQueue.addToQueue('before_install_prompt', _this._utils.convertToArrayByMap(exports.EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        platforms: platforms,
        relativeTime: relativeTimestamp
      }));
    });
    _this._messageBus = MessageBus;
    _this._eventEmitter = BeforeInstallPromptEventEmitter;
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    return _this;
  }
  _inherits(BeforeInstallPromptEventCollector, _DataCollector_1$defa);
  return _createClass(BeforeInstallPromptEventCollector, [{
    key: "startFeature",
    value: function startFeature() {
      this._eventEmitter.start(window);
      this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.BeforeInstallPromptEvent, this._onBeforeInstallPrompt);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._eventEmitter.stop(window);
      this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.BeforeInstallPromptEvent, this._onBeforeInstallPrompt);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = BeforeInstallPromptEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/ClickEvents.js":
/*!**********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/ClickEvents.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.onClickSelectors = void 0;
var Event_1 = __importDefault(__webpack_require__(/*! ./Event */ "./dist/js-sdk-legacy/src/main/collectors/events/Event.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
exports.onClickSelectors = "input[type='button'], input[type='radio'], input[type='checkbox'], button";
/**
 * OnCLickEvents Data Collector
 */
var ClickEvents = /*#__PURE__*/function (_Event_1$default) {
  /**
   * @param sendToQueue
   */
  function ClickEvents(sendToQueue, CDUtils, messageBus, configurationRepository, StandardOnClickEventsEmitter, maskingService, elements, maxShadowDepth, iframeLoadingTimeout) {
    var _this;
    _classCallCheck(this, ClickEvents);
    _this = _callSuper(this, ClickEvents);
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleOnClickEvents", function (e) {
      // in input of type button we wish to see the value in the button,
      // in input of type radio the value of the element clicked is the value
      // in input of type checkbox the value is the value property,
      // in button tag the value in the innerHTML
      // we send whether the value is checked un the selected property
      var target = e.target;
      var newValue = target.value || target.innerHTML || '';
      newValue = _this._maskingService.maskText(newValue, e.target.id);
      _this._sendToQueue(e, {
        length: newValue.length,
        elementValues: newValue,
        selected: target.checked === undefined ? -1 : target.checked ? 1 : 0
      });
    });
    _this._elements = elements;
    _this._sendToQueue = sendToQueue;
    _this._CDUtils = CDUtils;
    _this._messageBus = messageBus;
    _this._StandardOnClickEventsEmitter = StandardOnClickEventsEmitter;
    _this._configurationRepository = configurationRepository;
    _this._enableElementHierarchy = configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableElementHierarchy);
    _this._enableElementCategory = configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableElementCategory);
    _this._maskingService = maskingService;
    _this._maxShadowDepth = maxShadowDepth;
    _this._iframeLoadingTimeout = iframeLoadingTimeout;
    return _this;
  }
  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(ClickEvents, _Event_1$default);
  return _createClass(ClickEvents, [{
    key: "bind",
    value: function bind(browserContext) {
      var _this2 = this;
      this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.StandardOnClickEvent, this.handleOnClickEvents);
      browserContext.collectAllElementsBySelectorAsync(exports.onClickSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onClickElements) {
        _this2._StandardOnClickEventsEmitter.start(_onClickElements);
      });
    }
    /**
     * @param {BrowserContext}browserContext
     */
  }, {
    key: "unbind",
    value: function unbind(browserContext) {
      var _this3 = this;
      this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.StandardOnClickEvent, this.handleOnClickEvents);
      browserContext.collectAllElementsBySelectorAsync(exports.onClickSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onClickElements) {
        _this3._StandardOnClickEventsEmitter.stop(_onClickElements);
      });
    }
  }, {
    key: "addOnLoadInputData",
    value: function addOnLoadInputData(browserContext, isChange) {
      var _this4 = this;
      if (!this._enableElementHierarchy && !this._enableElementCategory) return;
      browserContext.collectAllElementsBySelectorAsync(exports.onClickSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (elements) {
        _this4.processElements(elements, isChange, _this4._elements, _this4._elements.resendElementPerContext, _this4._elements.getElement);
      });
    }
  }]);
}(Event_1["default"]);
exports["default"] = ClickEvents;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/ClipboardEventCollector.js":
/*!**********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/ClipboardEventCollector.js ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = exports.ClipboardEventType = void 0;
// eslint-disable-next-line max-classes-per-file
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var featureSettings = {
  configKey: 'isClipboardEvent',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
exports.ClipboardEventType = {
  copy: 0,
  paste: 1,
  cut: 2
};
exports.EventStructure = ['eventSequence', 'timestamp', 'clipboardEventType', 'elementHash', 'copiedText'];
var ClipboardEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  /**
   *
   * @param utils
   * @param elements
   * @param dataQ
   */
  function ClipboardEventCollector(builder) {
    var _this;
    _classCallCheck(this, ClipboardEventCollector);
    _this = _callSuper(this, ClipboardEventCollector);
    /**
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "startFeature", function (browserContext) {
      try {
        var currDocument = browserContext.getDocument();
        _this._cutEventEmitter.start(currDocument);
        _this._copyEventEmitter.start(currDocument);
        _this._pasteEventEmitter.start(currDocument);
        browserContext.collectAllElementsBySelectorAsync('iframe', _this._maxShadowDepth, _this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            if (iframe && iframe.contentDocument) {
              _this._cutEventEmitter.start(iframe.contentDocument);
              _this._copyEventEmitter.start(iframe.contentDocument);
              _this._pasteEventEmitter.start(iframe.contentDocument);
            }
          });
        });
        _this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.CutEvent, _this._handleClipboardEvent);
        _this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.CopyEvent, _this._handleClipboardEvent);
        _this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.PasteEvent, _this._handleClipboardEvent);
      } catch (err) {
        Logger_1["default"].error("Failed starting the ClipboardEvents feature. msg: ".concat(err.message), err);
      }
    });
    _defineProperty(_this, "_handleClipboardEvent", function (e) {
      _this._sendToQueue(e);
    });
    _defineProperty(_this, "_sendToQueue", function (e) {
      try {
        var time = _this.getEventTimestamp(e);
        var element = _this._elements.getElementHashFromEvent(e);
        var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
        var textValue = e.clipboardData ? e.clipboardData.getData('text') : window.clipboardData ? window.clipboardData.getData('text') : '';
        textValue = textValue || '';
        // mask all chars, but preserve length
        if (textValue !== '') {
          textValue = textValue.replace(/[\d]/g, '1').replace(/[a-zA-Z]/g, 'a').replace(/[^a-zA-Z\d]/g, '*');
        }
        var type = exports.ClipboardEventType[e.type];
        if (_this._utils.isUndefinedNull(type)) {
          type = -1;
        }
        _this._dataQueue.addToQueue('clipboard_events', _this._utils.convertToArrayByMap(exports.EventStructure, {
          eventSequence: eventSeq,
          timestamp: time,
          elementHash: element,
          copiedText: textValue,
          clipboardEventType: type
        }));
      } catch (error) {
        Logger_1["default"].error("Failed handling ClipboardEvent. msg: ".concat(error.message), error);
      }
    });
    _this._utils = builder.utils;
    _this._dataQueue = builder.dataQueue;
    _this._elements = builder.elements;
    _this._messageBus = builder.messageBus;
    _this._cutEventEmitter = builder.cutEventEmitter;
    _this._copyEventEmitter = builder.copyEventEmitter;
    _this._pasteEventEmitter = builder.pasteEventEmitter;
    _this._maxShadowDepth = builder.maxShadowDepth;
    _this._iframeLoadingTimeout = builder.iframeLoadingTimeout;
    return _this;
  }
  _inherits(ClipboardEventCollector, _DataCollector_1$defa);
  return _createClass(ClipboardEventCollector, [{
    key: "stopFeature",
    value:
    /**
     * @param {BrowserContext} browserContext
     */
    function stopFeature(browserContext) {
      var _this2 = this;
      try {
        var currDocument = browserContext.getDocument();
        this._cutEventEmitter.stop(currDocument);
        this._copyEventEmitter.stop(currDocument);
        this._pasteEventEmitter.stop(currDocument);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            if (iframe && iframe.contentDocument) {
              _this2._cutEventEmitter.stop(iframe.contentDocument);
              _this2._copyEventEmitter.stop(iframe.contentDocument);
              _this2._pasteEventEmitter.stop(iframe.contentDocument);
            }
          });
        });
        this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.CutEvent, this._handleClipboardEvent);
        this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.CopyEvent, this._handleClipboardEvent);
        this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.PasteEvent, this._handleClipboardEvent);
      } catch (err) {
        Logger_1["default"].error("Failed stopping the ClipboardEvents feature. msg: ".concat(err.message), err);
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }, {
    key: "Builder",
    get: function get() {
      var Builder = /*#__PURE__*/function () {
        function Builder(utils, elements, dataQ, configuration) {
          _classCallCheck(this, Builder);
          this.utils = utils;
          this.dataQueue = dataQ;
          this.elements = elements;
          this.maxShadowDepth = configuration.getMaxShadowDepth();
          this.iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
        }
        return _createClass(Builder, [{
          key: "withMessageBus",
          value: function withMessageBus(messageBus) {
            this.messageBus = messageBus;
            return this;
          }
        }, {
          key: "withCutEventEmitter",
          value: function withCutEventEmitter(cutEventEmitter) {
            this.cutEventEmitter = cutEventEmitter;
            return this;
          }
        }, {
          key: "withCopyEventEmitter",
          value: function withCopyEventEmitter(copyEventEmitter) {
            this.copyEventEmitter = copyEventEmitter;
            return this;
          }
        }, {
          key: "withPasteEventEmitter",
          value: function withPasteEventEmitter(pasteEventEmitter) {
            this.pasteEventEmitter = pasteEventEmitter;
            return this;
          }
        }, {
          key: "build",
          value: function build() {
            return new ClipboardEventCollector(this);
          }
        }]);
      }();
      return Builder;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = ClipboardEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/ControlsKeyTable.js":
/*!***************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/ControlsKeyTable.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ControlsKeyTable = void 0;
exports.ControlsKeyTable = {
  'Enter': 13,
  'ArrowUp': 38,
  'ArrowDown': 40,
  'ArrowLeft': 37,
  'ArrowRight': 39,
  'Escape': 27,
  ' ': 32,
  'Control': 17,
  'Alt': 18,
  'Tab': 9,
  'Shift': 16,
  'CapsLock': 20,
  'Meta': 91,
  'Backspace': 8,
  'Home': 36,
  'End': 35,
  'Insert': 45,
  'Delete': 46,
  'PageUp': 33,
  'PageDown': 34,
  'PrintScreen': 44,
  'NumLock': 144,
  'Clear': 144,
  'F1': 112,
  'F2': 113,
  'F3': 114,
  'F4': 115,
  'F5': 116,
  'F6': 117,
  'F7': 118,
  'F8': 119,
  'F9': 120,
  '10': 121,
  'F11': 122,
  'F12': 123
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/CustomInputEvents.js":
/*!****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/CustomInputEvents.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Event_1 = __importDefault(__webpack_require__(/*! ./Event */ "./dist/js-sdk-legacy/src/main/collectors/events/Event.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
/**
 * CustomInputEvents Controlled by ElementsEvent Data Collector using CustomInputElementSettings.
 * support collection of a single Input Element.
 */
var CustomInputEvents = /*#__PURE__*/function (_Event_1$default) {
  function CustomInputEvents(elements, sendToQueue, CDUtils, messageBus, StandardCustomInputEmitter, maskingService, inputElementSettings) {
    var _this;
    _classCallCheck(this, CustomInputEvents);
    _this = _callSuper(this, CustomInputEvents);
    _defineProperty(_this, "handleInputEvents", function (e) {
      var _e$getAttribute, _this$_inputElementSe, _e$target, _e$target2, _this$_inputElementSe2, _newValue;
      var newValue = '';
      var attribute = e === null || e === void 0 || (_e$getAttribute = e.getAttribute) === null || _e$getAttribute === void 0 ? void 0 : _e$getAttribute.call(e, (_this$_inputElementSe = _this._inputElementSettings) === null || _this$_inputElementSe === void 0 ? void 0 : _this$_inputElementSe.elementDataAttribute);
      if (attribute) {
        newValue = attribute;
      } else if (e !== null && e !== void 0 && (_e$target = e.target) !== null && _e$target !== void 0 && _e$target.ariaValueNow) {
        newValue = e.target.ariaValueNow;
      } else if (e !== null && e !== void 0 && (_e$target2 = e.target) !== null && _e$target2 !== void 0 && _e$target2.value) {
        var _e$target3;
        newValue = (_e$target3 = e.target) === null || _e$target3 === void 0 ? void 0 : _e$target3.value;
      } else if (e !== null && e !== void 0 && e[(_this$_inputElementSe2 = _this._inputElementSettings) === null || _this$_inputElementSe2 === void 0 ? void 0 : _this$_inputElementSe2.elementDataAttribute]) {
        var _this$_inputElementSe3;
        newValue = e[(_this$_inputElementSe3 = _this._inputElementSettings) === null || _this$_inputElementSe3 === void 0 ? void 0 : _this$_inputElementSe3.elementDataAttribute];
      }
      if (newValue !== '') {
        newValue = _this._maskingService.maskText(newValue, e.id);
      }
      if (newValue === '') {
        return;
      }
      _this._sendToQueue(e, {
        length: ((_newValue = newValue) === null || _newValue === void 0 ? void 0 : _newValue.length) || 0,
        elementValues: newValue,
        selected: -1
      });
    });
    _this._elements = elements;
    _this._sendToQueue = sendToQueue;
    _this._CDUtils = CDUtils;
    _this._messageBus = messageBus;
    _this._StandardCustomInputEmitter = StandardCustomInputEmitter;
    _this._maskingService = maskingService;
    _this._inputElementSettings = inputElementSettings;
    _this._elementsFromDoc = {
      mainElement: '',
      customButtons: []
    };
    return _this;
  }
  _inherits(CustomInputEvents, _Event_1$default);
  return _createClass(CustomInputEvents, [{
    key: "bind",
    value: function bind(browserContext) {
      var _this$_inputElementSe4, _this$_inputElementSe5, _this$_elementsFromDo, _this$_elementsFromDo2;
      if (!((_this$_inputElementSe4 = this._inputElementSettings) !== null && _this$_inputElementSe4 !== void 0 && _this$_inputElementSe4.parentElementSelector) && !((_this$_inputElementSe5 = this._inputElementSettings) !== null && _this$_inputElementSe5 !== void 0 && _this$_inputElementSe5.childElementWithCustomAttribute)) {
        return;
      }
      var doc = browserContext.getDocument();
      this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.CustomInputElement, this.handleInputEvents);
      var elements = [(_this$_elementsFromDo = this._elementsFromDoc) === null || _this$_elementsFromDo === void 0 ? void 0 : _this$_elementsFromDo.mainElement].concat(_toConsumableArray(this._elementsFromDoc.customButtons));
      if (((_this$_elementsFromDo2 = this._elementsFromDoc) === null || _this$_elementsFromDo2 === void 0 ? void 0 : _this$_elementsFromDo2.mainElement) === '') {
        this.getSelectElementsFromDoc(doc);
      }
      this.addListenersBySelector(elements);
    }
  }, {
    key: "unbind",
    value: function unbind(browserContext) {
      var _this$_inputElementSe6, _this$_inputElementSe7, _this$_elementsFromDo3, _this$_elementsFromDo4;
      if (!((_this$_inputElementSe6 = this._inputElementSettings) !== null && _this$_inputElementSe6 !== void 0 && _this$_inputElementSe6.parentElementSelector) && !((_this$_inputElementSe7 = this._inputElementSettings) !== null && _this$_inputElementSe7 !== void 0 && _this$_inputElementSe7.childElementWithCustomAttribute)) {
        return;
      }
      var doc = browserContext.getDocument();
      this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.CustomInputElement, this.handleInputEvents);
      var elements = [(_this$_elementsFromDo3 = this._elementsFromDoc) === null || _this$_elementsFromDo3 === void 0 ? void 0 : _this$_elementsFromDo3.mainElement].concat(_toConsumableArray(this._elementsFromDoc.customButtons));
      if (((_this$_elementsFromDo4 = this._elementsFromDoc) === null || _this$_elementsFromDo4 === void 0 ? void 0 : _this$_elementsFromDo4.mainElement) === '') {
        this.getSelectElementsFromDoc(doc);
      }
      this.removeListenersBySelector(elements);
    }
  }, {
    key: "getSelectElementsFromDoc",
    value: function getSelectElementsFromDoc(doc) {
      var _this$_inputElementSe8,
        _this2 = this;
      var body = doc.querySelector('body');
      var mainElement = doc.querySelector((_this$_inputElementSe8 = this._inputElementSettings) === null || _this$_inputElementSe8 === void 0 ? void 0 : _this$_inputElementSe8.childElementWithCustomAttribute);
      if (body) {
        var _this$_inputElementSe9;
        if (mainElement) {
          this._elementsFromDoc.mainElement = mainElement;
        }
        if ((_this$_inputElementSe9 = this._inputElementSettings) !== null && _this$_inputElementSe9 !== void 0 && _this$_inputElementSe9.customButtons) {
          var _this$_inputElementSe0;
          (_this$_inputElementSe0 = this._inputElementSettings) === null || _this$_inputElementSe0 === void 0 || _this$_inputElementSe0.customButtons.forEach(function (element) {
            var elem = doc.querySelector(element);
            if (elem) {
              _this2._elementsFromDoc.customButtons.push(elem);
            }
          });
        }
      }
      return this._elementsFromDoc;
    }
  }, {
    key: "addListenersBySelector",
    value: function addListenersBySelector(elements) {
      var _this$_elementsFromDo5;
      if ((_this$_elementsFromDo5 = this._elementsFromDoc) !== null && _this$_elementsFromDo5 !== void 0 && _this$_elementsFromDo5.mainElement && elements.length >= 1) {
        this._StandardCustomInputEmitter.start(elements);
      }
    }
  }, {
    key: "removeListenersBySelector",
    value: function removeListenersBySelector(elements) {
      var _this$_elementsFromDo6;
      if ((_this$_elementsFromDo6 = this._elementsFromDoc) !== null && _this$_elementsFromDo6 !== void 0 && _this$_elementsFromDo6.mainElement && elements.length >= 1) {
        this._StandardCustomInputEmitter.stop(elements);
      }
      this._elementsFromDoc = {
        mainElement: '',
        customButtons: []
      };
    }
    /**
     * @param {BrowserContext} browserContext
     * @param isChange
     */
  }, {
    key: "addOnLoadInputData",
    value: function addOnLoadInputData(browserContext, isChange) {
      var _this$_inputElementSe1,
        _this$_inputElementSe10,
        _this$_elementsFromDo7,
        _this$_elementsFromDo8,
        _this$_elementsFromDo9,
        _this3 = this;
      if (!((_this$_inputElementSe1 = this._inputElementSettings) !== null && _this$_inputElementSe1 !== void 0 && _this$_inputElementSe1.parentElementSelector) && !((_this$_inputElementSe10 = this._inputElementSettings) !== null && _this$_inputElementSe10 !== void 0 && _this$_inputElementSe10.childElementWithCustomAttribute)) {
        return;
      }
      var doc = browserContext.getDocument();
      var elements = [(_this$_elementsFromDo7 = this._elementsFromDoc) === null || _this$_elementsFromDo7 === void 0 ? void 0 : _this$_elementsFromDo7.mainElement].concat(_toConsumableArray(this._elementsFromDoc.customButtons));
      if (((_this$_elementsFromDo8 = this._elementsFromDoc) === null || _this$_elementsFromDo8 === void 0 ? void 0 : _this$_elementsFromDo8.mainElement) === '') {
        this.getSelectElementsFromDoc(doc);
      }
      if ((_this$_elementsFromDo9 = this._elementsFromDoc) !== null && _this$_elementsFromDo9 !== void 0 && _this$_elementsFromDo9.mainElement && elements.length >= 1) {
        elements.forEach(function (element) {
          if (_this3._elements.isListed(element)) {
            if (!isChange) {
              // on load and context change we need to report again elements
              _this3._elements.resendElementPerContext(element); // this will cause the Elements class to add element event to Q
            }
          } else {
            _this3._elements.getElement(element, false); // this will cause the Elements class to add element event to Q
          }
        });
      }
    }
  }]);
}(Event_1["default"]);
exports["default"] = CustomInputEvents;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/DeviceOrientationCollector.js":
/*!*************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/DeviceOrientationCollector.js ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = exports.DeviceOrientationType = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var featureSettings = {
  configKey: 'isDeviceOrientationEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
exports.DeviceOrientationType = {
  'undefined': 0,
  'portrait-primary': 1,
  'landscape-primary': 2,
  'portrait-secondary': 3,
  'landscape-secondary': 4
};
exports.EventStructure = ['eventSequence', 'timestamp', 'orientation'];
var DeviceOrientationCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function DeviceOrientationCollector(utils, dataQ) {
    var _this;
    _classCallCheck(this, DeviceOrientationCollector);
    _this = _callSuper(this, DeviceOrientationCollector);
    _this._dataQ = dataQ;
    _this._utils = utils;
    _this._onDeviceOrientationEventFunc = _this._onDeviceOrientationEvent.bind(_this);
    if (screen.mozOrientation && screen.addEventListener) {
      _this._eventTarget = screen;
      _this._eventName = 'mozorientationchange';
    } else if (screen.msOrientation && screen.addEventListener) {
      _this._eventTarget = screen;
      _this._eventName = 'msorientationchange';
    } else {
      _this._eventTarget = window;
      _this._eventName = 'orientationchange';
    }
    return _this;
  }
  _inherits(DeviceOrientationCollector, _DataCollector_1$defa);
  return _createClass(DeviceOrientationCollector, [{
    key: "startFeature",
    value: function startFeature() {
      this._utils.addEventListener(this._eventTarget, this._eventName, this._onDeviceOrientationEventFunc);
      this._handleDeviceOrientationEvent(screen);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._utils.removeEventListener(this._eventTarget, this._eventName, this._onDeviceOrientationEventFunc);
    }
  }, {
    key: "_onDeviceOrientationEvent",
    value: function _onDeviceOrientationEvent(e) {
      var scr;
      if (!e || !e.target) {
        scr = screen;
      } else {
        // Chrome target is window so we need to get screen out of it. Firefox target is screen so we just get the target
        scr = e.target.screen || e.target;
      }
      this._handleDeviceOrientationEvent(scr);
    }
    // Handle screen orientation event. Notice that we receive the screen object as a parameter. The reason for this is
    // that we require the screen object from the event args since it is the only one up to date with the correct orientation value (At least until FireFox fixes this behavior)
  }, {
    key: "_handleDeviceOrientationEvent",
    value: function _handleDeviceOrientationEvent(scr) {
      // Since FireFox has both mozOrientation & orientation properties but only the first one is up to date, this order of must be preserved for now...
      var orientation = scr.mozOrientation || scr.msOrientation || scr.orientation;
      // Case the browser doesn't support orientation
      if (orientation === undefined) {
        Logger_1["default"].debug('onDeviceOrientationEvent: Unable to find orientation data.');
        return;
      }
      // Extract the actual type
      var orientationType = orientation.type || orientation;
      var deviceOrientationType = exports.DeviceOrientationType[orientationType];
      // In case the orientation type is unknown to us...
      if (deviceOrientationType === undefined) {
        Logger_1["default"].error("onDeviceOrientationEvent: Unknown orientation ".concat(orientationType, " value."));
        return;
      }
      if (this._lastDeviceOrientationType !== deviceOrientationType) {
        var timestamp = this.getEventTimestamp();
        var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
        this._lastDeviceOrientationType = deviceOrientationType;
        Logger_1["default"].trace("onDeviceOrientationEvent: Orientation changed to ".concat(deviceOrientationType, " at time ").concat(timestamp));
        this._dataQ.addToQueue('screen_orientation', this._utils.convertToArrayByMap(exports.EventStructure, {
          eventSequence: eventSeq,
          timestamp: timestamp,
          orientation: deviceOrientationType
        }));
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = DeviceOrientationCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/ElementEventCollector.js":
/*!********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/ElementEventCollector.js ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = exports.ElementEventType = void 0;
// eslint-disable-next-line max-classes-per-file
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var IsTrustedValue_1 = __webpack_require__(/*! ./IsTrustedValue */ "./dist/js-sdk-legacy/src/main/collectors/events/IsTrustedValue.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var featureSettings = {
  configKey: 'isElementsEvent',
  isDefault: true,
  shouldRunPerContext: true,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
exports.ElementEventType = {
  input: 0,
  initial: 1,
  focus: 2,
  blur: 3,
  change: 4,
  click: 5,
  submit: 6
};
exports.EventStructure = ['eventSequence', 'timestamp', 'eventType', 'isTrusted', 'elementHash', 'length', 'elementValues', 'selected', 'hashedValue', 'relativeTime'];
var ElementEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function ElementEventCollector(builder) {
    var _this;
    _classCallCheck(this, ElementEventCollector);
    _this = _callSuper(this, ElementEventCollector);
    _defineProperty(_this, "mutationMessageHandler", function (message) {
      if (message.browserContext) {
        var _this$_customInputEve, _this$_customInputEve2;
        _this._inputEvents.addOnLoadInputData(message.browserContext, true);
        _this._inputEvents.bind(message.browserContext);
        _this._clickEvents.addOnLoadInputData(message.browserContext, true);
        _this._clickEvents.bind(message.browserContext);
        _this._selectElementEvents.bind(message.browserContext);
        _this._formEvents.bind(message.browserContext);
        (_this$_customInputEve = _this._customInputEvents) === null || _this$_customInputEve === void 0 || _this$_customInputEve.addOnLoadInputData(message.browserContext, true);
        (_this$_customInputEve2 = _this._customInputEvents) === null || _this$_customInputEve2 === void 0 || _this$_customInputEve2.bind(message.browserContext);
      }
    });
    /**
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "startFeature", function (browserContext) {
      var _this$_customInputEve3, _this$_customInputEve4;
      _this._inputEvents.addOnLoadInputData(browserContext, false);
      _this._inputEvents.bind(browserContext);
      _this._clickEvents.addOnLoadInputData(browserContext, false);
      _this._clickEvents.bind(browserContext);
      _this._selectElementEvents.bind(browserContext);
      (_this$_customInputEve3 = _this._customInputEvents) === null || _this$_customInputEve3 === void 0 || _this$_customInputEve3.addOnLoadInputData(browserContext, false);
      (_this$_customInputEve4 = _this._customInputEvents) === null || _this$_customInputEve4 === void 0 || _this$_customInputEve4.bind(browserContext);
      _this._formEvents.bind(browserContext);
      if (_this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isMutationObserver) && _this._mutationEmitter) {
        _this._mutationEmitter.startObserver(browserContext);
        _this._jQueryElementListenerSiteMapper.initTracking();
      }
    });
    /**
     *
     * @param matchedMapping
     * @private
     */
    _defineProperty(_this, "_onSiteMapperMatch", function (matchedMapping) {
      var selector = matchedMapping.selector;
      if (!selector) {
        Logger_1["default"].warn('ElementEvents._onSiteMapperMatch - No selector defined for match.' + ' Aborting jQuery element listening process.');
        return;
      }
      try {
        var element = window.document.querySelector(selector);
        if (!element) {
          Logger_1["default"].error("ElementEvents._onSiteMapperMatch - selector:".concat(JSON.stringify(selector), " not found on page"));
          return;
        }
        if (_this._domUtils.matches(element, _this._inputSelectors)) {
          _this._jqueryEventHandler.bindInputEvents(element);
        } else if (_this._domUtils.matches(element, _this._onClickSelectors)) {
          _this._jqueryEventHandler.bindOnClickEvents(element);
        } else if (_this._domUtils.matches(element, _this._onSelectSelectors)) {
          _this._jqueryEventHandler.bindOnChangeEvents(element);
        } else if (_this._domUtils.matches(element, _this._onFormSelectors)) {
          _this._jqueryEventHandler.bindOnFormsEvents(element);
        } else {
          Logger_1["default"].error("ElementEvents._onSiteMapperMatch - Unable to match the element with selector:\n                ".concat(JSON.stringify(selector), " to any selectors group. Aborting jQuery element listening process."));
        }
      } catch (ex) {
        Logger_1["default"].error("ElementEvents._onSiteMapperMatch - ".concat(ex.message), ex);
      }
    });
    _this._configurationRepository = builder.configurationRepository;
    _this._utils = builder.utils;
    _this._domUtils = builder.domUtils;
    _this._dataQ = builder.dataQ;
    _this._elements = builder.elements;
    _this._jQueryElementListenerSiteMapper = builder.jQueryElementListenerSiteMapper;
    _this._jQueryElementListenerSiteMapper.updateObserver(_this._onSiteMapperMatch);
    _this._messageBus = builder.messageBus;
    _this._mutationEmitter = builder.mutationEmitter;
    _this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.MutationSingleEvent, _this.mutationMessageHandler);
    _this._StandardInputEventsEmitter = builder.StandardInputEventsEmitter;
    _this._SyntheticMaskInputEventsHandler = builder.SyntheticMaskInputEventsHandler;
    _this._SyntheticAutotabInputEventsHandler = builder.SyntheticAutotabInputEventsHandler;
    _this._maskingService = builder.maskingService;
    _this._inputEvents = new builder.InputEvents(_this._elements, _this.sendToQueue.bind(_this), _this._utils, _this._messageBus, _this._StandardInputEventsEmitter, _this._SyntheticMaskInputEventsHandler, _this._SyntheticAutotabInputEventsHandler, _this._maskingService, builder.maxShadowDepth, builder.iframeLoadingTimeout);
    _this._inputSelectors = builder.inputSelectors;
    _this._StandardOnClickEventsEmitter = builder.StandardOnClickEventsEmitter;
    if (_this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.parentElementSelector) && _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.childElementWithCustomAttribute) && _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.elementDataAttribute)) {
      _this._StandardCustomInputEmitter = builder.StandardCustomInputEmitter;
      _this._inputElementSettings = {
        parentElementSelector: _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.parentElementSelector),
        childElementWithCustomAttribute: _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.childElementWithCustomAttribute),
        elementDataAttribute: _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.elementDataAttribute),
        customButtons: _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.customButtons)
      };
      _this._customInputEvents = new builder.CustomInputEvents(_this._elements, _this.sendToQueue.bind(_this), _this._utils, _this._messageBus, _this._StandardCustomInputEmitter, _this._maskingService, _this.inputElementSettings = _this._inputElementSettings);
    }
    _this._clickEvents = new builder.ClickEvents(_this.sendToQueue.bind(_this), _this._utils, _this._messageBus, _this._configurationRepository, _this._StandardOnClickEventsEmitter, _this._maskingService, _this._elements, builder.maxShadowDepth, builder.iframeLoadingTimeout);
    _this._onClickSelectors = builder.onClickSelectors;
    _this._StandardOnChangeEventsEmitter = builder.StandardOnChangeEventsEmitter;
    _this._elementFocusEventEmitter = builder.ElementFocusEventsEmitter;
    _this._elementBlurEventEmitter = builder.ElementBlurEventsEmitter;
    _this._selectElementEvents = new builder.SelectElementEvents(_this.sendToQueue.bind(_this), _this._utils, _this._messageBus, _this._StandardOnChangeEventsEmitter, _this._elementFocusEventEmitter, _this._elementBlurEventEmitter, _this._configurationRepository, _this._maskingService, builder.maxShadowDepth, builder.iframeLoadingTimeout);
    _this._onSelectSelectors = builder.onSelectSelectors;
    _this._StandardOnFormEventsEmitter = builder.StandardOnFormEventsEmitter;
    _this._formEvents = new builder.FormEvents(_this.sendToQueue.bind(_this), _this._messageBus, _this._StandardOnFormEventsEmitter, builder.maxShadowDepth, builder.iframeLoadingTimeout);
    _this._onFormSelectors = builder.onFormSelectors;
    _this._jqueryEventHandler = builder.JqueryElementsHandler;
    _this._maxElemValLength = 200;
    _this._hashTruncationLength = _this._configurationRepository.get('elementHashTruncationLength') || 2;
    return _this;
  }
  _inherits(ElementEventCollector, _DataCollector_1$defa);
  return _createClass(ElementEventCollector, [{
    key: "stopFeature",
    value:
    /**
     * @param {BrowserContext} browserContext
     */
    function stopFeature(browserContext) {
      var _this$_customInputEve5;
      this._inputEvents.unbind(browserContext);
      this._clickEvents.unbind(browserContext);
      this._selectElementEvents.unbind(browserContext);
      (_this$_customInputEve5 = this._customInputEvents) === null || _this$_customInputEve5 === void 0 || _this$_customInputEve5.unbind(browserContext);
      this._formEvents.unbind(browserContext);
      this._jQueryElementListenerSiteMapper.stopTracking();
      this._mutationEmitter.stopObserver(browserContext);
    }
    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig(browserContext) {
      if (this._configurationRepository.get('isMutationObserver') && this._mutationEmitter) {
        this._mutationEmitter.startObserver(browserContext);
        this._jQueryElementListenerSiteMapper.onConfigUpdate(this._configurationRepository);
      }
      this._hashTruncationLength = this._configurationRepository.get('elementHashTruncationLength') !== undefined ? this._configurationRepository.get('elementHashTruncationLength') : this._hashTruncationLength;
      this._elements.updateFeatureConfig();
      this._selectElementEvents.updateSettings(browserContext);
    }
  }, {
    key: "sendToQueue",
    value: function sendToQueue(e, eventData) {
      var isTrusted = IsTrustedValue_1.IsTrustedValue[e.isTrusted];
      var time = this.getEventTimestamp(e);
      var relativeTimestamp = this.getTimestampFromEvent(e);
      var type = exports.ElementEventType[e.type];
      if (this._utils.isUndefinedNull(type)) {
        type = -1;
      }
      var element = this._elements.getElementHashFromEvent(e);
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      eventData = eventData || {};
      if (eventData.elementValues && eventData.elementValues.length > this._maxElemValLength) {
        eventData.elementValues = '';
      }
      var fullEventData = _objectSpread(_objectSpread({}, eventData), {
        eventType: type,
        eventSequence: eventSeq,
        timestamp: time,
        elementHash: element,
        isTrusted: isTrusted,
        hashedValue: '',
        relativeTime: relativeTimestamp
      });
      this._dataQ.addToQueue('element_events', this._utils.convertToArrayByMap(exports.EventStructure, fullEventData), true);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
    /**
     * Designated ElementEvents Class Builder
     * @returns {Builder}
     * @constructor
     */
  }, {
    key: "Builder",
    get: function get() {
      var Builder = /*#__PURE__*/function () {
        function Builder(configurationRepository, utils, domUtils, elements, dataQ, configuration) {
          _classCallCheck(this, Builder);
          this.configurationRepository = configurationRepository;
          this.utils = utils;
          this.domUtils = domUtils;
          this.elements = elements;
          this.dataQ = dataQ;
          this.maxShadowDepth = configuration.getMaxShadowDepth();
          this.iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
        }
        return _createClass(Builder, [{
          key: "withMessageBus",
          value: function withMessageBus(messageBus) {
            this.messageBus = messageBus;
            return this;
          }
        }, {
          key: "withMutationEmitter",
          value: function withMutationEmitter(mutationEmitter) {
            this.mutationEmitter = mutationEmitter;
            return this;
          }
        }, {
          key: "withjQueryElementListenerSiteMapper",
          value: function withjQueryElementListenerSiteMapper(jQueryElementListenerSiteMapper) {
            this.jQueryElementListenerSiteMapper = jQueryElementListenerSiteMapper;
            return this;
          }
        }, {
          key: "withjQueryElementsHandler",
          value: function withjQueryElementsHandler(JqueryElementsHandler) {
            this.JqueryElementsHandler = JqueryElementsHandler;
            return this;
          }
        }, {
          key: "withInputEvents",
          value: function withInputEvents(InputEvents, inputSelectors, MaskingService) {
            this.InputEvents = InputEvents;
            this.inputSelectors = inputSelectors;
            this.maskingService = MaskingService;
            return this;
          }
        }, {
          key: "withStandardInputEventsEmitter",
          value: function withStandardInputEventsEmitter(StandardInputEventsEmitter) {
            this.StandardInputEventsEmitter = StandardInputEventsEmitter;
            return this;
          }
        }, {
          key: "withSyntheticMaskInputEventsHandler",
          value: function withSyntheticMaskInputEventsHandler(SyntheticMaskInputEventsHandler) {
            this.SyntheticMaskInputEventsHandler = SyntheticMaskInputEventsHandler;
            return this;
          }
        }, {
          key: "withSyntheticAutotabInputEventsHandler",
          value: function withSyntheticAutotabInputEventsHandler(SyntheticAutotabInputEventsHandler) {
            this.SyntheticAutotabInputEventsHandler = SyntheticAutotabInputEventsHandler;
            return this;
          }
        }, {
          key: "withClickEvents",
          value: function withClickEvents(ClickEvents, onClickSelectors) {
            this.ClickEvents = ClickEvents;
            this.onClickSelectors = onClickSelectors;
            return this;
          }
        }, {
          key: "withStandardOnClickEventsEmitter",
          value: function withStandardOnClickEventsEmitter(StandardOnClickEventsEmitter) {
            this.StandardOnClickEventsEmitter = StandardOnClickEventsEmitter;
            return this;
          }
        }, {
          key: "withSelectElementEvents",
          value: function withSelectElementEvents(SelectElementEvents, onSelectSelectors) {
            this.SelectElementEvents = SelectElementEvents;
            this.onSelectSelectors = onSelectSelectors;
            return this;
          }
        }, {
          key: "withStandardOnChangeEventsEmitter",
          value: function withStandardOnChangeEventsEmitter(StandardOnChangeEventsEmitter) {
            this.StandardOnChangeEventsEmitter = StandardOnChangeEventsEmitter;
            return this;
          }
        }, {
          key: "withElementFocusEventsEmitter",
          value: function withElementFocusEventsEmitter(ElementFocusEventsEmitter) {
            this.ElementFocusEventsEmitter = ElementFocusEventsEmitter;
            return this;
          }
        }, {
          key: "withElementBlurEventsEmitter",
          value: function withElementBlurEventsEmitter(ElementBlurEventsEmitter) {
            this.ElementBlurEventsEmitter = ElementBlurEventsEmitter;
            return this;
          }
        }, {
          key: "withFormEvents",
          value: function withFormEvents(FormEvents, onFormSelectors) {
            this.FormEvents = FormEvents;
            this.onFormSelectors = onFormSelectors;
            return this;
          }
        }, {
          key: "withStandardOnFormEventsEmitter",
          value: function withStandardOnFormEventsEmitter(StandardOnFormEventsEmitter) {
            this.StandardOnFormEventsEmitter = StandardOnFormEventsEmitter;
            return this;
          }
        }, {
          key: "withCustomInputEventEmitter",
          value: function withCustomInputEventEmitter(CustomInputEvents, StandardCustomInputEmitter) {
            this.CustomInputEvents = CustomInputEvents;
            this.StandardCustomInputEmitter = StandardCustomInputEmitter;
            return this;
          }
        }, {
          key: "build",
          value: function build() {
            return new ElementEventCollector(this);
          }
        }]);
      }();
      return Builder;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = ElementEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/ElementsCollector.js":
/*!****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/ElementsCollector.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = void 0;
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ElementStrengthen_1 = __webpack_require__(/*! ../../technicalServices/ElementStrengthen */ "./dist/js-sdk-legacy/src/main/technicalServices/ElementStrengthen.js");
var UniqueIDConfiguration_1 = __webpack_require__(/*! ../../technicalServices/UniqueIDConfiguration */ "./dist/js-sdk-legacy/src/main/technicalServices/UniqueIDConfiguration.js");
exports.EventStructure = ['elementHash', 'tagName', 'id', 'name', 'type', 'leftPosition', 'topPosition', 'width', 'height', 'className', 'href', 'title', 'alt', 'selectValues', 'elementValue', 'checked', 'timestamp', 'customElementAttribute', 'unmaskedElementValue', 'elementMappingId', 'category'];
var ElementsCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function ElementsCollector(configurationRepository, utils, dataQueue, contextMgr, maskingService, categoryService) {
    var _this;
    _classCallCheck(this, ElementsCollector);
    _this = _callSuper(this, ElementsCollector);
    _this._configurationRepository = configurationRepository;
    _this._utils = utils;
    _this._dataQueue = dataQueue;
    _this._contextMgr = contextMgr;
    _this._maskingService = maskingService;
    _this._categoryService = categoryService;
    _this._elementHashWMap = new WeakMap();
    // by default we collect unless the server will order otherwise
    _this._collectPosition = true;
    _this._collectClassName = true;
    _this._collectTitle = true;
    _this._collectHref = true;
    _this._collectCustomElementAttribute = true;
    _this._customElementAttribute = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.customElementAttribute);
    _this._maxElemValLength = 30;
    _this._allowedUnmaskedValuesList = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.allowedUnmaskedValuesList);
    _this._enableUnmaskedValues = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableUnmaskedValues);
    _this._enableElementHierarchy = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableElementHierarchy);
    _this._enableElementCategory = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableElementCategory);
    _this._uniqueIDConfiguration = UniqueIDConfiguration_1.UniqueIDConfiguration.parse(_this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.elementUniqueIDConfiguration));
    return _this;
  }
  /**
   * Getting the Element hash
   * @param elem - dom element
   * @returns {*} - hash value for the element
   */
  _inherits(ElementsCollector, _DataCollector_1$defa);
  return _createClass(ElementsCollector, [{
    key: "getElement",
    value: function getElement(elem) {
      if (this._utils.isUndefinedNull(elem) || elem === document || elem === document.body) {
        return -1; // on mouse events we may get the document object
        // we sometimes get null element - iframes etc
      }
      var hash = -1;
      if (this._elementHashWMap.has(elem)) {
        hash = this._elementHashWMap.get(elem).hash;
      } else {
        var xpath = ElementStrengthen_1.ElementStrengthenInstance.getUniqueElementXpath(elem);
        hash = xpath ? this._utils.getHash(xpath) : -1;
        this._elementHashWMap.set(elem, {
          hash: hash,
          contextList: [this._contextMgr.contextName]
        });
        this._sendElementToServer(elem, hash);
      }
      return hash;
    }
  }, {
    key: "getElementHashFromEvent",
    value: function getElementHashFromEvent(event) {
      var elementTarget = this.getRealEventTarget(event);
      return this.getElement(elementTarget);
    }
  }, {
    key: "getRealEventTarget",
    value: function getRealEventTarget(event) {
      // Try to get the first element from the composedPath (Shadow DOM safe)
      var path = event.composedPath ? event.composedPath() : null;
      // If path exists and has elements, use the first element, otherwise fall back to e.target
      var realTarget = path && path.length > 0 ? path[0] : event.target;
      return realTarget;
    }
    /**
     * for existing elements, check if was sent for the current context
     * @param elem
     */
  }, {
    key: "resendElementPerContext",
    value: function resendElementPerContext(elem) {
      if (!this._elementHashWMap.has(elem)) {
        Logger_1["default"].error("received for resendElementPerContext bad element, not in hash map. id=".concat(elem.id));
        return;
      }
      var elemData = this._elementHashWMap.get(elem);
      var hash = elemData.hash;
      if (elemData.contextList.indexOf(this._contextMgr.contextName) < 0) {
        // the element was already sent for this context, we do not want the server and DB
        // to be swamped with data so we don't sent it in this case
        elemData.contextList.push(this._contextMgr.contextName);
        this._elementHashWMap.set(elem, {
          hash: elemData.hash,
          contextList: elemData.contextList
        });
        this._sendElementToServer(elem, hash);
      }
    }
  }, {
    key: "isListed",
    value: function isListed(elem) {
      return this._elementHashWMap.has(elem);
    }
    /**
     * return block of saved data (context and hash)
     * @param elem
     * @returns {object}
     */
  }, {
    key: "getElementData",
    value: function getElementData(elem) {
      return this._elementHashWMap.get(elem);
    }
    /**
     * return contextList
     * @param elem
     * @returns {[]}
     */
  }, {
    key: "getElementContextList",
    value: function getElementContextList(elem) {
      return this._elementHashWMap.get(elem).contextList;
    }
  }, {
    key: "_sendElementToServer",
    value: function _sendElementToServer(elem, hash) {
      // offset/width/height are sometimes float values
      var position = this._collectPosition ? elem.getBoundingClientRect && elem.getBoundingClientRect() : null;
      var left = -1;
      var top = -1;
      var width = -1;
      var height = -1;
      if (position) {
        left = Math.round(position.left);
        top = Math.round(position.top);
        width = Math.round(position.right - position.left);
        height = Math.round(position.bottom - position.top);
      }
      // the following attributes are always a string, even when not exist they are ""
      var elemId = this._maskingService.maskAbsoluteIfRequired(elem.id, elem.id);
      var elemName = this._maskingService.maskAbsoluteIfRequired(elem.name, elem.id);
      // we are using getAttribute and not class since it is working also on none HTML elements such as SVG.
      // Without it in SVG it returns an object
      var elemClass = this._collectClassName ? elem.getAttribute && this._verifyNoPrivateData(elem.getAttribute('class')) || '' : '';
      var elemTitle = this._collectTitle ? this._verifyNoPrivateData(elem.title) || '' : ''; // title is the tooltip
      var elemTagName = this._verifyNoPrivateData(elem.nodeName) || '';
      var elemHref = this._collectHref ? this._verifyNoPrivateData(elem.href) || '' : ''; // href returns undefined when not exist
      if (elemHref.length > 0) {
        elemHref = this._utils.clearTextFromNumbers(elemHref);
      }
      var elemCustomElementAttribute = this._collectCustomElementAttribute ? elem.getAttribute && this._verifyNoPrivateData(elem.getAttribute(this._customElementAttribute)) || '' : '';
      //we also check if there are customAttributes that need to be masked by checking its name against the masking list
      var maskedElemCustomElementAttribute = this._maskingService.maskAbsoluteIfRequired(elemCustomElementAttribute, elem.id);
      var selectValues = '';
      if (elem.nodeName === 'SELECT') {
        selectValues = this._utils.getDropDownListValues(elem, this._maskingService).join(';');
      }
      // element value should be taken first because that's whats important
      // when the field is loaded if already contains data,
      // other fields not input are less important
      var elemValue = elem.value || elem.textContent || elem.innerHTML || '';
      var unmaskedString = '';
      if (this._enableUnmaskedValues && Array.isArray(this._allowedUnmaskedValuesList) && this._allowedUnmaskedValuesList.length > 0) {
        this._allowedUnmaskedValuesList.forEach(function (listValue) {
          if (typeof listValue !== 'string') {
            Logger_1["default"].error("Unsupported allowedUnmaksedValuesList value was provided: ".concat(listValue.toString()));
          } else if (listValue.toLowerCase() === elemValue.trim().toLowerCase()) {
            unmaskedString = listValue;
          }
        });
      }
      if (elemValue.length > this._maxElemValLength) {
        // This is probably the innerHTML of some DIV / FORM / other element that was
        // clicked in the screen and has no meaning (empty area) and we do not want to collect this data
        elemValue = '';
      } else {
        elemValue = this._maskingService.maskText(elemValue, elem.id);
      }
      var checked = this._utils.isUndefinedNull(elem.checked) ? -1 : elem.checked ? 1 : 0;
      var time = this.getEventTimestamp();
      var elementHierarchyAndIndex = this.enableElementHierarchy ? ElementStrengthen_1.ElementStrengthenInstance.getUniqueElementId(elem, this._uniqueIDConfiguration) : '';
      var category = this._enableElementCategory ? this._categoryService.categoryField(elem) : '';
      this._dataQueue.addToQueue('elements', [this._contextMgr.contextHash, hash, elemTagName || '', elemId || '', elemName || '', elem.type || '', left || 0, top || 0, width || 0, height || 0, elemClass || '', elemHref || '', elemTitle || '', elem.alt || '', selectValues || '', elemValue || '', checked, time, maskedElemCustomElementAttribute || elemCustomElementAttribute, unmaskedString, elementHierarchyAndIndex, category], false);
      Logger_1["default"].isDebug() && Logger_1["default"].debug('adding element id:' + elemId + ', name:' + elemName + ', type:' + elem.type + ', width:' + width + ', height:' + height + ', left:' + left + ', top:' + top + ', hash: ' + hash);
    }
  }, {
    key: "_verifyNoPrivateData",
    value: function _verifyNoPrivateData(data) {
      if (/\d\d\d/.test(data)) {
        return this._utils.clearTextFromNumbers(data);
      }
      return data;
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      this._collectPosition = typeof this._configurationRepository.get('isElementsPosition') === 'boolean' ? this._configurationRepository.get('isElementsPosition') : this._collectPosition;
      this._collectClassName = typeof this._configurationRepository.get('isElementsClassName') === 'boolean' ? this._configurationRepository.get('isElementsClassName') : this._collectClassName;
      this._collectTitle = typeof this._configurationRepository.get('isElementsTitle') === 'boolean' ? this._configurationRepository.get('isElementsTitle') : this._collectTitle;
      this._collectHref = typeof this._configurationRepository.get('isElementsHref') === 'boolean' ? this._configurationRepository.get('isElementsHref') : this._collectHref;
      this._collectCustomElementAttribute = typeof this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.collectCustomElementAttribute) === 'boolean' ? this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.collectCustomElementAttribute) : this._collectCustomElementAttribute;
      this._customElementAttribute = typeof this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.customElementAttribute) === 'string' ? this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.customElementAttribute) : this._customElementAttribute;
      this._maxElemValLength = this._configurationRepository.get('maxElValLen') ? this._configurationRepository.get('maxElValLen') : this._maxElemValLength;
      this._allowedUnmaskedValuesList = this._configurationRepository.get('allowedUnmaskedValuesList') ? this._configurationRepository.get('allowedUnmaskedValuesList') : this._allowedUnmaskedValuesList;
      this._enableUnmaskedValues = this._configurationRepository.get('enableUnmaskedValues') ? this._configurationRepository.get('enableUnmaskedValues') : this._enableUnmaskedValues;
      this._enableElementHierarchy = typeof this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableElementHierarchy) === 'boolean' ? this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableElementHierarchy) : this._enableElementHierarchy;
      this._enableElementCategory = typeof this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableElementCategory) === 'boolean' ? this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableElementCategory) : this._enableElementCategory;
      this._uniqueIDConfiguration = typeof this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.elementUniqueIDConfiguration) === 'string' ? UniqueIDConfiguration_1.UniqueIDConfiguration.parse(this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.elementUniqueIDConfiguration)) : this._uniqueIDConfiguration;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = ElementsCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/Event.js":
/*!****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/Event.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDUtils_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/CDUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/CDUtils.js"));
var Event = /*#__PURE__*/function () {
  function Event() {
    _classCallCheck(this, Event);
  }
  return _createClass(Event, [{
    key: "getEventTimestamp",
    value:
    // There is a bug in jquery (1.7.1) that timestamp doesn't work correctly (ie, firefox)
    // The bug is defined in http://bugs.jquery.com/ticket/10755
    // The timestamp in FF is from the opening of the browser
    // timestamp doesn't always exist
    function getEventTimestamp() {
      return CDUtils_1["default"].dateNow();
    }
  }, {
    key: "getTimestampFromEvent",
    value: function getTimestampFromEvent(e) {
      return e.timeStamp ? CDUtils_1["default"].cutDecimalPointDigits(e.timeStamp, 3) : 0;
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {}
  }, {
    key: "processElements",
    value: function processElements(elements, isChange, elementsHandler, resendMethod, getMethod) {
      elements.forEach(function (element) {
        var isListed = elementsHandler.isListed(element);
        if (isListed && !isChange) {
          resendMethod.call(elementsHandler, element);
        } else if (!isListed) {
          getMethod.call(elementsHandler, element, false);
        }
      });
    }
  }]);
}();
exports["default"] = Event;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/FormEvents.js":
/*!*********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/FormEvents.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.onFormSelectors = void 0;
var Event_1 = __importDefault(__webpack_require__(/*! ./Event */ "./dist/js-sdk-legacy/src/main/collectors/events/Event.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
exports.onFormSelectors = 'form';
var FormEvents = /*#__PURE__*/function (_Event_1$default) {
  /**
   *
   * @param sendToQueue
   * @param MessageBus
   * @param StandardOnFormEventsEmitter
   */
  function FormEvents(sendToQueue, MessageBus, StandardOnFormEventsEmitter, maxShadowDepth, iframeLoadingTimeout) {
    var _this;
    _classCallCheck(this, FormEvents);
    _this = _callSuper(this, FormEvents);
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleOnFormEvents", function (e) {
      Logger_1["default"].trace('ElementEvents:_onFormSubmitEvent');
      _this._sendToQueue(e, {
        length: 0,
        selected: -1,
        elementValues: ''
      });
    });
    _this._sendToQueue = sendToQueue;
    _this._messageBus = MessageBus;
    _this._StandardOnFormEventsEmitter = StandardOnFormEventsEmitter;
    _this._maxShadowDepth = maxShadowDepth;
    _this._iframeLoadingTimeout = iframeLoadingTimeout;
    return _this;
  }
  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(FormEvents, _Event_1$default);
  return _createClass(FormEvents, [{
    key: "bind",
    value: function bind(browserContext) {
      var _this2 = this;
      var doc = browserContext.getDocument();
      browserContext.collectAllElementsBySelectorAsync(exports.onFormSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onFormElements) {
        _this2._StandardOnFormEventsEmitter.start(_onFormElements);
      });
      this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.StandardOnFormSubmitEvent, this.handleOnFormEvents);
    }
    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "unbind",
    value: function unbind(browserContext) {
      var _this3 = this;
      browserContext.collectAllElementsBySelectorAsync(exports.onFormSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onFormElements) {
        _this3._StandardOnFormEventsEmitter.stop(_onFormElements);
      });
      this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.StandardOnFormSubmitEvent, this.handleOnFormEvents);
    }
  }]);
}(Event_1["default"]);
exports["default"] = FormEvents;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/InputEvents.js":
/*!**********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/InputEvents.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.inputSelectors = void 0;
var Event_1 = __importDefault(__webpack_require__(/*! ./Event */ "./dist/js-sdk-legacy/src/main/collectors/events/Event.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
exports.inputSelectors = "input:not([type='color']):not([type='hidden']):not([type='file']):not" + "([type='image']):not([type='button']):not([type='radio']):not([type='checkbox']), textarea";
/**
 * Private instance of the input events data collector
 * @param eventEmitter
 * @param maxShadowDepth
 * @returns {{applyAction: _applyAction}}
 * @private
 */
var _InputEventsCollector = function _InputEventsCollector(eventEmitter, maxShadowDepth, iframeLoadingTimeout) {
  function _applyAction(browserContext, action, shouldSkipElement) {
    var supportedActions = ['start', 'stop'];
    if (!supportedActions.includes(action)) return false;
    browserContext.collectAllElementsBySelectorAsync(exports.inputSelectors, maxShadowDepth, iframeLoadingTimeout).then(function (elements) {
      if (elements.length > 0) {
        eventEmitter[action](elements, browserContext.Context, shouldSkipElement);
      }
    });
  }
  return {
    applyAction: _applyAction
  };
};
/**
 * InputEvents Data Collector. Controlled by ElementsEvent Data Collector
 */
var InputEvents = /*#__PURE__*/function (_Event_1$default) {
  function InputEvents(elements, sendToQueue, CDUtils, MessageBus, StandardInputEventsEmitter, SyntheticMaskInputEventsHandler, SyntheticAutotabInputEventsHandler, MaskingService, maxShadowDepth, iframeLoadingTimeout) {
    var _this;
    _classCallCheck(this, InputEvents);
    _this = _callSuper(this, InputEvents);
    /**
     * Receive the requested event from the handler
     */
    _defineProperty(_this, "handleInputEvents", function (e) {
      if (e.constructor.name === 'InputEvent') {
        _this._inputEventsPerElement.set(e.target, {});
      }
      var newValue = e.target.value || '';
      if (newValue !== '') {
        // mask all chars, but preserve length
        newValue = _this._maskingService.maskText(newValue, e.target.id);
      }
      _this._sendToQueue(e, {
        length: newValue ? newValue.length : 0,
        elementValues: newValue,
        selected: -1
      });
    });
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleFocusBlurEvents", function (e) {
      _this._sendToQueue(e, {
        length: 0,
        selected: -1,
        elementValues: ''
      });
    });
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleSyntheticInputEvents", function (e) {
      // jQuery autotab plugin special handling!
      // Backspace keys are not reported as custom input events in case of jQuery autotab plugin is applied on
      // the current target.
      // This allows any other subsequent custom key events (that are not backspace) to be reported as
      // input events despite having the current target hashed in _inputEventNameTags
      if (!!_this._inputEventsPerElement.has(e.target) && !(typeof e.jQueryMask !== 'undefined' && (e.jQueryMask === 'autotab' || e.jQueryMask === 'prasleyValidator'))) {
        return;
      }
      var newValue = e.target.value || '';
      if (newValue !== '') {
        // mask all chars, but preserve length
        newValue = _this._maskingService.maskText(newValue, e.target.id);
      }
      _this._sendToQueue(e, {
        length: newValue ? newValue.length : 0,
        elementValues: newValue,
        selected: -1
      });
    });
    _this._elements = elements;
    _this._sendToQueue = sendToQueue;
    _this._messageBus = MessageBus;
    _this._CDUtils = CDUtils;
    _this._StandardInputEventsEmitter = StandardInputEventsEmitter;
    _this._SyntheticMaskInputEventsHandler = SyntheticMaskInputEventsHandler;
    _this._SyntheticAutotabInputEventsHandler = SyntheticAutotabInputEventsHandler;
    _this._maskingService = MaskingService;
    _this._inputEventsPerElement = new WeakMap();
    _this._maxShadowDepth = maxShadowDepth;
    _this._iframeLoadingTimeout = iframeLoadingTimeout;
    return _this;
  }
  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(InputEvents, _Event_1$default);
  return _createClass(InputEvents, [{
    key: "bind",
    value: function bind(browserContext) {
      this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.StandardInputEvent, this.handleInputEvents);
      this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.StandardInputFocusEvent, this.handleFocusBlurEvents);
      this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.StandardInputBlurEvent, this.handleFocusBlurEvents);
      this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.SyntheticInputMaskEvent, this.handleSyntheticInputEvents);
      _InputEventsCollector(this._StandardInputEventsEmitter, this._maxShadowDepth, this._iframeLoadingTimeout).applyAction(browserContext, 'start');
      _InputEventsCollector(this._SyntheticMaskInputEventsHandler, this._maxShadowDepth, this._iframeLoadingTimeout).applyAction(browserContext, 'start');
      _InputEventsCollector(this._SyntheticAutotabInputEventsHandler, this._maxShadowDepth, this._iframeLoadingTimeout).applyAction(browserContext, 'start');
    }
    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "unbind",
    value: function unbind(browserContext) {
      _InputEventsCollector(this._StandardInputEventsEmitter, this._maxShadowDepth, this._iframeLoadingTimeout).applyAction(browserContext, 'stop');
      _InputEventsCollector(this._SyntheticMaskInputEventsHandler, this._maxShadowDepth, this._iframeLoadingTimeout).applyAction(browserContext, 'stop');
      _InputEventsCollector(this._SyntheticAutotabInputEventsHandler, this._maxShadowDepth, this._iframeLoadingTimeout).applyAction(browserContext, 'stop');
      this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.StandardInputEvent, this.handleInputEvents);
      this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.StandardInputFocusEvent, this.handleFocusBlurEvents);
      this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.StandardInputBlurEvent, this.handleFocusBlurEvents);
      this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.SyntheticInputMaskEvent, this.handleSyntheticInputEvents);
    }
    /**
     * @param {BrowserContext} browserContext
     * @param isChange
     */
  }, {
    key: "addOnLoadInputData",
    value: function addOnLoadInputData(browserContext, isChange) {
      var _this2 = this;
      browserContext.collectAllElementsBySelectorAsync(exports.inputSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (elements) {
        _this2.processElements(elements, isChange, _this2._elements, _this2._elements.resendElementPerContext, _this2._elements.getElement);
      });
    }
  }]);
}(Event_1["default"]);
exports["default"] = InputEvents;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/IsTrustedValue.js":
/*!*************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/IsTrustedValue.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.IsTrustedValue = void 0;
exports.IsTrustedValue = {
  "false": 0,
  "true": 1,
  undefined: 2,
  "null": 2
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/KeyEventCollector.js":
/*!****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/KeyEventCollector.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = exports.KeyEventType = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var IsTrustedValue_1 = __webpack_require__(/*! ./IsTrustedValue */ "./dist/js-sdk-legacy/src/main/collectors/events/IsTrustedValue.js");
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var SameCharService_1 = __webpack_require__(/*! ../../services/SameCharService */ "./dist/js-sdk-legacy/src/main/services/SameCharService.js");
var KeyRegionsStringTable_1 = __webpack_require__(/*! ./KeyRegionsStringTable */ "./dist/js-sdk-legacy/src/main/collectors/events/KeyRegionsStringTable.js");
var featureSettings = {
  configKey: 'isKeyEvents',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInSlave: true,
  runInLean: true,
  runInUns: false,
  isRunning: false,
  instance: null
};
exports.KeyEventType = {
  keyup: 0,
  keydown: 1,
  keypress: 2
};
var DEFAULT_KEY_REGION_VALUE = '-1';
exports.EventStructure = ['eventSequence', 'timestamp', 'eventType', 'isTrusted', 'elementHash', 'charCode', 'character', 'keyComboType', 'isCtrl', 'isShift', 'isAlt', 'isMetaKey', 'keyLocation', 'code', 'key', 'isRepeat', 'keyRegion', 'relativeTime', 'isSameKey'];
var KeyEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function KeyEventCollector(configurationRepository, utils, elements, dataQueue, msgbus, sameCharService, maskingService, startupConfigurations) {
    var _this;
    _classCallCheck(this, KeyEventCollector);
    _this = _callSuper(this, KeyEventCollector);
    _this._configurationRepository = configurationRepository;
    _this._utils = utils;
    _this._elements = elements;
    _this._dataQueue = dataQueue;
    _this._msgBus = msgbus;
    _this._sameCharService = sameCharService;
    _this._maskingService = maskingService;
    _this._maxShadowDepth = startupConfigurations.getMaxShadowDepth();
    _this._iframeLoadingTimeout = startupConfigurations.getIframeLoadingTimeout();
    // ctrl+c, ctrl+v, ctrl+a, ctrl+x, ctrl+z, ctrl+p, ctrl+s
    _this.comboCodes = ['c', 'v', 'a', 'x', 'z', 'p', 's'];
    _this._onKeyEvent = _this._onKeyEvent.bind(_this);
    _this._useCaptureEvents = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isCaptureKeyEvents);
    _this._listeners = [];
    _this._listenedDocuments = new WeakSet();
    return _this;
  }
  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(KeyEventCollector, _DataCollector_1$defa);
  return _createClass(KeyEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      var _this2 = this;
      try {
        var currDocument = browserContext.getDocument();
        this._bind(currDocument, this._onKeyEvent, this._useCaptureEvents);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            if (iframe && iframe.contentDocument) {
              _this2._bind(iframe.contentDocument, _this2._onKeyEvent, _this2._useCaptureEvents);
            }
          });
        });
      } catch (err) {
        Logger_1["default"].error("KeyEvents:startFeature failed, msg: ".concat(err.message), err);
      }
    }
    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      var _this3 = this;
      try {
        var currDocument = browserContext.getDocument();
        this._unbind(currDocument);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            if (iframe && iframe.contentDocument) {
              _this3._unbind(iframe.contentDocument);
            }
          });
        });
      } catch (err) {
        Logger_1["default"].error("KeyEvents:stopFeature failed, msg: ".concat(err.message), err);
      }
    }
    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig(browserContext) {
      try {
        if (this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isCaptureKeyEvents) !== this._useCaptureEvents) {
          var currDocument = browserContext.getDocument();
          var useCaptureEvents = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isCaptureKeyEvents);
          // Remove current subscribers
          this._unbind(currDocument);
          // Subscribe using the new capture definition
          this._bind(currDocument, this._onKeyEvent, useCaptureEvents);
          this._useCaptureEvents = useCaptureEvents;
        }
      } catch (err) {
        Logger_1["default"].error("KeyEvents:startFeature failed, msg: ".concat(err.message), err);
      }
    }
  }, {
    key: "_bind",
    value: function _bind(document, handler, isCapture) {
      if (this._listenedDocuments.has(document)) {
        return; // Already added
      }
      this._listenedDocuments.add(document);
      this._addListener(document, 'keyup', handler, isCapture);
      this._addListener(document, 'keydown', handler, isCapture);
      this._addListener(document, 'keypress', handler, isCapture);
    }
  }, {
    key: "_unbind",
    value: function _unbind(document) {
      this._listenedDocuments["delete"](document);
      this._removeAllListeners(document, 'keyup');
      this._removeAllListeners(document, 'keydown');
      this._removeAllListeners(document, 'keypress');
    }
  }, {
    key: "_addListener",
    value: function _addListener(target, type, handler, options) {
      target.addEventListener(type, handler, options);
      this._listeners.push({
        target: target,
        type: type,
        handler: handler,
        options: options
      });
    }
  }, {
    key: "_removeAllListeners",
    value: function _removeAllListeners(target, type) {
      this._listeners.filter(function (l) {
        return l.target === target && l.type === type;
      }).forEach(function (l) {
        l.target.removeEventListener(l.type, l.handler, l.options);
      });
      this._listeners = this._listeners.filter(function (l) {
        return !(l.target === target && l.type === type);
      });
    }
  }, {
    key: "_onKeyEvent",
    value: function _onKeyEvent(e) {
      var type = exports.KeyEventType[e.type];
      if (type === exports.KeyEventType.keydown || type === exports.KeyEventType.keyup) {
        this._msgBus.publish(MessageBusEventType_1.MessageBusEventType.KeyEvent, {
          action: type
        });
      }
      this._handleKeyEvent(e, 'key_events');
    }
  }, {
    key: "_handleKeyEvent",
    value: function _handleKeyEvent(e, eventName) {
      //get element id for masking
      var element = this._elements.getRealEventTarget(e);
      var elementID = element.id;
      var eventType = exports.KeyEventType[e.type];
      if (this._utils.isUndefinedNull(eventType)) {
        eventType = -1;
      }
      var eventSequence = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var timestamp = this.getEventTimestamp(e);
      var eventKey = e.key || this._maskingService.getKeyFromLegacyProperties(e);
      var eventCode = e.code || '';
      var KeyMaskedParameters = this._maskingService.maskKey(eventKey, eventCode, elementID);
      var character = KeyMaskedParameters.key.length > 1 ? '' : KeyMaskedParameters.key;
      var elementHash = this._elements.getElementHashFromEvent(e);
      // make sure it doesn't count double
      var keyComboType = this._getComboType(e, eventKey); // only on keydown
      var isTrusted = IsTrustedValue_1.IsTrustedValue[e.isTrusted];
      var metaKey = e.key === 'Meta' || e.key === 'OS' || e.key === 'Win' || e.metaKey || e.keyCode === 91 || e.keyCode === 92;
      var keyRegion = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.collectKeyRegionValue) ? this._getKeyRegion(eventCode) : DEFAULT_KEY_REGION_VALUE;
      var relativeTs = this.getTimestampFromEvent(e);
      var isSameKey = SameCharService_1.SameCharType.undefined;
      if (e.type === 'keypress') {
        isSameKey = this._sameCharService.compare(e.target, e.key);
        this._sameCharService.update(e.target, e.key);
      }
      // the if is for performance optimization
      if (Logger_1["default"].isDebug()) {
        Logger_1["default"].trace("onKeyEvent: got event: ".concat(eventType, ", at time:").concat(timestamp, ", key: ").concat(KeyMaskedParameters.key, ", code:").concat(KeyMaskedParameters.code, ", old charCode:").concat(KeyMaskedParameters.charCode));
      }
      this._dataQueue.addToQueue(eventName, this._utils.convertToArrayByMap(exports.EventStructure, {
        eventType: eventType,
        eventSequence: eventSequence,
        timestamp: timestamp,
        charCode: KeyMaskedParameters.charCode,
        character: character,
        elementHash: elementHash,
        keyComboType: keyComboType,
        isTrusted: isTrusted,
        isCtrl: e.ctrlKey || false,
        isShift: e.shiftKey || false,
        isAlt: e.altKey || false,
        isMetaKey: metaKey || false,
        keyLocation: e.location || 0,
        code: KeyMaskedParameters.code || '',
        key: KeyMaskedParameters.key || '',
        location: e.location || '',
        isRepeat: e.repeat || false,
        keyRegion: keyRegion,
        relativeTime: relativeTs,
        isSameKey: isSameKey
      }));
    }
  }, {
    key: "_getKeyRegion",
    value: function _getKeyRegion(code) {
      return KeyRegionsStringTable_1.KeyRegionsStringTable[code] ? KeyRegionsStringTable_1.KeyRegionsStringTable[code] : DEFAULT_KEY_REGION_VALUE;
    }
  }, {
    key: "_getComboType",
    value: function _getComboType(e, eventKey) {
      return (e.ctrlKey || e.metaKey) && eventKey !== undefined ? this.comboCodes.indexOf(eventKey) : -1;
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = KeyEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/KeyRegionsStringTable.js":
/*!********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/KeyRegionsStringTable.js ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.KeyRegionsStringTable = void 0;
/**
 * This table will give more information about the whe user uses the keyboard, by mapping
 * keyboard regions - each region of physical keys receives a key
 *
 */
exports.KeyRegionsStringTable = {
  'IntlBackslash': '0',
  'Digit1': '0',
  'Digit2': '0',
  'Digit3': '0',
  'Digit4': '1',
  'Digit5': '1',
  'Digit6': '1',
  'Digit7': '1',
  'Digit8': '2',
  'Digit9': '2',
  'Digit0': '2',
  'KeyQ': '3',
  'KeyW': '3',
  'KeyE': '3',
  'KeyA': '3',
  'KeyS': '3',
  'KeyD': '3',
  'KeyZ': '3',
  'KeyX': '3',
  'KeyC': '3',
  'KeyR': '4',
  'KeyT': '4',
  'KeyF': '4',
  'KeyG': '4',
  'KeyV': '4',
  'KeyB': '4',
  'KeyY': '5',
  'KeyU': '5',
  'KeyH': '5',
  'KeyJ': '5',
  'KeyN': '5',
  'KeyM': '5',
  'KeyI': '6',
  'KeyO': '6',
  'KeyP': '6',
  'KeyK': '6',
  'KeyL': '6',
  'Comma': '6',
  'Period': '6',
  'Semicolon': '7',
  'Minus': '7',
  'Equal': '7',
  'Slash': '7',
  'BracketLeft': '7',
  'Backslash': '7',
  'BracketRight': '7',
  'Quote': '7',
  'NumLock': '8',
  'NumpadDivide': '8',
  'NumpadMultiply': '8',
  'NumpadSubtract': '8',
  'NumpadAdd': '8',
  'NumpadEnter': '8',
  'NumpadDecimal': '8',
  'Numpad0': '8',
  'Numpad1': '8',
  'Numpad2': '8',
  'Numpad3': '8',
  'Numpad4': '8',
  'Numpad5': '8',
  'Numpad6': '8',
  'Numpad7': '8',
  'Numpad8': '8',
  'Numpad9': '8'
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/LightSensorEventCollector.js":
/*!************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/LightSensorEventCollector.js ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = void 0;
/**
 * the sensor reading happens all the time, we don't need all the readings
 * @type {number}
 */
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var featureSettings = {
  configKey: 'isLightSensor',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var SENSOR_EVENT_THRESHOLD = 5000;
exports.EventStructure = ['eventSequence', 'timestamp', 'illuminance'];
var LightSensorEvents = /*#__PURE__*/function (_DataCollector_1$defa) {
  function LightSensorEvents(dataQueue, utils, configurationRepository) {
    var _this;
    _classCallCheck(this, LightSensorEvents);
    _this = _callSuper(this, LightSensorEvents);
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._configurationRepository = configurationRepository;
    _this._eventThreshold = _this._configurationRepository.get('lightSensorEventThreshold') || SENSOR_EVENT_THRESHOLD;
    _this._lastTime = 0;
    // Bind the event handlers
    _this.onReadingSensorBoundble = _this._onReadingSensor.bind(_this);
    return _this;
  }
  _inherits(LightSensorEvents, _DataCollector_1$defa);
  return _createClass(LightSensorEvents, [{
    key: "_onReadingSensor",
    value: function _onReadingSensor() {
      var time = this.getEventTimestamp();
      if (time - this._lastTime > this._eventThreshold) {
        var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
        this._lastTime = time;
        this._dataQueue.addToQueue('ambient_light_level', this._utils.convertToArrayByMap(exports.EventStructure, {
          eventSequence: eventSeq,
          timestamp: time,
          illuminance: this._sensor.illuminance
        }));
      }
    }
  }, {
    key: "startFeature",
    value: function startFeature() {
      if (!window.AmbientLightSensor) {
        Logger_1["default"].debug('LightSensor does not exist, not collecting');
        return;
      }
      Logger_1["default"].info('AmbientLightSensor exists and collected');
      this._sensor = new AmbientLightSensor();
      this._sensor.addEventListener('reading', this.onReadingSensorBoundble, true);
      this._sensor.addEventListener('error', LightSensorEvents._onSensorError, true);
      this._sensor.start();
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      if (this._sensor) {
        this._sensor.removeEventListener('reading', this.onReadingSensorBoundble, true);
        this._sensor.removeEventListener('error', LightSensorEvents._onSensorError, true);
        this._sensor.stop();
        this._sensor = null;
      }
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      this._eventThreshold = this._configurationRepository.get('lightSensorEventThreshold') ? this._configurationRepository.get('lightSensorEventThreshold') : this._eventThreshold;
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }, {
    key: "_onSensorError",
    value: function _onSensorError(event) {
      Logger_1["default"].debug("Error connecting LightSensor ".concat(event.error));
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = LightSensorEvents;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/LocationCollector.js":
/*!****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/LocationCollector.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = void 0;
/**
 * Collect the user permissions granted to the domain. The permissions are per domain and
 * different from browser to browser. There are 3 possible values: granted, prompt, denied
 *  Supported in: Chrome, FF, Opera
 *  collecting the Geolocation of the user only if the permissions is granted
 */
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var featureSettings = {
  configKey: 'isLocationEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
exports.EventStructure = ['eventSequence', 'timestamp', 'longitude', 'latitude', 'accuracy', 'speed', 'provider'];
var LocationCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function LocationCollector(dataQ, utils, configurationRepository) {
    var _this;
    var navigator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : window.navigator;
    _classCallCheck(this, LocationCollector);
    _this = _callSuper(this, LocationCollector);
    _defineProperty(_this, "_subscribeForLocationEvents", function () {
      // Unsubscribe from any existing events
      _this._unsubscribeFromLocationEvents();
      _this._watcherID = _this._navigator.geolocation.watchPosition(_this._onGeoLocationPositionEvent, _this._onGeoLocationPositionError);
      // Cancel an existing timeouts before setting up a new one
      _this._clearLocationEventsTimeout();
      _this._locationEventsTimeoutID = setTimeout(function () {
        _this._unsubscribeFromLocationEvents();
      });
    });
    _defineProperty(_this, "_unsubscribeFromLocationEvents", function () {
      _this._clearLocationEventsTimeout();
      // If there is no watch we abort at this point.
      if (!_this._watcherID) {
        return;
      }
      _this._navigator.geolocation.clearWatch(_this._watcherID);
      _this._watcherID = null;
    });
    _defineProperty(_this, "_onGeoLocationPositionEvent", function (position) {
      _this._sendData(position);
    });
    _defineProperty(_this, "_onGeoLocationPositionError", function (err) {
      Logger_1["default"].warn("Failed getting geolocation with code ".concat(err.code, ". ").concat(err.message));
    });
    _this._configurationRepository = configurationRepository;
    _this._locationEventsTimeoutMsec = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.locationEventsTimeoutMsec);
    _this._utils = utils;
    _this._dataQ = dataQ;
    _this._navigator = navigator;
    _this._watcherID = null;
    _this._locationEventsTimeoutID = null;
    return _this;
  }
  _inherits(LocationCollector, _DataCollector_1$defa);
  return _createClass(LocationCollector, [{
    key: "startFeature",
    value: function startFeature() {
      this._subscribeForLocationIfPermissionGranted();
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._unsubscribeFromLocationEvents();
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      try {
        if (this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.locationEventsTimeoutMsec) !== this._locationEventsTimeoutMsec) {
          this._locationEventsTimeoutMsec = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.locationEventsTimeoutMsec);
        }
      } catch (err) {
        Logger_1["default"].error("LocationEvents: updateFeatureConfig failed, msg: ".concat(err.message), err);
      }
    }
  }, {
    key: "_subscribeForLocationIfPermissionGranted",
    value: function _subscribeForLocationIfPermissionGranted() {
      var _this2 = this;
      if (this._navigator.permissions && this._navigator.permissions.query) {
        this._navigator.permissions.query({
          name: 'geolocation'
        }).then(function (result) {
          if (result.state === 'granted') {
            _this2._subscribeForLocationEvents();
          } else {
            Logger_1["default"].info('location permission is denied. Location data will not be collected');
          }
        })["catch"](function (ex) {
          Logger_1["default"].error("Failed querying for geolocation permission. ".concat(ex.message));
        });
      }
    }
  }, {
    key: "_clearLocationEventsTimeout",
    value: function _clearLocationEventsTimeout() {
      if (this._locationEventsTimeoutID) {
        clearTimeout(this._locationEventsTimeoutID);
      }
      this._locationEventsTimeoutID = null;
    }
  }, {
    key: "_sendData",
    value: function _sendData(pos) {
      var crd = pos.coords;
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var time = this.getEventTimestamp();
      this._dataQ.addToQueue('location_events', this._utils.convertToArrayByMap(exports.EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        longitude: crd.longitude || -1,
        latitude: crd.latitude || -1,
        accuracy: crd.accuracy || -1,
        speed: crd.speed || -1,
        provider: ''
      }));
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = LocationCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/MouseEventCollector.js":
/*!******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/MouseEventCollector.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = exports.MouseEventType = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var IsTrustedValue_1 = __webpack_require__(/*! ./IsTrustedValue */ "./dist/js-sdk-legacy/src/main/collectors/events/IsTrustedValue.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MaskingService_1 = __webpack_require__(/*! ../../core/masking/MaskingService */ "./dist/js-sdk-legacy/src/main/core/masking/MaskingService.js");
var featureSettings = {
  configKey: 'isMouseEvents',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInSlave: true,
  runInLean: true,
  runInUns: false,
  isRunning: false,
  instance: null
};
exports.MouseEventType = {
  mousemove: 0,
  mousedown: 1,
  mouseup: 2,
  click: 3,
  dblclick: 4,
  mouseleave: 5,
  mouseenter: 6,
  wheel: 7,
  mouseout: 8,
  mouseover: 9
};
exports.EventStructure = ['eventSequence', 'timestamp', 'eventType', 'isTrusted', 'elementHash', 'pageX', 'pageY', 'screenX', 'screenY', 'button', 'wheelDelta', 'clientX', 'clientY', 'eventDetail', 'buttonNew', 'relativeTime'];
var MouseEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function MouseEventCollector(utils, domUtils, elements, dataQueue, maskingService, configuration) {
    var _this;
    _classCallCheck(this, MouseEventCollector);
    _this = _callSuper(this, MouseEventCollector);
    // remembers the last button so that ie will know which click was clicked.
    _defineProperty(_this, "_lastButton", void 0);
    _defineProperty(_this, "_getMouseEvent", function (e) {
      var button = e.which;
      if (e.type === 'mouseup') {
        // remembers the last button so that IE will know which click was clicked.
        _this._lastButton = button;
      } else if (e.type === 'click' && button === 0) {
        // So IE will know which click was clicked.
        button = _this._lastButton;
      }
      var eventType = exports.MouseEventType[e.type];
      if (_this._utils.isUndefinedNull(eventType)) {
        eventType = -1;
      }
      var wheelDelta = e.deltaY || e.deltaX || e.deltaZ || e.wheelDelta || 0;
      var relativeTs = _this.getTimestampFromEvent(e);
      // we are not using CDUtils.convertToArrayByMap here for optimization reasons
      _this._dataQueue.addToQueue('mouse_events', [null, _this._utils.StorageUtils.getAndUpdateEventSequenceNumber(), _this.getEventTimestamp(e), eventType, IsTrustedValue_1.IsTrustedValue[e.isTrusted], e.type === 'mousemove' ? 0 : _this._elements.getElementHashFromEvent(e), _this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : _this._roundCoordinate(e.pageX), _this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : _this._roundCoordinate(e.pageY), _this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : _this._roundCoordinate(e.screenX), _this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : _this._roundCoordinate(e.screenY), button === null || button === undefined ? -1 : button,
      // In 2.0 the data team is not ready to handle vector yet. In 2.1 we should change it to be a vector
      Math.round(wheelDelta), _this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : _this._roundCoordinate(e.clientX), _this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : _this._roundCoordinate(e.clientY), e.detail || 0,
      // For mousedown or mouseup events, UIEvent.detail is 1 plus the current click count.
      // For all other UIEvent objects, UIEvent.detail is always zero.
      // We are using it since in Angular sites (AMEX) we are getting a click both on the
      // upper wrapper div which is transferred to the input. The way to distinguish between them
      // (besides the different element hash) is to look also on the event.detail
      e.button === null || e.button === undefined ? -1 : e.button, relativeTs]);
    });
    _this._utils = utils;
    _this._domUtils = domUtils;
    _this._elements = elements;
    _this._dataQueue = dataQueue;
    _this._maskingService = maskingService;
    _this._maxShadowDepth = configuration.getMaxShadowDepth();
    _this._iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
    _this._listenedDocuments = new WeakSet();
    return _this;
  }
  _inherits(MouseEventCollector, _DataCollector_1$defa);
  return _createClass(MouseEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      var _this2 = this;
      try {
        var currDocument = browserContext.getDocument();
        this._addEventListeners(browserContext, currDocument);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            if (iframe && iframe.contentDocument) {
              _this2._addEventListeners(browserContext, iframe.contentDocument);
            }
          });
        });
      } catch (err) {
        Logger_1["default"].error("MouseEvents:startFeature failed. msg: ".concat(err.message), err);
      }
    }
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      var _this3 = this;
      try {
        var currDocument = browserContext.getDocument();
        this._removeEventListeners(currDocument);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            if (iframe && iframe.contentDocument) {
              _this3._removeEventListeners(iframe.contentDocument);
            }
          });
        });
      } catch (err) {
        Logger_1["default"].error("MouseEvents:stopFeature failed. msg: ".concat(err.message), err);
      }
    }
  }, {
    key: "_addEventListeners",
    value: function _addEventListeners(browserContext, currentDocument) {
      var _this4 = this;
      if (this._listenedDocuments.has(currentDocument)) {
        return; // Already added
      }
      this._listenedDocuments.add(currentDocument);
      this._domUtils.addEventListener(currentDocument, 'mousemove', this._getMouseEvent, true);
      this._domUtils.addEventListener(currentDocument, 'mousedown', this._getMouseEvent, true);
      this._domUtils.addEventListener(currentDocument, 'mouseup', this._getMouseEvent, true);
      this._domUtils.addEventListener(currentDocument, 'click', this._getMouseEvent, true);
      this._domUtils.addEventListener(currentDocument, 'dblclick', this._getMouseEvent, true);
      this._isIE = !!currentDocument.documentMode || /edge/.test(window.navigator.userAgent.toLowerCase());
      if (this._isIE) {
        // mouseleave and mouseenter events in IE and edge only work on the body and not
        // on the entire document
        this._domUtils.onDocumentBody(browserContext.Context, function () {
          _this4._domUtils.addEventListener(currentDocument.body, 'mouseleave', _this4._getMouseEvent);
          _this4._domUtils.addEventListener(currentDocument.body, 'mouseenter', _this4._getMouseEvent);
        });
      } else {
        this._domUtils.addEventListener(currentDocument, 'mouseleave', this._getMouseEvent);
        this._domUtils.addEventListener(currentDocument, 'mouseenter', this._getMouseEvent);
      }
      this._domUtils.addEventListener(currentDocument, 'wheel', this._getMouseEvent, true);
    }
  }, {
    key: "_removeEventListeners",
    value: function _removeEventListeners(currentDocument) {
      this._listenedDocuments["delete"](currentDocument);
      this._domUtils.removeEventListener(currentDocument, 'mousemove', this._getMouseEvent, true);
      this._domUtils.removeEventListener(currentDocument, 'mousedown', this._getMouseEvent, true);
      this._domUtils.removeEventListener(currentDocument, 'mouseup', this._getMouseEvent, true);
      this._domUtils.removeEventListener(currentDocument, 'click', this._getMouseEvent, true);
      this._domUtils.removeEventListener(currentDocument, 'dblclick', this._getMouseEvent, true);
      if (this._isIE) {
        this._domUtils.removeEventListener(currentDocument.body, 'mouseleave', this._getMouseEvent);
        this._domUtils.removeEventListener(currentDocument.body, 'mouseenter', this._getMouseEvent);
      } else {
        this._domUtils.removeEventListener(currentDocument, 'mouseleave', this._getMouseEvent);
        this._domUtils.removeEventListener(currentDocument, 'mouseenter', this._getMouseEvent);
      }
      this._domUtils.removeEventListener(currentDocument, 'wheel', this._getMouseEvent, true);
    }
  }, {
    key: "_roundCoordinate",
    value: function _roundCoordinate(coordinate) {
      if (coordinate) {
        return Math.round(coordinate);
      }
      return -1;
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = MouseEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/NetInfoEventCollector.js":
/*!********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/NetInfoEventCollector.js ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var featureSettings = {
  configKey: 'isNetInfoEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
exports.EventStructure = ['eventSequence', 'timestamp', 'connectionType', 'effectiveType', 'downlinkMax', 'downlink', 'rtt', 'isSaveData'];
var NetInfoEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function NetInfoEventCollector(utils, dataQueue) {
    var _this;
    var connection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : navigator.connection || navigator.mozConnection || navigator.webkitConnection;
    _classCallCheck(this, NetInfoEventCollector);
    _this = _callSuper(this, NetInfoEventCollector);
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._connection = connection;
    _this._boundOnChangeNetworkInfo = _this.onChangeNetworkInfo.bind(_this);
    return _this;
  }
  _inherits(NetInfoEventCollector, _DataCollector_1$defa);
  return _createClass(NetInfoEventCollector, [{
    key: "onChangeNetworkInfo",
    value: function onChangeNetworkInfo() {
      Logger_1["default"].debug('NetInfoEvents:onChangeNetworkInfo');
      // I stringify the downlinkMax since on wifi it is Infinity (number) and server side will not handle it...
      var saveData = this._utils.isUndefinedNull(this._connection.saveData) ? '' : this._connection.saveData.toString();
      var time = this.getEventTimestamp();
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      this._dataQueue.addToQueue('net_info_events', this._utils.convertToArrayByMap(exports.EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        connectionType: this._connection.type ? this._connection.type : '',
        effectiveType: this._connection.effectiveType ? this._connection.effectiveType : '',
        downlinkMax: this._connection.downlinkMax ? this._connection.downlinkMax.toString() : '',
        downlink: this._connection.downlink ? this._connection.downlink.toString() : '',
        rtt: this._connection.rtt ? this._connection.rtt.toString() : '',
        isSaveData: saveData
      }));
    }
  }, {
    key: "startFeature",
    value: function startFeature() {
      if (this._connection) {
        // get the data any time it changes
        this._connection.addEventListener('change', this._boundOnChangeNetworkInfo, true);
        this.onChangeNetworkInfo();
      }
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      if (this._connection) {
        this._connection.removeEventListener('change', this._boundOnChangeNetworkInfo, true);
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = NetInfoEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/OrientationEventCollector.js":
/*!************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/OrientationEventCollector.js ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var featureSettings = {
  configKey: 'isOrientationEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
exports.EventStructure = ['eventSequence', 'timestamp', 'absolute', 'alpha', 'beta', 'gamma'];
var OrientationEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function OrientationEventCollector(configurationRepository, utils, dataQ, MessageBus, DeviceOrientationEventEmitter) {
    var _this;
    _classCallCheck(this, OrientationEventCollector);
    _this = _callSuper(this, OrientationEventCollector);
    _defineProperty(_this, "_handleDeviceOrientationEvent", function (e) {
      var time = _this._utils.dateNow();
      if (e && time - _this._lastTime > _this._samplePeriod) {
        var absolute = e.absolute || false;
        var alpha = _this._utils.isUndefinedNull(e.alpha) ? 0 : _this._utils.cutDecimalPointDigits(e.alpha, 4);
        var beta = _this._utils.isUndefinedNull(e.beta) ? 0 : _this._utils.cutDecimalPointDigits(e.beta, 4);
        var gamma = _this._utils.isUndefinedNull(e.gamma) ? 0 : _this._utils.cutDecimalPointDigits(e.gamma, 4);
        if (alpha !== _this._lastAlpha || beta !== _this._lastBeta || gamma !== _this._lastGamma) {
          Logger_1["default"].isDebug() && Logger_1["default"].debug("OrientationEvents:_onOrientationEvent, sending data: timestamp: ".concat(time, "\n                alpha,betta,gamma: ").concat(alpha, ",").concat(beta, ",").concat(gamma, ",prevTime:").concat(_this._lastTime));
          _this._lastTime = time;
          _this._lastAlpha = alpha;
          _this._lastBeta = beta;
          _this._lastGamma = gamma;
          var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
          _this._dataQ.addToQueue('orientation_events', [null, eventSeq, time, absolute, alpha, beta, gamma]);
        }
      }
    });
    _this._dataQ = dataQ;
    _this._configurationRepository = configurationRepository;
    _this._utils = utils;
    _this._samplePeriod = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.orientationEventsSamplePeriod) || 0;
    _this._lastAlpha = 0;
    _this._lastBeta = 0;
    _this._lastGamma = 0;
    _this._lastTime = 0;
    _this._messageBus = MessageBus;
    _this._deviceOrientationEventEmitter = DeviceOrientationEventEmitter;
    return _this;
  }
  _inherits(OrientationEventCollector, _DataCollector_1$defa);
  return _createClass(OrientationEventCollector, [{
    key: "startFeature",
    value: function startFeature() {
      if (window.DeviceOrientationEvent) {
        this._deviceOrientationEventEmitter.start();
        this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.DeviceOrientationEvent, this._handleDeviceOrientationEvent);
      }
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      if (window.DeviceOrientationEvent) {
        this._deviceOrientationEventEmitter.stop();
        this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.DeviceOrientationEvent, this._handleDeviceOrientationEvent);
      }
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      var samplePeriodConf = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.orientationEventsSamplePeriod);
      this._samplePeriod = samplePeriodConf !== undefined ? samplePeriodConf : this._samplePeriod;
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = OrientationEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/PinchZoomEventCollector.js":
/*!**********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/PinchZoomEventCollector.js ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var eventsPointerXYProps = ['clientX', 'clientY'];
var eventsTouchXYProps = ['screenX', 'screenY'];
/**
 * should be called on pointerup event
 * Then clear the stack of pointers
 */
var pinchRecognizer = function pinchRecognizer(pointers, prevPointers, eventProps) {
  function getDistance(p1, p2) {
    var x = p2[eventProps[0]] - p1[eventProps[0]];
    var y = p2[eventProps[1]] - p1[eventProps[1]];
    return Math.sqrt(x * x + y * y);
  }
  function _getScale() {
    return getDistance(pointers[0], pointers[1]) / getDistance(prevPointers[0], prevPointers[1]);
  }
  function _getFocusPoint(p1, p2) {
    return {
      x: (p1[eventProps[0]] + p2[eventProps[0]]) / 2,
      y: (p1[eventProps[1]] + p2[eventProps[1]]) / 2
    };
  }
  return {
    getScale: function getScale() {
      return _getScale();
    },
    getFocusPoint: function getFocusPoint() {
      return _getFocusPoint(pointers[1], pointers[0]);
    }
  };
};
var pinchZoomEventType = {
  pointerdown: 0,
  pointermove: 1,
  pointerup: 2
};
var featureSettings = {
  configKey: 'isPinchZoomEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInSlave: true,
  runInLean: true,
  runInUns: false,
  isRunning: false,
  instance: null
};
var EventStructure = ['eventSequence', 'timestamp', 'focusX', 'focusY', 'scaleFactor'];
var PinchZoomEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function PinchZoomEventCollector(utils, elements, dataQ, msgBus, configuration) {
    var _this;
    _classCallCheck(this, PinchZoomEventCollector);
    _this = _callSuper(this, PinchZoomEventCollector);
    _this._utils = utils;
    _this._dataQ = dataQ;
    _this._elements = elements;
    _this._msgBus = msgBus;
    _this._evGesturesCache = [];
    _this._prevEventDiff = -1;
    _this._prevEvGestureSet = [];
    _this._prevTouchEvents = [];
    _this._onAllBrowsersPinchZoomEventBinded = _this._onAllBrowsersPinchZoomEvent.bind(_this);
    _this._maxShadowDepth = configuration.getMaxShadowDepth();
    _this._iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
    return _this;
  }
  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(PinchZoomEventCollector, _DataCollector_1$defa);
  return _createClass(PinchZoomEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      this._bind(browserContext);
    }
    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      this._unbind(browserContext);
    }
  }, {
    key: "_addToCommunicationQueue",
    value: function _addToCommunicationQueue(type, scale, focusPoint, e) {
      if (type === pinchZoomEventType.pointerdown || type === pinchZoomEventType.pointerup) {
        this._msgBus.publish('pinchEvent', {
          action: type
        });
      }
      var time = this.getEventTimestamp(e);
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      // client - relative to edge of browser not including scrolling
      // page - relative to edge with scroll offset
      // screen - relative to the edge of the screen
      this._dataQ.addToQueue('pinch_events', this._utils.convertToArrayByMap(EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        focusX: focusPoint.x,
        focusY: focusPoint.y,
        scaleFactor: scale
      }));
    }
    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_bind",
    value: function _bind(browserContext) {
      var _this2 = this;
      var currDocument = browserContext.getDocument();
      var eventsToListen;
      // By default, bind the Pointer Events and if not supported
      // attempt to use the Touch Events
      if (window.PointerEvent) {
        eventsToListen = ['pointerdown', 'pointermove', 'pointerup'];
      } else if (window.TouchEvent) {
        eventsToListen = ['touchstart', 'touchend', 'touchcancel', 'touchmove'];
      }
      this._listeningToEvents = eventsToListen;
      if (this._listeningToEvents) {
        var _loop = function _loop(i) {
          _this2._utils.addEventListener(currDocument, _this2._listeningToEvents[i], _this2._onAllBrowsersPinchZoomEventBinded, false, false);
          browserContext.collectAllElementsBySelectorAsync('iframe', _this2._maxShadowDepth, _this2._iframeLoadingTimeout).then(function (iframes) {
            iframes.forEach(function (iframe) {
              if (iframe && iframe.contentDocument) {
                _this2._utils.addEventListener(iframe.contentDocument, _this2._listeningToEvents[i], _this2._onAllBrowsersPinchZoomEventBinded, false, false);
              }
            });
          });
        };
        for (var i = 0; i < this._listeningToEvents.length; i++) {
          _loop(i);
        }
      }
    }
    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_unbind",
    value: function _unbind(browserContext) {
      var _this3 = this;
      var currDocument = browserContext.getDocument();
      if (this._listeningToEvents) {
        var _loop2 = function _loop2(i) {
          _this3._utils.removeEventListener(currDocument, _this3._listeningToEvents[i], _this3._onAllBrowsersPinchZoomEventBinded);
          browserContext.collectAllElementsBySelectorAsync('iframe', _this3._maxShadowDepth, _this3._iframeLoadingTimeout).then(function (iframes) {
            iframes.forEach(function (iframe) {
              if (iframe && iframe.contentDocument) {
                _this3._utils.removeEventListener(iframe.contentDocument, _this3._listeningToEvents[i], _this3._onAllBrowsersPinchZoomEventBinded);
              }
            });
          });
        };
        for (var i = 0; i < this._listeningToEvents.length; i++) {
          _loop2(i);
        }
      }
      this._evGesturesCache = [];
      this._prevEventDiff = -1;
    }
  }, {
    key: "_onAllBrowsersPinchZoomEvent",
    value: function _onAllBrowsersPinchZoomEvent(e) {
      switch (e.type) {
        case 'pointerdown':
          this._onPointerDownEvent(e);
          break;
        case 'pointermove':
          this._onPointerMoveEvent(e);
          break;
        case 'pointerup':
          this._onPointerUpEvent(e);
          break;
        case 'touchstart':
          this._onTouchStartEvent(e);
          break;
        case 'touchend':
          this._onTouchEndEvent();
          break;
        case 'touchmove':
          this._onTouchMoveEvent(e);
          break;
        default:
      }
      return true;
    }
  }, {
    key: "_onPointerDownEvent",
    value: function _onPointerDownEvent(e) {
      this._evGesturesCache.push(e);
    }
  }, {
    key: "_onPointerMoveEvent",
    value: function _onPointerMoveEvent(e) {
      // We update the events with the same pointerId value that were push as pointerdown.
      // We're only interested in 2 gestures to imply if two points
      // with different pointer Ids create a pinch when their x,y are increased,decreased accordingly
      for (var i = 0; i < this._evGesturesCache.length; i++) {
        if (e.pointerId === this._evGesturesCache[i].pointerId) {
          this._evGesturesCache[i] = e;
          break;
        }
      }
      if (this._evGesturesCache.length === 2 && this._evGesturesCache[0].pointerId !== this._evGesturesCache[1].pointerId) {
        // Calculate the distance between the two pointers
        var curDiff = Math.abs(this._evGesturesCache[0].clientX - this._evGesturesCache[1].clientX);
        if (this._prevEventDiff > 0) {
          if (curDiff > this._prevEventDiff) {
            // The distance between the two pointers has increased
            // this._addToCommunicationQueue(pinchZoomEventType[e.type], "zoom_in", e);
          }
          if (curDiff < this._prevEventDiff) {
            // The distance between the two pointers has decreased
            // this._addToCommunicationQueue(pinchZoomEventType[e.type], "zoom_out", e);
          }
          if (this._prevEvGestureSet.length === 2) {
            var pr = pinchRecognizer(this._evGesturesCache, this._prevEvGestureSet, eventsPointerXYProps);
            var _s = pr.getScale();
            this._addToCommunicationQueue(pinchZoomEventType[e.type], _s, pr.getFocusPoint(), e);
          }
        }
        // Cache the distance for the next move event
        this._prevEventDiff = curDiff;
        this._prevEvGestureSet = this._evGesturesCache.slice(0);
      } else if (this._evGesturesCache.length > 2) {
        // There are for some reason points that are not cleared immediately.
        this._evGesturesCache = [];
        this._prevEvGestureSet = [];
      }
    }
    /**
     * We clear the events that were collected before the pointerup event was thrown
     * @param e
     * @private
     */
  }, {
    key: "_onPointerUpEvent",
    value: function _onPointerUpEvent(e) {
      for (var i = 0; i < this._evGesturesCache.length; i++) {
        if (this._evGesturesCache[i].pointerId === e.pointerId) {
          this._evGesturesCache.splice(i, 1);
          break;
        }
      }
      if (this._evGesturesCache.length < 2) {
        this._prevEventDiff = -1;
        this._prevEvGestureSet = [];
      }
    }
  }, {
    key: "_onTouchStartEvent",
    value: function _onTouchStartEvent(e) {
      this._prevTouchEvents[0] = e.touches.item(0);
      this._prevTouchEvents[1] = e.touches.item(1);
    }
  }, {
    key: "_onTouchEndEvent",
    value: function _onTouchEndEvent() {
      this._prevTouchEvents = [];
    }
    /**
     * Since this feature deals only with pinching/zooming, the maximum number of
     * fingers on the surface at the same time is for pinching/zooming detection
     * is two.
     * @param e
     * @private
     */
  }, {
    key: "_onTouchMoveEvent",
    value: function _onTouchMoveEvent(e) {
      if (e.touches.length === 2) {
        if (this._prevTouchEvents.length === 2) {
          var current = [e.touches.item(0), e.touches.item(1)];
          var pr = pinchRecognizer(current, this._prevTouchEvents.splice(0), eventsTouchXYProps);
          var _s = pr.getScale();
          this._addToCommunicationQueue(pinchZoomEventType[e.type], _s, pr.getFocusPoint(), e);
        }
        // finally - update the previous touch pairs
        this._prevTouchEvents[0] = e.touches.item(0);
        this._prevTouchEvents[1] = e.touches.item(1);
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = PinchZoomEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/PrintEventCollector.js":
/*!******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/PrintEventCollector.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = exports.PrintEventType = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var featureSettings = {
  configKey: 'isPrintEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
exports.PrintEventType = {
  printDialogOpened: 1,
  printDialogClosed: 0
};
exports.EventStructure = ['eventSequence', 'timestamp', 'printDialogState'];
var PrintEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function PrintEventCollector(utils, dataQueue) {
    var _this;
    _classCallCheck(this, PrintEventCollector);
    _this = _callSuper(this, PrintEventCollector);
    _this._utils = utils;
    _this._dataQueue = dataQueue;
    _this._addToEventQueueFunc = _this._addToEventQueue.bind(_this);
    _this._myAfterPrintFunc = _this._myAfterPrint.bind(_this);
    return _this;
  }
  _inherits(PrintEventCollector, _DataCollector_1$defa);
  return _createClass(PrintEventCollector, [{
    key: "_myAfterPrint",
    value: function _myAfterPrint() {
      this._addToEventQueueFunc(exports.PrintEventType.printDialogClosed); // printDialogClosed = -1
      window.removeEventListener('focus', this._myAfterPrintFunc);
    }
  }, {
    key: "_onBeforePrintEvent",
    value: function _onBeforePrintEvent() {
      this._addToEventQueueFunc(exports.PrintEventType.printDialogOpened); // printDialogOpened = 1
      // "afterprint" doesn't work well for some browsers
      // All browsers dispatch a "focus" event on the window object
      // so we listen to the "focus" event to detect when the print dialog is being closed
      this._utils.addEventListener(window, 'focus', this._myAfterPrintFunc.bind(this));
    }
    // (1, -1) = (print dialog opened, print dialog closed)
  }, {
    key: "_addToEventQueue",
    value: function _addToEventQueue(printDialogState) {
      var time = this.getEventTimestamp();
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      this._dataQueue.addToQueue('print_events', this._utils.convertToArrayByMap(exports.EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        printDialogState: printDialogState
      }));
    }
  }, {
    key: "startFeature",
    value: function startFeature() {
      this._utils.addEventListener(window, 'beforeprint', this._onBeforePrintEvent.bind(this));
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._utils.removeEventListener(window, 'beforeprint', this._onBeforePrintEvent.bind(this), true);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = PrintEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/ScriptEventCollector.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/ScriptEventCollector.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = exports.ScriptEventType = void 0;
/**
 * e.target.id = testPointer
 e.target.namespaceURI = http://www.w3.org/1999/xhtml
 e.target.outerHTML = <script src="TestPointer.js" type="text/javascript" id="testPointer"></script>
 e.target.src = http://localhost:63342/TestFeature/TestPointer.js
 e.target.type = text/javascript
 */
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
exports.ScriptEventType = {
  load: 0
};
var featureSettings = {
  configKey: 'isScriptExecuteEve',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
exports.EventStructure = ['eventSequence', 'timestamp', 'eventType', 'scriptId', 'namespaceURI', 'outerHTML', 'scriptSource', 'scriptType'];
var ScriptEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function ScriptEventCollector(utils, dataQueue) {
    var _this;
    _classCallCheck(this, ScriptEventCollector);
    _this = _callSuper(this, ScriptEventCollector);
    _this._onScriptExecuteEventFunc = _this._onScriptExecuteEvent.bind(_this);
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    return _this;
  }
  _inherits(ScriptEventCollector, _DataCollector_1$defa);
  return _createClass(ScriptEventCollector, [{
    key: "_onScriptExecuteEvent",
    value: function _onScriptExecuteEvent(e) {
      if (e && e.target && (e.type !== 'load' || e.target.nodeName.toLowerCase() === 'script')) {
        try {
          var time = this.getEventTimestamp(e);
          var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
          var type = exports.ScriptEventType[e.type];
          if (this._utils.isUndefinedNull(type)) {
            type = -1;
          }
          // the if is for performance optimization
          if (Logger_1["default"].isDebug()) {
            Logger_1["default"].trace('got event ' + e.type + ', ' + type + ', scriptSrc: ' + e.target.src + ' at time ' + time);
          }
          this._dataQueue.addToQueue('script_events', this._utils.convertToArrayByMap(exports.EventStructure, {
            eventSequence: eventSeq,
            timestamp: time,
            eventType: type,
            scriptId: e.target.id || '',
            namespaceURI: e.target.namespaceURI || '',
            outerHTML: e.target.outerHTML || '',
            scriptSource: e.target.src || '',
            scriptType: e.target.type || ''
          }));
        } catch (err) {
          Logger_1["default"].error("error on getScriptExecuteEvent ".concat(err.toString()));
        }
      }
    }
  }, {
    key: "startFeature",
    value: function startFeature() {
      this._utils.addEventListener(document, 'load', this._onScriptExecuteEventFunc, true);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._utils.removeEventListener(document, 'load', this._onScriptExecuteEventFunc, true);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = ScriptEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/SelectElementEvents.js":
/*!******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/SelectElementEvents.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.onSelectSelectors = void 0;
var Event_1 = __importDefault(__webpack_require__(/*! ./Event */ "./dist/js-sdk-legacy/src/main/collectors/events/Event.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
exports.onSelectSelectors = 'select';
var SelectElementEvents = /*#__PURE__*/function (_Event_1$default) {
  /**
   *
   * @param sendToQueue
   */
  function SelectElementEvents(sendToQueue, cdUtils, messageBus, standardOnChangeEventsEmitter, elementFocusEventEmitter, elementBlurEventEmitter, configurationRepository, maskingService, maxShadowDepth, iframeLoadingTimeout) {
    var _this;
    _classCallCheck(this, SelectElementEvents);
    _this = _callSuper(this, SelectElementEvents);
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleOnChangeEvents", function (e) {
      var optionsVals = _this._CDUtils.getDropDownListValues(e.target, _this._maskingService).join(';');
      optionsVals = _this._CDUtils.clearTextFromNumbers(optionsVals);
      var selected = e.target.selectedIndex;
      var length = e.target.value.length;
      _this._sendToQueue(e, {
        length: length,
        selected: selected,
        elementValues: optionsVals
      });
    });
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleBlurEvent", function (e) {
      _this._sendToQueue(e, {
        length: 0,
        selected: -1,
        elementValues: ''
      });
    });
    /**
     *
     * @param e
     */
    _defineProperty(_this, "handleFocusEvent", function (e) {
      _this._sendToQueue(e, {
        length: 0,
        selected: -1,
        elementValues: ''
      });
    });
    _this._sendToQueue = sendToQueue;
    _this._CDUtils = cdUtils;
    _this._messageBus = messageBus;
    _this._StandardOnChangeEventsEmitter = standardOnChangeEventsEmitter;
    _this._elementFocusEventEmitter = elementFocusEventEmitter;
    _this._elementBlurEventEmitter = elementBlurEventEmitter;
    _this._configurationRepository = configurationRepository;
    _this._collectSelectElementBlurAndFocusEvents = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.collectSelectElementBlurAndFocusEvents);
    _this._maskingService = maskingService;
    _this._maxShadowDepth = maxShadowDepth;
    _this._iframeLoadingTimeout = iframeLoadingTimeout;
    return _this;
  }
  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(SelectElementEvents, _Event_1$default);
  return _createClass(SelectElementEvents, [{
    key: "bind",
    value: function bind(browserContext) {
      var _this2 = this;
      this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.StandardOnSelectEvent, this.handleOnChangeEvents);
      this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ElementFocusEvent, this.handleFocusEvent);
      this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ElementBlurEvent, this.handleBlurEvent);
      browserContext.collectAllElementsBySelectorAsync(exports.onSelectSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onSelectElements) {
        _this2._StandardOnChangeEventsEmitter.start(_onSelectElements);
        if (_this2._collectSelectElementBlurAndFocusEvents) {
          _this2._elementFocusEventEmitter.start(_onSelectElements);
          _this2._elementBlurEventEmitter.start(_onSelectElements);
        }
      });
    }
    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "unbind",
    value: function unbind(browserContext) {
      var _this3 = this;
      browserContext.collectAllElementsBySelectorAsync(exports.onSelectSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onSelectElements) {
        _this3._StandardOnChangeEventsEmitter.stop(_onSelectElements);
        _this3._elementFocusEventEmitter.stop(_onSelectElements);
        _this3._elementBlurEventEmitter.stop(_onSelectElements);
      });
      this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.StandardOnSelectEvent, this.handleOnChangeEvents);
      this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.ElementFocusEvent, this.handleFocusEvent);
      this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.ElementBlurEvent, this.handleBlurEvent);
    }
  }, {
    key: "updateSettings",
    value: function updateSettings(browserContext) {
      var _this4 = this;
      this._collectSelectElementBlurAndFocusEvents = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.collectSelectElementBlurAndFocusEvents);
      if (!this._collectSelectElementBlurAndFocusEvents) {
        browserContext.collectAllElementsBySelectorAsync(exports.onSelectSelectors, this._maxShadowDepth, this._iframeLoadingTimeout).then(function (_onSelectElements) {
          _this4._elementFocusEventEmitter.stop(_onSelectElements);
          _this4._elementBlurEventEmitter.stop(_onSelectElements);
        });
      }
    }
  }]);
}(Event_1["default"]);
exports["default"] = SelectElementEvents;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/SensorsDataQueue.js":
/*!***************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/SensorsDataQueue.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var TouchEventCollector_1 = __webpack_require__(/*! ./TouchEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/TouchEventCollector.js");
var KeyEventCollector_1 = __webpack_require__(/*! ./KeyEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/KeyEventCollector.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var SensorsDataQueue = /*#__PURE__*/function () {
  function SensorsDataQueue(configurationRepository, dataQueue, msgBus, utils, sensorGateKeeper) {
    _classCallCheck(this, SensorsDataQueue);
    this._historyBuffer = [];
    this._isTouchInProgress = false;
    this._touchStartCount = 0;
    this._isPostTouch = false;
    this._touchEndTime = 0;
    this._sensorGateKeeper = sensorGateKeeper;
    this._dataQueue = dataQueue;
    this._configurationRepository = configurationRepository;
    this._msgBus = msgBus;
    this._utils = utils;
    this._msgBus.subscribe(MessageBusEventType_1.MessageBusEventType.TouchEvent, this._onTouch.bind(this));
    this._msgBus.subscribe(MessageBusEventType_1.MessageBusEventType.KeyEvent, this._onTouch.bind(this));
    this._isMotionAroundTouchEnabled = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isMotionAroundTouchEnabled);
    this._aroundTouchInterval = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.motionPaddingAroundTouchMSec);
  }
  /**
   * Called be the sensor event handlers, according to state, handle the event, if during touch, send directly to queue,
   * if post then also send upto to interval time, else, keep a history buffer for pre touch events, for interval
   * length of time
   * @param name
   * @param data
   * @param addCtxId
   * @param isImmediateWup
   */
  return _createClass(SensorsDataQueue, [{
    key: "addToQueue",
    value: function addToQueue(name, data, addCtxId, isImmediateWup) {
      var currTime = this._utils.dateNow();
      if (this._isPostTouch) {
        var postTouchTimeRemaining = currTime - this._touchEndTime;
        if (postTouchTimeRemaining > this._aroundTouchInterval) {
          Logger_1["default"].debug("SensorsDataQueue: stopped post touch events, time has passed (".concat(this._aroundTouchInterval, " millisec)"));
          this._isPostTouch = false;
        }
      }
      if (!this._isMotionAroundTouchEnabled || this._isTouchInProgress || this._isPostTouch || this._sensorGateKeeper.isOpen()) {
        this._dataQueue.addToQueue(name, data, addCtxId, isImmediateWup);
      } else {
        this._historyBuffer.push({
          name: name,
          data: data,
          addCtxId: addCtxId,
          isImmediateWup: isImmediateWup,
          timestamp: currTime
        });
        // check buffer to 3 sec
        for (var i = 0, len = this._historyBuffer.length; i < len; i++) {
          // we keep getting out the first item so we stay at location 0
          var preTouchTime = currTime - this._historyBuffer[0].timestamp;
          if (preTouchTime > this._aroundTouchInterval) {
            this._historyBuffer.shift();
          } else {
            break;
          }
        }
      }
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate() {
      this._aroundTouchInterval = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.motionPaddingAroundTouchMSec) !== undefined ? this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.motionPaddingAroundTouchMSec) : this._aroundTouchInterval;
      this._isMotionAroundTouchEnabled = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isMotionAroundTouchEnabled) !== undefined ? this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isMotionAroundTouchEnabled) : this._isMotionAroundTouchEnabled;
    }
    /**
     * Upon start of touch event send the history buffer of pre-touch sensor events according to
     * interval (1 sec by default)
     * @private
     */
  }, {
    key: "_sendBuffer",
    value: function _sendBuffer() {
      var startTime = this._utils.dateNow();
      Logger_1["default"].debug("sending history sensors buffer ts=".concat(startTime));
      // send all buffer to queue
      for (var i = 0, len = this._historyBuffer.length; i < len; i++) {
        if (startTime - this._historyBuffer[i].timestamp <= this._aroundTouchInterval) {
          this._dataQueue.addToQueue(this._historyBuffer[i].name, this._historyBuffer[i].data, this._historyBuffer[i].addCtxId, this._historyBuffer[i].isImmediateWup);
        }
      }
      this._historyBuffer = [];
    }
    /**
     * on touch event manage current status of touch - is during or after touch event, in order to manage
     * sensor events interval
     *
     * on mobile - touching the keyboard is sent as keyevent and not touch event
     * @param event
     * @returns {boolean}
     * @private
     */
  }, {
    key: "_onTouch",
    value: function _onTouch(event) {
      if (this._isMotionAroundTouchEnabled) {
        if (!this._isTouchInProgress && (event.action === TouchEventCollector_1.TouchEventType.touchstart || event.action === KeyEventCollector_1.KeyEventType.keydown)) {
          // isTouchInProgress protects against multiple touch downs in a row
          Logger_1["default"].debug("Started touch event in sensors data q ts=".concat(this._utils.dateNow()));
          this._isTouchInProgress = true;
          this._touchStartCount = 1;
          this._sendBuffer();
        } else if (event.action === TouchEventCollector_1.TouchEventType.touchend || event.action === KeyEventCollector_1.KeyEventType.keyup) {
          this._touchStartCount--;
          if (this._touchStartCount <= 0) {
            this._isTouchInProgress = false;
            this._isPostTouch = true;
            this._touchEndTime = this._utils.dateNow();
            Logger_1["default"].debug("stopped touch event in sensors data q ts=".concat(this._utils.dateNow()));
          }
        } else if (event.action === TouchEventCollector_1.TouchEventType.touchstart || event.action === KeyEventCollector_1.KeyEventType.keydown) {
          // on mobile - touching the keyboard is sent as keyevent and not touch event
          // for cases when there's another touch start after touch start, so wait until all
          // the touches end
          this._touchStartCount++;
        }
      }
      return false;
    }
  }]);
}();
exports["default"] = SensorsDataQueue;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/StorageEventCollector.js":
/*!********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/StorageEventCollector.js ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var featureSettings = {
  configKey: 'isStorageEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: false,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
var StorageEventType = {
  'storage': 0
};
var EventStructure = ['eventSequence', 'timestamp', 'keys', 'action', 'tabsOpened']; // "keys" - what keys were changed. "area" - the name of the storage area - 'sync', 'local' or 'managed'
var StorageEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function StorageEventCollector(utils, elements, dataQ, msgBus) {
    var _this;
    _classCallCheck(this, StorageEventCollector);
    _this = _callSuper(this, StorageEventCollector);
    _this._utils = utils;
    _this._dataQ = dataQ;
    _this._elements = elements;
    _this._msgBus = msgBus;
    _this._onAllStorageEventBinded = _this._onAllStorageEvent.bind(_this);
    return _this;
  }
  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(StorageEventCollector, _DataCollector_1$defa);
  return _createClass(StorageEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      this._bind(browserContext);
    }
    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      this._unbind(browserContext);
    }
  }, {
    key: "_addToCommunicationQueue",
    value: function _addToCommunicationQueue(type, keys, action, tabsopened, e) {
      if (type === StorageEventType.storage) {
        this._msgBus.publish('storageEvent', {
          action: type
        });
      }
      var time = this.getEventTimestamp(e);
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      this._dataQ.addToQueue('storage_events', this._utils.convertToArrayByMap(EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        keys: keys,
        action: action,
        tabsOpened: tabsopened
      }));
    }
    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_bind",
    value: function _bind(browserContext) {
      var eventsToListen;
      var windowContext = browserContext.Context;
      if (windowContext.localStorage || windowContext.sessionStorage) {
        eventsToListen = ['storage'];
      }
      this._listeningToEvents = eventsToListen;
      if (this._listeningToEvents.length > 0) {
        for (var i = 0; i < this._listeningToEvents.length; i++) {
          this._utils.addEventListener(windowContext, this._listeningToEvents[i], this._onAllStorageEventBinded, true);
        }
      }
    }
    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_unbind",
    value: function _unbind(browserContext) {
      if (this._listeningToEvents) {
        for (var i = 0; i < this._listeningToEvents.length; i++) {
          this._utils.removeEventListener(browserContext.Context, this._listeningToEvents[i], this._onAllStorageEventBinded, true);
        }
      }
    }
  }, {
    key: "_onAllStorageEvent",
    value: function _onAllStorageEvent(e) {
      switch (e.type) {
        case 'storage':
          this._onStorageEvent(e);
          break;
        default:
      }
      return true;
    }
    /**
     *
     * @param e
     * @private
     */
  }, {
    key: "_onStorageEvent",
    value: function _onStorageEvent(e) {
      var tabs = false;
      var keys = null;
      var action = null;
      if (e.key === null) {
        keys = null;
      }
      if (typeof e.key === 'string' && e.newValue === null) {
        keys = e.key;
        action = 'delete';
      } else {
        keys = e.key;
        action = 'update';
      }
      var tabList = this._utils.StorageUtils.getFromLocalStorage('cdTabList');
      if (tabList && _typeof(tabList[0]) === 'object') {
        tabs = true;
      }
      tabs = tabs ? 1 : 0;
      this._addToCommunicationQueue(e.type, keys, action, tabs, e);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = StorageEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/TabEventCollector.js":
/*!****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/TabEventCollector.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = exports.TabEventType = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var featureSettings = {
  configKey: 'isTabsEvents',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: false,
  runInLean: false,
  runInUns: false,
  isRunning: false,
  instance: null
};
exports.TabEventType = {
  openTab: 0,
  newTab: 1,
  closeTab: 2
};
exports.EventStructure = ['eventSequence', 'timestamp', 'type', 'id', 'href', 'referrer', 'currentTabsList'];
/**
 * Identify tabs and manage this info and send to server
 *
 * https://stackoverflow.com/questions/1366483/javascript-sharing-data-between-tabs
 * local storage is shared between tabs and storage event fires when other tabs
 * make changes to localStorage. This is quite handy for communication purposes.
 */
var TabEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function TabEventCollector(utils, dataQ) {
    var _this;
    _classCallCheck(this, TabEventCollector);
    _this = _callSuper(this, TabEventCollector);
    _this._utils = utils;
    _this._currState = null;
    _this._dataQueue = dataQ;
    _this._tabData = {
      id: '',
      openTabTS: 0
    };
    _this._onUnloadTabBinded = _this._onUnloadTab.bind(_this);
    return _this;
  }
  _inherits(TabEventCollector, _DataCollector_1$defa);
  return _createClass(TabEventCollector, [{
    key: "startFeature",
    value: function startFeature() {
      Logger_1["default"].info('Starting tab events feature');
      this._initTabInfo();
      window.addEventListener('beforeunload', this._onUnloadTabBinded);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      Logger_1["default"].info('Stopping tab events feature');
      window.removeEventListener('beforeunload', this._onUnloadTabBinded);
    }
    /**
     * save the tab id in the session storage, so a new tab will not have an id
     * and the list in local storage
     * we can reach this function on reload, reset session, etc
     */
  }, {
    key: "_initTabInfo",
    value: function _initTabInfo() {
      var tabList = this._utils.StorageUtils.getFromLocalStorage('cdTabList');
      if (!tabList) {
        tabList = [];
      }
      // if tab data already exists it might refresh etc
      var type = exports.TabEventType.openTab;
      this._tabData = this._utils.StorageUtils.getFromSessionStorage('cdTabData') || this._tabData.id;
      // session storage is not saved between tabs except on duplicate
      // local storage is saved between tabs
      // if no data in session storage
      // except for IE - which works the other way around
      if (!this._tabData) {
        this._updateTabData();
        type = exports.TabEventType.newTab;
      }
      var index = -1;
      for (var i = 0, len = tabList.length; i < len; i++) {
        if (tabList[i][0] === this._tabData.id) {
          index = i;
          break;
        }
      }
      // if tab is not in the list, add it
      // can happen on new tab, or reload
      if (index === -1 || index === tabList.length) {
        // need to add every time if doesn't exist since every unload it's removed (refresh/reload page)
        tabList.push([this._tabData.id, this._tabData.openTabTS]);
        this._utils.StorageUtils.saveToLocalStorage('cdTabList', tabList);
        Logger_1["default"].debug('added tab to list. ' + this._tabData.id + ', tab index=' + tabList.length);
      }
      var url = this._utils.getDocUrl();
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var tabListStr = JSON.stringify(tabList);
      this._dataQueue.addToQueue('tab_events', this._utils.convertToArrayByMap(exports.EventStructure, {
        eventSequence: eventSeq,
        timestamp: this._tabData.openTabTS,
        type: type,
        id: this._tabData.id || '',
        href: url || '',
        referrer: this._utils.clearTextFromNumbers(document.referrer),
        currentTabsList: tabListStr || ''
      }));
    }
    /**
     * Remove the tab info on tab close, after sending th list of tabs
     * can be also on reload, load other page etc
     */
  }, {
    key: "_onUnloadTab",
    value: function _onUnloadTab() {
      var tabList = this._utils.StorageUtils.getFromLocalStorage('cdTabList');
      if (!tabList) {
        tabList = [];
      }
      var time = this.getEventTimestamp();
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var url = this._utils.getDocUrl();
      var type = exports.TabEventType.closeTab;
      var tabListStr = JSON.stringify(tabList);
      Logger_1["default"].debug("removing tab from list. id:".concat(this._tabData.id, ", timestamp:").concat(time));
      this._dataQueue.addToQueue('tab_events', this._utils.convertToArrayByMap(exports.EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        type: type,
        id: this._tabData.id || '',
        href: url || '',
        referrer: this._utils.clearTextFromNumbers(document.referrer),
        currentTabsList: tabListStr || ''
      }), true, true);
      // remove current tab from list
      for (var i = 0, len = tabList.length; i < len; i++) {
        if (tabList[i][0] === this._tabData.id) {
          tabList.splice(i, 1);
          break;
        }
      }
      this._utils.StorageUtils.saveToLocalStorage('cdTabList', tabList);
    }
  }, {
    key: "_updateTabData",
    value: function _updateTabData() {
      this._tabData = {};
      this._tabData = {
        id: this._utils.generateUUID(),
        openTabTS: this.getEventTimestamp()
      };
      Logger_1["default"].debug("initialize tab data: id:".concat(this._tabData.id, ", timestamp:").concat(this._tabData.openTabTS));
      this._utils.StorageUtils.saveToSessionStorage('cdTabData', this._tabData);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = TabEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/TapEventCollector.js":
/*!****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/TapEventCollector.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LongPressEventStructure = exports.TapEventStructure = void 0;
/**
 * Defines the maximum distance in pixels that a touch pad touch can move
 * before being released for it to be considered a tap (click) as opposed
 * to a hover movement gesture.
 */
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var IsTrustedValue_1 = __webpack_require__(/*! ./IsTrustedValue */ "./dist/js-sdk-legacy/src/main/collectors/events/IsTrustedValue.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MaskingService_1 = __webpack_require__(/*! ../../core/masking/MaskingService */ "./dist/js-sdk-legacy/src/main/core/masking/MaskingService.js");
var featureSettings = {
  configKey: 'isTapEvents',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInSlave: true,
  runInLean: true,
  runInUns: false,
  isRunning: false,
  instance: null
};
var TAP_MAX_SLOP = 20;
/**
 * Defines the duration in milliseconds we will wait to see if a touch event
 * is a tap or a scroll. If the user does not move within this interval, it is
 * considered to be a tap.
 */
// const TAP_TIMEOUT = 100;
/**
 * Defines the default duration in milliseconds before a press turns into
 * a long press
 */
var LONG_PRESS_TIMEOUT = 500;
exports.TapEventStructure = ['eventSequence', 'timestamp', 'screenX', 'screenY', 'pageX', 'pageY', 'clientX', 'clientY', 'isTrusted', 'elementHash', 'touchIndex', 'touchSizeMajor', 'touchSizeMinor'];
exports.LongPressEventStructure = ['eventSequence', 'timestamp', 'screenX', 'screenY', 'pageX', 'pageY', 'clientX', 'clientY', 'isTrusted', 'elementHash', 'touchIndex', 'touchSizeMajor', 'touchSizeMinor'];
var TapEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function TapEventCollector(configurationRepository, utils, elements, dataQ, maskingService, configuration) {
    var _this;
    _classCallCheck(this, TapEventCollector);
    _this = _callSuper(this, TapEventCollector);
    _this._configurationRepository = configurationRepository;
    _this._utils = utils;
    _this._dataQ = dataQ;
    _this._elements = elements;
    _this._activeTouchActions = {};
    _this._maskingService = maskingService;
    _this._tapMaxSlop = _this._configurationRepository.get('tapEventsTapMaxSlop') || TAP_MAX_SLOP;
    _this._longPressTimeout = _this._configurationRepository.get('tapEventsLongPressTimeout') || LONG_PRESS_TIMEOUT;
    _this._handleStartEventBind = _this._handleStartEvent.bind(_this);
    _this._handleMoveEventBind = _this._handleMoveEvent.bind(_this);
    _this._handleEndEventBind = _this._handleEndEvent.bind(_this);
    _this._handleCancelEventBind = _this._handleCancelEvent.bind(_this);
    _this._eventDefinitions = TapEventCollector.getSupportedTouchEvents();
    _this._maxShadowDepth = configuration.getMaxShadowDepth();
    _this._iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
    return _this;
  }
  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(TapEventCollector, _DataCollector_1$defa);
  return _createClass(TapEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      this._bind(browserContext);
    }
    /*
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      this._unbind(browserContext);
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      this._tapMaxSlop = this._configurationRepository.get('tapEventsTapMaxSlop') !== undefined ? this._configurationRepository.get('tapEventsTapMaxSlop') : this._tapMaxSlop;
      this._longPressTimeout = this._configurationRepository.get('tapEventsLongPressTimeout') !== undefined ? this._configurationRepository.get('tapEventsLongPressTimeout') : this._longPressTimeout;
    }
  }, {
    key: "_bind",
    value:
    /**
     * @param {BrowserContext} browserContext
     * @private
     */
    function _bind(browserContext) {
      var _this2 = this;
      if (!this._eventDefinitions) {
        Logger_1["default"].debug('TapEvents:_bind - No event definitions. Might be a legacy browser. Aborting bind operation.');
        return;
      }
      var currDocument = browserContext.getDocument();
      this._addEventListeners(currDocument);
      browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
        iframes.forEach(function (iframe) {
          if (iframe && iframe.contentDocument) {
            _this2._addEventListeners(iframe.contentDocument);
          }
        });
      });
    }
  }, {
    key: "_addEventListeners",
    value: function _addEventListeners(currDocument) {
      this._utils.addEventListener(currDocument, this._eventDefinitions.startEvent, this._handleStartEventBind);
      this._utils.addEventListener(currDocument, this._eventDefinitions.moveEvent, this._handleMoveEventBind);
      this._utils.addEventListener(currDocument, this._eventDefinitions.endEvent, this._handleEndEventBind);
      this._utils.addEventListener(currDocument, this._eventDefinitions.cancelEvent, this._handleCancelEventBind);
    }
    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_unbind",
    value: function _unbind(browserContext) {
      var _this3 = this;
      if (!this._eventDefinitions) {
        return;
      }
      var currDocument = browserContext.getDocument();
      this._removeEventListeners(currDocument);
      browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
        iframes.forEach(function (iframe) {
          if (iframe && iframe.contentDocument) {
            _this3._removeEventListeners(iframe.contentDocument);
          }
        });
      });
    }
  }, {
    key: "_removeEventListeners",
    value: function _removeEventListeners(currDocument) {
      this._utils.removeEventListener(currDocument, this._eventDefinitions.startEvent, this._handleStartEventBind);
      this._utils.removeEventListener(currDocument, this._eventDefinitions.moveEvent, this._handleMoveEventBind);
      this._utils.removeEventListener(currDocument, this._eventDefinitions.endEvent, this._handleEndEventBind);
      this._utils.removeEventListener(currDocument, this._eventDefinitions.cancelEvent, this._handleCancelEventBind);
    }
  }, {
    key: "_handleStartEvent",
    value: function _handleStartEvent(e) {
      var eventData = this._getEventData(e);
      for (var i = 0; i < eventData.length; i++) {
        // Save the state of the active touch operations so we can make decisions when tap is ending
        this._activeTouchActions[eventData[i].identifier] = {
          startTime: this.getEventTimestamp(),
          startX: eventData[i].touchData.pageX,
          startY: eventData[i].touchData.pageY,
          offsetX: 0,
          offsetY: 0
        };
      }
    }
  }, {
    key: "_handleMoveEvent",
    value: function _handleMoveEvent(e) {
      var eventData = this._getEventData(e);
      for (var i = 0; i < eventData.length; i++) {
        var activeTouchAction = this._activeTouchActions[eventData[i].identifier];
        // If we don't have previous knowledge of this touch we skip it...
        if (!activeTouchAction) {
          continue;
        }
        // Calculate the move offset from the start point. In the End event we will see if we
        // need to discard this because the offset is too big
        activeTouchAction.offsetX = Math.abs(eventData[i].touchData.pageX - activeTouchAction.startX);
        activeTouchAction.offsetY = Math.abs(eventData[i].touchData.pageY - activeTouchAction.startY);
      }
    }
  }, {
    key: "_handleEndEvent",
    value: function _handleEndEvent(e) {
      var eventData = this._getEventData(e);
      for (var i = 0; i < eventData.length; i++) {
        var activeTouchAction = this._activeTouchActions[eventData[i].identifier];
        // If we don't have previous knowledge of this touch we skip it...
        if (!activeTouchAction) {
          continue;
        }
        // If the offset from where we started the tap is smaller then the max SLOP offset
        if (activeTouchAction.offsetX < this._tapMaxSlop && activeTouchAction.offsetY < this._tapMaxSlop) {
          // If the time passed since the tap down is not exceeding the timeout which makes the tap a long press operation...
          if (this.getEventTimestamp() - activeTouchAction.startTime < this._longPressTimeout) {
            this._sendEvent('tap_events', exports.TapEventStructure, eventData[i].identifier, eventData[i].touchData, eventData[i].eventArgs);
          } else {
            this._sendEvent('longpress_events', exports.LongPressEventStructure, eventData[i].identifier, eventData[i].touchData, eventData[i].eventArgs);
          }
        }
        delete this._activeTouchActions[eventData[i].identifier];
      }
    }
  }, {
    key: "_handleCancelEvent",
    value: function _handleCancelEvent(e) {
      var eventData = this._getEventData(e);
      // Remove the canceled touch operations from the active actions dictionary
      for (var i = 0; i < eventData.length; i++) {
        delete this._activeTouchActions[eventData[i].identifier];
      }
    }
    // Get the event data. We build a unified event data structure so same code can handle the difference event formats
  }, {
    key: "_getEventData",
    value: function _getEventData(e) {
      // Case the event is of touch event type
      if (e.changedTouches !== undefined) {
        var eventData = [];
        for (var i = 0; i < e.changedTouches.length; i++) {
          var changedTouch = e.changedTouches[i];
          var identifier = changedTouch.identifier;
          eventData.push({
            identifier: identifier,
            touchData: changedTouch,
            eventArgs: e
          }); // we want to shrink it to short
        }
        return eventData;
      }
      // Case the event is of Pointer event type
      if (e.pointerType != null) {
        if (e.pointerType === 'touch' || e.pointerType === 'pen' || e.pointerType === e.MSPOINTER_TYPE_TOUCH || e.pointerType === e.MSPOINTER_TYPE_PEN) {
          var _identifier = e.pointerId ? e.pointerId : 0;
          return [{
            identifier: _identifier,
            touchData: e,
            eventArgs: e
          }];
        }
      }
      // If data is unsupported we return an empty array so consumption of the data will not be invalid
      return [];
    }
  }, {
    key: "_sendEvent",
    value: function _sendEvent(eventName, dataMappingDefs, identifier, touch, e) {
      var time = this.getEventTimestamp();
      var isTrusted = IsTrustedValue_1.IsTrustedValue[e.isTrusted];
      var element = this._elements.getElementHashFromEvent(e);
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      if (this._utils.isUndefinedNull(identifier)) {
        identifier = 0;
      }
      // client - relative to edge of browser not including scrolling
      // page - relative to edge with scroll offset
      // screen - relative to the edge of the screen
      this._dataQ.addToQueue(eventName, this._utils.convertToArrayByMap(dataMappingDefs, {
        eventSequence: eventSeq,
        timestamp: time,
        screenX: this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : touch.screenX ? Math.round(touch.screenX) : 0,
        screenY: this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : touch.screenY ? Math.round(touch.screenY) : 0,
        pageX: this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : touch.pageX || 0,
        pageY: this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : touch.pageY || 0,
        clientX: this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : touch.clientX || 0,
        clientY: this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : touch.clientY || 0,
        isTrusted: isTrusted,
        elementHash: element,
        touchIndex: identifier % 10000,
        // duplicating the radius since it comes from mobile devices as diameter
        touchSizeMajor: touch.radiusX ? touch.radiusX * 2 : 0,
        touchSizeMinor: touch.radiusY ? touch.radiusY * 2 : 0
      }));
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }, {
    key: "getSupportedTouchEvents",
    value: function getSupportedTouchEvents() {
      // FF, Chrome, Opera, iOS Safari
      if (window.TouchEvent) {
        return {
          startEvent: 'touchstart',
          moveEvent: 'touchmove',
          endEvent: 'touchend',
          cancelEvent: 'touchcancel'
        };
      }
      // IE11, Edge, Safari (desktop)
      // Pointer events are also supported by others, but the touch is more
      // accurate in touch related while the pointer is meant to aggregate all
      // the pointer devices
      if (window.PointerEvent) {
        return {
          startEvent: 'pointerdown',
          moveEvent: 'pointermove',
          endEvent: 'pointerup',
          cancelEvent: 'pointercancel'
        };
      }
      Logger_1["default"].debug('TapEvents:_createEventsToListenList - No touch support for browser.');
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = TapEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/TouchEventCollector.js":
/*!******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/TouchEventCollector.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = exports.TouchEventType = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var IsTrustedValue_1 = __webpack_require__(/*! ./IsTrustedValue */ "./dist/js-sdk-legacy/src/main/collectors/events/IsTrustedValue.js");
var MaskingService_1 = __webpack_require__(/*! ../../core/masking/MaskingService */ "./dist/js-sdk-legacy/src/main/core/masking/MaskingService.js");
var featureSettings = {
  configKey: 'isTouchEvents',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: true,
  runInSlave: true,
  runInLean: true,
  runInUns: false,
  isRunning: false,
  instance: null
};
var TouchEventIEType = {
  pointerdown: 'touchstart',
  pointerup: 'touchend',
  pointermove: 'touchmove',
  MSPointerDown: 'touchstart',
  MSPointerUp: 'touchend',
  MSPointerMove: 'touchmove'
};
exports.TouchEventType = {
  touchstart: 0,
  touchmove: 1,
  touchend: 2,
  touchcancel: 3
};
exports.EventStructure = ['eventSequence', 'timestamp', 'eventType', 'isTrusted', 'elementHash', 'clientX', 'clientY', 'touchIndex', 'touchSizeMajor', 'touchSizeMinor', 'pageX', 'pageY', 'screenX', 'screenY', 'relativeTime', 'touchPressure'];
var TouchEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function TouchEventCollector(utils, elements, dataQ, msgBus, maskingService, configuration) {
    var _this;
    _classCallCheck(this, TouchEventCollector);
    _this = _callSuper(this, TouchEventCollector);
    _this._utils = utils;
    _this._dataQ = dataQ;
    _this._elements = elements;
    _this._msgBus = msgBus;
    _this._onAllBrowsersTouchEventBinded = _this._onAllBrowsersTouchEvent.bind(_this);
    _this._maskingService = maskingService;
    _this._maxShadowDepth = configuration.getMaxShadowDepth();
    _this._iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
    return _this;
  }
  /**
   * @param {BrowserContext} browserContext
   */
  _inherits(TouchEventCollector, _DataCollector_1$defa);
  return _createClass(TouchEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      this._bind(browserContext);
    }
    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      this._unbind(browserContext);
    }
  }, {
    key: "_addToCommunicationQueue",
    value: function _addToCommunicationQueue(type, identifier, touch, e) {
      if (type === exports.TouchEventType.touchstart || type === exports.TouchEventType.touchend) {
        this._msgBus.publish(MessageBusEventType_1.MessageBusEventType.TouchEvent, {
          action: type
        });
      }
      var time = this.getEventTimestamp(e);
      var isTrusted = IsTrustedValue_1.IsTrustedValue[e.isTrusted];
      var element = this._elements.getElementHashFromEvent(e);
      var eventSeq = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      if (this._utils.isUndefinedNull(type)) {
        type = -1;
      }
      if (this._utils.isUndefinedNull(identifier)) {
        identifier = -1;
      }
      var relativeTs = this.getTimestampFromEvent(e);
      // client - relative to edge of browser not including scrolling
      // page - relative to edge with scroll offset
      // screen - relative to the edge of the screen
      this._dataQ.addToQueue('touch_events', this._utils.convertToArrayByMap(exports.EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        eventType: type,
        isTrusted: isTrusted,
        elementHash: element,
        clientX: this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : touch.clientX ? Math.round(touch.clientX) : 0,
        clientY: this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : touch.clientY ? Math.round(touch.clientY) : 0,
        touchIndex: identifier,
        // duplicating the radius since it comes from mobile devices as diameter
        touchSizeMajor: touch.radiusX ? touch.radiusX * 2 : 0,
        touchSizeMinor: touch.radiusY ? touch.radiusY * 2 : 0,
        pageX: this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : touch.pageX || 0,
        pageY: this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : touch.pageY || 0,
        screenX: this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : touch.screenX || 0,
        screenY: this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : touch.screenY || 0,
        relativeTime: relativeTs,
        touchPressure: touch.force || -1
      }));
    }
    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_bind",
    value: function _bind(browserContext) {
      var _this2 = this;
      var currDocument = browserContext.getDocument();
      var eventsToListen;
      // FF, Chrome, Opera, iOS Safari
      if (window.TouchEvent) {
        eventsToListen = ['touchstart', 'touchmove', 'touchend', 'touchcancel'];
      } else if (window.PointerEvent) {
        // IE11, Edge, Safari (desktop)
        // Pointer events are also supported by others, but the touch is more
        // accurate in touch related while the pointer is meant to aggregate all
        // the pointer devices
        eventsToListen = ['pointerdown', 'pointermove', 'pointerup'];
      }
      this._listeningToEvents = eventsToListen;
      if (this._listeningToEvents) {
        var _loop = function _loop(i) {
          _this2._utils.addEventListener(currDocument, _this2._listeningToEvents[i], _this2._onAllBrowsersTouchEventBinded);
          browserContext.collectAllElementsBySelectorAsync('iframe', _this2._maxShadowDepth, _this2._iframeLoadingTimeout).then(function (iframes) {
            iframes.forEach(function (iframe) {
              if (iframe && iframe.contentDocument) {
                _this2._utils.addEventListener(iframe.contentDocument, _this2._listeningToEvents[i], _this2._onAllBrowsersTouchEventBinded);
              }
            });
          });
        };
        for (var i = 0; i < this._listeningToEvents.length; i++) {
          _loop(i);
        }
      }
    }
    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_unbind",
    value: function _unbind(browserContext) {
      var _this3 = this;
      var currDocument = browserContext.getDocument();
      if (this._listeningToEvents) {
        var _loop2 = function _loop2(i) {
          _this3._utils.removeEventListener(currDocument, _this3._listeningToEvents[i], _this3._onAllBrowsersTouchEventBinded);
          browserContext.collectAllElementsBySelectorAsync('iframe', _this3._maxShadowDepth, _this3._iframeLoadingTimeout).then(function (iframes) {
            iframes.forEach(function (iframe) {
              if (iframe && iframe.contentDocument) {
                _this3._utils.removeEventListener(iframe.contentDocument, _this3._listeningToEvents[i], _this3._onAllBrowsersTouchEventBinded);
              }
            });
          });
        };
        for (var i = 0; i < this._listeningToEvents.length; i++) {
          _loop2(i);
        }
      }
    }
  }, {
    key: "_onAllBrowsersTouchEvent",
    value: function _onAllBrowsersTouchEvent(e) {
      this._onIeTouchEvent(e);
      this._onTouchEvent(e);
      return true;
    }
  }, {
    key: "_onTouchEvent",
    value: function _onTouchEvent(e) {
      // prevents ie from working
      if (e.pointerType === null || e.pointerType === undefined) {
        if (e.changedTouches !== undefined) {
          var type = exports.TouchEventType[e.type];
          for (var i = 0; i < e.changedTouches.length; i++) {
            var touch = e.changedTouches[i];
            var identifier = touch.identifier % 10000; // we want to shrink it to short
            this._addToCommunicationQueue(type, identifier, touch, e);
          }
        }
      }
    }
  }, {
    key: "_onIeTouchEvent",
    value: function _onIeTouchEvent(e) {
      // don't take the event if it's a mouse event. different syntax between ie 10 and 11
      if (e.pointerType != null) {
        if (e.pointerType === 'touch' || e.pointerType === 'pen' || e.pointerType === e.MSPOINTER_TYPE_TOUCH || e.pointerType === e.MSPOINTER_TYPE_PEN) {
          var touchLikeType = TouchEventIEType[e.type] || 'touchcancel';
          var identifier = e.pointerId ? e.pointerId % 10000 : 0; // we want to shrink it to short
          var type = exports.TouchEventType[touchLikeType];
          this._addToCommunicationQueue(type, identifier, e, e);
        }
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = TouchEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/WindowEventCollector.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/WindowEventCollector.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = exports.WindowEventType = void 0;
// eslint-disable-next-line max-classes-per-file
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var IsTrustedValue_1 = __webpack_require__(/*! ./IsTrustedValue */ "./dist/js-sdk-legacy/src/main/collectors/events/IsTrustedValue.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var featureSettings = {
  configKey: 'isWindowEvents',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
exports.WindowEventType = {
  DOMContentLoaded: 0,
  scroll: 1,
  resize: 2,
  focus: 3,
  blur: 4,
  tabFocus: 5,
  tabBlur: 6
};
exports.EventStructure = ['eventSequence', 'timestamp', 'eventType', 'isTrusted', 'screenWidth', 'screenHeight', 'clientWidth', 'clientHeight', 'documentWidth', 'documentHeight', 'scrollTop', 'scrollLeft', 'windowInnerWidth', 'windowInnerHeight', 'windowOuterWidth', 'windowOuterHeight'];
var WindowEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function WindowEventCollector(builder) {
    var _this;
    _classCallCheck(this, WindowEventCollector);
    _this = _callSuper(this, WindowEventCollector);
    /**
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "startFeature", function (browserContext) {
      try {
        _this._resizeEventEmitter.start(browserContext.Context);
        _this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ResizeEvent, _this._onWindowEvent);
        _this._focusEventEmitter.start(browserContext.Context);
        _this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.FocusEvent, _this._onWindowEvent);
        _this._blurEventEmitter.start(browserContext.Context);
        _this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.BlurEvent, _this._onWindowEvent);
        _this._domContentLoadedEventEmitter.start(browserContext.getDocument());
        _this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.DOMContentLoadedEvent, _this._onWindowEvent);
        _this._visibilityChangeEventEmitter.start(browserContext.getDocument());
        _this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.VisibilityChangeEvent, _this._onWindowEvent);
        if (_this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isScrollCollect)) {
          _this._scrollEventEmitter.start(browserContext.Context);
          _this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ScrollEvent, _this._onWindowEvent);
        }
      } catch (err) {
        Logger_1["default"].error("Failed starting the WindowEventCollector. msg: ".concat(err.message), err);
      }
    });
    /**
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "stopFeature", function (browserContext) {
      try {
        _this._resizeEventEmitter.stop(browserContext.Context);
        _this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.ResizeEvent, _this._onWindowEvent);
        _this._focusEventEmitter.stop(browserContext.Context);
        _this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.FocusEvent, _this._onWindowEvent);
        _this._blurEventEmitter.stop(browserContext.Context);
        _this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.BlurEvent, _this._onWindowEvent);
        _this._domContentLoadedEventEmitter.stop(browserContext.getDocument());
        _this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.DOMContentLoadedEvent, _this._onWindowEvent);
        _this._visibilityChangeEventEmitter.stop(browserContext.getDocument());
        _this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.VisibilityChangeEvent, _this._onWindowEvent);
        if (_this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isScrollCollect)) {
          _this._scrollEventEmitter.stop(browserContext.Context);
          _this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.ScrollEvent, _this._onWindowEvent);
        }
      } catch (err) {
        Logger_1["default"].error("Failed stopping the ClipboardEvents feature. msg: ".concat(err.message), err);
      }
    });
    /**
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "updateFeatureConfig", function (browserContext) {
      if (!_this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isScrollCollect)) {
        _this._scrollEventEmitter.stop(browserContext.Context);
        _this._messageBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.ScrollEvent, _this._onWindowEvent);
      } else if (_this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isScrollCollect)) {
        _this._scrollEventEmitter.start(browserContext.Context);
        _this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ScrollEvent, _this._onWindowEvent);
      }
    });
    _defineProperty(_this, "_onWindowEvent", function (event) {
      try {
        _this._sendToQueue(event);
      } catch (e) {
        Logger_1["default"].error("An error has occurred while sending window event. ".concat(e.message), e);
      }
    });
    _defineProperty(_this, "_sendToQueue", function (e) {
      if (!e) {
        throw new Error('Invalid window event received.');
      }
      var time;
      var isTrusted = IsTrustedValue_1.IsTrustedValue[undefined];
      if (e.type === 'DOMContentLoaded') {
        time = new Date().getTime();
      } else {
        time = _this.getEventTimestamp(e);
        isTrusted = IsTrustedValue_1.IsTrustedValue[e.isTrusted];
      }
      // if for performance optimization
      if (Logger_1["default"].isDebug()) {
        Logger_1["default"].trace('got event ' + e.type + ' at time ' + time);
        Logger_1["default"].trace('adding to queue - screen(width,height): ' + screen.width + ',' + screen.height + ' window(width,height): ' + window.innerWidth + ',' + window.innerHeight);
      }
      var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var type = e.type !== 'visibilitychange' ? e.type : document.visibilityState === 'hidden' ? 'tabBlur' : 'tabFocus';
      var eventType = exports.WindowEventType[type];
      if (eventType == null || eventType === undefined) {
        eventType = -1;
      }
      _this._dataQueue.addToQueue('window_events', _this._utils.convertToArrayByMap(exports.EventStructure, {
        eventType: eventType,
        eventSequence: eventSeq,
        timestamp: time,
        screenWidth: screen.width ? Math.round(screen.width) : -1,
        screenHeight: screen.height ? Math.round(screen.height) : -1,
        clientWidth: window.innerWidth ? Math.round(window.innerWidth) : -1,
        clientHeight: window.innerHeight ? Math.round(window.innerHeight) : -1,
        documentWidth: document.body && document.body.clientWidth ? Math.round(document.body.clientWidth) : -1,
        documentHeight: document.body && document.body.clientHeight ? Math.round(document.body.clientHeight) : -1,
        scrollTop: document.body && document.body.scrollTop ? Math.round(document.body.scrollTop) : 0,
        scrollLeft: document.body && document.body.scrollLeft ? Math.round(document.body.scrollLeft) : 0,
        windowInnerWidth: window.innerWidth ? Math.round(window.innerWidth) : -1,
        windowInnerHeight: window.innerHeight ? Math.round(window.innerHeight) : -1,
        windowOuterWidth: window.outerWidth ? Math.round(window.outerWidth) : -1,
        windowOuterHeight: window.outerHeight ? Math.round(window.outerHeight) : -1,
        isTrusted: isTrusted
      }));
    });
    _this._configurationRepository = builder.configurationRepository;
    _this._utils = builder.utils;
    _this._dataQueue = builder.dataQueue;
    _this._messageBus = builder.messageBus;
    _this._focusEventEmitter = builder.focusEventEmitter;
    _this._blurEventEmitter = builder.blurEventEmitter;
    _this._resizeEventEmitter = builder.resizeEventEmitter;
    _this._domContentLoadedEventEmitter = builder.domContentLoadedEventEmitter;
    _this._visibilityChangeEventEmitter = builder.visibilityChangeEventEmitter;
    _this._scrollEventEmitter = builder.scrollEventEmitter;
    return _this;
  }
  _inherits(WindowEventCollector, _DataCollector_1$defa);
  return _createClass(WindowEventCollector, null, [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }, {
    key: "Builder",
    get: function get() {
      var Builder = /*#__PURE__*/function () {
        function Builder(configurationRepository, utils, dataQ) {
          _classCallCheck(this, Builder);
          this.configurationRepository = configurationRepository;
          this.utils = utils;
          this.dataQueue = dataQ;
        }
        return _createClass(Builder, [{
          key: "withMessageBus",
          value: function withMessageBus(messageBus) {
            this.messageBus = messageBus;
            return this;
          }
        }, {
          key: "withFocusEventEmitter",
          value: function withFocusEventEmitter(focusEventEmitter) {
            this.focusEventEmitter = focusEventEmitter;
            return this;
          }
        }, {
          key: "withBlurEventEmitter",
          value: function withBlurEventEmitter(blurEventEmitter) {
            this.blurEventEmitter = blurEventEmitter;
            return this;
          }
        }, {
          key: "withResizeEventEmitter",
          value: function withResizeEventEmitter(resizeEventEmitter) {
            this.resizeEventEmitter = resizeEventEmitter;
            return this;
          }
        }, {
          key: "withDOMContentLoadedEventEmitter",
          value: function withDOMContentLoadedEventEmitter(domContentLoadedEventEmitter) {
            this.domContentLoadedEventEmitter = domContentLoadedEventEmitter;
            return this;
          }
        }, {
          key: "withVisibilityChangeEventEmitter",
          value: function withVisibilityChangeEventEmitter(visibilityChangeEventEmitter) {
            this.visibilityChangeEventEmitter = visibilityChangeEventEmitter;
            return this;
          }
        }, {
          key: "withScrollEventEmitter",
          value: function withScrollEventEmitter(scrollEventEmitter) {
            this.scrollEventEmitter = scrollEventEmitter;
            return this;
          }
        }, {
          key: "build",
          value: function build() {
            return new WindowEventCollector(this);
          }
        }]);
      }();
      return Builder;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = WindowEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/handlers/JqueryElementsHandler.js":
/*!*****************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/handlers/JqueryElementsHandler.js ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StandardInputEventsEmitter = null;
var StandardOnClickEventsEmitter = null;
var StandardOnChangeEventsEmitter = null;
var StandardOnFormEventsEmitter = null;
function _bindInputEvents(element) {
  StandardInputEventsEmitter.removeElementEvents(element);
  StandardInputEventsEmitter.addElementEvents(element, true);
}
function _bindOnClickEvents(element) {
  StandardOnClickEventsEmitter.removeElementEvents(element);
  StandardOnClickEventsEmitter.addElementEvents(element, true);
}
function _bindOnChangeEvents(element) {
  StandardOnChangeEventsEmitter.removeElementEvents(element);
  StandardOnChangeEventsEmitter.addElementEvents(element, true);
}
function _bindOnFormsEvents(element) {
  StandardOnFormEventsEmitter.removeElementEvents(element);
  StandardOnFormEventsEmitter.addElementEvents(element, true);
}
function JqueryElementsHandler(StandardInputEventsEmitterService, StandardOnClickEventsEmitterService, StandardOnChangeEventsEmitterService, StandardOnFormEventsEmitterService) {
  StandardInputEventsEmitter = StandardInputEventsEmitterService;
  StandardOnClickEventsEmitter = StandardOnClickEventsEmitterService;
  StandardOnChangeEventsEmitter = StandardOnChangeEventsEmitterService;
  StandardOnFormEventsEmitter = StandardOnFormEventsEmitterService;
  return {
    bindInputEvents: _bindInputEvents,
    bindOnClickEvents: _bindOnClickEvents,
    bindOnChangeEvents: _bindOnChangeEvents,
    bindOnFormsEvents: _bindOnFormsEvents
  };
}
exports["default"] = JqueryElementsHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/events/index.js":
/*!****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/events/index.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BatteryStatusCollector = exports.FlutterMouseEventCollector = exports.FlutterTouchEventCollector = exports.FlutterKeyEventCollector = exports.FlutterElementEventsCollector = exports.LocationCollector = exports.ElementsCollector = exports.TabEventCollector = exports.TouchEventCollector = exports.KeyEventCollector = exports.MouseEventCollector = exports.LightSensorEventCollector = exports.PrintEventCollector = exports.StorageEventCollector = exports.TapEventCollector = exports.DeviceOrientationCollector = exports.NetInfoEventCollector = exports.ScriptEventCollector = exports.PinchZoomEventCollector = exports.AccelerometerEventCollector = exports.WindowEventCollector = exports.BeforeInstallPromptEventCollector = exports.OrientationEventCollector = exports.ClipboardEventCollector = exports.ElementEventCollector = void 0;
var ElementEventCollector_1 = __webpack_require__(/*! ./ElementEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/ElementEventCollector.js");
Object.defineProperty(exports, "ElementEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(ElementEventCollector_1)["default"];
  }
}));
var ClipboardEventCollector_1 = __webpack_require__(/*! ./ClipboardEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/ClipboardEventCollector.js");
Object.defineProperty(exports, "ClipboardEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(ClipboardEventCollector_1)["default"];
  }
}));
var OrientationEventCollector_1 = __webpack_require__(/*! ./OrientationEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/OrientationEventCollector.js");
Object.defineProperty(exports, "OrientationEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(OrientationEventCollector_1)["default"];
  }
}));
var BeforeInstallPromptEventCollector_1 = __webpack_require__(/*! ./BeforeInstallPromptEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/BeforeInstallPromptEventCollector.js");
Object.defineProperty(exports, "BeforeInstallPromptEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(BeforeInstallPromptEventCollector_1)["default"];
  }
}));
var WindowEventCollector_1 = __webpack_require__(/*! ./WindowEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/WindowEventCollector.js");
Object.defineProperty(exports, "WindowEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(WindowEventCollector_1)["default"];
  }
}));
var AccelerometerEventCollector_1 = __webpack_require__(/*! ./AccelerometerEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/AccelerometerEventCollector.js");
Object.defineProperty(exports, "AccelerometerEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(AccelerometerEventCollector_1)["default"];
  }
}));
var PinchZoomEventCollector_1 = __webpack_require__(/*! ./PinchZoomEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/PinchZoomEventCollector.js");
Object.defineProperty(exports, "PinchZoomEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(PinchZoomEventCollector_1)["default"];
  }
}));
var ScriptEventCollector_1 = __webpack_require__(/*! ./ScriptEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/ScriptEventCollector.js");
Object.defineProperty(exports, "ScriptEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(ScriptEventCollector_1)["default"];
  }
}));
var NetInfoEventCollector_1 = __webpack_require__(/*! ./NetInfoEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/NetInfoEventCollector.js");
Object.defineProperty(exports, "NetInfoEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(NetInfoEventCollector_1)["default"];
  }
}));
var DeviceOrientationCollector_1 = __webpack_require__(/*! ./DeviceOrientationCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/DeviceOrientationCollector.js");
Object.defineProperty(exports, "DeviceOrientationCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(DeviceOrientationCollector_1)["default"];
  }
}));
var TapEventCollector_1 = __webpack_require__(/*! ./TapEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/TapEventCollector.js");
Object.defineProperty(exports, "TapEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(TapEventCollector_1)["default"];
  }
}));
var StorageEventCollector_1 = __webpack_require__(/*! ./StorageEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/StorageEventCollector.js");
Object.defineProperty(exports, "StorageEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(StorageEventCollector_1)["default"];
  }
}));
var PrintEventCollector_1 = __webpack_require__(/*! ./PrintEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/PrintEventCollector.js");
Object.defineProperty(exports, "PrintEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(PrintEventCollector_1)["default"];
  }
}));
var LightSensorEventCollector_1 = __webpack_require__(/*! ./LightSensorEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/LightSensorEventCollector.js");
Object.defineProperty(exports, "LightSensorEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(LightSensorEventCollector_1)["default"];
  }
}));
var MouseEventCollector_1 = __webpack_require__(/*! ./MouseEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/MouseEventCollector.js");
Object.defineProperty(exports, "MouseEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(MouseEventCollector_1)["default"];
  }
}));
var KeyEventCollector_1 = __webpack_require__(/*! ./KeyEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/KeyEventCollector.js");
Object.defineProperty(exports, "KeyEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(KeyEventCollector_1)["default"];
  }
}));
var TouchEventCollector_1 = __webpack_require__(/*! ./TouchEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/TouchEventCollector.js");
Object.defineProperty(exports, "TouchEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(TouchEventCollector_1)["default"];
  }
}));
var TabEventCollector_1 = __webpack_require__(/*! ./TabEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/TabEventCollector.js");
Object.defineProperty(exports, "TabEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(TabEventCollector_1)["default"];
  }
}));
var ElementsCollector_1 = __webpack_require__(/*! ./ElementsCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/ElementsCollector.js");
Object.defineProperty(exports, "ElementsCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(ElementsCollector_1)["default"];
  }
}));
var LocationCollector_1 = __webpack_require__(/*! ./LocationCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/LocationCollector.js");
Object.defineProperty(exports, "LocationCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(LocationCollector_1)["default"];
  }
}));
var FlutterElementEventsCollector_1 = __webpack_require__(/*! ../../flutter/collectors/elements/FlutterElementEventsCollector */ "./dist/js-sdk-legacy/src/main/flutter/collectors/elements/FlutterElementEventsCollector.js");
Object.defineProperty(exports, "FlutterElementEventsCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(FlutterElementEventsCollector_1)["default"];
  }
}));
var FlutterKeyEventCollector_1 = __webpack_require__(/*! ../../flutter/collectors/key/FlutterKeyEventCollector */ "./dist/js-sdk-legacy/src/main/flutter/collectors/key/FlutterKeyEventCollector.js");
Object.defineProperty(exports, "FlutterKeyEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(FlutterKeyEventCollector_1)["default"];
  }
}));
var FlutterTouchEventCollector_1 = __webpack_require__(/*! ../../flutter/collectors/touch/FlutterTouchEventCollector */ "./dist/js-sdk-legacy/src/main/flutter/collectors/touch/FlutterTouchEventCollector.js");
Object.defineProperty(exports, "FlutterTouchEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(FlutterTouchEventCollector_1)["default"];
  }
}));
var FlutterMouseEventCollector_1 = __webpack_require__(/*! ../../flutter/collectors/mouse/FlutterMouseEventCollector */ "./dist/js-sdk-legacy/src/main/flutter/collectors/mouse/FlutterMouseEventCollector.js");
Object.defineProperty(exports, "FlutterMouseEventCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(FlutterMouseEventCollector_1)["default"];
  }
}));
var BatteryStatusCollector_1 = __webpack_require__(/*! ./BatteryStatusCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/BatteryStatusCollector.js");
Object.defineProperty(exports, "BatteryStatusCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(BatteryStatusCollector_1)["default"];
  }
}));

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/identity/CrossDomainMuidCollector.js":
/*!*************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/identity/CrossDomainMuidCollector.js ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventStructure = exports.DOMAIN_STATES_PROPS = exports.DOMAIN_REGEX = exports.CSP_REGEX = exports.CrossmuidEventType = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var BrowserContext_1 = __importDefault(__webpack_require__(/*! ../../core/browsercontexts/BrowserContext */ "./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContext.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var SystemFrameName_1 = __webpack_require__(/*! ../../core/frames/SystemFrameName */ "./dist/js-sdk-legacy/src/main/core/frames/SystemFrameName.js");
var featureSettings = {
  configKey: 'isCrossdomain',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
exports.CrossmuidEventType = {
  found: 0,
  "new": 1
};
// REGEX to detect usage of child-src with Content Security Policy meta tag
exports.CSP_REGEX = /(?=(child\-src)|(frame\-src))([^;]+)/gi;
// REGEX to detect domain URL excluding request uri
exports.DOMAIN_REGEX = /http[s]?:\/\/([^\/]+)/gi;
// Domain states props template
exports.DOMAIN_STATES_PROPS = {
  resource: null,
  iframeElement: false,
  blockedByCSP: false,
  iframeLoaded: false,
  ACKMessageSent: false,
  ACKMessageRecieved: false,
  unavailable: false // Domain is not available - do not report again
};
exports.EventStructure = ['eventSequence', 'timestamp', 'eventType', 'domainUrl', 'muid'];
var CrossDomainMuidCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  /**
   * Use a CrossDomain builder to create a new instance
   * @param builder {Builder}
   */
  function CrossDomainMuidCollector(builder) {
    var _this;
    _classCallCheck(this, CrossDomainMuidCollector);
    _this = _callSuper(this, CrossDomainMuidCollector);
    /**
     * Iterate over the domains and create a default state for each domain
     * Detect domains in CSP meta tag
     * Start connection between Cross Domain feature and the cross client domains
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "startFeature", function (browserContext) {
      // Expecting a list of domains
      _this._domainsResources = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.crossDomainsList);
      _this._crossDomainsTimeout = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.crossDomainsTimeout);
      if (Array.isArray(_this._domainsResources) && _this._domainsResources.length > 0) {
        // Start window Message event observing
        _this._windowMessageEmitter.startObserver(browserContext);
        _this._domainsResources.forEach(function (element) {
          var _domainMatch = element.match(exports.DOMAIN_REGEX);
          if (_domainMatch !== null && typeof _domainMatch[0] === 'string') {
            var _domain = _domainMatch[0];
            if (_typeof(_this._domainsStates[_domain]) === 'object') return;
            _this._domainsStates[_domain] = _objectSpread({}, exports.DOMAIN_STATES_PROPS);
            _this._domainsStates[_domain].resource = element;
            _this._domains.push(_domain);
          }
        });
        // If invalid domains of any sort are provided, verify this._domains has at least a single valid
        // domain element that can be connected
        if (Array.isArray(_this._domains) && _this._domains.length > 0) {
          // Apply the Content Security Policy assertion to every available domain
          _this.isBlockedByCSP(browserContext, _this._domains);
          _this._domUtils.onDocumentBody(browserContext.Context, function () {
            _this.connectDomains(browserContext);
          });
        }
      }
    });
    /**
     * Stop the CrossDomain's message emitter
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "stopFeature", function (browserContext) {
      _this._clearFeaturesObjects(browserContext);
    });
    /**
     * @param {BrowserContext} browserContext
     * @private
     */
    _defineProperty(_this, "_clearFeaturesObjects", function (browserContext) {
      _this._windowMessageEmitter.stopObserver(browserContext);
      if (Array.isArray(_this._domains) && _this._domains.length > 0) {
        _this._domains.forEach(function (domain) {
          _this.clearDomElements(browserContext, domain);
        });
        _this._domains = [];
        _this._domainsStates = {};
      }
    });
    /**
     * Start/Continue the connection between the current window to the cross client domains
     * Once the cross domain connection is started, using setTimeout, allow up to X milliseconds
     * (using the crossDomainsTimeout directive) before removing each iframe created per a given domain.
     * @param {BrowserContext} browserContext
     * @param domains
     */
    _defineProperty(_this, "connectDomains", function (browserContext) {
      if (Array.isArray(_this._domains) && _this._domains.length > 0) {
        _this._domains.forEach(function (domain) {
          // Do not create iframe in the following cases
          if (!_this._domainsStates[domain].blockedByCSP && _this._domainsStates[domain].iframeElement === false) {
            _this.createIframe(browserContext, domain);
          }
        });
        _this._domainsTimeoutFunc = setTimeout(function () {
          _this._domains.forEach(function (domain) {
            if (_typeof(_this._domainsStates[domain]) === 'object' && _this._domainsStates[domain].ACKMessageRecieved === false && _this._domainsStates[domain].unavailable === false) {
              Logger_1["default"].warn("Cross Domain feature - domain ".concat(domain, " is unavailable"));
              _this._domainsStates[domain].unavailable = true;
              _this.clearDomElements(browserContext, domain);
            }
          });
        }, _this._crossDomainsTimeout);
      }
    });
    /**
     * Create the iframe element, setup an onload event
     * @param {BrowserContext} browserContext
     * @param domain
     */
    _defineProperty(_this, "createIframe", function (browserContext, domain) {
      var iframe = browserContext.getDocument().createElement('iframe');
      iframe.onload = function () {
        _this.postNextMessage(domain);
      };
      iframe.id = SystemFrameName_1.SystemFrameName.ignorePrefixFrame + CrossDomainMuidCollector.generateRandomID();
      iframe.src = _this._domainsStates[domain].resource;
      iframe.style.display = 'none';
      iframe.style.opacity = '0';
      iframe.style.width = '1px';
      iframe.style.height = '1px';
      browserContext.getDocument().body.appendChild(iframe);
      _this._domainsStates[domain].iframeElement = iframe;
    });
    /**
     * Clear the iframe for the requested domain
     * @param {BrowserContext} browserContext
     * @param domain
     */
    _defineProperty(_this, "clearDomElements", function (browserContext, domain) {
      var _domainFrame = _this._domainsStates[domain].iframeElement;
      if (_typeof(_domainFrame) === 'object') {
        var _domainFrameElement = browserContext.getDocument().getElementById(_this._domainsStates[domain].iframeElement.id);
        if (_domainFrameElement !== null) {
          browserContext.getDocument().body.removeChild(_domainFrame);
        }
      }
    });
    /**
     * Post the next message based on the domains state
     * Message is sent only if the ACK has not been sent and if the iframeElement is available
     * At this stage, generated MUID is sent by default whether the cross client script needs it or not
     * @param domain
     */
    _defineProperty(_this, "postNextMessage", function (domain) {
      if (!_this._domainsStates[domain].ACKMessageRecieved && _this._domainsStates[domain].iframeElement) {
        var message = {
          'muid': _this._generatedMUID
        };
        _this._domainsStates[domain].iframeElement.contentWindow.postMessage(JSON.stringify(message), domain);
        _this._domainsStates[domain].ACKMessageSent = true;
      }
    });
    /**
     * Attempt to locate a Content-Security-Policy meta tag with child-src rule
     * Updates the states of every domain if detected
     * @param {BrowserContext} browserContext
     * @param domains
     */
    _defineProperty(_this, "isBlockedByCSP", function (browserContext, domains) {
      if (!Array.isArray(domains) || domains.length < 1) {
        throw new Error('Domains are expected for content security policy assertion');
      }
      var cspFound = false;
      [].slice.call(browserContext.getDocument().getElementsByTagName('meta')).forEach(function (metaElem) {
        if (metaElem.getAttribute('http-equiv') === 'Content-Security-Policy') {
          cspFound = true;
          var cspMatch = metaElem.getAttribute('content').match(exports.CSP_REGEX);
          domains.forEach(function (domain) {
            if (cspMatch && cspMatch[0].indexOf(domain) === -1) {
              if (_typeof(_this._domainsStates[domain]) === 'object') {
                _this._domainsStates[domain].blockedByCSP = true;
                Logger_1["default"].warn("Cross Domain feature - domain ".concat(domain, " is blocked by CSP"));
              }
            }
          });
        }
        if (cspFound) return false;
      });
    });
    /**
     * Will clear the frame element immediately upon handling cross client message
     * @param message
     */
    _defineProperty(_this, "windowMessageHandler", function (message) {
      var domain = message.message.origin;
      if (_this._domainsStates.hasOwnProperty(domain)) {
        // Determine the next state based on the cross client message
        if (_this._domainsStates[domain].ACKMessageRecieved === true) return;
        _this._domainsStates[domain].ACKMessageRecieved = true;
        _this.clearDomElements(new BrowserContext_1["default"](message.message.currentTarget), domain);
        var _data = message.message.data;
        _this.sendToQueue(domain, _data);
      }
    });
    /**
     * Send the found/new data to queue
     * @param domain
     * @param data
     */
    _defineProperty(_this, "sendToQueue", function (domainUrl, data) {
      var domain = domainUrl.replace(/http[s]?:\/\//i, '');
      if (_typeof(data.found) === 'object') {
        Object.keys(data.found).forEach(function (item) {
          var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
          var foundKey = domain;
          var foundValue = data.found[item].split('__');
          var eventData = {
            eventType: _this._eventType.found,
            eventSequence: eventSeq,
            domainUrl: foundKey,
            muid: foundValue[0],
            timestamp: foundValue[1]
          };
          _this._dataQ.addToQueue('crossmuid_event', _this._utils.convertToArrayByMap(exports.EventStructure, eventData), true);
        });
      }
      if (_typeof(data["new"]) === 'object') {
        Object.keys(data["new"]).forEach(function (item) {
          var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
          var newKey = domain;
          var newValue = data["new"][item].split('__');
          var eventData = {
            eventType: _this._eventType["new"],
            eventSequence: eventSeq,
            domainUrl: newKey,
            muid: newValue[0],
            timestamp: newValue[1]
          };
          _this._dataQ.addToQueue('crossmuid_event', _this._utils.convertToArrayByMap(exports.EventStructure, eventData));
        });
      }
      if (_typeof(data.error_message) === 'object') {
        Logger_1["default"].warn("Cross Domain feature - domain ".concat(domain, " error. Error Message: \n                ").concat(data.error_message, " Code: ").concat(data.error_code));
      }
    });
    /**
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "updateFeatureConfig", function (browserContext) {
      _this._domainsResources = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.crossDomainsList);
      _this._crossDomainsTimeout = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.crossDomainsTimeout);
      clearTimeout(_this._domainsTimeoutFunc);
      _this._domainsTimeoutFunc = null;
      _this.updateDomainStates(browserContext);
    });
    /**
     * Update the _domainStates object in case unhandled domains are found
     * Do not clear or remove the state of handled domains
     * @param {BrowserContext} browserContext
     */
    _defineProperty(_this, "updateDomainStates", function (browserContext) {
      if (Array.isArray(_this._domainsResources) && _this._domainsResources.length > 0) {
        _this._domains = [];
        _this._domainsResources.forEach(function (element) {
          var _domainMatch = element.match(exports.DOMAIN_REGEX);
          if (_domainMatch !== null && typeof _domainMatch[0] === 'string') {
            var _domain = _domainMatch[0];
            // No need to recreated the state for existing domain
            if (_typeof(_this._domainsStates[_domain]) !== 'object') {
              _this._domainsStates[_domain] = _objectSpread({}, exports.DOMAIN_STATES_PROPS);
              _this._domainsStates[_domain].resource = element;
            }
            _this._domains.push(_domain);
          }
        });
        // If invalid domains of any sort are provided, verify this._domains has at least a single valid
        // domain element that can be connected
        if (Array.isArray(_this._domains) && _this._domains.length > 0) {
          // Apply the Content Security Policy assertion to every available domain
          _this.isBlockedByCSP(browserContext, _this._domains);
          _this._domUtils.onDocumentBody(browserContext.Context, function () {
            _this.connectDomains(browserContext);
          });
        }
      }
    });
    _this._configurationRepository = builder.configurationRepository;
    _this._dataQ = builder.dataQ;
    _this._utils = builder.utils;
    _this._domUtils = builder.domUtils;
    _this._eventType = builder.eventType;
    _this._messageBus = builder.messageBus;
    _this._windowMessageEmitter = builder.windowMessageEventEmitter;
    _this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.WindowMessageEvent, _this.windowMessageHandler);
    // Cross client MUID to be sent by default for every domain provided
    _this._generatedMUID = _this._utils.dateNow() + '-' + _this._utils.generateUUID().toUpperCase();
    _this._domainsStates = {};
    // Full domain resources list provided by the config manager
    _this._domainsResources = [];
    // Actual domains array used for internal iteration
    _this._domains = [];
    _this._domainsTimeoutFunc = null;
    return _this;
  }
  _inherits(CrossDomainMuidCollector, _DataCollector_1$defa);
  return _createClass(CrossDomainMuidCollector, null, [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
    /**
     * Returns a CrossDomain DataCollector builder
     * @returns {Builder}
     * @constructor
     */
  }, {
    key: "Builder",
    get: function get() {
      var Builder = /*#__PURE__*/function () {
        function Builder(configurationRepository, dataQ, utils, domUtils, eventType) {
          _classCallCheck(this, Builder);
          this.configurationRepository = configurationRepository;
          this.dataQ = dataQ;
          this.utils = utils;
          this.domUtils = domUtils;
          this.eventType = eventType;
        }
        /**
         * @param {MessageBus} messageBus
         * @returns {Builder}
         */
        return _createClass(Builder, [{
          key: "withMessageBus",
          value: function withMessageBus(messageBus) {
            this.messageBus = messageBus;
            return this;
          }
          /**
           *
           * @param {WindowMessageEventEmitter} windowMessageEventEmitter
           * @returns {Builder}
           */
        }, {
          key: "withWindowMessageEventEmitter",
          value: function withWindowMessageEventEmitter(windowMessageEventEmitter) {
            this.windowMessageEventEmitter = windowMessageEventEmitter;
            return this;
          }
        }, {
          key: "build",
          value: function build() {
            return new CrossDomainMuidCollector(this);
          }
        }]);
      }();
      return Builder;
    }
  }, {
    key: "generateRandomID",
    value: function generateRandomID() {
      var charset = 'abcdefghijklmnopqrstuvwxyz0123456789';
      var randomId = '';
      for (var i = 0; i < 16; i++) {
        randomId += charset.charAt(Math.floor(Math.random() * charset.length));
      }
      return randomId;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = CrossDomainMuidCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/misc/FilesFeature.js":
/*!*********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/misc/FilesFeature.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var featureSettings = {
  configKey: 'isFilesFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var FilesFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function FilesFeature(configurationRepository, utils, sessionService, muidService, cidCache) {
    var _this;
    _classCallCheck(this, FilesFeature);
    _this = _callSuper(this, FilesFeature);
    _this._utils = utils;
    _this._configurationRepository = configurationRepository;
    _this._sessionService = sessionService;
    _this._muidService = muidService;
    _this._cidCache = cidCache;
    return _this;
  }
  /**
   * generic function for commends of getting files for different purposes
   * is list is empty or null do not run
   *
   * All the parameters need to be updated in order to call the feature
   */
  _inherits(FilesFeature, _DataCollector_1$defa);
  return _createClass(FilesFeature, [{
    key: "getFiles",
    value: function getFiles() {
      if (this._customerId && this._muid && this._sid && this._addrList && this._addrList.length > 0) {
        var url;
        for (var i = 0; i < this._addrList.length; i++) {
          // build url
          url = this._addrList[i] + '?cid=' + this._customerId + '&snum=' + this._sid + '&muid=' + this._muid;
          this._utils.getPostUrl(url, 'GET', null, null, null);
          this._isSent = true;
        }
      }
    }
  }, {
    key: "startFeature",
    value: function startFeature() {
      var _this$_muidService;
      this._isSent = false;
      try {
        this._addrList = JSON.parse(this._configurationRepository.get('getAddrList'));
      } catch (ex) {
        this._addrList = '';
      }
      this._customerId = this._cidCache.get() || '';
      this._muid = ((_this$_muidService = this._muidService) === null || _this$_muidService === void 0 ? void 0 : _this$_muidService.muid) || '';
      this._sid = this._sessionService.sessionId || '';
      this.getFiles();
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      var _this$_muidService2;
      try {
        this._addrList = JSON.parse(this._configurationRepository.get('getAddrList'));
      } catch (ex) {
        this._addrList = '';
      }
      this._customerId = this._cidCache.get() || '';
      this._muid = ((_this$_muidService2 = this._muidService) === null || _this$_muidService2 === void 0 ? void 0 : _this$_muidService2.muid) || '';
      this._sid = this._sessionService.sessionId || '';
      if (!this._isSent) {
        this.getFiles();
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = FilesFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/misc/MetadataCollector.js":
/*!**************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/misc/MetadataCollector.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var featureSettings = {
  configKey: 'isMetadataCollect',
  isDefault: true,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInSlave: true,
  runInLean: true,
  runInUns: false,
  isRunning: false,
  instance: null
};
var MetadataCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function MetadataCollector(configurationRepository, dataQ, metaDataSiteMapper, utils) {
    var _this;
    _classCallCheck(this, MetadataCollector);
    _this = _callSuper(this, MetadataCollector);
    _this._configurationRepository = configurationRepository;
    _this._dataQ = dataQ;
    _this._metaDataSiteMapper = metaDataSiteMapper;
    _this._utils = utils;
    _this._metaDataSiteMapper.updateObserver(_this.onSiteMapperMatch.bind(_this));
    return _this;
  }
  _inherits(MetadataCollector, _DataCollector_1$defa);
  return _createClass(MetadataCollector, [{
    key: "startFeature",
    value: function startFeature() {
      this._metaDataSiteMapper.initTracking();
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._metaDataSiteMapper.stopTracking();
    }
  }, {
    key: "onSiteMapperMatch",
    value: function onSiteMapperMatch(matchedMapping) {
      Logger_1["default"].debug("Metadata Collector mapper match - ".concat(JSON.stringify(matchedMapping)));
      if (matchedMapping.metaVal) {
        this._dataQ.addToQueue('metadata_map', [null, matchedMapping.metaVal, this._utils.dateNow()]);
      }
    }
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {
      this._metaDataSiteMapper.onConfigUpdate(this._configurationRepository);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = MetadataCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/misc/index.js":
/*!**************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/misc/index.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MetadataCollector = exports.FilesFeature = void 0;
var FilesFeature_1 = __webpack_require__(/*! ./FilesFeature */ "./dist/js-sdk-legacy/src/main/collectors/misc/FilesFeature.js");
Object.defineProperty(exports, "FilesFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(FilesFeature_1)["default"];
  }
}));
var MetadataCollector_1 = __webpack_require__(/*! ./MetadataCollector */ "./dist/js-sdk-legacy/src/main/collectors/misc/MetadataCollector.js");
Object.defineProperty(exports, "MetadataCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(MetadataCollector_1)["default"];
  }
}));

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/perContext/ContextPropsFeature.js":
/*!**********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/perContext/ContextPropsFeature.js ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var CDUtils_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/CDUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/CDUtils.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var DOMUtils_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/DOMUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/DOMUtils.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var AgentType_1 = __webpack_require__(/*! ../../contract/AgentType */ "./dist/js-sdk-legacy/src/main/contract/AgentType.js");
var featureSettings = {
  configKey: 'isContextPropsFeature',
  isDefault: false,
  shouldRunPerContext: true,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var ContextPropsFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function ContextPropsFeature(dataQ, domUtils, perfMonitor, configurationRepository) {
    var _this;
    _classCallCheck(this, ContextPropsFeature);
    _this = _callSuper(this, ContextPropsFeature);
    _this._dataQ = dataQ;
    _this._domUtils = domUtils;
    _this._perfMonitor = perfMonitor;
    _this._configurationRepository = configurationRepository;
    _this._observerCallback = _this._observerCallback.bind(_this);
    _this.calcTime = _this.calcTime.bind(_this);
    _this._getEntriesByType = _this._getEntriesByType.bind(_this);
    _this.callMethod = _this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.useLegacyZeroTimeout) ? CDUtils_1["default"].asyncCall : CDUtils_1["default"].asyncTimeoutCall;
    return _this;
  }
  _inherits(ContextPropsFeature, _DataCollector_1$defa);
  return _createClass(ContextPropsFeature, [{
    key: "startFeature",
    value: function startFeature() {
      if (self.screen) {
        var xdpi = window.devicePixelRatio ? window.devicePixelRatio : -1;
        var ydpi = window.devicePixelRatio ? window.devicePixelRatio : -1;
        if (this._shouldCollectStaticFields()) {
          this._dataQ.addToQueue('static_fields', ['display', [screen.colorDepth, screen.width, screen.height, screen.availHeight || -1, screen.availWidth || -1, xdpi, ydpi]], false);
        }
      }
      this.reportPageLoadTime();
    }
  }, {
    key: "_shouldCollectStaticFields",
    value: function _shouldCollectStaticFields() {
      var _this$_configurationR;
      return ((_this$_configurationR = this._configurationRepository) === null || _this$_configurationR === void 0 ? void 0 : _this$_configurationR.get(ConfigurationFields_1.ConfigurationFields.agentType)) !== AgentType_1.AgentType.SECONDARY;
    }
    //Observer callback function for getting entries
  }, {
    key: "_observerCallback",
    value: function _observerCallback(list, observer) {
      var entries = list.getEntries()[0];
      if (entries.duration) {
        this.calcTime(entries);
        if ("disconnect" in observer) {
          observer.disconnect();
        }
      }
    }
    //checking if the entry type is supported by the useragent
  }, {
    key: "_isEntrySupportedByBrowser",
    value: function _isEntrySupportedByBrowser(entry) {
      //if the supportedEntryTypes is not available feature in browser I skip it and return true
      if (!("supportedEntryTypes" in window.PerformanceObserver)) {
        return true;
      }
      return PerformanceObserver.supportedEntryTypes.includes(entry);
    }
    //get the Performance Navigation API entries
  }, {
    key: "_getEntriesByType",
    value: function _getEntriesByType() {
      if (window.performance.timing) {
        if (window.performance.timing.loadEventEnd && window.performance.timing.navigationStart) {
          var entries = {
            duration: window.performance.timing.loadEventEnd - window.performance.timing.navigationStart
          };
          this.calcTime(entries);
        }
      }
    }
    //entries is an instance of the PerformanceNavigationTiming interface;
    // if not supported it fallback to Navigation Timing API: see class function _getEntriesByType
  }, {
    key: "calcTime",
    value: function calcTime(entries) {
      //when either entries or duration are not captured a warning log will be dispatched
      if (CDUtils_1["default"].isUndefinedNull(entries)) {
        Logger_1["default"].warn("Context Props Feature: no entries of navigation timing were captured");
        return;
      }
      if (!CDUtils_1["default"].isUndefinedNull(entries)) {
        if (CDUtils_1["default"].isUndefinedNull(entries.duration)) {
          Logger_1["default"].warn("Context Props Feature: page duration loading was not calculated");
          return;
        }
      }
      this._perfMonitor.reportMonitor('t.timeTillPageLoad', Math.round(entries.duration));
    }
    /*
     * Calculates the page load time based on navigation timing api:
     * PerformanceNavigationTiming: https://developer.mozilla.org/en-US/docs/Web/API/PerformanceNavigationTiming
     * PerformanceObserver: https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver
     * Observer introduced in newer browser versions, so the PerformanceNavigationTiming might be defined but the Observer not
     */
  }, {
    key: "reportPageLoadTime",
    value: function reportPageLoadTime() {
      //first checking if the new Performance Navigation API is supported
      //if not, it uses the old Navigation API
      if (window.performance && "PerformanceNavigationTiming" in window) {
        var entryType = "navigation";
        // if either PerformanceObserver or entryType are not defined/supported we use a fallback
        if (!("PerformanceObserver" in window) || !this._isEntrySupportedByBrowser(entryType)) {
          this.reportPageLoadTimeFallback();
          return;
        }
        // create PerformanceObserver instance
        var performanceObserver = new PerformanceObserver(this._observerCallback);
        try {
          //as of today, there is no sufficient way to detect if a browser supports the type attribute or not
          //therefore we use the try&catch approach.
          performanceObserver.observe({
            type: entryType,
            buffered: true
          });
        } catch (e) {
          this.reportPageLoadTimeFallback();
        }
      } else {
        this.reportPageLoadTimeFallback();
      }
    }
    //fallback function to calculate page loading time
    //for old browsers we use the deprecated interface- https://developer.mozilla.org/en/docs/Web/API/Navigation_timing_API
  }, {
    key: "reportPageLoadTimeFallback",
    value: function reportPageLoadTimeFallback() {
      var _this2 = this;
      //sometimes the load event triggers before we subscribed to it.
      //this way we ensure calling the asyncCall function in case it has been missed
      if (DOMUtils_1["default"].isWindowDocumentReady(window)) {
        this.callMethod.call(this._getEntriesByType);
        return;
      }
      CDUtils_1["default"].addEventListener(self, 'load', function () {
        //since a timeout is needed for getting all PerformanceNavigationTiming entries
        //we use the asyncCall
        _this2.callMethod.call(_this2._getEntriesByType);
      });
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = ContextPropsFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/perContext/ScriptsFeature.js":
/*!*****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/perContext/ScriptsFeature.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var featureSettings = {
  configKey: 'isScriptsFeature',
  isDefault: false,
  shouldRunPerContext: true,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var ScriptsFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function ScriptsFeature(dataQ, scriptsRepository) {
    var _this;
    _classCallCheck(this, ScriptsFeature);
    _this = _callSuper(this, ScriptsFeature);
    _this._dataQ = dataQ;
    _this._timeoutValue = 1000; // timeout 1 sec
    _this._scriptsRepository = scriptsRepository;
    _this._runDetectionLoopBinded = _this._runDetectionLoop.bind(_this);
    return _this;
  }
  _inherits(ScriptsFeature, _DataCollector_1$defa);
  return _createClass(ScriptsFeature, [{
    key: "_checkScriptsData",
    value: function _checkScriptsData() {
      var scriptList = document.scripts;
      for (var i = 0; i < scriptList.length; i++) {
        var scriptRef = {
          src: scriptList[i].src,
          text: scriptList[i].text
        };
        if (!this._scriptsRepository.exists(scriptRef)) {
          this._scriptsRepository.add(scriptRef);
          this._dataQ.addToQueue('scripts', [null, scriptRef.src, scriptRef.textHash]);
        }
      }
    }
  }, {
    key: "_runDetectionLoop",
    value: function _runDetectionLoop() {
      this._checkScriptsData();
      this._timer = setTimeout(this._runDetectionLoopBinded, this._timeoutValue);
      // increase the timeout every time so we won't run this so many times
      if (this._timeoutValue < 536870911) {
        this._timeoutValue *= 4;
      }
    }
  }, {
    key: "startFeature",
    value: function startFeature() {
      this._runDetectionLoop();
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      if (this._timer) {
        clearTimeout(this._timer);
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = ScriptsFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/perContext/ScriptsRepository.js":
/*!********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/perContext/ScriptsRepository.js ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * This Class handles working with the the script list obtained from the dom, save the collected scripts and helps
 * to check if a specific script was already collected
 */
var ScriptsRepository = /*#__PURE__*/function () {
  function ScriptsRepository(utils) {
    _classCallCheck(this, ScriptsRepository);
    this._utils = utils;
    this._scriptList = [];
  }
  return _createClass(ScriptsRepository, [{
    key: "count",
    value: function count() {
      return this._scriptList.length;
    }
    /**
     *
     * @param script - an object with {src, text}
     * @returns {boolean}
     */
  }, {
    key: "exists",
    value: function exists(script) {
      // make sure to remove long numbers which might be ID's
      if (/\d\d\d/.test(script.src)) {
        script.src = this._utils.clearTextFromNumbers(script.src);
      }
      var textHash = this._utils.getHash(script.text);
      for (var j = 0; j < this._scriptList.length; j++) {
        // the field has to contain a value, or source, or hash != 0
        if (script.src && script.src === this._scriptList[j].src || textHash && textHash === this._scriptList[j].textHash) {
          return true;
        }
      }
      return false;
    }
    /**
     * add to list
     * @param scriptReference - an object with {src, text}
     */
  }, {
    key: "add",
    value: function add(scriptReference) {
      scriptReference.textHash = this._utils.getHash(scriptReference.text);
      if (/\d\d\d/.test(scriptReference.src)) {
        scriptReference.src = this._utils.clearTextFromNumbers(scriptReference.src);
      }
      this._scriptList.push({
        src: scriptReference.src,
        textHash: scriptReference.textHash
      });
    }
  }]);
}();
exports["default"] = ScriptsRepository;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/perContext/index.js":
/*!********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/perContext/index.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ScriptsFeature = exports.ContextPropsFeature = void 0;
var ContextPropsFeature_1 = __webpack_require__(/*! ./ContextPropsFeature */ "./dist/js-sdk-legacy/src/main/collectors/perContext/ContextPropsFeature.js");
Object.defineProperty(exports, "ContextPropsFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(ContextPropsFeature_1)["default"];
  }
}));
var ScriptsFeature_1 = __webpack_require__(/*! ./ScriptsFeature */ "./dist/js-sdk-legacy/src/main/collectors/perContext/ScriptsFeature.js");
Object.defineProperty(exports, "ScriptsFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(ScriptsFeature_1)["default"];
  }
}));

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/AudioDetectFeature.js":
/*!*****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/AudioDetectFeature.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var AudioDetectContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/AudioDetectContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/AudioDetectContract.js"));
var featureSettings = {
  configKey: 'isAudioDetectFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
var audioConfig = {
  channelCount: 1,
  length: 5000,
  sampleRate: 44100,
  oscillatorType: 'triangle',
  oscillatorFrequency: 10000,
  compressor: {
    threshold: -50,
    knee: 40,
    ratio: 12,
    attack: 0,
    release: 0.25
  },
  renderRetryDelay: 500,
  maxRetries: 3,
  fingerprintDataOffset: 4500
};
var AudioDetectFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  /**
   * @param {DataQueue} dataQ
   * @param {Utils} CDUtils
   */
  function AudioDetectFeature(dataQ, utils) {
    var _this;
    _classCallCheck(this, AudioDetectFeature);
    _this = _callSuper(this, AudioDetectFeature);
    _this._dataQ = dataQ;
    _this._utils = utils;
    return _this;
  }
  _inherits(AudioDetectFeature, _DataCollector_1$defa);
  return _createClass(AudioDetectFeature, [{
    key: "startFeature",
    value: function startFeature() {
      Logger_1["default"].info("Starting Audio Detection Feature");
      try {
        this._collectAudioFingerprintInfo();
      } catch (error) {
        Logger_1["default"].error("Failed to collect audio information: ".concat(error));
      }
    }
  }, {
    key: "_collectAudioFingerprintInfo",
    value: function _collectAudioFingerprintInfo() {
      var _this2 = this;
      Logger_1["default"].info('Collecting audio properties');
      this._getAudioFingerprint().then(function (audioData) {
        return _this2._utils.digest_sha256(audioData);
      }).then(function (hash) {
        var audioContract = new AudioDetectContract_1["default"](hash);
        var contractData = audioContract.buildQueueMessage();
        _this2._dataQ.addToQueue('static_fields', contractData, false);
        Logger_1["default"].info('Audio properties collected successfully');
      })["catch"](function (error) {
        Logger_1["default"].error("Error collecting audio information: ".concat(error));
      });
    }
    /**
     * Generates a unique audio fingerprint by synthesizing audio data in an OfflineAudioContext.
     * This process does not produce any audible sound but captures unique device characteristics
     * through oscillator and compressor settings. The resulting fingerprint is a string representation
     * of channel data, offering a unique identifier based on the device's audio capabilities.
     *
     * @returns {Promise<string>} - Resolves with the audio fingerprint string.
     * @throws Error if the AudioContext initialization or rendering fails.
     */
  }, {
    key: "_getAudioFingerprint",
    value: (function () {
      var _getAudioFingerprint2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var AudioContext, context, oscillator, compressor, _t;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              _context.p = 0;
              AudioContext = window.OfflineAudioContext || window.webkitOfflineAudioContext;
              if (AudioContext) {
                _context.n = 1;
                break;
              }
              throw new Error("AudioContext is not supported");
            case 1:
              context = new AudioContext(audioConfig.channelCount, audioConfig.length, audioConfig.sampleRate);
              oscillator = context.createOscillator();
              compressor = context.createDynamicsCompressor();
              oscillator.type = audioConfig.oscillatorType;
              oscillator.frequency.value = audioConfig.oscillatorFrequency;
              compressor.threshold.value = audioConfig.compressor.threshold;
              compressor.knee.value = audioConfig.compressor.knee;
              compressor.ratio.value = audioConfig.compressor.ratio;
              compressor.attack.value = audioConfig.compressor.attack;
              compressor.release.value = audioConfig.compressor.release;
              oscillator.connect(compressor);
              compressor.connect(context.destination);
              oscillator.start(0);
              return _context.a(2, this._renderAudio(context).then(function (buffer) {
                return buffer.getChannelData(0).subarray(audioConfig.fingerprintDataOffset).toString();
              }));
            case 2:
              _context.p = 2;
              _t = _context.v;
              Logger_1["default"].error("Error initializing audio fingerprint: ".concat(_t));
              throw _t;
            case 3:
              return _context.a(2);
          }
        }, _callee, this, [[0, 2]]);
      }));
      function _getAudioFingerprint() {
        return _getAudioFingerprint2.apply(this, arguments);
      }
      return _getAudioFingerprint;
    }())
  }, {
    key: "_renderAudio",
    value: function _renderAudio(context) {
      var renderRetryDelay = audioConfig.renderRetryDelay,
        maxRetries = audioConfig.maxRetries;
      var retryCount = 0;
      return new Promise(function (resolve, reject) {
        var _attemptRender = function attemptRender() {
          try {
            var renderingPromise = context.startRendering();
            if (context.state === 'running') {
              resolve(renderingPromise);
            } else if (context.state === 'suspended' && !document.hidden) {
              if (++retryCount < maxRetries) {
                setTimeout(_attemptRender, renderRetryDelay);
              } else {
                reject(new Error('Audio context suspended'));
              }
            }
          } catch (error) {
            reject(error);
          }
        };
        _attemptRender();
      });
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = AudioDetectFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/BrowserDetect.js":
/*!************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/BrowserDetect.js ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var BrowserDetectContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/BrowserDetectContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/BrowserDetectContract.js"));
var featureSettings = {
  configKey: 'isBrowserDetect',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var BrowserDetect = /*#__PURE__*/function (_DataCollector_1$defa) {
  function BrowserDetect(dataQ) {
    var _this;
    _classCallCheck(this, BrowserDetect);
    _this = _callSuper(this, BrowserDetect);
    _this._dataQ = dataQ;
    return _this;
  }
  /**
   * detect browsers by feature detection since user agent can lie
   */
  _inherits(BrowserDetect, _DataCollector_1$defa);
  return _createClass(BrowserDetect, [{
    key: "startFeature",
    value: function startFeature() {
      var isChrome = false;
      var isOpera = false;
      var isFirefox = false;
      var isSafari = false;
      var isIE = false;
      var isEdge = false;
      var isBlink = false;
      if (this.doesUserAagentDataExists()) {
        // Modern detection using userAgentData
        navigator.userAgentData.brands.forEach(function (brand) {
          if (brand.brand === 'Google Chrome') isChrome = true;
          if (brand.brand === 'Opera') isOpera = true;
          if (brand.brand === 'Microsoft Edge') isEdge = true;
          if (brand.brand === 'Firefox') isFirefox = true;
        });
        // Detect Safari via platform or specific WebKit engine check
        if (navigator.userAgentData.platform) {
          isSafari = navigator.userAgentData.platform === 'macOS' && !isChrome && !isEdge && !isOpera && /Safari/.test(navigator.userAgent);
        }
        // Blink is the engine behind Chrome and Opera
        isBlink = isChrome || isOpera;
      } else {
        // Fallback for older browsers
        var userAgent = navigator.userAgent;
        isOpera = /OPR|Opera/.test(userAgent);
        isFirefox = /Firefox/.test(userAgent);
        isSafari = /Safari/.test(userAgent) && /Apple Computer/.test(navigator.vendor);
        isIE = /MSIE|Trident/.test(userAgent); // MSIE for older versions, Trident for IE 11+
        isEdge = /Edg/.test(userAgent); // Edge (Chromium-based)
        // In case we use Opera or Edge, the system detect 'Chrome' as well, 
        // that's why we are adding the verification to make sure it's also not Edge and Opera
        isChrome = /Chrome/.test(userAgent) && !isEdge && !isOpera && /Google Inc/.test(navigator.vendor);
        isBlink = (isChrome || isOpera) && !!window.CSS; // Blink engine detection
      }
      var browserDetectContract = new BrowserDetectContract_1["default"](isChrome, isFirefox, isEdge, isIE, isSafari, isOpera, isBlink);
      var data = browserDetectContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', data, false);
    }
  }, {
    key: "doesUserAagentDataExists",
    value: function doesUserAagentDataExists() {
      return navigator.userAgentData && navigator.userAgentData.brands && navigator.userAgentData.brands.length > 0;
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = BrowserDetect;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/BrowserExtensionsCollector.js":
/*!*************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/BrowserExtensionsCollector.js ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.RegularExtensionsScanner = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var featureSettings = {
  configKey: 'isBrowserExtensionsFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
/**
 * Extension category types for better organization
 */
var ExtensionCategory = {
  AD_BLOCKER: 'ad_blocker',
  PASSWORD_MANAGER: 'password_manager',
  CRYPTO_WALLET: 'crypto_wallet',
  DEVELOPER_TOOL: 'developer_tool',
  GRAMMAR_WRITING: 'grammar_writing',
  DARK_MODE: 'dark_mode',
  OTHER: 'other'
};
/**
 * Extension definition with improved structure
 */
var ExtensionDefinition = /*#__PURE__*/_createClass(function ExtensionDefinition(name, detection) {
  var category = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ExtensionCategory.OTHER;
  var reliability = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.8;
  _classCallCheck(this, ExtensionDefinition);
  this.name = name;
  this.detection = detection;
  this.category = category;
  this.reliability = reliability; // 0-1 scale of detection reliability
});
/**
 * Improved extension scanner with better organization and error handling
 */
var RegularExtensionsScanner = /*#__PURE__*/function () {
  function RegularExtensionsScanner(window, document) {
    _classCallCheck(this, RegularExtensionsScanner);
    this._window = window;
    this._document = document;
    this.extensions = this._initializeExtensions();
    this._detectionCache = new Map();
  }
  /**
   * Initialize all extension definitions
   * @returns {ExtensionDefinition[]} List of extension definitions
   */
  return _createClass(RegularExtensionsScanner, [{
    key: "_initializeExtensions",
    value: function _initializeExtensions() {
      return [
      //  Ad Blockers
      new ExtensionDefinition("Ad Blocker", this._detectAdBlocker.bind(this), ExtensionCategory.AD_BLOCKER, 0.9),
      //  Password Managers
      new ExtensionDefinition("LastPass", this._detectLastPass.bind(this), ExtensionCategory.PASSWORD_MANAGER, 0.85), new ExtensionDefinition("1Password", this._detect1Password.bind(this), ExtensionCategory.PASSWORD_MANAGER, 0.85),
      //  Crypto Wallet Extensions
      new ExtensionDefinition("MetaMask", this._detectMetaMask.bind(this), ExtensionCategory.CRYPTO_WALLET, 0.95), new ExtensionDefinition("Coinbase Wallet", this._detectCoinbaseWallet.bind(this), ExtensionCategory.CRYPTO_WALLET, 0.95), new ExtensionDefinition("WalletConnect Wallet", this._detectWalletConnect.bind(this), ExtensionCategory.CRYPTO_WALLET, 0.95), new ExtensionDefinition("Trust Wallet", this._detectTrustWallet.bind(this), ExtensionCategory.CRYPTO_WALLET, 0.95), new ExtensionDefinition("Phantom Wallet", this._detectPhantomWallet.bind(this), ExtensionCategory.CRYPTO_WALLET, 0.95), new ExtensionDefinition("Binance Wallet", this._detectBinanceWallet.bind(this), ExtensionCategory.CRYPTO_WALLET, 0.95), new ExtensionDefinition("Brave Wallet", this._detectBraveWallet.bind(this), ExtensionCategory.CRYPTO_WALLET, 0.9), new ExtensionDefinition("Apple Pay", this._detectApplePay.bind(this), ExtensionCategory.CRYPTO_WALLET, 0.9), new ExtensionDefinition("Google Pay", this._detectGooglePay.bind(this), ExtensionCategory.CRYPTO_WALLET, 0.9),
      //  Developer Tools
      new ExtensionDefinition("React Developer Tools", this._detectReactDevTools.bind(this), ExtensionCategory.DEVELOPER_TOOL, 0.95), new ExtensionDefinition("Vue.js DevTools", this._detectVueDevTools.bind(this), ExtensionCategory.DEVELOPER_TOOL, 0.95), new ExtensionDefinition("Redux DevTools", this._detectReduxDevTools.bind(this), ExtensionCategory.DEVELOPER_TOOL, 0.95), new ExtensionDefinition("Angular DevTools", this._detectAngularDevTools.bind(this), ExtensionCategory.DEVELOPER_TOOL, 0.95), new ExtensionDefinition("Svelte DevTools", this._detectSvelteDevTools.bind(this), ExtensionCategory.DEVELOPER_TOOL, 0.95),
      //  Grammar & Writing Extensions
      new ExtensionDefinition("Grammarly", this._detectGrammarly.bind(this), ExtensionCategory.GRAMMAR_WRITING, 0.9),
      //  Dark Mode Extensions
      new ExtensionDefinition("Dark Reader", this._detectDarkReader.bind(this), ExtensionCategory.DARK_MODE, 0.85), new ExtensionDefinition("Super Dark Mode", this._detectSuperDarkMode.bind(this), ExtensionCategory.DARK_MODE, 0.85), new ExtensionDefinition("Adobe Acrobat", this._detectAdobeAcrobat.bind(this), ExtensionCategory.OTHER, 0.8)];
    }
    /**
     * Helper method to safely detect an extension with caching
     * @param {ExtensionDefinition} extension - The extension to detect
     * @returns {Promise<boolean>} - Whether the extension was detected
     */
  }, {
    key: "detectExtension",
    value: (function () {
      var _detectExtension = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(extension) {
        var result, _t;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              if (!this._detectionCache.has(extension.name)) {
                _context.n = 1;
                break;
              }
              return _context.a(2, this._detectionCache.get(extension.name));
            case 1:
              _context.p = 1;
              _context.n = 2;
              return extension.detection();
            case 2:
              result = _context.v;
              // Cache the result
              this._detectionCache.set(extension.name, result);
              return _context.a(2, result);
            case 3:
              _context.p = 3;
              _t = _context.v;
              Logger_1["default"].debug("Error detecting ".concat(extension.name, ": ").concat(_t.message));
              return _context.a(2, false);
          }
        }, _callee, this, [[1, 3]]);
      }));
      function detectExtension(_x) {
        return _detectExtension.apply(this, arguments);
      }
      return detectExtension;
    }()
    /**
     * Scan for all extensions with improved performance
     * @returns {Promise<Array>} - List of detected extension names
     */
    )
  }, {
    key: "scan",
    value: (function () {
      var _scan = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {
        var _this = this;
        var detectionPromises, results;
        return _regenerator().w(function (_context3) {
          while (1) switch (_context3.n) {
            case 0:
              // Wait for extensions to initialize
              // await new Promise(resolve => setTimeout(resolve, 3000));
              // Run detections in parallel with improved error handling
              detectionPromises = this.extensions.map(/*#__PURE__*/function () {
                var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(ext) {
                  var detected, _t2;
                  return _regenerator().w(function (_context2) {
                    while (1) switch (_context2.p = _context2.n) {
                      case 0:
                        _context2.p = 0;
                        _context2.n = 1;
                        return _this.detectExtension(ext);
                      case 1:
                        detected = _context2.v;
                        return _context2.a(2, {
                          name: ext.name,
                          detected: detected,
                          category: ext.category,
                          reliability: ext.reliability
                        });
                      case 2:
                        _context2.p = 2;
                        _t2 = _context2.v;
                        Logger_1["default"].debug("Failed to detect ".concat(ext.name, ": ").concat(_t2.message));
                        return _context2.a(2, {
                          name: ext.name,
                          detected: false,
                          category: ext.category,
                          reliability: ext.reliability
                        });
                    }
                  }, _callee2, null, [[0, 2]]);
                }));
                return function (_x2) {
                  return _ref.apply(this, arguments);
                };
              }());
              _context3.n = 1;
              return Promise.all(detectionPromises);
            case 1:
              results = _context3.v;
              return _context3.a(2, results.filter(function (ext) {
                return ext.detected;
              }).sort(function (a, b) {
                return b.reliability - a.reliability;
              }).map(function (ext) {
                return ext.name;
              }));
          }
        }, _callee3, this);
      }));
      function scan() {
        return _scan.apply(this, arguments);
      }
      return scan;
    }() // Individual detection methods with improved reliability
    )
  }, {
    key: "_detectAdBlocker",
    value: function () {
      var _detectAdBlocker2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4() {
        var bait, computedStyle, isBlocked, _t3;
        return _regenerator().w(function (_context4) {
          while (1) switch (_context4.p = _context4.n) {
            case 0:
              _context4.p = 0;
              // Create a bait element with common ad-related class names
              bait = this._document.createElement("div");
              bait.className = "pub_300x250 ad_unit adsbox";
              bait.style.cssText = "height:50px;width:50px;position:absolute;left:-9999px;top:0;display:block;";
              this._document.body.appendChild(bait);
              // Get computed styles and dimensions
              computedStyle = this._window.getComputedStyle(bait);
              isBlocked = computedStyle.display === "none" || computedStyle.visibility === "hidden" || bait.offsetHeight === 0 || bait.offsetWidth === 0;
              this._document.body.removeChild(bait);
              return _context4.a(2, isBlocked);
            case 1:
              _context4.p = 1;
              _t3 = _context4.v;
              Logger_1["default"].debug("Ad blocker detection error: ".concat(_t3.message));
              return _context4.a(2, false);
          }
        }, _callee4, this, [[0, 1]]);
      }));
      function _detectAdBlocker() {
        return _detectAdBlocker2.apply(this, arguments);
      }
      return _detectAdBlocker;
    }()
  }, {
    key: "_detectLastPass",
    value: function () {
      var _detectLastPass2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5() {
        return _regenerator().w(function (_context5) {
          while (1) switch (_context5.n) {
            case 0:
              return _context5.a(2, this._document.querySelectorAll('[data-lastpass-icon-root]').length > 0);
          }
        }, _callee5, this);
      }));
      function _detectLastPass() {
        return _detectLastPass2.apply(this, arguments);
      }
      return _detectLastPass;
    }()
  }, {
    key: "_detect1Password",
    value: function () {
      var _detect1Password2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6() {
        var _JSON$stringify;
        return _regenerator().w(function (_context6) {
          while (1) switch (_context6.n) {
            case 0:
              return _context6.a(2, ((_JSON$stringify = JSON.stringify(this._window._sentryDebugIds)) === null || _JSON$stringify === void 0 ? void 0 : _JSON$stringify.includes("aeblfdkhhhdcdjpifhhbdiojplfjncoa")) || !!this._document.querySelector(".onepassword-fill-button"));
          }
        }, _callee6, this);
      }));
      function _detect1Password() {
        return _detect1Password2.apply(this, arguments);
      }
      return _detect1Password;
    }()
  }, {
    key: "_detectMetaMask",
    value: function () {
      var _detectMetaMask2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7() {
        return _regenerator().w(function (_context7) {
          while (1) switch (_context7.n) {
            case 0:
              return _context7.a(2, !!this._window.ethereum && this._window.ethereum.isMetaMask);
          }
        }, _callee7, this);
      }));
      function _detectMetaMask() {
        return _detectMetaMask2.apply(this, arguments);
      }
      return _detectMetaMask;
    }()
  }, {
    key: "_detectCoinbaseWallet",
    value: function () {
      var _detectCoinbaseWallet2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee8() {
        return _regenerator().w(function (_context8) {
          while (1) switch (_context8.n) {
            case 0:
              return _context8.a(2, !!this._window.ethereum && this._window.ethereum.isCoinbaseWallet);
          }
        }, _callee8, this);
      }));
      function _detectCoinbaseWallet() {
        return _detectCoinbaseWallet2.apply(this, arguments);
      }
      return _detectCoinbaseWallet;
    }()
  }, {
    key: "_detectWalletConnect",
    value: function () {
      var _detectWalletConnect2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee9() {
        return _regenerator().w(function (_context9) {
          while (1) switch (_context9.n) {
            case 0:
              return _context9.a(2, !!this._window.ethereum && this._window.ethereum.isWalletConnect);
          }
        }, _callee9, this);
      }));
      function _detectWalletConnect() {
        return _detectWalletConnect2.apply(this, arguments);
      }
      return _detectWalletConnect;
    }()
  }, {
    key: "_detectTrustWallet",
    value: function () {
      var _detectTrustWallet2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee0() {
        return _regenerator().w(function (_context0) {
          while (1) switch (_context0.n) {
            case 0:
              return _context0.a(2, !!this._window.ethereum && this._window.ethereum.isTrust);
          }
        }, _callee0, this);
      }));
      function _detectTrustWallet() {
        return _detectTrustWallet2.apply(this, arguments);
      }
      return _detectTrustWallet;
    }()
  }, {
    key: "_detectPhantomWallet",
    value: function () {
      var _detectPhantomWallet2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee1() {
        return _regenerator().w(function (_context1) {
          while (1) switch (_context1.n) {
            case 0:
              return _context1.a(2, !!this._window.solana && this._window.solana.isPhantom);
          }
        }, _callee1, this);
      }));
      function _detectPhantomWallet() {
        return _detectPhantomWallet2.apply(this, arguments);
      }
      return _detectPhantomWallet;
    }()
  }, {
    key: "_detectBinanceWallet",
    value: function () {
      var _detectBinanceWallet2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee10() {
        return _regenerator().w(function (_context10) {
          while (1) switch (_context10.n) {
            case 0:
              return _context10.a(2, !!this._window.BinanceChain && this._window.BinanceChain.isBinanceChain === true);
          }
        }, _callee10, this);
      }));
      function _detectBinanceWallet() {
        return _detectBinanceWallet2.apply(this, arguments);
      }
      return _detectBinanceWallet;
    }()
  }, {
    key: "_detectBraveWallet",
    value: function () {
      var _detectBraveWallet2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee11() {
        return _regenerator().w(function (_context11) {
          while (1) switch (_context11.n) {
            case 0:
              return _context11.a(2, !!(this._window.navigator.brave && this._window.navigator.brave.isBrave));
          }
        }, _callee11, this);
      }));
      function _detectBraveWallet() {
        return _detectBraveWallet2.apply(this, arguments);
      }
      return _detectBraveWallet;
    }()
  }, {
    key: "_detectApplePay",
    value: function () {
      var _detectApplePay2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee12() {
        var _t4;
        return _regenerator().w(function (_context12) {
          while (1) switch (_context12.n) {
            case 0:
              _t4 = !!this._window.ApplePaySession && typeof this._window.ApplePaySession.canMakePayments === "function";
              if (!_t4) {
                _context12.n = 2;
                break;
              }
              _context12.n = 1;
              return this._window.ApplePaySession.canMakePayments();
            case 1:
              _t4 = _context12.v;
            case 2:
              return _context12.a(2, _t4);
          }
        }, _callee12, this);
      }));
      function _detectApplePay() {
        return _detectApplePay2.apply(this, arguments);
      }
      return _detectApplePay;
    }()
  }, {
    key: "_detectGooglePay",
    value: function () {
      var _detectGooglePay2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee13() {
        return _regenerator().w(function (_context13) {
          while (1) switch (_context13.n) {
            case 0:
              return _context13.a(2, !!(this._window.google && this._window.google.payments && this._window.google.payments.api));
          }
        }, _callee13, this);
      }));
      function _detectGooglePay() {
        return _detectGooglePay2.apply(this, arguments);
      }
      return _detectGooglePay;
    }()
  }, {
    key: "_detectReactDevTools",
    value: function () {
      var _detectReactDevTools2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee14() {
        return _regenerator().w(function (_context14) {
          while (1) switch (_context14.n) {
            case 0:
              return _context14.a(2, !!this._window.__REACT_DEVTOOLS_GLOBAL_HOOK__);
          }
        }, _callee14, this);
      }));
      function _detectReactDevTools() {
        return _detectReactDevTools2.apply(this, arguments);
      }
      return _detectReactDevTools;
    }()
  }, {
    key: "_detectVueDevTools",
    value: function () {
      var _detectVueDevTools2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee15() {
        return _regenerator().w(function (_context15) {
          while (1) switch (_context15.n) {
            case 0:
              return _context15.a(2, !!this._window.__VUE_DEVTOOLS_GLOBAL_HOOK__);
          }
        }, _callee15, this);
      }));
      function _detectVueDevTools() {
        return _detectVueDevTools2.apply(this, arguments);
      }
      return _detectVueDevTools;
    }()
  }, {
    key: "_detectReduxDevTools",
    value: function () {
      var _detectReduxDevTools2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee16() {
        return _regenerator().w(function (_context16) {
          while (1) switch (_context16.n) {
            case 0:
              return _context16.a(2, !!this._window.__REDUX_DEVTOOLS_EXTENSION__);
          }
        }, _callee16, this);
      }));
      function _detectReduxDevTools() {
        return _detectReduxDevTools2.apply(this, arguments);
      }
      return _detectReduxDevTools;
    }()
  }, {
    key: "_detectAngularDevTools",
    value: function () {
      var _detectAngularDevTools2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee17() {
        return _regenerator().w(function (_context17) {
          while (1) switch (_context17.n) {
            case 0:
              return _context17.a(2, !!this._window.ng);
          }
        }, _callee17, this);
      }));
      function _detectAngularDevTools() {
        return _detectAngularDevTools2.apply(this, arguments);
      }
      return _detectAngularDevTools;
    }()
  }, {
    key: "_detectSvelteDevTools",
    value: function () {
      var _detectSvelteDevTools2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee18() {
        return _regenerator().w(function (_context18) {
          while (1) switch (_context18.n) {
            case 0:
              return _context18.a(2, !!this._window.__SVELTE_DEVTOOLS_GLOBAL_HOOK__);
          }
        }, _callee18, this);
      }));
      function _detectSvelteDevTools() {
        return _detectSvelteDevTools2.apply(this, arguments);
      }
      return _detectSvelteDevTools;
    }()
  }, {
    key: "_detectGrammarly",
    value: function () {
      var _detectGrammarly2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee19() {
        var _this2 = this;
        var grammarlySelectors;
        return _regenerator().w(function (_context19) {
          while (1) switch (_context19.n) {
            case 0:
              grammarlySelectors = ["grammarly-extension", "grammarly-desktop-integration", "grammarly-mirror", "grammarly-popups", "grammarly-extension-vbars", "grammarly-extension-vbar-cad", "grammarly-extension-vbars-feedback-form"];
              return _context19.a(2, grammarlySelectors.some(function (selector) {
                return _this2._document.querySelector(selector) !== null;
              }));
          }
        }, _callee19);
      }));
      function _detectGrammarly() {
        return _detectGrammarly2.apply(this, arguments);
      }
      return _detectGrammarly;
    }()
  }, {
    key: "_detectDarkReader",
    value: function () {
      var _detectDarkReader2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee20() {
        return _regenerator().w(function (_context20) {
          while (1) switch (_context20.n) {
            case 0:
              return _context20.a(2, this._detectDarkModeExtension(50));
          }
        }, _callee20, this);
      }));
      function _detectDarkReader() {
        return _detectDarkReader2.apply(this, arguments);
      }
      return _detectDarkReader;
    }()
  }, {
    key: "_detectSuperDarkMode",
    value: function () {
      var _detectSuperDarkMode2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee21() {
        return _regenerator().w(function (_context21) {
          while (1) switch (_context21.n) {
            case 0:
              return _context21.a(2, this._detectDarkModeExtension(5));
          }
        }, _callee21, this);
      }));
      function _detectSuperDarkMode() {
        return _detectSuperDarkMode2.apply(this, arguments);
      }
      return _detectSuperDarkMode;
    }()
  }, {
    key: "_detectDarkModeExtension",
    value: function () {
      var _detectDarkModeExtension2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee22(brightnessThreshold) {
        var widget, computedStyle, bgColor, isDark, _t5;
        return _regenerator().w(function (_context22) {
          while (1) switch (_context22.p = _context22.n) {
            case 0:
              _context22.p = 0;
              // Create a widget with a white background
              widget = this._document.createElement("div");
              widget.style.cssText = "background-color:#ffffff;width:100px;height:100px;position:absolute;top:0;left:0;z-index:9999;";
              this._document.body.appendChild(widget);
              // Wait for dark mode extensions to apply their styles
              _context22.n = 1;
              return new Promise(function (resolve) {
                return setTimeout(resolve, 500);
              });
            case 1:
              // Check the computed background color
              computedStyle = this._window.getComputedStyle(widget);
              bgColor = computedStyle.backgroundColor; // Clean up the widget
              this._document.body.removeChild(widget);
              // Determine if the background has been changed to a dark color
              isDark = bgColor === "rgb(0, 0, 0)" || function () {
                var match = bgColor.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
                if (match) {
                  var r = parseInt(match[1], 10);
                  var g = parseInt(match[2], 10);
                  var b = parseInt(match[3], 10);
                  // Calculate average brightness (0 = dark, 255 = bright)
                  var brightness = (r + g + b) / 3;
                  return brightness < brightnessThreshold;
                }
                return false;
              }();
              return _context22.a(2, isDark);
            case 2:
              _context22.p = 2;
              _t5 = _context22.v;
              Logger_1["default"].debug("Dark mode detection error: ".concat(_t5.message));
              return _context22.a(2, false);
          }
        }, _callee22, this, [[0, 2]]);
      }));
      function _detectDarkModeExtension(_x3) {
        return _detectDarkModeExtension2.apply(this, arguments);
      }
      return _detectDarkModeExtension;
    }()
  }, {
    key: "_detectAdobeAcrobat",
    value: function () {
      var _detectAdobeAcrobat2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee23() {
        var _this$_window;
        return _regenerator().w(function (_context23) {
          while (1) switch (_context23.n) {
            case 0:
              return _context23.a(2, ((_this$_window = this._window) === null || _this$_window === void 0 || (_this$_window = _this$_window.sessionStorage) === null || _this$_window === void 0 ? void 0 : _this$_window.getItem("adobeCleanFontAdded")) === "true");
          }
        }, _callee23, this);
      }));
      function _detectAdobeAcrobat() {
        return _detectAdobeAcrobat2.apply(this, arguments);
      }
      return _detectAdobeAcrobat;
    }()
  }]);
}();
exports.RegularExtensionsScanner = RegularExtensionsScanner;
/**
 * Improved BrowserExtensionsCollector with better error handling and performance
 */
var BrowserExtensionsCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function BrowserExtensionsCollector(configurationRepository, utils, domUtils, dataQueue) {
    var _this3;
    var regularExtensionsScanner = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;
    _classCallCheck(this, BrowserExtensionsCollector);
    _this3 = _callSuper(this, BrowserExtensionsCollector);
    _this3._configurationRepository = configurationRepository;
    _this3._domUtils = domUtils;
    _this3._utils = utils;
    _this3._dataQueue = dataQueue;
    _this3._regularExtensionsScanner = regularExtensionsScanner || new RegularExtensionsScanner(window, document);
    return _this3;
  }
  /**
   * Start the extension detection feature
   */
  _inherits(BrowserExtensionsCollector, _DataCollector_1$defa);
  return _createClass(BrowserExtensionsCollector, [{
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee24() {
        var regularExtensions, _t6;
        return _regenerator().w(function (_context24) {
          while (1) switch (_context24.p = _context24.n) {
            case 0:
              _context24.p = 0;
              _context24.n = 1;
              return this._regularExtensionsScanner.scan();
            case 1:
              regularExtensions = _context24.v;
              if (regularExtensions.length > 0) {
                Logger_1["default"].info("Detected browser extensions: ".concat(regularExtensions.join(', ')));
                this._sendData(regularExtensions);
              } else {
                Logger_1["default"].info('No browser extensions detected');
                this._sendData([]);
              }
              _context24.n = 3;
              break;
            case 2:
              _context24.p = 2;
              _t6 = _context24.v;
              Logger_1["default"].error("Failed to detect browser extensions: ".concat(_t6.message));
              this._sendData([]);
            case 3:
              return _context24.a(2);
          }
        }, _callee24, this, [[0, 2]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
    /**
     * Send the detected extensions data to the queue
     * @param {Array} extensionsList - List of detected extension names
     */
    )
  }, {
    key: "_sendData",
    value: function _sendData(extensionsList) {
      this._dataQueue.addToQueue('static_fields', ['browser_extensions', ["v1", extensionsList]], false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = BrowserExtensionsCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/BrowserPropsFeature.js":
/*!******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/BrowserPropsFeature.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var VersionClientBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/VersionClientBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/VersionClientBrowserPropsContract.js"));
var DeviceSourceBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/DeviceSourceBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/DeviceSourceBrowserPropsContract.js"));
var OSBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/OSBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/OSBrowserPropsContract.js"));
var OSVersionBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/OSVersionBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/OSVersionBrowserPropsContract.js"));
var OSFamilyBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/OSFamilyBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/OSFamilyBrowserPropsContract.js"));
var InputMechBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/InputMechBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/InputMechBrowserPropsContract.js"));
var CoresBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/CoresBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/CoresBrowserPropsContract.js"));
var PluginsBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/PluginsBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/PluginsBrowserPropsContract.js"));
var JsUaBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/JsUaBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/JsUaBrowserPropsContract.js"));
var TimeZoneBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/TimeZoneBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/TimeZoneBrowserPropsContract.js"));
var CookieEnabledBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/CookieEnabledBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/CookieEnabledBrowserPropsContract.js"));
var DeviceMemoryBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/DeviceMemoryBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/DeviceMemoryBrowserPropsContract.js"));
var LangBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/LangBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/LangBrowserPropsContract.js"));
var LanguagesListBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/LanguagesListBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/LanguagesListBrowserPropsContract.js"));
var BuildIDBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/BuildIDBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/BuildIDBrowserPropsContract.js"));
var MaxTouchPointsBrowserPropsContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/MaxTouchPointsBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/MaxTouchPointsBrowserPropsContract.js"));
var MathDetectContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/MathDetectContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/MathDetectContract.js"));
var BrowserDisplayBrowserPropsContract_1 = __webpack_require__(/*! ../../contract/staticContracts/browserPropsContract/BrowserDisplayBrowserPropsContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/BrowserDisplayBrowserPropsContract.js");
var featureSettings = {
  configKey: 'collectBrowserProps',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
/* eslint-disable prefer-destructuring */
var BrowserPropsFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function BrowserPropsFeature(dataQ, pointerHoverDetector, utils, configurationRepository, configurations) {
    var _this;
    _classCallCheck(this, BrowserPropsFeature);
    _this = _callSuper(this, BrowserPropsFeature);
    _this._dataQ = dataQ;
    _this._pointerHoverDetector = pointerHoverDetector;
    _this._utils = utils;
    _this._configurationRepository = configurationRepository;
    _this._configurations = configurations;
    return _this;
  }
  _inherits(BrowserPropsFeature, _DataCollector_1$defa);
  return _createClass(BrowserPropsFeature, [{
    key: "startFeature",
    value: function startFeature() {
      var _this2 = this;
      Logger_1["default"].info('Collecting Browser Props');
      // basic required fields
      var versionClientBrowserPropsContract = new VersionClientBrowserPropsContract_1["default"](this._utils.scriptVersion);
      var versionClientData = versionClientBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', versionClientData, false);
      var deviceSourceBrowserPropsContract = new DeviceSourceBrowserPropsContract_1["default"]('js');
      var deviceSourceData = deviceSourceBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', deviceSourceData, false);
      Logger_1["default"].info("SDK Version is ".concat(this._utils.scriptVersion));
      var language = BrowserPropsFeature.getLanguage();
      if (language) {
        // If configuration specifies to hash the language field...
        if (this._configurationRepository.get('browserPropsShouldHashLanguageField')) {
          Logger_1["default"].debug('Hashing language field according to configuration');
          language = this._utils.getHash(language).toString();
        }
        var mainLangBrowserPropsContract = new LangBrowserPropsContract_1["default"](language);
        var mainLangData = mainLangBrowserPropsContract.buildQueueMessage();
        this._dataQ.addToQueue('static_fields', mainLangData, false);
      }
      var osBrowserPropsContract = new OSBrowserPropsContract_1["default"](BrowserPropsFeature.getAvailablePlatform(window.navigator));
      var osData = osBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', osData, false);
      var os = BrowserPropsFeature.getOperatingSystem();
      var osVersionBrowserPropsContract = new OSVersionBrowserPropsContract_1["default"](os.version);
      var osVersionData = osVersionBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', osVersionData, false);
      var osFamilyBrowserPropsContract = new OSFamilyBrowserPropsContract_1["default"](os.name); //here
      var osFamilyData = osFamilyBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', osFamilyData, false);
      var pointerHover = this._pointerHoverDetector.getPointerHover();
      var inputMechBrowserPropsContract = new InputMechBrowserPropsContract_1["default"](pointerHover.pointer, pointerHover.hover);
      var inputMechData = inputMechBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', inputMechData, false);
      // supported in Chrome, Opera, FF 38+
      var coresBrowserPropsContract = new CoresBrowserPropsContract_1["default"](window.navigator.hardwareConcurrency || 0);
      var coresData = coresBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', coresData, false);
      if (navigator.languages) {
        var languages = navigator.languages;
        // If configuration specifies to hash the language field...
        if (this._configurationRepository.get('browserPropsShouldHashLanguageField')) {
          Logger_1["default"].debug('Hashing languages field according to configuration');
          languages = Array.from(languages, function (lang) {
            return _this2._utils.getHash(lang).toString();
          });
        }
        var languageslistBrowserPropsContract = new LanguagesListBrowserPropsContract_1["default"](languages);
        var languageslistData = languageslistBrowserPropsContract.buildQueueMessage();
        this._dataQ.addToQueue('static_fields', languageslistData, false);
      }
      var plugins = BrowserPropsFeature.getPlugins();
      if (plugins && plugins.length > 0) {
        var pluginsBrowserPropsContract = new PluginsBrowserPropsContract_1["default"](plugins);
        var pluginsData = pluginsBrowserPropsContract.buildQueueMessage();
        this._dataQ.addToQueue('static_fields', pluginsData, false);
      }
      var jsUaBrowserPropsContract = new JsUaBrowserPropsContract_1["default"](navigator.userAgent);
      var jsUaData = jsUaBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', jsUaData, false);
      var tz = new Date().getTimezoneOffset() * -1;
      var timeZoneBrowserPropsContract = new TimeZoneBrowserPropsContract_1["default"](tz);
      var timeZoneData = timeZoneBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', timeZoneData, false);
      var isCookie = BrowserPropsFeature.checkCookie();
      var cookieEnabledBrowserPropsContract = new CookieEnabledBrowserPropsContract_1["default"](isCookie);
      var cookieEnabledData = cookieEnabledBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', cookieEnabledData, false);
      // device memory from https://github.com/w3c/device-memory#the-web-exposed-api.
      // max value is 8 for now even on 16GB RAM
      var memory = navigator.deviceMemory || 0;
      var deviceMemoryBrowserPropsContract = new DeviceMemoryBrowserPropsContract_1["default"](memory);
      var deviceMemoryData = deviceMemoryBrowserPropsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', deviceMemoryData, false);
      //Returns the build identifier of the browser.
      //In modern browsers this property now returns a fixed timestamp as a privacy measure, e.g. 20181001000000 in Firefox 64 onwards.
      //Available only on Firefox browsers, from version 64, for any other browser will return undefined and will not be included in the
      var buildId = navigator.buildID;
      if (buildId) {
        var buildBrowserPropsContract = new BuildIDBrowserPropsContract_1["default"](buildId);
        var buildIdData = buildBrowserPropsContract.buildQueueMessage();
        this._dataQ.addToQueue('static_fields', buildIdData, false);
      }
      //The maxTouchPoints read-only property of the Navigator interface returns the maximum number of simultaneous touch contact points
      //are supported by the current device.
      var maxTouchPoints = navigator.maxTouchPoints;
      var maxTouchPointsContract = new MaxTouchPointsBrowserPropsContract_1["default"](maxTouchPoints);
      var maxTouchPointsData = maxTouchPointsContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', maxTouchPointsData, false);
      // Browser Display Properties.
      if (this._configurations.isBrowserDisplayDetectEnabled()) {
        var browserDisplayProperties = "".concat(BrowserPropsFeature.isTransparencyReduced(), ",\n            ").concat(BrowserPropsFeature.isMotionReduced(), ",\n            ").concat(BrowserPropsFeature.getColorGamut(), ",\n            ").concat(BrowserPropsFeature.areColorsForced(), ",\n            ").concat(BrowserPropsFeature.areColorsInverted(), ",\n            ").concat(BrowserPropsFeature.isHDR(), ",\n            ").concat(BrowserPropsFeature.getMonochromeDepth());
        var browserDisplayPropertiesBrowserPropsContract = new BrowserDisplayBrowserPropsContract_1.BrowserDisplayBrowserPropsContract(browserDisplayProperties);
        var browserDisplayPropertiesData = browserDisplayPropertiesBrowserPropsContract.buildQueueMessage();
        this._dataQ.addToQueue('static_fields', browserDisplayPropertiesData, false);
      }
      // Math.
      if (this._configurations.isMathDetectEnabled()) {
        var mathFingerprint = BrowserPropsFeature.getMathFingerprint();
        var mathDetectContract = new MathDetectContract_1["default"](mathFingerprint);
        var mathDetectData = mathDetectContract.buildQueueMessage();
        this._dataQ.addToQueue('static_fields', mathDetectData, false);
      }
      Logger_1["default"].info('Browser Props collected');
    }
    /**
     * userLanguage - non standard. Retrieves the operating system's natural language setting
     * browserLanguage - non standard. Retrieves the current operating system language. Can be different from userLanguage
     * e.g in IE 11, userLanguage is 'he-IL' but browserLanguage is 'en-US'
     * language - standard. The preferred language of the user, usually the language of the browser UI
     * @returns {*}
     */
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }, {
    key: "getLanguage",
    value: function getLanguage() {
      if (navigator) {
        if (navigator.language) {
          // Chrome, FF, Edge, IE 11, Safari etc.
          return navigator.language;
        }
        if (navigator.userLanguage) {
          // IE 10 and lower
          return navigator.userLanguage;
        }
        // I commented out these options since they are not rele
        // else if (navigator.browserLanguage) {
        //     return navigator.browserLanguage;
        // }
        // else if (navigator.systemLanguage) { // IE 10 and lower
        //     return navigator.systemLanguage;
        // }
      }
      return undefined;
    }
    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/@media/monochrome
     */
  }, {
    key: "getMonochromeDepth",
    value: function getMonochromeDepth() {
      if (!matchMedia('(min-monochrome: 0)').matches) {
        // The media feature isn't supported by the browser
        return undefined;
      }
      // A variation of binary search algorithm can be used here.
      // But since expected values are very small (10), there is no sense in adding the complexity.
      for (var i = 0; i <= 100; ++i) {
        if (matchMedia("(max-monochrome: ".concat(i, ")")).matches) {
          return i;
        }
      }
      return undefined;
    }
    /**
     * @see https://www.w3.org/TR/mediaqueries-5/#dynamic-range
     */
  }, {
    key: "isHDR",
    value: function isHDR() {
      var doesMatch = function doesMatch(value) {
        return matchMedia("(dynamic-range: ".concat(value, ")")).matches;
      };
      if (doesMatch('high')) {
        return 'high';
      }
      if (doesMatch('standard')) {
        return 'standard';
      }
      return 'undefined';
    }
    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/@media/inverted-colors
     */
  }, {
    key: "areColorsInverted",
    value: function areColorsInverted() {
      var doesMatch = function doesMatch(value) {
        return matchMedia("(inverted-colors: ".concat(value, ")")).matches;
      };
      if (doesMatch('inverted')) {
        return 'inverted';
      }
      if (doesMatch('none')) {
        return 'none';
      }
      return 'undefined';
    }
    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/@media/forced-colors
     */
  }, {
    key: "areColorsForced",
    value: function areColorsForced() {
      var doesMatch = function doesMatch(value) {
        return matchMedia("(forced-colors: ".concat(value, ")")).matches;
      };
      if (doesMatch('active')) {
        return 'active';
      }
      if (doesMatch('none')) {
        return 'none';
      }
      return 'undefined';
    }
    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/@media/color-gamut
     */
  }, {
    key: "getColorGamut",
    value: function getColorGamut() {
      // rec2020 includes p3 and p3 includes srgb
      for (var _i = 0, _arr = ['rec2020', 'p3', 'srgb']; _i < _arr.length; _i++) {
        var gamut = _arr[_i];
        if (matchMedia("(color-gamut: ".concat(gamut, ")")).matches) {
          return gamut;
        }
      }
      return 'undefined';
    }
    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-motion
     */
  }, {
    key: "isMotionReduced",
    value: function isMotionReduced() {
      var doesMatch = function doesMatch(value) {
        return matchMedia("(prefers-reduced-motion: ".concat(value, ")")).matches;
      };
      if (doesMatch('reduce')) {
        return 'reduce';
      }
      if (doesMatch('no-preference')) {
        return 'no-preference';
      }
      return 'undefined';
    }
    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-transparency
     */
  }, {
    key: "isTransparencyReduced",
    value: function isTransparencyReduced() {
      var doesMatch = function doesMatch(value) {
        return matchMedia("(prefers-reduced-transparency: ".concat(value, ")")).matches;
      };
      if (doesMatch('reduce')) {
        return 'reduce';
      }
      if (doesMatch('no-preference')) {
        return 'no-preference';
      }
      return 'undefined';
    }
  }, {
    key: "getMathFingerprint",
    value: function getMathFingerprint() {
      return [Math.acos(0.123124234234234242), Math.acosh(1e308), Math.asin(0.123124234234234242), Math.asinh(1), Math.atan(0.5), Math.atanh(0.5), Math.sin(-1e300), Math.sinh(1), Math.cos(10.000000000123), Math.cosh(1), Math.tan(-1e300), Math.tanh(1), Math.exp(1), Math.expm1(1), Math.log1p(10), Math.pow(Math.PI, -100)].join('|');
    }
  }, {
    key: "getPlugins",
    value: function getPlugins() {
      try {
        var pList = [];
        if (window.navigator.plugins && window.navigator.plugins.length > 0) {
          for (var i = 0, len = window.navigator.plugins.length; i < len; i++) {
            pList.push([window.navigator.plugins[i].name, window.navigator.plugins[i].filename, window.navigator.plugins[i].description, window.navigator.plugins[i].version ? window.navigator.plugins[i].version : '']);
          }
        } else if (window.navigator.mimeTypes && window.navigator.mimeTypes.length > 0) {
          for (var x = 0; x < window.navigator.mimeTypes.length; x++) {
            pList.push([window.navigator.mimeTypes[x].type, '', window.navigator.mimeTypes[x].description, '']);
          }
        }
        // Custom logic for enhancing the plugins list with a ShockwaveFLash entry if detected
        var detectFlashInIE = BrowserPropsFeature.isActiveXAndFlashEnabled;
        BrowserPropsFeature.augmentWithFlashInIE(pList, window.navigator.plugins, detectFlashInIE);
        return pList;
      } catch (e) {
        Logger_1["default"].warn("getPlugins error: ".concat(e.message), e);
      }
    }
  }, {
    key: "checkCookie",
    value: function checkCookie() {
      var cookieEnabled = navigator.cookieEnabled;
      if (!cookieEnabled) {
        // for mobile compatibility
        // 1 minute expiration time
        this._utils.StorageUtils.setCookie('testcookie', '1', 60000);
        cookieEnabled = document.cookie.indexOf('testcookie') !== -1;
      }
      return cookieEnabled;
    }
  }, {
    key: "getOperatingSystem",
    value: function getOperatingSystem() {
      var dataOS = [{
        name: 'Windows Phone',
        value: 'Windows Phone',
        version: 'OS'
      }, {
        name: 'Windows',
        value: 'Win',
        version: 'NT'
      }, {
        name: 'iPhone',
        value: 'iPhone',
        version: 'OS'
      }, {
        name: 'iPad',
        value: 'iPad',
        version: 'OS'
      }, {
        name: 'Kindle',
        value: 'Silk',
        version: 'Silk'
      }, {
        name: 'Android',
        value: 'Android',
        version: 'Android'
      }, {
        name: 'PlayBook',
        value: 'PlayBook',
        version: 'OS'
      }, {
        name: 'BlackBerry',
        value: 'BlackBerry',
        version: '/'
      }, {
        name: 'Macintosh',
        value: 'Mac',
        version: 'OS X'
      }, {
        name: 'Linux',
        value: 'Linux',
        version: 'rv'
      }, {
        name: 'Palm',
        value: 'Palm',
        version: 'PalmOS'
      }];
      var navAgentData = [BrowserPropsFeature.getAvailablePlatform(window.navigator), navigator.userAgent].join(' ');
      var version = '';
      var os = 'Unknown';
      var osRegex;
      var verRegex;
      var osMatch;
      var verMatch;
      for (var index = 0; index < dataOS.length; index++) {
        osRegex = new RegExp(dataOS[index].value, 'i');
        osMatch = osRegex.test(navAgentData);
        if (osMatch) {
          verRegex = new RegExp(dataOS[index].version + '[- /:;]([\\d._]+)', 'i');
          verMatch = navAgentData.match(verRegex);
          if (verMatch) {
            if (verMatch[1]) {
              verMatch = verMatch[1];
            }
            verMatch = verMatch.split(/[._]+/);
            for (var verIndex = 0; verIndex < verMatch.length; verIndex++) {
              if (verIndex === 0) {
                version += verMatch[verIndex] + '.';
              } else {
                version += verMatch[verIndex];
              }
            }
          }
          os = dataOS[index].name;
          break;
        }
      }
      return {
        version: parseFloat(version) || null,
        name: os
      };
    }
    /**
     * Must be wrapped with try/catch to avoid undefined errors in non IE browsers
     * (assuming you consider IE a browser)
     * If the ShockwaveFlash plugin is installed and enabled it is expected to appear in
     * the navigator.plugins list in IE 11. However in IE < 11 (10, 9 ,8) the navigator.plugins is not a PluginArray
     * object and therefore this custom detection is required.
     * @returns {boolean}
     */
  }, {
    key: "isActiveXAndFlashEnabled",
    value: function isActiveXAndFlashEnabled() {
      try {
        return Boolean(new ActiveXObject('ShockwaveFlash.ShockwaveFlash'));
      } catch (exception) {
        return false;
      }
    }
  }, {
    key: "getAvailablePlatform",
    value: function getAvailablePlatform(_navigator) {
      if ('platform' in _navigator) {
        return _navigator['platform'];
      } else if ('userAgentData' in _navigator) {
        return _navigator['userAgentData']['platform'];
      }
      return null;
    }
    /**
     * The Flash Enable related data point is the result of collecting the Shockwave flash entry available in the navigator.plugins/mimeTypes
     * However, this entry is added in IE11, Chrome, Firefox and Safari
     * This method is called to enhance the plugins/mimeTypes data upon detecting Flash in IE < 11 using
     * the activeX API
     * @param {Array} data
     * @param {object} navigatorPluginsObject by which IE < 11 behavior is detected as we only augment
     * @param {function} detectFlashInIE
     * MSMimeTypesCollection and MSPluginsCollection collections
     */
  }, {
    key: "augmentWithFlashInIE",
    value: function augmentWithFlashInIE(data, navigatorPluginsObject, detectFlashInIE) {
      // We are not expected to augment the navigator.plugins/mimeTypes object PluginArray (IE 11+) type
      // Only MSMimeTypesCollection and MSPluginsCollection should be augmented
      var pluginsCollectionName = Object.prototype.toString.call(navigatorPluginsObject);
      if (pluginsCollectionName === '[object PluginArray]') {
        return data;
      }
      var pluginsEntry = ['Flash32_32_0_0_238.ocx', 2, 'Shockwave Flash', '32.0.0.238'];
      if (detectFlashInIE()) {
        data.push(pluginsEntry);
      }
      return data;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = BrowserPropsFeature;
/* eslint-enable prefer-destructuring */

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/DRMDataCollector.js":
/*!***************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/DRMDataCollector.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Hash_1 = __webpack_require__(/*! ../../technicalServices/Hash */ "./dist/js-sdk-legacy/src/main/technicalServices/Hash.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var DRMDataCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function DRMDataCollector(dataQ) {
    var _this;
    _classCallCheck(this, DRMDataCollector);
    _this = _callSuper(this, DRMDataCollector);
    _this._dataQ = dataQ;
    _this.drmData = {};
    return _this;
  }
  // Added helper method so that tests can stub it
  _inherits(DRMDataCollector, _DataCollector_1$defa);
  return _createClass(DRMDataCollector, [{
    key: "hashDRMData",
    value: function hashDRMData(drmData) {
      return (0, Hash_1.x64hash128)(JSON.stringify(drmData));
    }
  }, {
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var drmSystems, config, _i, _Object$entries, _Object$entries$_i, name, keySystem, access, fingerprintHash, _t;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              drmSystems = {
                widevine: "com.widevine.alpha",
                playready: "com.microsoft.playready",
                fairplay: "com.apple.fairplay",
                clearkey: "org.w3.clearkey"
              };
              config = [{
                initDataTypes: ["cenc"],
                videoCapabilities: [{
                  contentType: 'video/mp4; codecs="avc1.42E01E"'
                }, {
                  contentType: 'video/webm; codecs="vp8"'
                }],
                audioCapabilities: [{
                  contentType: 'audio/mp4; codecs="mp4a.40.2"'
                }]
              }]; // Iterate over DRM systems and try to request access.
              _i = 0, _Object$entries = Object.entries(drmSystems);
            case 1:
              if (!(_i < _Object$entries.length)) {
                _context.n = 6;
                break;
              }
              _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2), name = _Object$entries$_i[0], keySystem = _Object$entries$_i[1];
              _context.p = 2;
              _context.n = 3;
              return navigator.requestMediaKeySystemAccess(keySystem, config);
            case 3:
              access = _context.v;
              this.drmData[name] = {
                supported: true,
                keySystem: keySystem,
                sessionTypes: access.getConfiguration().sessionTypes,
                videoCapabilities: access.getConfiguration().videoCapabilities,
                audioCapabilities: access.getConfiguration().audioCapabilities
              };
              _context.n = 5;
              break;
            case 4:
              _context.p = 4;
              _t = _context.v;
              // Mark as unsupported.
              this.drmData[name] = {
                supported: false
              };
            case 5:
              _i++;
              _context.n = 1;
              break;
            case 6:
              // Compute fingerprint using the helper method.
              fingerprintHash = this.hashDRMData(this.drmData);
              this.sendData(this.drmData);
              Logger_1["default"].debug('DRMDataCollector - DRM Data');
              Logger_1["default"].debug(this.drmData);
              Logger_1["default"].debug(fingerprintHash);
            case 7:
              return _context.a(2);
          }
        }, _callee, this, [[2, 4]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }, {
    key: "sendData",
    value: function sendData(drmData) {
      this._dataQ.addToQueue('static_fields', ['drm', drmData], false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return {
        configKey: 'isDRMFeature',
        isDefault: false,
        shouldRunPerContext: false,
        shouldRunPerSession: true,
        shouldRun: false,
        isFrameRelated: false,
        runInUns: false,
        runInSlave: false,
        runInLean: false,
        isRunning: false,
        instance: null
      };
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = DRMDataCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/DoNotTrackFeature.js":
/*!****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/DoNotTrackFeature.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var DoNotTrackContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/DoNotTrackContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/DoNotTrackContract.js"));
var featureSettings = {
  configKey: 'isDoNotTrack',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var DoNotTrackFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function DoNotTrackFeature(dataQ) {
    var _this;
    _classCallCheck(this, DoNotTrackFeature);
    _this = _callSuper(this, DoNotTrackFeature);
    _this._dataQ = dataQ;
    return _this;
  }
  /**
   * Browsers behavior:
   * Chrome: navigator.doNotTrack == null when not set, "1" when set
   * FF: navigator.doNotTrack == "unspecified" when not set, "1" when set
   * IE 11: window.doNotTrack == null when turned off, "1" when set (default mode)
   * IE 10: navigator.msDoNotTrack == "0" when turned off, "1" when set
   * Safari 9.1: navigator.doNotTrack == null when never set, "1" when set and when again unset "0"
   * Opera: navigator.doNotTrack == null, did not find how to set it in Opera
   * Edge: window.doNotTrack == null when turned off, , "1" when set
   */
  _inherits(DoNotTrackFeature, _DataCollector_1$defa);
  return _createClass(DoNotTrackFeature, [{
    key: "startFeature",
    value: function startFeature() {
      var dnt = navigator.doNotTrack; // normal browsers
      if (dnt === undefined) {
        dnt = window.doNotTrack; // IE 11 + Edge
        if (dnt === undefined) {
          dnt = navigator.msDoNotTrack; // IE 10
        }
      }
      if (dnt === null || dnt === 'unspecified' || dnt === '0') {
        dnt = 0;
      } else if (dnt === '1') {
        dnt = 1;
      } else {
        // dnt is undefined or some other value (cannot really happen)
        dnt = 2;
      }
      var doNotTrackContract = new DoNotTrackContract_1["default"](dnt);
      var data = doNotTrackContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', data, false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = DoNotTrackFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/EncryptedMuidFeature.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/EncryptedMuidFeature.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var DevDebugInfoContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/DevDebugInfoContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/DevDebugInfoContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var featureSettings = {
  configKey: 'enableEmuidFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var EncryptedMuidFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function EncryptedMuidFeature(dataQ, encryptedMuidService) {
    var _this;
    _classCallCheck(this, EncryptedMuidFeature);
    _this = _callSuper(this, EncryptedMuidFeature);
    _this._encryptedMuidService = encryptedMuidService;
    _this._dataQ = dataQ;
    return _this;
  }
  _inherits(EncryptedMuidFeature, _DataCollector_1$defa);
  return _createClass(EncryptedMuidFeature, [{
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var emuid;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              _context.n = 1;
              return this._encryptedMuidService.getEncryptedMuid();
            case 1:
              emuid = _context.v;
              if (emuid) {
                this._dataQ.addToQueue('static_fields', ['emuid', emuid], false);
              }
            case 2:
              return _context.a(2);
          }
        }, _callee, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = EncryptedMuidFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/GfxRenderingFeature.js":
/*!******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/GfxRenderingFeature.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CanvasModel = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var GfxRenderingContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/GfxRenderingContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/GfxRenderingContract.js"));
var featureSettings = {
  configKey: 'isGfxRendering',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: false,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
// Use a common font type to retain the same rendering across different browsers
var CANVAS_TEXT_FIRST_FONT = '11pt Times New Roman';
var CANVAS_TEXT_SECOND_FONT = '18pt Arial';
var CANVAS_TEXT_THIRD_FONT = '14pt Georgia';
var CANVAS_TEXT_FOURTH_FONT = '16pt Verdana';
var CANVAS_TEXT_WIDTH = 320;
var CANVAS_TEXT_HEIGHT = 120;
var CANVAS_GEOMETRY_WIDTH = 256;
var CANVAS_GEOMETRY_HEIGHT = 256;
var CANVAS_RENDERING_NOISE_DETECTED_VAL = "0";
var CanvasModel = /*#__PURE__*/_createClass(function CanvasModel() {
  _classCallCheck(this, CanvasModel);
  this.winding = false;
  this.text = "";
  this.geometry = "";
});
exports.CanvasModel = CanvasModel;
/**
 * The purpose of this class is to collect data about the rendering capabilities of the browser
 * The collector should report the following:
 * 1. Whether the browser supports the winding rule for canvas rendering
 * 2. A hash of the text rendering capabilities of the browser
 * 3. A hash of the geometry rendering capabilities of the browser
 * In case the browser has a plugin that applies noise to the rendering, for example alters a single pixel,
 * the second attempt to encode the canvas will result in a different hash - in that case "0" is assigned to both text and geometry
 */
var GfxRenderingFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  /**
   * @param {DataQueue} dataQ
   * @param {Utils} CDUtils
   */
  function GfxRenderingFeature(dataQ, utils) {
    var _this;
    _classCallCheck(this, GfxRenderingFeature);
    _this = _callSuper(this, GfxRenderingFeature);
    _this._dataQ = dataQ;
    _this._utils = utils;
    _this._metric = 'GFX';
    // This element doesn't have to be added to the DOM
    _this.canvasElement = null;
    _this.canvasContext = null;
    _this._addToQueueAndCleanUp = _this.addToQueueAndCleanUp.bind(_this);
    return _this;
  }
  _inherits(GfxRenderingFeature, _DataCollector_1$defa);
  return _createClass(GfxRenderingFeature, [{
    key: "startFeature",
    value: function startFeature() {
      this.initCanvasAndContext();
      if (this.isCanvas2DSupported(this.canvasElement, this.canvasContext)) {
        this.generateCanvasData();
      }
    }
  }, {
    key: "addToQueueAndCleanUp",
    value: function addToQueueAndCleanUp(canvasData) {
      var gfxContract = new GfxRenderingContract_1["default"](canvasData.winding, canvasData.text, canvasData.geometry);
      var gfxData = gfxContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', gfxData, false);
      this.cleanUp();
    }
  }, {
    key: "initCanvasAndContext",
    value: function initCanvasAndContext() {
      // Without exposing an initiator, proper spying and stubbing cannot be performed
      if (this.canvasElement === null || this.canvasContext === null) {
        this.canvasElement = document.createElement('canvas');
        this.canvasContext = this.buildCanvasContext(this.canvasElement);
      }
    }
  }, {
    key: "cleanUp",
    value: function cleanUp() {
      // Clean up
      this.canvasContext = null;
      this.canvasElement = null;
    }
    /**
     * Generates the data for the canvas rendering
     * @param callback
     */
  }, {
    key: "generateCanvasData",
    value: function generateCanvasData() {
      var _this2 = this;
      var canvasData = new CanvasModel();
      canvasData.winding = this.hasWinding(this.canvasContext);
      this.renderTextImage(this.canvasElement, this.canvasContext);
      var textImageFP1 = this.canvasToText(this.canvasElement);
      var textImageFP2 = this.canvasToText(this.canvasElement);
      // Compare between the results of the calls to dataToURL()
      // If noise is applied by the browser, it's useless to report the actual fingerprint
      // The change of a single pixel is enough to alter the signature
      if (textImageFP1.length === 0 || textImageFP2.length === 0 || textImageFP1 !== textImageFP2) {
        canvasData.text = CANVAS_RENDERING_NOISE_DETECTED_VAL;
        canvasData.geometry = CANVAS_RENDERING_NOISE_DETECTED_VAL;
        this._addToQueueAndCleanUp(canvasData);
      } else {
        this.hashCanvasText(textImageFP1).then(function (canvasDataText) {
          canvasData.text = canvasDataText || CANVAS_RENDERING_NOISE_DETECTED_VAL;
          _this2.renderGeometryImage(_this2.canvasElement, _this2.canvasContext);
          return _this2.hashCanvasText(_this2.canvasToText(_this2.canvasElement));
        }).then(function (canvasDataGeometry) {
          canvasData.geometry = canvasDataGeometry || CANVAS_RENDERING_NOISE_DETECTED_VAL;
          _this2._addToQueueAndCleanUp(canvasData);
        });
      }
    }
    /**
     * @param {HTMLCanvasElement} canvasElement
     */
  }, {
    key: "buildCanvasContext",
    value: function buildCanvasContext(canvasElement) {
      canvasElement.width = 1;
      canvasElement.height = 1;
      return canvasElement.getContext('2d');
    }
    /**
     * @param {HTMLCanvasElement} canvas
     * @param {CanvasRenderingContext2D} context
     */
  }, {
    key: "isCanvas2DSupported",
    value: function isCanvas2DSupported(canvas, context) {
      return !!(context && canvas.toDataURL);
    }
    /**
     * Renders a text image in the given context2D
     * @param {HTMLCanvasElement} canvasElement
     * @param {CanvasRenderingContext2D} canvasContext
     */
  }, {
    key: "renderTextImage",
    value: function renderTextImage(canvasElement, canvasContext) {
      canvasElement.width = CANVAS_TEXT_WIDTH;
      canvasElement.height = CANVAS_TEXT_HEIGHT;
      // Create gradient background
      var gradient = canvasContext.createLinearGradient(0, 0, CANVAS_TEXT_WIDTH, CANVAS_TEXT_HEIGHT);
      gradient.addColorStop(0, '#f60');
      gradient.addColorStop(1, '#069');
      canvasContext.fillStyle = gradient;
      canvasContext.fillRect(0, 0, CANVAS_TEXT_WIDTH, CANVAS_TEXT_HEIGHT);
      canvasContext.textBaseline = 'alphabetic';
      canvasContext.fillStyle = '#fff';
      // First text with first font
      canvasContext.font = CANVAS_TEXT_FIRST_FONT;
      // Add more diverse Unicode and Emojis
      var printedText = "DHO YbmPx KTGUL CQrSfJ iNvZAEW ".concat(String.fromCharCode(55357, 56835), " \uD83D\uDE04 \uD83D\uDCA9 \u2693 \u2194"); // Smiling face, Pile of Poo, Anchor, Left-right arrow
      canvasContext.fillText(printedText, 2, 15);
      // Second text with second font and rotation
      canvasContext.save();
      canvasContext.translate(4, 45);
      canvasContext.rotate(0.1);
      canvasContext.font = CANVAS_TEXT_SECOND_FONT;
      canvasContext.fillStyle = 'rgba(102, 204, 0, 0.7)';
      canvasContext.fillText(printedText, 0, 0);
      canvasContext.restore();
      // Third text with third font and shadow
      canvasContext.font = CANVAS_TEXT_THIRD_FONT;
      canvasContext.shadowColor = 'rgba(0, 0, 0, 0.5)';
      canvasContext.shadowBlur = 2;
      canvasContext.shadowOffsetX = 1;
      canvasContext.shadowOffsetY = 1;
      canvasContext.fillStyle = '#ff0';
      // Apply skew transformation
      canvasContext.save();
      canvasContext.transform(1, 0.1, 0, 1, 0, 0); // Skew horizontally
      canvasContext.fillText(printedText, 2, 75);
      canvasContext.restore();
      canvasContext.shadowColor = 'transparent'; // Reset shadow
      // Fourth text with fourth font and pattern
      var pattern = canvasContext.createPattern(this.createPatternCanvas(), 'repeat');
      canvasContext.font = CANVAS_TEXT_FOURTH_FONT;
      canvasContext.fillStyle = pattern;
      canvasContext.fillText(printedText, 2, 100);
    }
  }, {
    key: "createPatternCanvas",
    value: function createPatternCanvas() {
      var patternCanvas = document.createElement('canvas');
      patternCanvas.width = 20;
      patternCanvas.height = 20;
      var patternCtx = patternCanvas.getContext('2d');
      patternCtx.fillStyle = '#f00';
      patternCtx.fillRect(0, 0, 10, 10);
      patternCtx.fillStyle = '#00f';
      patternCtx.fillRect(10, 10, 10, 10);
      return patternCanvas;
    }
    /**
     *
     * @param {HTMLCanvasElement} canvasElement
     * @param {CanvasRenderingContext2D} canvasContext
     */
  }, {
    key: "renderGeometryImage",
    value: function renderGeometryImage(canvasElement, canvasContext) {
      canvasElement.width = CANVAS_GEOMETRY_WIDTH;
      canvasElement.height = CANVAS_GEOMETRY_HEIGHT;
      // Create complex gradient background
      var gradient = canvasContext.createRadialGradient(CANVAS_GEOMETRY_WIDTH / 2, CANVAS_GEOMETRY_HEIGHT / 2, 0, CANVAS_GEOMETRY_WIDTH / 2, CANVAS_GEOMETRY_HEIGHT / 2, CANVAS_GEOMETRY_WIDTH / 2);
      gradient.addColorStop(0, '#f2f');
      gradient.addColorStop(0.5, '#2ff');
      gradient.addColorStop(1, '#ff2');
      canvasContext.fillStyle = gradient;
      canvasContext.fillRect(0, 0, CANVAS_GEOMETRY_WIDTH, CANVAS_GEOMETRY_HEIGHT);
      // Draw complex shapes with different composite operations
      canvasContext.globalCompositeOperation = 'multiply';
      var pointsArray = [['#f2f', 40, 40], ['#2ff', 80, 40], ['#ff2', 60, 80]];
      for (var _i = 0, _pointsArray = pointsArray; _i < _pointsArray.length; _i++) {
        var _pointsArray$_i = _slicedToArray(_pointsArray[_i], 3),
          color = _pointsArray$_i[0],
          x = _pointsArray$_i[1],
          y = _pointsArray$_i[2];
        canvasContext.fillStyle = color;
        canvasContext.beginPath();
        canvasContext.arc(x, y, 40, 0, 2 * Math.PI, true);
        canvasContext.closePath();
        canvasContext.fill();
      }
      // Add more complex shapes
      canvasContext.globalCompositeOperation = 'screen';
      canvasContext.fillStyle = '#f9c';
      canvasContext.beginPath();
      canvasContext.arc(60, 60, 60, 0, 2 * Math.PI, true);
      canvasContext.arc(60, 60, 20, 0, 2 * Math.PI, true);
      canvasContext.fill('evenodd');
      // Add Bezier curves with a different blend mode
      canvasContext.globalCompositeOperation = 'difference'; // Changed from overlay
      canvasContext.beginPath();
      canvasContext.moveTo(20, 20);
      canvasContext.bezierCurveTo(40, 40, 60, 40, 80, 20);
      canvasContext.strokeStyle = '#0f0';
      canvasContext.lineWidth = 3;
      canvasContext.stroke();
      // Add more complex patterns with another blend mode
      canvasContext.globalCompositeOperation = 'luminosity'; // Changed from soft-light
      for (var i = 0; i < 5; i++) {
        canvasContext.beginPath();
        canvasContext.moveTo(0, i * 50);
        canvasContext.lineTo(CANVAS_GEOMETRY_WIDTH, i * 50);
        canvasContext.strokeStyle = "rgba(255, 255, 255, ".concat(0.2 + i * 0.1, ")");
        canvasContext.stroke();
      }
    }
    /**
     *
     * @param {HTMLCanvasElement} canvasElement
     */
  }, {
    key: "canvasToText",
    value: function canvasToText(canvasElement) {
      try {
        // toDataURL always returns a base64 encoded string or a SecurityError
        return canvasElement.toDataURL().split(',')[1];
      } catch (SecurityError) {
        return "";
      }
    }
    /**
     *
     * @param {string} data
     * @returns {Promise}
     */
  }, {
    key: "hashCanvasText",
    value: function hashCanvasText(data) {
      return this._utils.digest_sha256(data).then(function (hash) {
        return hash;
      })["catch"](function () {
        return "";
      });
    }
    /**
     *
     * @param {CanvasRenderingContext2D} canvasContext
     * @private
     * https://blog.coderfy.io/making-sense-of-canvas-winding-rules
     * Some machines/GPUs support winding and some do not.
     */
  }, {
    key: "hasWinding",
    value: function hasWinding(canvasContext) {
      canvasContext.rect(0, 0, 10, 10);
      canvasContext.rect(2, 2, 6, 6);
      return !canvasContext.isPointInPath(5, 5, 'evenodd');
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = GfxRenderingFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/GraphicDetectFeature.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/GraphicDetectFeature.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var GraphicDetectContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/GraphicDetectContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/GraphicDetectContract.js"));
var featureSettings = {
  configKey: 'isVMDetection',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var GraphicDetectFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function GraphicDetectFeature(dataQ, configurations) {
    var _this;
    _classCallCheck(this, GraphicDetectFeature);
    _this = _callSuper(this, GraphicDetectFeature);
    _this._dataQ = dataQ;
    _this._configurations = configurations;
    _this.canvasId = 'cd_canvas';
    return _this;
  }
  _inherits(GraphicDetectFeature, _DataCollector_1$defa);
  return _createClass(GraphicDetectFeature, [{
    key: "startFeature",
    value: function startFeature() {
      try {
        if (this._configurations && this._configurations.isGraphCardEnabled()) {
          this._getMappedRenderInfo();
        }
      } catch (error) {
        Logger_1["default"].error("Failed collecting Graphic Card information. ".concat(error));
      }
    }
    /**
     * Get rendering info - graphic card with version if exists
     * and send to server
     */
  }, {
    key: "_getMappedRenderInfo",
    value: function _getMappedRenderInfo() {
      Logger_1["default"].info('Collecting Graphic Card props');
      var graphicInfo = {
        renderer: 'unknown',
        vendor: '',
        version: 'unknown',
        supportedExtensions: ''
      };
      if (window.WebGLRenderingContext || window.WebGL2RenderingContext) {
        var canvas = document.createElement('canvas');
        canvas.id = this.canvasId;
        var gl = canvas.getContext('experimental-webgl');
        if (gl) {
          var dbgRenderInfo = gl.getExtension('WEBGL_debug_renderer_info');
          if (dbgRenderInfo != null) {
            graphicInfo.renderer = gl.getParameter(dbgRenderInfo.UNMASKED_RENDERER_WEBGL);
            graphicInfo.vendor = gl.getParameter(dbgRenderInfo.UNMASKED_VENDOR_WEBGL);
            graphicInfo.supportedExtensions = gl.getSupportedExtensions().join(',');
            var stringIntel = 'Intel';
            var stringHDgraphics = 'HD Graphics';
            var stringBDW = 'BDW (5th gen core)';
            var stringSKL = 'SKL (6th gen core)';
            if (graphicInfo.renderer.indexOf(stringIntel) > -1 && graphicInfo.renderer.indexOf(stringHDgraphics) > -1) {
              var numberPattern = /\d+/g;
              var matches = graphicInfo.renderer.match(numberPattern);
              if (matches) {
                var minVersion = matches[0];
                if (minVersion > 500 && minVersion < 599) {
                  graphicInfo.version = stringSKL;
                }
                if (minVersion > 5300 && minVersion < 6999) {
                  graphicInfo.version = stringBDW;
                }
              }
            }
          }
        }
      }
      var graphicDetectContract = new GraphicDetectContract_1["default"](graphicInfo.renderer, graphicInfo.vendor, graphicInfo.version, graphicInfo.supportedExtensions);
      var graphicDetectData = graphicDetectContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', graphicDetectData, false);
      Logger_1["default"].info('Graphic Card props collected');
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = GraphicDetectFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/IsPrivateBrowsingFeature.js":
/*!***********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/IsPrivateBrowsingFeature.js ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var IsPrivateBrowsingContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/IsPrivateBrowsingContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/IsPrivateBrowsingContract.js"));
var featureSettings = {
  configKey: 'isPrivateBrowsing',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var IsPrivateBrowsingFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function IsPrivateBrowsingFeature(dataQ, privateBrowsingDetector) {
    var _this;
    _classCallCheck(this, IsPrivateBrowsingFeature);
    _this = _callSuper(this, IsPrivateBrowsingFeature);
    _this._dataQ = dataQ;
    _this._privateBrowsingDetector = privateBrowsingDetector;
    return _this;
  }
  _inherits(IsPrivateBrowsingFeature, _DataCollector_1$defa);
  return _createClass(IsPrivateBrowsingFeature, [{
    key: "startFeature",
    value: function startFeature() {
      var _this2 = this;
      this._privateBrowsingDetector.detectPrivateMode(function (isPrivate) {
        var isPrivateBrowsingContract = new IsPrivateBrowsingContract_1["default"](isPrivate);
        var isPrivateData = isPrivateBrowsingContract.buildQueueMessage();
        _this2._dataQ.addToQueue('static_fields', isPrivateData, false);
      });
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = IsPrivateBrowsingFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/KeyboardLayoutFeature.js":
/*!********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/KeyboardLayoutFeature.js ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var KeyboardLayoutContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/KeyboardLayoutContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/KeyboardLayoutContract.js"));
var Hash_1 = __webpack_require__(/*! ../../technicalServices/Hash */ "./dist/js-sdk-legacy/src/main/technicalServices/Hash.js");
var featureSettings = {
  configKey: 'isKeyboardLayoutFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
var KeyboardLayoutFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  /**
   * @param {DataQueue} dataQ
   */
  function KeyboardLayoutFeature(dataQ) {
    var _this;
    _classCallCheck(this, KeyboardLayoutFeature);
    _this = _callSuper(this, KeyboardLayoutFeature);
    _this._dataQ = dataQ;
    return _this;
  }
  _inherits(KeyboardLayoutFeature, _DataCollector_1$defa);
  return _createClass(KeyboardLayoutFeature, [{
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              Logger_1["default"].info("Starting Keyboard Layout Feature");
              _context.n = 1;
              return this._collectKeyboardLayoutInfo();
            case 1:
              return _context.a(2);
          }
        }, _callee, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }, {
    key: "getKeyboard",
    value: function getKeyboard() {
      return typeof navigator !== 'undefined' && navigator.keyboard ? navigator.keyboard : null;
    }
  }, {
    key: "_collectKeyboardLayoutInfo",
    value: function () {
      var _collectKeyboardLayoutInfo2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {
        var keyboardLayoutInfo, keyboardLayoutContract, contractData, _t;
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.p = _context2.n) {
            case 0:
              Logger_1["default"].info('Collecting keyboard layout properties');
              _context2.p = 1;
              _context2.n = 2;
              return this._getKeyboardLayoutInfo();
            case 2:
              keyboardLayoutInfo = _context2.v;
              keyboardLayoutContract = new KeyboardLayoutContract_1["default"](keyboardLayoutInfo);
              contractData = keyboardLayoutContract.buildQueueMessage();
              this._dataQ.addToQueue('static_fields', contractData, false);
              _context2.n = 4;
              break;
            case 3:
              _context2.p = 3;
              _t = _context2.v;
              Logger_1["default"].error("Error collecting keyboard layout information: ".concat(_t));
            case 4:
              return _context2.a(2);
          }
        }, _callee2, this, [[1, 3]]);
      }));
      function _collectKeyboardLayoutInfo() {
        return _collectKeyboardLayoutInfo2.apply(this, arguments);
      }
      return _collectKeyboardLayoutInfo;
    }()
  }, {
    key: "_getKeyboardLayoutInfo",
    value: function () {
      var _getKeyboardLayoutInfo2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {
        var keyboard, layoutMap, map;
        return _regenerator().w(function (_context3) {
          while (1) switch (_context3.n) {
            case 0:
              keyboard = this.getKeyboard();
              if (keyboard) {
                _context3.n = 1;
                break;
              }
              throw Error("Could not find keyboard layout");
            case 1:
              _context3.n = 2;
              return keyboard.getLayoutMap();
            case 2:
              layoutMap = _context3.v;
              map = Array.from(layoutMap.values()).join("");
              return _context3.a(2, (0, Hash_1.x64hash128)(map));
          }
        }, _callee3, this);
      }));
      function _getKeyboardLayoutInfo() {
        return _getKeyboardLayoutInfo2.apply(this, arguments);
      }
      return _getKeyboardLayoutInfo;
    }()
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = KeyboardLayoutFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/MediaDevicesFeature.js":
/*!******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/MediaDevicesFeature.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MediaDevicesContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/MediaDevicesContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/MediaDevicesContract.js"));
var featureSettings = {
  configKey: 'isMediaDevices',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var MediaDevicesFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function MediaDevicesFeature(dataQ) {
    var _this;
    var navigator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.navigator;
    _classCallCheck(this, MediaDevicesFeature);
    _this = _callSuper(this, MediaDevicesFeature);
    _this._dataQ = dataQ;
    _this._navigator = navigator;
    _this._metric = 'MediaDevicesFeature';
    return _this;
  }
  _inherits(MediaDevicesFeature, _DataCollector_1$defa);
  return _createClass(MediaDevicesFeature, [{
    key: "startFeature",
    value: function startFeature() {
      var _this2 = this;
      this._navigator.mediaDevices && this._navigator.mediaDevices.enumerateDevices && this._navigator.mediaDevices.enumerateDevices().then(function (devices) {
        var mediaDevices = [];
        devices.forEach(function (device) {
          var mediaDevice = [device.kind || '', device.label || '', device.deviceId || '', device.groupId || ''];
          mediaDevices.push(mediaDevice);
        });
        var mediaDevicesContract = new MediaDevicesContract_1["default"](mediaDevices);
        var mediaDevicesData = mediaDevicesContract.buildQueueMessage();
        _this2._dataQ.addToQueue('static_fields', mediaDevicesData, false);
      })["catch"](function (err) {
        _this2.cancelMonitor(_this2._metric);
        Logger_1["default"].error("MediaDevicesFeature:startFeature failed to enumerateDevices: ".concat(err.message));
      });
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = MediaDevicesFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/NavigatorFeature.js":
/*!***************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/NavigatorFeature.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var featureSettings = {
  configKey: 'isNavigatorFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: false,
  isRunning: false,
  instance: null
};
var NavigatorFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function NavigatorFeature(dataQ) {
    var _this;
    var navigator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.navigator;
    _classCallCheck(this, NavigatorFeature);
    _this = _callSuper(this, NavigatorFeature);
    _this._dataQ = dataQ;
    _this._navigator = navigator;
    return _this;
  }
  _inherits(NavigatorFeature, _DataCollector_1$defa);
  return _createClass(NavigatorFeature, [{
    key: "startFeature",
    value: function startFeature() {
      try {
        var _this$_navigator$user;
        var navigatorData = {
          oscpu: this._navigator.oscpu || null,
          pdfViewerEnabled: this._navigator.pdfViewerEnabled || null,
          webdriver: this._navigator.webdriver || null,
          userAgentData: this._navigator.userAgentData || null,
          appVersion: this._navigator.appVersion || null,
          platform: this._navigator.platform || null,
          vendor: this._navigator.vendor || null,
          productSub: this._navigator.productSub || null,
          vendorSub: this._navigator.vendorSub || null,
          onLine: this._navigator.onLine || null,
          getHighEntropyValues: Boolean((_this$_navigator$user = this._navigator.userAgentData) === null || _this$_navigator$user === void 0 ? void 0 : _this$_navigator$user.getHighEntropyValues),
          prototype: Object.getOwnPropertyNames(Object.getPrototypeOf(this._navigator))
        };
        Logger_1["default"].debug('NavigatorFeature: Collected navigator data', navigatorData);
        this._dataQ.addToQueue('static_fields', ['navigator_oscpu', navigatorData.oscpu], false);
        this._dataQ.addToQueue('static_fields', ['navigator_pdfViewerEnabled', navigatorData.pdfViewerEnabled], false);
        this._dataQ.addToQueue('static_fields', ['navigator_webdriver', navigatorData.webdriver], false);
        this._dataQ.addToQueue('static_fields', ['navigator_userAgentData', navigatorData.userAgentData], false);
        this._dataQ.addToQueue('static_fields', ['navigator_appVersion', navigatorData.appVersion], false);
        this._dataQ.addToQueue('static_fields', ['navigator_platform', navigatorData.platform], false);
        this._dataQ.addToQueue('static_fields', ['navigator_vendor', navigatorData.vendor], false);
        this._dataQ.addToQueue('static_fields', ['navigator_productSub', navigatorData.productSub], false);
        this._dataQ.addToQueue('static_fields', ['navigator_vendorSub', navigatorData.vendorSub], false);
        this._dataQ.addToQueue('static_fields', ['navigator_onLine', navigatorData.onLine], false);
        this._dataQ.addToQueue('static_fields', ['navigator_getHighEntropyValues', navigatorData.getHighEntropyValues], false);
        this._dataQ.addToQueue('static_fields', ['navigator_prototype', navigatorData.prototype], false);
      } catch (error) {
        Logger_1["default"].error('NavigatorFeature: Error collecting navigator data', error);
      }
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = NavigatorFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/PointerHoverDetector.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/PointerHoverDetector.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var POINTER_TYPE = {
  FINE: 1,
  COARSE: 2,
  NONE: 3,
  ANY: 4,
  NOT_SUPPORTED: 5
};
var HOVER_TYPE = {
  HOVER: 1,
  ON_DEMAND: 2,
  NONE: 3,
  ANY: 4,
  NOT_SUPPORTED: 5
};
var PointerHoverDetector = /*#__PURE__*/function () {
  function PointerHoverDetector() {
    _classCallCheck(this, PointerHoverDetector);
  }
  return _createClass(PointerHoverDetector, null, [{
    key: "getPointerHover",
    value: function getPointerHover() {
      var inputMechanism = {
        pointer: POINTER_TYPE.NOT_SUPPORTED,
        hover: POINTER_TYPE.NOT_SUPPORTED
      };
      // fine pointer - mouse or pen
      if (window.matchMedia) {
        var mm = window.matchMedia;
        if (mm('( any-pointer: fine )').matches) {
          // hige level accuracy - mouse or pen
          inputMechanism.pointer = POINTER_TYPE.FINE;
        } else if (mm('( any-pointer: coarse )').matches) {
          // less accurate pointer - touch screen
          inputMechanism.pointer = POINTER_TYPE.COARSE;
        } else if (mm('( any-pointer: none )').matches) {
          inputMechanism.pointer = POINTER_TYPE.NONE;
        } else if (mm('( any-pointer )').matches) {
          inputMechanism.pointer = POINTER_TYPE.ANY;
        }
        // The primary input mechanism of the device includes a pointing device of limited accuracy
        if (mm('( any-hover: hover )').matches) {
          inputMechanism.hover = HOVER_TYPE.HOVER;
        } else if (mm('( any-hover: on-demand )').matches) {
          inputMechanism.hover = HOVER_TYPE.ON_DEMAND;
        } else if (mm('( any-hove: none )').matches) {
          inputMechanism.hover = HOVER_TYPE.NONE;
        } else if (window.matchMedia('( any-hover )').matches) {
          inputMechanism.hover = HOVER_TYPE.ANY;
        }
      }
      return inputMechanism;
    }
  }]);
}();
exports["default"] = PointerHoverDetector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/PrivateBrowsingDetector.js":
/*!**********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/PrivateBrowsingDetector.js ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
/**
 * This class is based on https://gist.github.com/cou929/7973956
 * In Edge the results are not correct. In others it seems good
 */
var PrivateBrowsingDetector = /*#__PURE__*/function () {
  function PrivateBrowsingDetector() {
    _classCallCheck(this, PrivateBrowsingDetector);
  }
  return _createClass(PrivateBrowsingDetector, [{
    key: "detectPrivateMode",
    value: function detectPrivateMode(callback) {
      if (this._isWebkitBrowser()) {
        this._detectPrivateBrowsingOnWebkit(callback);
      } else if (this._isMozillaBrowser()) {
        this._detectPrivateBrowsingOnMozilla(callback);
      } else if (this._isIE10OrLater(window.navigator.userAgent)) {
        this._detectPrivateBrowsingOnIESinceVersion10(callback);
      } else if (window.localStorage && /Safari/.test(window.navigator.userAgent)) {
        this._detectPrivateBrowsingOnSafari(callback);
      } else {
        // Undetermined result
        callback(null);
      }
    }
  }, {
    key: "_isWebkitBrowser",
    value: function _isWebkitBrowser() {
      return !!window.webkitRequestFileSystem;
    }
  }, {
    key: "_isMozillaBrowser",
    value: function _isMozillaBrowser() {
      return 'MozAppearance' in document.documentElement.style;
    }
  }, {
    key: "_isIE10OrLater",
    value: function _isIE10OrLater(userAgent) {
      var ua = userAgent.toLowerCase();
      if (ua.indexOf('msie') === 0 && ua.indexOf('trident') === 0) {
        return false;
      }
      var match = /(?:msie|rv:)\s?([\d\.]+)/.exec(ua);
      if (match && parseInt(match[1], 10) >= 10) {
        return true;
      }
      // IE 10-11
      match = 'documentElement' in document && ('filters' in document.documentElement || 'documentMode' in document);
      if (match && document.documentMode) {
        var ver = parseFloat((ua.match(/.+(?:ie|rv)[\/: ]([\d.]+)/) || [])[1]);
        if (ver >= 10) {
          return true;
        }
      }
      // IE edge and compatibility
      match = /edge/.test(ua);
      var comp = !!ua.match(/trident\/7\./);
      if (match || comp) {
        // msieMaxVersion
        var _ver = parseFloat((ua.match(/.+(?:edge|rv)[\/: ]([\d.]+)/) || [])[1]);
        if (_ver >= 10) {
          return true;
        }
      }
      return false;
    }
  }, {
    key: "_detectPrivateBrowsingOnWebkit",
    value: function _detectPrivateBrowsingOnWebkit(callback) {
      if (navigator.storage !== undefined && typeof navigator.storage.estimate === 'function') {
        this._storageEstimateDetectionOnWebkit(callback);
      } else {
        this._fileSystemDetectionOnWebkit(callback);
      }
    }
  }, {
    key: "_fileSystemDetectionOnWebkit",
    value: function _fileSystemDetectionOnWebkit(callback) {
      window.webkitRequestFileSystem(window.TEMPORARY, 1, function () {
        callback(false);
      }, function () {
        callback(true);
      });
    }
  }, {
    key: "_storageEstimateDetectionOnWebkit",
    value: function _storageEstimateDetectionOnWebkit(callback) {
      navigator.storage.estimate().then(function (_ref) {
        var quota = _ref.quota;
        callback(quota < 120000000);
      })["catch"](function (error) {
        Logger_1["default"].error('failed to detect private browsing', error);
      });
    }
  }, {
    key: "_detectPrivateBrowsingOnMozilla",
    value: function _detectPrivateBrowsingOnMozilla(callback) {
      try {
        var indDB = indexedDB || window.indexedDB;
        var db = indDB.open('test');
        db.onerror = function () {
          // catch on firefox
          callback(true);
        };
        db.onsuccess = function () {
          callback(false);
        };
      } catch (e) {
        callback(true);
      }
    }
  }, {
    key: "_detectPrivateBrowsingOnIESinceVersion10",
    value: function _detectPrivateBrowsingOnIESinceVersion10(callback) {
      var isPrivate = false;
      try {
        if (!window.indexedDB) {
          isPrivate = true;
        }
      } catch (e) {
        isPrivate = true;
      }
      callback(isPrivate);
    }
  }, {
    key: "_detectPrivateBrowsingOnSafari",
    value: function _detectPrivateBrowsingOnSafari(callback) {
      var isPrivateBrowsing;
      // iOS 11 and newer Safari versions
      // Origin: https://gist.github.com/cou929/7973956#gistcomment-2272103
      try {
        window.openDatabase(null, null, null, null);
      } catch (e) {
        isPrivateBrowsing = true;
      }
      // Older Safari
      try {
        window.localStorage.setItem('test', 1);
      } catch (e) {
        isPrivateBrowsing = true;
      }
      if (!isPrivateBrowsing) {
        isPrivateBrowsing = false;
        window.localStorage.removeItem('test');
      }
      callback(isPrivateBrowsing);
    }
  }]);
}();
exports["default"] = PrivateBrowsingDetector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/ScreenHighResFeature.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/ScreenHighResFeature.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ScreenHighResContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/ScreenHighResContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/ScreenHighResContract.js"));
var featureSettings = {
  configKey: 'isScreenHighResFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
var ScreenHighResFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function ScreenHighResFeature(dataQ) {
    var _this;
    _classCallCheck(this, ScreenHighResFeature);
    _this = _callSuper(this, ScreenHighResFeature);
    _this._dataQ = dataQ;
    return _this;
  }
  _inherits(ScreenHighResFeature, _DataCollector_1$defa);
  return _createClass(ScreenHighResFeature, [{
    key: "startFeature",
    value: function startFeature() {
      Logger_1["default"].info('Starting Screen High Resolution Feature');
      var screenHighResInfo = ScreenHighResFeature.getScreenHighResInfo();
      var screenHighResContract = new ScreenHighResContract_1["default"](screenHighResInfo);
      var screenHighResData = screenHighResContract.buildQueueMessage();
      this._dataQ.addToQueue('static_fields', screenHighResData, false);
    }
    /**
     * Gets the screen high resolution information
     * @returns {boolean} Whether the screen is high resolution
     */
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }, {
    key: "getScreenHighResInfo",
    value: function getScreenHighResInfo() {
      var HIGH_RES_QUERY = "(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)";
      var mediaQueryList = ScreenHighResFeature.getMediaQueryList(HIGH_RES_QUERY);
      return mediaQueryList ? mediaQueryList.matches : false;
    }
    /**
     * Gets the media query list for a given query
     * @param {string} query - The media query to check
     * @returns {MediaQueryList} The media query list
     */
  }, {
    key: "getMediaQueryList",
    value: function getMediaQueryList(query) {
      if (typeof window !== 'undefined' && typeof window.matchMedia === 'function') {
        return window.matchMedia(query);
      }
      return null;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = ScreenHighResFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/SpeechVoiceCollector.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/SpeechVoiceCollector.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Hash_1 = __webpack_require__(/*! ../../technicalServices/Hash */ "./dist/js-sdk-legacy/src/main/technicalServices/Hash.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var featureSettings = {
  configKey: 'isSpeechVoicesFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: false,
  isRunning: false,
  instance: null
};
/**
 * Uses speechSynthesis to collect and hash available voices, then stores the data.
 *
 * speechSynthesis is a Web Speech API interface that enables text-to-speech (TTS) functionality.
 * Voices represent different speech synthesis options, including language, gender, and voice provider.
 */
var SpeechVoiceCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  /**
   * @constructor
   * @param {Object} dataQ - The data queue instance for storing collected data.
   */
  function SpeechVoiceCollector(dataQ) {
    var _this;
    _classCallCheck(this, SpeechVoiceCollector);
    _this = _callSuper(this, SpeechVoiceCollector);
    _this._dataQ = dataQ;
    return _this;
  }
  /**
   * Initializes the feature by listening for voice changes and collecting data.
   */
  _inherits(SpeechVoiceCollector, _DataCollector_1$defa);
  return _createClass(SpeechVoiceCollector, [{
    key: "startFeature",
    value: function startFeature() {
      speechSynthesis.addEventListener("voiceschanged", this.processVoices.bind(this));
      if (!speechSynthesis.pending) this.processVoices();
    }
    /**
     * Processes available speech synthesis voices, generates a hash, and adds it to the queue.
     */
  }, {
    key: "processVoices",
    value: function processVoices() {
      var voices = speechSynthesis.getVoices().map(function (_ref) {
        var def = _ref["default"],
          lang = _ref.lang,
          localService = _ref.localService,
          name = _ref.name,
          voiceURI = _ref.voiceURI;
        return {
          def: def,
          lang: lang,
          localService: localService,
          name: name,
          voiceURI: voiceURI
        };
      });
      if (voices.length === 0) return;
      var hash = (0, Hash_1.x64hash128)(JSON.stringify(voices));
      Logger_1["default"].debug('SpeechVoices - Voice hash:' + hash);
      this._dataQ.addToQueue('static_fields', ['speech_voices', hash], false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = SpeechVoiceCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/StorageFeature.js":
/*!*************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/StorageFeature.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var StorageEstimateContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/StorageEstimateContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StorageEstimateContract.js"));
var StorageDirectoryContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/StorageDirectoryContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StorageDirectoryContract.js"));
/**
 * Feature settings for the StorageFeature
 * @type {Object}
 */
var featureSettings = {
  configKey: 'isStorageFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
/**
 * StorageFeature collects information about browser storage capabilities
 * including storage estimates and directory information.
 *
 * @extends DataCollector
 */
var StorageFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  /**
   * Creates a new StorageFeature instance
   * @param {DataQueue} dataQ - The data queue to add collected data to
   * @param {DevDebugDataQ} devDebugDataQueue - The DevDebug data queue to add collected data to
   */
  function StorageFeature(dataQ, devDebugDataQueue) {
    var _this;
    _classCallCheck(this, StorageFeature);
    _this = _callSuper(this, StorageFeature);
    _this._dataQ = dataQ;
    _this._devDebugDataQueue = devDebugDataQueue;
    _this._storageManager = null;
    return _this;
  }
  /**
   * Starts the storage feature by collecting both storage estimate and directory information
   */
  _inherits(StorageFeature, _DataCollector_1$defa);
  return _createClass(StorageFeature, [{
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var _t;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              Logger_1["default"].info("Starting Storage Feature");
              this._initializeStorageManager();
              _context.p = 1;
              _context.n = 2;
              return this._collectStorageEstimateInfo();
            case 2:
              _context.n = 3;
              return this._collectStorageDirectoryInfo();
            case 3:
              _context.n = 5;
              break;
            case 4:
              _context.p = 4;
              _t = _context.v;
              Logger_1["default"].error("Error in Storage Feature: ".concat(_t.message || _t));
            case 5:
              return _context.a(2);
          }
        }, _callee, this, [[1, 4]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
    /**
     * Initializes the storage manager if not already initialized
     * @private
     */
    )
  }, {
    key: "_initializeStorageManager",
    value: function _initializeStorageManager() {
      if (!this._storageManager) {
        this._storageManager = this.getStorageManager();
      }
    }
    /**
     * Gets the browser's storage manager
     * @returns {StorageManager} The browser's storage manager
     */
  }, {
    key: "getStorageManager",
    value: function getStorageManager() {
      return typeof navigator !== 'undefined' && navigator.storage ? navigator.storage : null;
    }
    /**
     * Collects storage estimate information and adds it to the data queue
     * @private
     */
  }, {
    key: "_collectStorageEstimateInfo",
    value: (function () {
      var _collectStorageEstimateInfo2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {
        var storageEstimate, storageEstimateContract, contractData, _t2;
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.p = _context2.n) {
            case 0:
              Logger_1["default"].info('Collecting storage estimate properties');
              _context2.p = 1;
              _context2.n = 2;
              return this._getStorageEstimateInfo();
            case 2:
              storageEstimate = _context2.v;
              if (this._isValidStorageEstimate(storageEstimate)) {
                storageEstimateContract = new StorageEstimateContract_1["default"](storageEstimate.usage, storageEstimate.quota);
                contractData = storageEstimateContract.buildQueueMessage();
                this._dataQ.addToQueue('static_fields', contractData, false);
              } else {
                Logger_1["default"].warn('Invalid storage estimate data received');
              }
              _context2.n = 4;
              break;
            case 3:
              _context2.p = 3;
              _t2 = _context2.v;
              Logger_1["default"].error("Error collecting storage estimate information: ".concat(_t2.message || _t2));
              throw _t2;
            case 4:
              return _context2.a(2);
          }
        }, _callee2, this, [[1, 3]]);
      }));
      function _collectStorageEstimateInfo() {
        return _collectStorageEstimateInfo2.apply(this, arguments);
      }
      return _collectStorageEstimateInfo;
    }()
    /**
     * Validates storage estimate data
     * @param {Object} storageEstimate - The storage estimate data to validate
     * @returns {boolean} True if the data is valid, false otherwise
     * @private
     */
    )
  }, {
    key: "_isValidStorageEstimate",
    value: function _isValidStorageEstimate(storageEstimate) {
      return storageEstimate && typeof storageEstimate.usage === 'number' && typeof storageEstimate.quota === 'number' && storageEstimate.usage >= 0 && storageEstimate.quota >= 0;
    }
    /**
     * Gets storage estimate information from the browser
     * @private
     * @returns {Promise<{quota: number, usage: number}>} Storage estimate information
     */
  }, {
    key: "_getStorageEstimateInfo",
    value: (function () {
      var _getStorageEstimateInfo2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {
        var storageEstimate, _t3;
        return _regenerator().w(function (_context3) {
          while (1) switch (_context3.p = _context3.n) {
            case 0:
              _context3.p = 0;
              if (this._storageManager) {
                _context3.n = 1;
                break;
              }
              Logger_1["default"].error('StorageManager is not initialized or unavailable.');
              throw new Error('StorageManager is not initialized or unavailable.');
            case 1:
              _context3.n = 2;
              return this._storageManager.estimate();
            case 2:
              storageEstimate = _context3.v;
              return _context3.a(2, {
                quota: storageEstimate.quota,
                usage: storageEstimate.usage
              });
            case 3:
              _context3.p = 3;
              _t3 = _context3.v;
              Logger_1["default"].error("Failed to get storage estimate: ".concat(_t3.message || _t3));
              throw _t3;
            case 4:
              return _context3.a(2);
          }
        }, _callee3, this, [[0, 3]]);
      }));
      function _getStorageEstimateInfo() {
        return _getStorageEstimateInfo2.apply(this, arguments);
      }
      return _getStorageEstimateInfo;
    }()
    /**
     * Collects storage directory information and adds it to the data queue
     * @private
     */
    )
  }, {
    key: "_collectStorageDirectoryInfo",
    value: (function () {
      var _collectStorageDirectoryInfo2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4() {
        var directoryName, storageDirectoryContract, contractData, _t4;
        return _regenerator().w(function (_context4) {
          while (1) switch (_context4.p = _context4.n) {
            case 0:
              Logger_1["default"].info('Collecting storage directory properties');
              _context4.p = 1;
              _context4.n = 2;
              return this._getStorageDirectoryInfo();
            case 2:
              directoryName = _context4.v;
              if (this._isValidDirectoryName(directoryName)) {
                storageDirectoryContract = new StorageDirectoryContract_1["default"](directoryName);
                contractData = storageDirectoryContract.buildQueueMessage();
                this._devDebugDataQueue.addToQueue('static_fields', contractData, false);
              } else {
                Logger_1["default"].warn('Invalid storage directory data received');
              }
              _context4.n = 4;
              break;
            case 3:
              _context4.p = 3;
              _t4 = _context4.v;
              Logger_1["default"].error("Error collecting storage directory information: ".concat(_t4.message || _t4));
              throw _t4;
            case 4:
              return _context4.a(2);
          }
        }, _callee4, this, [[1, 3]]);
      }));
      function _collectStorageDirectoryInfo() {
        return _collectStorageDirectoryInfo2.apply(this, arguments);
      }
      return _collectStorageDirectoryInfo;
    }()
    /**
     * Validates directory name
     * @param {string} directoryName - The directory name to validate
     * @returns {boolean} True if the directory name is valid, false otherwise
     * @private
     */
    )
  }, {
    key: "_isValidDirectoryName",
    value: function _isValidDirectoryName(directoryName) {
      return directoryName !== undefined && typeof directoryName === 'string';
    }
    /**
     * Gets storage directory information from the browser
     * @private
     * @returns {Promise<string>} Storage directory name
     */
  }, {
    key: "_getStorageDirectoryInfo",
    value: (function () {
      var _getStorageDirectoryInfo2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5() {
        var fileSystemDirectoryHandle, _t5;
        return _regenerator().w(function (_context5) {
          while (1) switch (_context5.p = _context5.n) {
            case 0:
              _context5.p = 0;
              if (this._storageManager) {
                _context5.n = 1;
                break;
              }
              Logger_1["default"].error('StorageManager is not initialized or unavailable.');
              throw new Error('StorageManager is not initialized or unavailable.');
            case 1:
              _context5.n = 2;
              return this._storageManager.getDirectory();
            case 2:
              fileSystemDirectoryHandle = _context5.v;
              return _context5.a(2, fileSystemDirectoryHandle.name);
            case 3:
              _context5.p = 3;
              _t5 = _context5.v;
              Logger_1["default"].error("Failed to get storage directory: ".concat(_t5.message || _t5));
              throw _t5;
            case 4:
              return _context5.a(2);
          }
        }, _callee5, this, [[0, 3]]);
      }));
      function _getStorageDirectoryInfo() {
        return _getStorageDirectoryInfo2.apply(this, arguments);
      }
      return _getStorageDirectoryInfo;
    }())
  }], [{
    key: "getDefaultSettings",
    value:
    /**
     * Returns the default settings for this feature
     * @returns {Object} The default feature settings
     */
    function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = StorageFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/UserPermissions.js":
/*!**************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/UserPermissions.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * Collect the user permissions granted to the domain. The permissions are per domain and
 * different from browser to browser. There are 3 possible values: granted, prompt, denied
 *  Supported in: Chrome, FF, Opera
 */
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var PerUserPermissionContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/UserPermissionsContracts/PerUserPermissionContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/UserPermissionsContracts/PerUserPermissionContract.js"));
var PerStorageUserPermissionContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/UserPermissionsContracts/PerStorageUserPermissionContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/UserPermissionsContracts/PerStorageUserPermissionContract.js"));
var PerKindUserPermissionContract_1 = __importDefault(__webpack_require__(/*! ../../contract/staticContracts/UserPermissionsContracts/PerKindUserPermissionContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/UserPermissionsContracts/PerKindUserPermissionContract.js"));
var featureSettings = {
  configKey: 'isUserPermissions',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var UserPermissions = /*#__PURE__*/function (_DataCollector_1$defa) {
  function UserPermissions(dataQ) {
    var _this;
    var navig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.navigator;
    _classCallCheck(this, UserPermissions);
    _this = _callSuper(this, UserPermissions);
    _this._permDefs = {
      granted: 1,
      prompt: 2,
      denied: 3,
      "true": 1,
      "false": 3
    };
    _this._permissions = ['geolocation', 'midi', 'notifications', 'push'];
    _this._dataQ = dataQ;
    _this._navigator = navig;
    // 'camera', 'microphone' also appear in docs but are not working on any browser yet. Will be in the future.
    // So currently we check them by using navigator.mediaDevices.enumerateDevices.
    // 'persistent-storage' is working in FF but not in chrome and there is another way to check it
    // so we use the other way
    return _this;
  }
  _inherits(UserPermissions, _DataCollector_1$defa);
  return _createClass(UserPermissions, [{
    key: "startFeature",
    value: function startFeature() {
      this._reportQueryPermissions();
      this._reportStoragePermission();
      this._reportMicCameraPermissions();
    }
    /**
     * All the query permissions are on of the 3 values: granted, prompt, denied
     * @private
     */
  }, {
    key: "_reportQueryPermissions",
    value: function _reportQueryPermissions() {
      var _this2 = this;
      if (this._navigator.permissions && this._navigator.permissions.query) {
        var logger = Logger_1["default"];
        var _loop = function _loop() {
          var per = _this2._permissions[i];
          _this2._navigator.permissions.query({
            name: per
          }).then(function (result) {
            var state = _this2._permDefs[result.state] || -1;
            var perContract = new PerUserPermissionContract_1["default"](per, state);
            var perData = perContract.buildQueueMessage();
            _this2._dataQ.addToQueue('static_fields', perData, false);
          })["catch"](function (ex) {
            // Log these errors in debug. There are various errors from different browsers since the API is not fully supported...
            logger.debug("Failed querying for ".concat(per, " permissions ").concat(ex.message));
          });
        };
        for (var i = 0; i < this._permissions.length; i++) {
          _loop();
        }
      }
    }
    /**
     * The persisted callback return true or false and we translate it to granted (1) and denied (3)
     * @private
     */
  }, {
    key: "_reportStoragePermission",
    value: function _reportStoragePermission() {
      var _this3 = this;
      // check for persistent storage permissions separately
      if (this._navigator.storage && this._navigator.storage.persisted) {
        this._navigator.storage.persisted().then(function (persistent) {
          var perStorageContract = new PerStorageUserPermissionContract_1["default"](_this3._permDefs[persistent] || -1);
          var perStorageData = perStorageContract.buildQueueMessage();
          _this3._dataQ.addToQueue('static_fields', perStorageData, false);
        })["catch"](function (ex) {
          Logger_1["default"].debug("Failed to check storage persisted: ".concat(ex.message));
        });
      }
    }
    /**
     * We know whether there is a permission for the audio/video by checking the 'label' of the device.
     * If the label != "" then the user gave permissions, otherwise he did not.
     * @private
     */
  }, {
    key: "_reportMicCameraPermissions",
    value: function _reportMicCameraPermissions() {
      var _this4 = this;
      var alreadyReported = {
        audio: false,
        video: false
      };
      function updateReported(deviceKind) {
        if (deviceKind.includes('audio')) {
          alreadyReported.audio = true;
          return 'audio';
        }
        if (deviceKind.includes('video')) {
          alreadyReported.video = true;
          return 'video';
        }
      }
      function isAlreadyReported(deviceKind) {
        return deviceKind.includes('audio') && alreadyReported.audio || deviceKind.includes('video') && alreadyReported.video;
      }
      // check for camera and mic permissions
      this._navigator.mediaDevices && this._navigator.mediaDevices.enumerateDevices && this._navigator.mediaDevices.enumerateDevices().then(function (devices) {
        devices.forEach(function (device) {
          // if the label is not "" then the user gave permissions
          if (!isAlreadyReported(device.kind)) {
            var kind = updateReported(device.kind);
            var perm = device.label !== '' ? _this4._permDefs.granted : _this4._permDefs.denied;
            var perKingContract = new PerKindUserPermissionContract_1["default"](kind, perm);
            var perKindData = perKingContract.buildQueueMessage();
            _this4._dataQ.addToQueue('static_fields', perKindData, false);
          }
        });
      })["catch"](function (err) {
        Logger_1["default"].debug("UserPermissions:startFeature failed to enumerateDevices: ".concat(err.message));
      });
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = UserPermissions;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/WebRTCDataCollector.js":
/*!******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/WebRTCDataCollector.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Hash_1 = __webpack_require__(/*! ../../technicalServices/Hash */ "./dist/js-sdk-legacy/src/main/technicalServices/Hash.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var WebRTCDataCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function WebRTCDataCollector(dataQ) {
    var _this;
    _classCallCheck(this, WebRTCDataCollector);
    _this = _callSuper(this, WebRTCDataCollector);
    _this._dataQ = dataQ;
    _this.peer = null;
    _this.timeoutId = null;
    return _this;
  }
  _inherits(WebRTCDataCollector, _DataCollector_1$defa);
  return _createClass(WebRTCDataCollector, [{
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var candidates, _t;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              Logger_1["default"].info("Starting WebRTCDataCollector");
              _context.p = 1;
              _context.n = 2;
              return this.gatherIceCandidates();
            case 2:
              candidates = _context.v;
              this.sendData(candidates);
              _context.n = 4;
              break;
            case 3:
              _context.p = 3;
              _t = _context.v;
              Logger_1["default"].error("WebRTCDataCollector failed:", _t);
              this.sendData([]);
            case 4:
              _context.p = 4;
              this.cleanup();
              return _context.f(4);
            case 5:
              return _context.a(2);
          }
        }, _callee, this, [[1, 3, 4, 5]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }, {
    key: "gatherIceCandidates",
    value: function () {
      var _gatherIceCandidates = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {
        var _this2 = this;
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.n) {
            case 0:
              return _context2.a(2, new Promise(function (resolve) {
                var candidates = [];
                var isGatheringComplete = false;
                _this2.peer = new RTCPeerConnection({
                  iceServers: [{
                    urls: "stun:stunserver.stunprotocol.org"
                  }, {
                    urls: "stun:stun.l.google.com:19302"
                  }]
                });
                // ICE candidate event handler
                _this2.peer.onicecandidate = function (event) {
                  if (event.candidate) {
                    var x = event.candidate;
                    candidates.push({
                      address: String(x.address),
                      port: String(x.port),
                      tcpType: String(x.tcpType),
                      type: String(x.type),
                      protocol: String(x.protocol),
                      url: String(x.url),
                      relatedAddress: String(x.relatedAddress),
                      relatedPort: String(x.relatedPort),
                      candidate: String(x.candidate),
                      sdpMid: String(x.sdpMid),
                      sdpMLineIndex: String(x.sdpMLineIndex)
                    });
                    Logger_1["default"].debug("ICE candidate found: ".concat(x.type, " ").concat(x.protocol, " ").concat(x.address, ":").concat(x.port));
                  } else {
                    Logger_1["default"].debug("ICE candidate gathering complete - no more candidates");
                    isGatheringComplete = true;
                    resolve(candidates);
                  }
                };
                // ICE candidate error
                _this2.peer.onicecandidateerror = function (ev) {
                  Logger_1["default"].warn("ICE candidate error:", ev.errorText, ev.errorCode);
                  // Continue gathering despite errors
                };
                // ICE gathering state changes
                _this2.peer.onicegatheringstatechange = function () {
                  var _this2$peer, _this2$peer2;
                  Logger_1["default"].debug("ICE gathering state changed:", (_this2$peer = _this2.peer) === null || _this2$peer === void 0 ? void 0 : _this2$peer.iceGatheringState);
                  if (((_this2$peer2 = _this2.peer) === null || _this2$peer2 === void 0 ? void 0 : _this2$peer2.iceGatheringState) === "complete") {
                    isGatheringComplete = true;
                    resolve(candidates);
                  }
                };
                // Fallback timeout
                _this2.timeoutId = setTimeout(function () {
                  if (!isGatheringComplete) {
                    Logger_1["default"].warn("ICE candidate gathering timed out after 900ms");
                    resolve(candidates);
                  }
                }, 900);
                // Create a data channel and offer to trigger ICE gathering
                _this2.peer.createDataChannel("data");
                _this2.peer.createOffer().then(function (offer) {
                  return _this2.peer.setLocalDescription(offer);
                })["catch"](function (error) {
                  Logger_1["default"].error("Error creating offer:", error);
                  resolve(candidates); // Resolve with whatever candidates we have
                });
              }));
          }
        }, _callee2);
      }));
      function gatherIceCandidates() {
        return _gatherIceCandidates.apply(this, arguments);
      }
      return gatherIceCandidates;
    }()
  }, {
    key: "cleanup",
    value: function cleanup() {
      if (this.timeoutId) {
        clearTimeout(this.timeoutId);
        this.timeoutId = null;
      }
      if (this.peer) {
        try {
          this.peer.close();
          Logger_1["default"].debug("WebRTC peer connection closed");
        } catch (error) {
          Logger_1["default"].warn("Error closing peer connection:", error);
        }
        this.peer = null;
      }
    }
  }, {
    key: "sendData",
    value: function sendData(candidates) {
      Logger_1["default"].info("Sending ".concat(candidates.length, " ICE candidates"));
      this._dataQ.addToQueue('static_fields', ['webrtc', candidates], false);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return {
        configKey: 'isWebRTCFeature',
        isDefault: false,
        shouldRunPerContext: false,
        shouldRunPerSession: true,
        shouldRun: false,
        isFrameRelated: false,
        runInUns: false,
        runInSlave: true,
        runInLean: false,
        isRunning: false,
        instance: null
      };
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = WebRTCDataCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/WebglCollector.js":
/*!*************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/WebglCollector.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.WebGLFingerprint = void 0;
var Hash_1 = __webpack_require__(/*! ../../technicalServices/Hash */ "./dist/js-sdk-legacy/src/main/technicalServices/Hash.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
/**
 * WebGLFingerprint class for generating unique browser fingerprints based on WebGL capabilities
 * and rendering characteristics.
 */
var WebGLFingerprint = /*#__PURE__*/function () {
  /**
   * Creates a new WebGLFingerprint instance and initializes the fingerprinting process.
   */
  function WebGLFingerprint() {
    _classCallCheck(this, WebGLFingerprint);
    // List of potential WebGL context names in order of preference
    this.contextNames = ["webgl2", "experimental-webgl2", "webgl", "experimental-webgl", "moz-webgl", "webkit-3d", "webgl2-compute"];
    // Store gathered context data
    this.data = {};
    // Keep track of context names that returned a valid context
    this.availableContexts = [];
    // Cache for computed hashes
    this._hashCache = {
      json: null,
      image: null
    };
    // Flag to track initialization status
    this._initialized = false;
  }
  /**
   * Start the WebGL fingerprinting process asynchronously
   * @returns {Promise<void>} A promise that resolves when fingerprinting is complete
   */
  return _createClass(WebGLFingerprint, [{
    key: "start",
    value: (function () {
      var _start = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var _t;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              if (!this._initialized) {
                _context.n = 1;
                break;
              }
              return _context.a(2);
            case 1:
              _context.p = 1;
              _context.n = 2;
              return this._initializeContexts();
            case 2:
              // Compute hashes
              this._computeHashes();
              this._initialized = true;
              _context.n = 4;
              break;
            case 3:
              _context.p = 3;
              _t = _context.v;
              Logger_1["default"].debug("Error during WebGL fingerprinting:", _t);
              throw _t;
            case 4:
              return _context.a(2);
          }
        }, _callee, this, [[1, 3]]);
      }));
      function start() {
        return _start.apply(this, arguments);
      }
      return start;
    }()
    /**
     * Initialize WebGL contexts and gather data
     * @private
     * @returns {Promise<void>} A promise that resolves when initialization is complete
     */
    )
  }, {
    key: "_initializeContexts",
    value: (function () {
      var _initializeContexts2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {
        var _this = this;
        var contextPromises;
        return _regenerator().w(function (_context3) {
          while (1) switch (_context3.n) {
            case 0:
              contextPromises = this.contextNames.map(/*#__PURE__*/function () {
                var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(ctxName) {
                  var info, _t2;
                  return _regenerator().w(function (_context2) {
                    while (1) switch (_context2.p = _context2.n) {
                      case 0:
                        _context2.p = 0;
                        _context2.n = 1;
                        return _this.getContextData(ctxName);
                      case 1:
                        info = _context2.v;
                        if (info) {
                          _this.availableContexts.push(ctxName);
                          _this.data[ctxName] = info;
                        }
                        _context2.n = 3;
                        break;
                      case 2:
                        _context2.p = 2;
                        _t2 = _context2.v;
                        Logger_1["default"].debug("Error retrieving context data for ".concat(ctxName, ":"), _t2);
                      case 3:
                        return _context2.a(2);
                    }
                  }, _callee2, null, [[0, 2]]);
                }));
                return function (_x) {
                  return _ref.apply(this, arguments);
                };
              }()); // Wait for all context initializations to complete
              _context3.n = 1;
              return Promise.all(contextPromises);
            case 1:
              Logger_1["default"].debug("WebGL fingerprint data:", this.data);
            case 2:
              return _context3.a(2);
          }
        }, _callee3, this);
      }));
      function _initializeContexts() {
        return _initializeContexts2.apply(this, arguments);
      }
      return _initializeContexts;
    }()
    /**
     * Compute JSON and image hashes from collected data
     * @private
     */
    )
  }, {
    key: "_computeHashes",
    value: function _computeHashes() {
      // Compute JSON hash from the collected data
      this.jsonString = JSON.stringify(this.data);
      this._hashCache.json = (0, Hash_1.x64hash128)(this.jsonString);
      // Compute image hash from a rendered canvas if at least one valid context is available
      this._hashCache.image = this.availableContexts.length > 0 ? this.computeImageHash() : null;
    }
    /**
     * Get the JSON hash of the WebGL fingerprint data
     * @returns {string} The computed hash
     */
  }, {
    key: "jsonHash",
    get: function get() {
      return this._hashCache.json;
    }
    /**
     * Get the image hash of the WebGL fingerprint data
     * @returns {string|null} The computed hash or null if not available
     */
  }, {
    key: "imageHash",
    get: function get() {
      return this._hashCache.image;
    }
    /**
     * Creates a canvas, gets a WebGL context, and gathers various parameters,
     * including additional hardware limits to boost uniqueness.
     *
     * @param {string} contextType - A potential WebGL context name.
     * @returns {Promise<Object|null>} A promise that resolves to collected WebGL parameters or null.
     */
  }, {
    key: "getContextData",
    value: (function () {
      var _getContextData = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(contextType) {
        var _this2 = this;
        return _regenerator().w(function (_context4) {
          while (1) switch (_context4.n) {
            case 0:
              return _context4.a(2, new Promise(function (resolve) {
                try {
                  var _canvas$style;
                  var canvas = document.createElement("canvas");
                  canvas.width = 256;
                  canvas.height = 128;
                  canvas.style = (_canvas$style = canvas.style) !== null && _canvas$style !== void 0 ? _canvas$style : {};
                  canvas.style.backgroundColor = "#555";
                  canvas.style.borderRadius = "4px";
                  var gl = canvas.getContext(contextType);
                  if (!gl) {
                    resolve(null);
                    return;
                  }
                  var info = {};
                  // Capture and group context attributes
                  var attrs = gl.getContextAttributes();
                  if (attrs && Object.keys(attrs).length > 0) {
                    info.contextAttributes = attrs;
                  }
                  // Additional color space info
                  info.drawingBufferColorSpace = gl.drawingBufferColorSpace;
                  info.unpackColorSpace = gl.unpackColorSpace;
                  // Debug renderer info
                  var debugExt = gl.getExtension("WEBGL_debug_renderer_info");
                  if (debugExt) {
                    info.UNMASKED_RENDERER_WEBGL = gl.getParameter(debugExt.UNMASKED_RENDERER_WEBGL);
                    info.UNMASKED_VENDOR_WEBGL = gl.getParameter(debugExt.UNMASKED_VENDOR_WEBGL);
                  }
                  // Shader precision formats
                  info.VERTEX_SHADER_PRECISION = _this2.getShaderPrecision(gl, gl.VERTEX_SHADER);
                  info.FRAGMENT_SHADER_PRECISION = _this2.getShaderPrecision(gl, gl.FRAGMENT_SHADER);
                  // Additional extensions and limits
                  var drawBuffersExt = gl.getExtension("WEBGL_draw_buffers");
                  info.MAX_DRAW_BUFFERS_WEBGL = drawBuffersExt ? gl.getParameter(drawBuffersExt.MAX_DRAW_BUFFERS_WEBGL) : null;
                  var anisoExt = gl.getExtension("EXT_texture_filter_anisotropic") || gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic") || gl.getExtension("MOZ_EXT_texture_filter_anisotropic");
                  info.MAX_TEXTURE_MAX_ANISOTROPY_EXT = anisoExt ? gl.getParameter(anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : null;
                  // Query additional hardware limits
                  info.MAX_TEXTURE_IMAGE_UNITS = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);
                  info.MAX_VERTEX_TEXTURE_IMAGE_UNITS = gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
                  info.MAX_COMBINED_TEXTURE_IMAGE_UNITS = gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS);
                  info.ALIASED_LINE_WIDTH_RANGE = gl.getParameter(gl.ALIASED_LINE_WIDTH_RANGE);
                  info.ALIASED_POINT_SIZE_RANGE = gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);
                  info.SAMPLES = gl.getParameter(gl.SAMPLES);
                  info.RENDERER = gl.getParameter(gl.RENDERER);
                  info.VENDOR = gl.getParameter(gl.VENDOR);
                  info.VERSION = gl.getParameter(gl.VERSION);
                  info.SHADING_LANGUAGE_VERSION = gl.getParameter(gl.SHADING_LANGUAGE_VERSION);
                  // More hardware details
                  info.MAX_CUBE_MAP_TEXTURE_SIZE = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);
                  info.MAX_TEXTURE_SIZE = gl.getParameter(gl.MAX_TEXTURE_SIZE);
                  info.MAX_RENDERBUFFER_SIZE = gl.getParameter(gl.MAX_RENDERBUFFER_SIZE);
                  info.DEPTH_BITS = gl.getParameter(gl.DEPTH_BITS);
                  info.STENCIL_BITS = gl.getParameter(gl.STENCIL_BITS);
                  info.MAX_VERTEX_ATTRIBS = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);
                  info.MAX_VIEWPORT_DIMS = gl.getParameter(gl.MAX_VIEWPORT_DIMS);
                  info.MAX_FRAGMENT_UNIFORM_VECTORS = gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS);
                  info.MAX_VERTEX_UNIFORM_VECTORS = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);
                  // Supported extensions sorted for consistency
                  var extensions = gl.getSupportedExtensions();
                  info.extensions = extensions ? extensions.sort() : [];
                  resolve(info);
                } catch (error) {
                  Logger_1["default"].debug("Error in getContextData for ".concat(contextType, ":"), error);
                  resolve(null);
                }
              }));
          }
        }, _callee4);
      }));
      function getContextData(_x2) {
        return _getContextData.apply(this, arguments);
      }
      return getContextData;
    }()
    /**
     * Returns shader precision details for a given shader type.
     *
     * @param {WebGLRenderingContext} gl - The WebGL context.
     * @param {number} shaderType - gl.VERTEX_SHADER or gl.FRAGMENT_SHADER.
     * @returns {Object|null} Precision details or null.
     */
    )
  }, {
    key: "getShaderPrecision",
    value: function getShaderPrecision(gl, shaderType) {
      try {
        var high = gl.getShaderPrecisionFormat(shaderType, gl.HIGH_FLOAT);
        var medium = gl.getShaderPrecisionFormat(shaderType, gl.MEDIUM_FLOAT);
        var used = high.precision !== 0 ? high : medium;
        return {
          rangeMin: used.rangeMin,
          rangeMax: used.rangeMax,
          precision: used.precision
        };
      } catch (e) {
        return null;
      }
    }
    /**
     * Renders a complex scene (arc and rectangle) and returns a hash
     * based on the pixel data and WebGL-specific parameters.
     *
     * @returns {string|null} The computed hash or an error string.
     */
  }, {
    key: "computeImageHash",
    value: function computeImageHash() {
      if (this.availableContexts.length === 0) return null;
      // Use the first available context
      var contextType = this.availableContexts[0];
      var canvas = document.createElement("canvas");
      // Increase resolution for finer differences
      canvas.width = 512;
      canvas.height = 256;
      var gl = canvas.getContext(contextType);
      if (!gl) return null;
      // Resources to clean up
      var resources = {
        program: null,
        vertexShader: null,
        fragmentShader: null,
        buffer: null
      };
      try {
        // Helper: Convert ArrayBuffer to Base64 string
        var arrayBufferToBase64 = function arrayBufferToBase64(buffer) {
          var binary = '';
          var bytes = new Uint8Array(buffer);
          var len = bytes.byteLength;
          for (var _i = 0; _i < len; _i++) {
            binary += String.fromCharCode(bytes[_i]);
          }
          return btoa(binary);
        };
        gl.viewport(0, 0, canvas.width, canvas.height);
        // Vertex shader
        var vertexShaderSource = "\n        attribute vec2 attrVertex;\n        attribute vec4 attrColor;\n        varying vec4 varyinColor;\n        uniform mat4 transform;\n        void main(){\n          varyinColor = attrColor;\n          gl_Position = transform * vec4(attrVertex, 0.0, 1.0);\n        }\n      ";
        // Fragment shader
        var fragmentShaderSource = "\n        precision mediump float;\n        varying vec4 varyinColor;\n        void main(){\n          gl_FragColor = varyinColor;\n        }\n      ";
        // Helper to compile a shader
        var compileShader = function compileShader(type, source) {
          var shader = gl.createShader(type);
          gl.shaderSource(shader, source);
          gl.compileShader(shader);
          if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
            Logger_1["default"].debug((type === gl.VERTEX_SHADER ? "Vertex" : "Fragment") + " shader error:", gl.getShaderInfoLog(shader));
          }
          return shader;
        };
        // Compile and link shaders
        var program = gl.createProgram();
        resources.program = program;
        var vShader = compileShader(gl.VERTEX_SHADER, vertexShaderSource);
        resources.vertexShader = vShader;
        var fShader = compileShader(gl.FRAGMENT_SHADER, fragmentShaderSource);
        resources.fragmentShader = fShader;
        gl.attachShader(program, vShader);
        gl.attachShader(program, fShader);
        gl.linkProgram(program);
        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
          Logger_1["default"].debug("Program link error:", gl.getProgramInfoLog(program));
        }
        gl.useProgram(program);
        // Locate attributes and uniforms
        var vertexPosAttrib = gl.getAttribLocation(program, "attrVertex");
        var colorAttrib = gl.getAttribLocation(program, "attrColor");
        var transformUniform = gl.getUniformLocation(program, "transform");
        gl.enableVertexAttribArray(vertexPosAttrib);
        gl.enableVertexAttribArray(colorAttrib);
        // Set a uniform transform
        gl.uniformMatrix4fv(transformUniform, false, new Float32Array([1.5, 0, 0, 0, 0, 1.5, 0, 0, 0, 0, 1, 0, 0.5, 0, 0, 1]));
        // --- Build vertex data ---
        // 1. Arc geometry (arc fan with 128 iterations)
        var arcCenter = [-0.25, 0.0];
        var steps = 128;
        var vertices = [];
        // The center vertex for the arc
        vertices.push(arcCenter[0], arcCenter[1], 1, 0.7, 0, 1);
        for (var i = 0; i < steps; i++) {
          var angle1 = (45 + i / steps * 270) / 360 * 2 * Math.PI;
          var angle2 = (45 + (i + 1) / steps * 270) / 360 * 2 * Math.PI;
          // First point on the arc
          vertices.push(arcCenter[0] + 0.5 * Math.cos(angle1), arcCenter[1] + 0.5 * Math.sin(angle1), 2, 1 - i / steps, 0, 1);
          // Second point on the arc
          vertices.push(arcCenter[0] + 0.5 * Math.cos(angle2), arcCenter[1] + 0.5 * Math.sin(angle2), 1, 1 - (i + 1) / steps, 0, 1);
        }
        // 2. Additional geometry: a rectangle (drawn as two triangles) in the top-right quadrant
        // Each vertex: [x, y, r, g, b, a]
        var rectVertices = [
        // First triangle
        0.2, 0.2, 0.8, 0.2, 0.2, 1, 0.8, 0.2, 0.2, 0.8, 0.8, 1, 0.2, 0.8, 0.5, 0.5, 0.2, 1,
        // Second triangle
        0.8, 0.2, 0.2, 0.8, 0.8, 1, 0.8, 0.8, 0.8, 0.8, 0.8, 1, 0.2, 0.8, 0.5, 0.5, 0.2, 1];
        // Combine the vertex data
        var combinedVertices = new Float32Array([].concat(vertices, rectVertices));
        // Create and bind buffer
        var buffer = gl.createBuffer();
        resources.buffer = buffer;
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.bufferData(gl.ARRAY_BUFFER, combinedVertices, gl.STATIC_DRAW);
        // Each vertex has 6 floats (2 for position, 4 for color)
        gl.vertexAttribPointer(vertexPosAttrib, 2, gl.FLOAT, false, 6 * 4, 0);
        gl.vertexAttribPointer(colorAttrib, 4, gl.FLOAT, false, 6 * 4, 2 * 4);
        // Clear and render the scene
        gl.clearColor(0, 0, 0, 0);
        gl.clear(gl.COLOR_BUFFER_BIT);
        // Draw the arc using a LINE_STRIP
        var arcVertexCount = vertices.length / 6;
        gl.drawArrays(gl.LINE_STRIP, 0, arcVertexCount);
        // Draw the rectangle using TRIANGLES
        var rectVertexCount = rectVertices.length / 6;
        gl.drawArrays(gl.TRIANGLES, arcVertexCount, rectVertexCount);
        // --- Read and process pixel data ---
        var pixelBuffer = new Uint8Array(canvas.width * canvas.height * 4);
        try {
          gl.readPixels(0, 0, canvas.width, canvas.height, gl.RGBA, gl.UNSIGNED_BYTE, pixelBuffer);
        } catch (e) {
          return "gl.readPixels: " + e;
        }
        var pixelBase64 = arrayBufferToBase64(pixelBuffer.buffer);
        // Incorporate WebGL parameters for enhanced uniqueness
        var vendor = gl.getParameter(gl.VENDOR) || '';
        var renderer = gl.getParameter(gl.RENDERER) || '';
        var extensions = (gl.getSupportedExtensions() || []).join(',');
        // Concatenate the pixel data with WebGL parameters
        var fingerprintData = pixelBase64 + vendor + renderer + extensions;
        // Compute and return the hash
        return (0, Hash_1.x64hash128)(fingerprintData);
      } catch (error) {
        Logger_1["default"].debug("Error computing WebGL image hash:", error);
        return null;
      } finally {
        // Clean up WebGL resources
        this._cleanupWebGLResources(gl, resources);
      }
    }
    /**
     * Clean up WebGL resources to prevent memory leaks
     * @param {WebGLRenderingContext} gl - The WebGL context
     * @param {Object} resources - Resources to clean up
     * @private
     */
  }, {
    key: "_cleanupWebGLResources",
    value: function _cleanupWebGLResources(gl, resources) {
      if (!gl) return;
      try {
        // Delete shaders
        if (resources.vertexShader) {
          gl.deleteShader(resources.vertexShader);
        }
        if (resources.fragmentShader) {
          gl.deleteShader(resources.fragmentShader);
        }
        // Delete program
        if (resources.program) {
          gl.deleteProgram(resources.program);
        }
        // Delete buffer
        if (resources.buffer) {
          gl.deleteBuffer(resources.buffer);
        }
      } catch (e) {
        Logger_1["default"].debug("Error cleaning up WebGL resources:", e);
      }
    }
  }]);
}();
exports.WebGLFingerprint = WebGLFingerprint;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var featureSettings = {
  configKey: 'isWebglFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: false,
  isRunning: false,
  instance: null
};
/**
 * WebglCollector class for collecting WebGL fingerprint data
 * and sending it to the data queue.
 */
var WebglCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  /**
   * Create a new WebglCollector instance
   * @param {Object} dataQ - The data queue to send data to
   */
  function WebglCollector(dataQ) {
    var _this3;
    _classCallCheck(this, WebglCollector);
    _this3 = _callSuper(this, WebglCollector);
    _this3._dataQ = dataQ;
    return _this3;
  }
  /**
   * Start the WebGL fingerprinting feature
   * @returns {Promise<void>} A promise that resolves when fingerprinting is complete
   */
  _inherits(WebglCollector, _DataCollector_1$defa);
  return _createClass(WebglCollector, [{
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5() {
        var webGLFingerprint, _t3;
        return _regenerator().w(function (_context5) {
          while (1) switch (_context5.p = _context5.n) {
            case 0:
              webGLFingerprint = new WebGLFingerprint();
              _context5.p = 1;
              _context5.n = 2;
              return webGLFingerprint.start();
            case 2:
              Logger_1["default"].debug("WebGL JSON Hash:" + webGLFingerprint.jsonHash);
              Logger_1["default"].debug("WebGL Image Hash:" + webGLFingerprint.imageHash);
              this._dataQ.addToQueue('static_fields', ['webgl', [webGLFingerprint.jsonHash, webGLFingerprint.imageHash]], false);
              _context5.n = 4;
              break;
            case 3:
              _context5.p = 3;
              _t3 = _context5.v;
              Logger_1["default"].debug("Error in WebGL fingerprinting:", _t3);
            case 4:
              return _context5.a(2);
          }
        }, _callee5, this, [[1, 3]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }())
  }], [{
    key: "getDefaultSettings",
    value:
    /**
     * Get the default settings for the WebGL collector
     * @returns {Object} The default settings
     */
    function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = WebglCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/adblock/AdBlockSelectors.js":
/*!***********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/adblock/AdBlockSelectors.js ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.adblockSelectors = void 0;
// Mapping of ad blocker filter lists to their CSS selectors.
exports.adblockSelectors = {
  abpIndo: ['#Iklan-Melayang', '#Kolom-Iklan-728', '#SidebarIklan-wrapper', 'a[title="7naga poker" i]', '[title="ALIENBOLA" i]'],
  abpvn: ['#quangcaomb', '.i-said-no-thing-can-stop-me-warning.dark', '.quangcao', '[href^="https://r88.vn/"]', '[href^="https://zbet.vn/"]'],
  adBlockFinland: ['.mainostila', '.sponsorit', '.ylamainos', 'a[href*="/clickthrgh.asp?"]', 'a[href^="https://app.readpeak.com/ads"]'],
  adBlockPersian: ['#navbar_notice_50', 'a[href^="http://g1.v.fwmrm.net/ad/"]', '.kadr', 'TABLE[width="140px"]', '#divAgahi'],
  adBlockWarningRemoval: ['#adblock_message', '.adblockInfo', '.deadblocker-header-bar', '.no-ad-reminder', '#AdBlockDialog'],
  adGuardAnnoyances: ['amp-embed[type="zen"]', '.hs-sosyal', '#cookieconsentdiv', 'div[class^="app_gdpr"]', '.as-oil'],
  adGuardBase: ['#ad-fullbanner2-billboard-outer', '.stky-ad-footer', '.BetterJsPopOverlay', '#ad_300X250', '#bannerfloat22'],
  adGuardChinese: ['#piao_div_0[style*="width:140px;"]', 'a[href*=".ttz5.cn"]', 'a[href*=".yabovip2027.com/"]', '.tm3all2h4b', '#duilian_left'],
  adGuardFrench: ['#anAdScGp300x25', 'a[href*=".kfiopkln.com/"]', 'a[href^="https://jsecoin.com/o/?"]', 'a[href^="https://www.clickadu.com/?"]', '.bandeauClosePub'],
  adGuardGerman: ['.banneritemwerbung_head_1', '.boxstartwerbung', '.werbung3', 'a[href^="http://www.eis.de/index.phtml?refid="]', 'a[href^="https://www.tipico.com/?affiliateId="]'],
  adGuardJapanese: ['#kauli_yad_1', '.adArticleSidetile', '.ads_entrymore', 'a[href^="http://ad2.trafficgate.net/"]', 'a[href^="http://www.rssad.jp/"]'],
  adGuardMobile: ['amp-auto-ads', '#mgid_iframe', '.amp_ad', 'amp-sticky-ad', '.plugin-blogroll'],
  adGuardRussian: ['a[href^="https://ya-distrib.ru/r/"]', 'a[href^="https://ad.letmeads.com/"]', '.reclama', 'div[id^="smi2adblock"]', 'div[id^="AdFox_banner_"]'],
  adGuardSocial: ['a[href^="//www.stumbleupon.com/submit?url="]', 'a[href^="//telegram.me/share/url?"]', '.etsy-tweet', '#inlineShare', '.popup-social'],
  adGuardSpanishPortuguese: ['#barraPublicidade', '#Publicidade', '#publiEspecial', '#queTooltip', '[href^="http://ads.glispa.com/"]'],
  adGuardTrackingProtection: ['amp-embed[type="taboola"]', '#qoo-counter', 'a[href^="http://click.hotlog.ru/"]', 'a[href^="http://hitcounter.ru/top/stat.php"]', 'a[href^="http://top.mail.ru/jump"]'],
  adGuardTurkish: ['#backkapat', '#reklami', 'a[href^="http://adserv.ontek.com.tr/"]', 'a[href^="http://izlenzi.com/campaign/"]', 'a[href^="http://www.installads.net/"]'],
  bulgarian: ['td#freenet_table_ads', '#newAd', '#ea_intext_div', '.lapni-pop-over', '#xenium_hot_offers'],
  easyList: ['#adlabelheader', '#anAdScGame300x250', '#adTakeOverLeft', '#ad_LargeRec01', '#adundergame'],
  easyListChina: ['a[href*=".wensixuetang.com/"]', 'A[href*="/hth107.com/"]', '.appguide-wrap[onclick*="bcebos.com"]', '.frontpageAdvM', '#taotaole'],
  easyListCookie: ['#Button_Cookie', '#CWCookie', '#CookieCon', '#DGPR', '#PnlCookie'],
  easyListCzechSlovak: ['#onlajny-stickers', '#reklamni-box', '.reklama-megaboard', '.sklik', '[id^="sklikReklama"]'],
  easyListDutch: ['#advertentie', '#vipAdmarktBannerBlock', '.adstekst', 'a[href^="http://adserver.webads.nl/adclick/"]', '#semilo-lrectangle'],
  easyListGermany: ['#nativendo-hometop', 'a[href^="http://www.kontakt-vermittler.de/?wm="]', '#gwerbung', 'a[href^="https://marketing.net.brillen.de/"]', '.werbenbox'],
  easyListItaly: ['.box_adv_annunci', '.sb-box-pubbliredazionale', 'a[href^="http://affiliazioniads.snai.it/"]', 'a[href^="https://adserver.html.it/"]', 'a[href^="https://affiliazioniads.snai.it/"]'],
  easyListLithuania: ['.reklamos_tarpas', '.reklamos_nuorodos', 'img[alt="Reklaminis skydelis"]', 'img[alt="Dedikuoti.lt serveriai"]', 'img[alt="Hostingas Serveriai.lt"]'],
  estonian: ['A[href*="http://pay4results24.eu"]'],
  fanboyAnnoyances: ['#feedback-tab', '#taboola-below-article', '.feedburnerFeedBlock', '.widget-feedburner-counter', '[title="Subscribe to our blog"]'],
  fanboyAntiFacebook: ['.util-bar-module-firefly-visible'],
  fanboyEnhancedTrackers: ['.open.pushModal', '#issuem-leaky-paywall-articles-zero-remaining-nag', 'div[style*="box-shadow: rgb(136, 136, 136) 0px 0px 12px; color: "]', 'div[class$="-hide"][zoompage-fontsize][style="display: block;"]', '.BlockNag__Card'],
  fanboySocial: ['.td-tags-and-social-wrapper-box', '.twitterContainer', '.youtube-social', 'a[title^="Like us on Facebook"]', 'img[alt^="Share on Digg"]'],
  frellwitSwedish: ['a[href*="casinopro.se"][target="_blank"]', 'a[href*="doktor-se.onelink.me"]', 'article.category-samarbete', 'div.holidAds', 'ul.adsmodern'],
  greekAdBlock: ['A[href*="adman.otenet.gr/click?"]', 'A[href*="http://axiabanners.exodus.gr/"]', 'A[href*="http://interactive.forthnet.gr/click?"]', 'DIV.agores300', 'TABLE.advright'],
  hungarian: ['A[href*="ad.eval.hu"]', 'A[href*="ad.netmedia.hu"]', 'A[href*="daserver.ultraweb.hu"]', '#cemp_doboz', '.optimonk-iframe-container'],
  iDontCareAboutCookies: ['.alert-info[data-block-track*="CookieNotice"]', '.ModuleTemplateCookieIndicator', '.o--cookies--container', '.cookie-msg-info-container', '#cookies-policy-sticky'],
  icelandicAbp: ['A[href^="/framework/resources/forms/ads.aspx"]'],
  latvian: ['a[href="http://www.salidzini.lv/"][style="display: block; width: 120px; height: 40px; overflow: hidden; position: relative;"]', 'a[href="http://www.salidzini.lv/"][style="display: block; width: 88px; height: 31px; overflow: hidden; position: relative;"]'],
  listKr: ['a[href*="//kingtoon.slnk.kr"]', 'a[href*="//playdsb.com/kr"]', 'div.logly-lift-adz', 'div[data-widget_id="ml6EJ074"]', 'ins.daum_ddn_area'],
  listeAr: ['.geminiLB1Ad', '.right-and-left-sponsers', 'a[href*=".aflam.info"]', 'a[href*="booraq.org"]', 'a[href*="dubizzle.com/ar/?utm_source="]'],
  listeFr: ['a[href^="http://promo.vador.com/"]', '#adcontainer_recherche', 'a[href*="weborama.fr/fcgi-bin/"]', '.site-pub-interstitiel', 'div[id^="crt-"][data-criteo-id]'],
  officialPolish: ['#ceneo-placeholder-ceneo-12', '[href^="https://aff.sendhub.pl/"]', 'a[href^="http://advmanager.techfun.pl/redirect/"]', 'a[href^="http://www.trizer.pl/?utm_source"]', 'div#skapiec_ad'],
  ro: ['a[href^="//afftrk.altex.ro/Counter/Click"]', 'a[href^="/magazin/"]', 'a[href^="https://blackfridaysales.ro/trk/shop/"]', 'a[href^="https://event.2performant.com/events/click"]', 'a[href^="https://l.profitshare.ro/"]'],
  ruAd: ['a[href*="//febrare.ru/"]', 'a[href*="//utimg.ru/"]', 'a[href*="://chikidiki.ru"]', '#pgeldiz', '.yandex-rtb-block'],
  thaiAds: ['a[href*=macau-uta-popup]', '#ads-google-middle_rectangle-group', '.ads300s', '.bumq', '.img-kosana'],
  webAnnoyancesUltralist: ['#mod-social-share-2', '#social-tools', '.ctpl-fullbanner', '.zergnet-recommend', '.yt.btn-link.btn-md.btn']
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/adblock/AdblockerListsCollector.js":
/*!******************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/adblock/AdblockerListsCollector.js ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var AdBlockSelectors_1 = __webpack_require__(/*! ./AdBlockSelectors */ "./dist/js-sdk-legacy/src/main/collectors/static/adblock/AdBlockSelectors.js");
var featureSettings = {
  configKey: 'isAdblockerListsFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
var AdblockerListsCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function AdblockerListsCollector(dataQ) {
    var _this;
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    _classCallCheck(this, AdblockerListsCollector);
    _this = _callSuper(this, AdblockerListsCollector);
    _this._dataQueue = dataQ;
    _this.debug = options.debug || false;
    return _this;
  }
  /**
   * Starts the ad blocker lists detection feature.
   * Waits for the page to fully load and then delays execution
   * to allow the ad blocker to hide/remove elements.
   */
  _inherits(AdblockerListsCollector, _DataCollector_1$defa);
  return _createClass(AdblockerListsCollector, [{
    key: "startFeature",
    value: (function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var activeLists, _t;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              Logger_1["default"].debug("Starting ad blocker lists detection");
              _context.p = 1;
              _context.n = 2;
              return this.detectActiveAdblockLists();
            case 2:
              activeLists = _context.v;
              this._sendData(activeLists);
              _context.n = 4;
              break;
            case 3:
              _context.p = 3;
              _t = _context.v;
              Logger_1["default"].error("Error detecting ad blocker lists:", _t);
            case 4:
              return _context.a(2);
          }
        }, _callee, this, [[1, 3]]);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
    /**
     * Stops the feature.
     */
    )
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      // No cleanup necessary in this version.
    }
    /**
     * Determines if detection can run.
     * @returns {boolean}
     */
  }, {
    key: "canRunDetection",
    value: function canRunDetection() {
      return true; // We assume the DOM is ready here.
    }
  }, {
    key: "_sendData",
    value: function _sendData(activeLists) {
      this._dataQueue.addToQueue('static_fields', ['adblock_lists', activeLists], false);
    }
    /**
     * Detects which ad blocker filter lists are active.
     * Each filter list is active if at least 50% of its selectors are blocked.
     *
     * @returns {Promise<string[]>} A promise that resolves to an array of active filter list names.
     */
  }, {
    key: "detectActiveAdblockLists",
    value: (function () {
      var _detectActiveAdblockLists = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {
        var _ref, allSelectors, blockedSelectors, activeLists, _i, _Object$entries, _Object$entries$_i, filterName, selectors, blockedCount, _iterator, _step, selector, finalList, _t2;
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.p = _context2.n) {
            case 0:
              _context2.p = 0;
              // Gather all selectors from all filter lists.
              allSelectors = (_ref = []).concat.apply(_ref, _toConsumableArray(Object.values(AdBlockSelectors_1.adblockSelectors))); // Get the set of blocked selectors inside an iframe.
              _context2.n = 1;
              return this.getBlockedSelectors(allSelectors);
            case 1:
              blockedSelectors = _context2.v;
              activeLists = []; // Check each filter list.
              for (_i = 0, _Object$entries = Object.entries(AdBlockSelectors_1.adblockSelectors); _i < _Object$entries.length; _i++) {
                _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2), filterName = _Object$entries$_i[0], selectors = _Object$entries$_i[1];
                blockedCount = 0;
                _iterator = _createForOfIteratorHelper(selectors);
                try {
                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    selector = _step.value;
                    if (blockedSelectors.has(selector)) {
                      blockedCount++;
                      Logger_1["default"].trace("Selector \"".concat(selector, "\" is blocked for filter \"").concat(filterName, "\"."));
                    } else {
                      Logger_1["default"].trace("Selector \"".concat(selector, "\" is not blocked for filter \"").concat(filterName, "\"."));
                    }
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }
                if (blockedCount >= 2) {
                  activeLists.push(filterName);
                  Logger_1["default"].trace("Filter \"".concat(filterName, "\" is considered active."));
                }
              }
              finalList = activeLists.sort();
              Logger_1["default"].debug("Active ad blocker lists: " + finalList);
              return _context2.a(2, finalList);
            case 2:
              _context2.p = 2;
              _t2 = _context2.v;
              Logger_1["default"].error("Error in detectActiveAdblockLists:", _t2);
              return _context2.a(2, []);
          }
        }, _callee2, this, [[0, 2]]);
      }));
      function detectActiveAdblockLists() {
        return _detectActiveAdblockLists.apply(this, arguments);
      }
      return detectActiveAdblockLists;
    }()
    /**
     * Creates a hidden iframe, runs the detection logic inside it,
     * and returns a set of selectors that have been blocked.
     *
     * @param {string[]} selectors - An array of CSS selectors.
     * @returns {Promise<Set<string>>} A promise that resolves to a set of blocked selectors.
     */
    )
  }, {
    key: "getBlockedSelectors",
    value: (function () {
      var _getBlockedSelectors = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(selectors) {
        var iframe, d, body, root, elements, blockedSelectors, i, element, holder, _i2, _t3;
        return _regenerator().w(function (_context3) {
          while (1) switch (_context3.p = _context3.n) {
            case 0:
              // Create a hidden iframe.
              iframe = document.createElement("iframe");
              iframe.style.position = 'absolute';
              iframe.style.width = '0';
              iframe.style.height = '0';
              iframe.style.opacity = '0';
              document.body.appendChild(iframe);
              _context3.p = 1;
              // Access the iframe's document.
              d = iframe.contentDocument || iframe.contentWindow.document; // Ensure the iframe has a body.
              if (!d.body) {
                body = d.createElement("body");
                d.documentElement.appendChild(body);
              }
              // Create a container for dummy elements.
              root = d.createElement("div");
              elements = new Array(selectors.length);
              blockedSelectors = new Set(); // Create dummy elements for each selector.
              for (i = 0; i < selectors.length; i++) {
                element = this.selectorToElement(selectors[i], d);
                holder = d.createElement("div"); // Protects from effects of sibling selectors.
                holder.appendChild(element);
                root.appendChild(holder);
                elements[i] = element;
              }
              d.body.appendChild(root);
              // Wait 200ms to let the ad blocker hide/remove the elements.
              _context3.n = 2;
              return new Promise(function (resolve) {
                return setTimeout(resolve, 200);
              });
            case 2:
              // Check which elements are blocked (using offsetParent).
              for (_i2 = 0; _i2 < selectors.length; _i2++) {
                if (!elements[_i2].offsetParent) {
                  blockedSelectors.add(selectors[_i2]);
                }
              }
              return _context3.a(2, blockedSelectors);
            case 3:
              _context3.p = 3;
              _t3 = _context3.v;
              Logger_1["default"].error("Error in getBlockedSelectors:", _t3);
              return _context3.a(2, new Set());
            case 4:
              _context3.p = 4;
              // Clean up
              if (iframe.parentNode) {
                iframe.parentNode.removeChild(iframe);
              }
              return _context3.f(4);
            case 5:
              return _context3.a(2);
          }
        }, _callee3, this, [[1, 3, 4, 5]]);
      }));
      function getBlockedSelectors(_x) {
        return _getBlockedSelectors.apply(this, arguments);
      }
      return getBlockedSelectors;
    }()
    /**
     * Creates a DOM element that matches the given selector.
     * Only single element selectors are supported (without operators like space, +, >, etc).
     *
     * @param {string} selector - The CSS selector.
     * @param {Document} [d=document] - The document in which to create the element.
     * @returns {HTMLElement} The created element.
     */
    )
  }, {
    key: "selectorToElement",
    value: function selectorToElement(selector) {
      var d = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;
      var _this$parseSimpleCssS = this.parseSimpleCssSelector(selector),
        _this$parseSimpleCssS2 = _slicedToArray(_this$parseSimpleCssS, 2),
        tag = _this$parseSimpleCssS2[0],
        attributes = _this$parseSimpleCssS2[1];
      var element = d.createElement(tag || "div");
      for (var name in attributes) {
        if (attributes.hasOwnProperty(name)) {
          element.setAttribute(name, attributes[name].join(" "));
        }
      }
      return element;
    }
    /**
     * Parses a CSS selector into a tag name with HTML attributes.
     * Only single element selectors are supported (without operators like space, +, >, etc).
     *
     * Multiple values can be returned for each attribute.
     *
     * @param {string} selector - The CSS selector.
     * @returns {[string, Object]} An array where the first item is the tag name and the second is an attributes object.
     */
  }, {
    key: "parseSimpleCssSelector",
    value: function parseSimpleCssSelector(selector) {
      var tagMatch = /^\s*([a-z-]*)(.*)$/i.exec(selector);
      if (!tagMatch) {
        var _errorMessage = "Unexpected syntax '".concat(selector, "'");
        throw new Error(_errorMessage);
      }
      var tag = tagMatch[1] || undefined;
      var attributes = {};
      var partsRegex = /([.:#][\w-]+|\[.+?\])/gi;
      var addAttribute = function addAttribute(name, value) {
        if (!attributes[name]) {
          attributes[name] = [];
        }
        attributes[name].push(value);
      };
      var match;
      while ((match = partsRegex.exec(tagMatch[2])) !== null) {
        var part = match[0];
        switch (part[0]) {
          case ".":
            addAttribute("class", part.slice(1));
            break;
          case "#":
            addAttribute("id", part.slice(1));
            break;
          case "[":
            {
              var attributeMatch = /^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(part);
              if (attributeMatch) {
                addAttribute(attributeMatch[1], attributeMatch[4] || attributeMatch[5] || "");
              } else {
                throw new Error(errorMessage);
              }
            }
            break;
          default:
            throw new Error(errorMessage);
        }
      }
      return [tag, attributes];
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = AdblockerListsCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/FontCollection.js":
/*!*****************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/FontCollection.js ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var FontVersionType_1 = __importDefault(__webpack_require__(/*! ./v2/types/FontVersionType */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/types/FontVersionType.js"));
var FontsCache_1 = __importDefault(__webpack_require__(/*! ./v2/FontsCache */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/FontsCache.js"));
var FontsProvider_1 = __importDefault(__webpack_require__(/*! ./FontsProvider */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/FontsProvider.js"));
var FontScannerResolver_1 = __importDefault(__webpack_require__(/*! ./FontScannerResolver */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/FontScannerResolver.js"));
var FontCollection = /*#__PURE__*/function () {
  /**
   * Constructor for FontCollectionFeature
   * @param {CDUtils} utils - Provides general utility methods.
   * @param {DOMUtils} domUtils - Handles DOM-related operations.
   * @param {DataQueue} dataQueue - Manages queuing and processing of font data.
   * @param {ConfigurationRepository} configRepo - Provides configuration settings.
   * @param {FontScanner} [fontScanner] - Optional font scanner instance. Defaults to a new FontScanner.
   * @param {FontsProvider} [fontsProvider] - Optional fonts provider instance. Defaults to a new FontsProvider.
   * @param {FontVersionType} fontVersion - Specifies the version of fonts to detect (use FontVersionType enum).
   * @throws {Error} If the font version is invalid or unsupported.
   */
  function FontCollection(utils, domUtils, dataQueue, configRepo, fontVersion) {
    var fontScanner = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;
    var fontsProvider = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;
    var fontsCache = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;
    var fontDetector = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;
    _classCallCheck(this, FontCollection);
    if (!utils) throw new Error("CDUtils instance is required.");
    if (!domUtils) throw new Error("DOMUtils instance is required.");
    if (!dataQueue) throw new Error("DataQueue instance is required.");
    if (!configRepo) throw new Error("ConfigurationRepository instance is required.");
    if (!Object.values(FontVersionType_1["default"]).includes(fontVersion)) {
      throw new Error("Invalid font version type. Use one of: ".concat(Object.keys(FontVersionType_1["default"]).join(", ")));
    }
    this._logsTag = "[FONTS-COLLECTOR][".concat(fontVersion, "]");
    this._utils = utils;
    this._domUtils = domUtils;
    this._dataQueue = dataQueue;
    this._configRepo = configRepo;
    this._fontVersion = fontVersion;
    this._fontScanner = fontScanner !== null && fontScanner !== void 0 ? fontScanner : (0, FontScannerResolver_1["default"])({
      utils: utils,
      domUtils: domUtils,
      configurationRepository: configRepo,
      fontVersion: fontVersion,
      fontDetector: fontDetector
    });
    this._fontsProvider = fontsProvider || new FontsProvider_1["default"]();
    this._fontCache = fontsCache || new FontsCache_1["default"](utils.StorageUtils);
    this._fontCacheExpiration = 24 * 60 * 60 * 1000; // 24 hours in milliseconds
  }
  return _createClass(FontCollection, [{
    key: "collectFonts",
    value: function () {
      var _collectFonts = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var _cachedFontData$insta, _cachedFontData$scann;
        var cachedFontData, cachedFonts, lastCacheTimestamp, lastScanExpired, isCacheValid, _yield$this$_scanForI, installedFonts, scannedAt, scanTime, totalFontsScanned, totalFontsFound, fontsHash, _t;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              // Log the initiation of the font collection process.
              Logger_1["default"].info("".concat(this._logsTag, " Starting font collection.") + " | Font version: ".concat(this._fontVersion));
              // Retrieve cached font data based on the current font version.
              cachedFontData = this._fontCache.getStoredFonts(this._fontVersion);
              cachedFonts = (_cachedFontData$insta = cachedFontData === null || cachedFontData === void 0 ? void 0 : cachedFontData.installedFonts) !== null && _cachedFontData$insta !== void 0 ? _cachedFontData$insta : cachedFontData; // Extract installed fonts from cache, or use the entire cache object.
              lastCacheTimestamp = (_cachedFontData$scann = cachedFontData === null || cachedFontData === void 0 ? void 0 : cachedFontData.scannedAt) !== null && _cachedFontData$scann !== void 0 ? _cachedFontData$scann : -1; // Extract the last scanned timestamp, defaulting to -1 if not available.
              // Log the retrieved cached fonts for debugging purposes.
              Logger_1["default"].debug("".concat(this._logsTag, " Cached fonts retrieved: ").concat(JSON.stringify(cachedFonts)));
              _context.p = 1;
              // Determine if the cached data is expired based on the last scanned timestamp.
              lastScanExpired = Date.now() - lastCacheTimestamp > this._fontCacheExpiration; // Validate the cache: it must exist, and not be expired.
              isCacheValid = cachedFonts && !lastScanExpired;
              if (!isCacheValid) {
                _context.n = 2;
                break;
              }
              Logger_1["default"].info("".concat(this._logsTag, " Font collection complete using valid cache."));
              return _context.a(2, cachedFonts);
            case 2:
              _context.n = 3;
              return this._scanForInstalledFonts();
            case 3:
              _yield$this$_scanForI = _context.v;
              installedFonts = _yield$this$_scanForI.installedFonts;
              scannedAt = _yield$this$_scanForI.scannedAt;
              scanTime = _yield$this$_scanForI.scanTime;
              totalFontsScanned = _yield$this$_scanForI.totalFontsScanned;
              totalFontsFound = _yield$this$_scanForI.totalFontsFound;
              if (!this._collectorHasStopped) {
                _context.n = 4;
                break;
              }
              return _context.a(2);
            case 4:
              // Log the detected fonts for debugging purposes.
              fontsHash = this._utils.getHash(JSON.stringify(installedFonts));
              Logger_1["default"].debug("".concat(this._logsTag, " Detected fonts: ").concat(JSON.stringify(installedFonts), " | Hash: ").concat(fontsHash, " | Count: ").concat(totalFontsFound));
              // Save the newly scanned fonts to the cache for future use.
              _context.n = 5;
              return this._fontCache.saveFonts({
                installedFonts: installedFonts,
                scannedAt: scannedAt
              }, this._fontVersion);
            case 5:
              Logger_1["default"].debug("".concat(this._logsTag, " Font cache updated with new fonts."));
              // Enqueue the newly scanned font data for further processing.
              Logger_1["default"].info("".concat(this._logsTag, " Font collection complete. Scan time: ").concat(scanTime, "ms. Total Fonts Scanned: ").concat(totalFontsScanned, " Total Installed Fonts: ").concat(installedFonts.length));
              return _context.a(2, installedFonts);
            case 6:
              _context.p = 6;
              _t = _context.v;
              // Log any errors that occur during the font collection process.
              Logger_1["default"].error("".concat(this._logsTag, " Error during font collection:"), _t);
              // Return cached fonts if available, even if there was an error
              return _context.a(2, cachedFonts || []);
          }
        }, _callee, this, [[1, 6]]);
      }));
      function collectFonts() {
        return _collectFonts.apply(this, arguments);
      }
      return collectFonts;
    }()
  }, {
    key: "release",
    value: function release() {
      this._collectorHasStopped = true;
      this._fontScanner.release();
    }
  }, {
    key: "_scanForInstalledFonts",
    value: function () {
      var _scanForInstalledFonts2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {
        var startTime, fontsToScan, installedFonts, _i, _Object$entries, _Object$entries$_i, fontFamily, fonts, result, scanTime, totalFontsScanned;
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.n) {
            case 0:
              Logger_1["default"].info("".concat(this._logsTag, " Starting font scanning process."));
              startTime = Date.now();
              fontsToScan = this._fontsProvider.getFontsByVersion(this._fontVersion);
              installedFonts = new Set(); // Use a single scanner instance for all font families to avoid concurrent processing
              _i = 0, _Object$entries = Object.entries(fontsToScan);
            case 1:
              if (!(_i < _Object$entries.length)) {
                _context2.n = 4;
                break;
              }
              _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2), fontFamily = _Object$entries$_i[0], fonts = _Object$entries$_i[1];
              _context2.n = 2;
              return this._fontScanner.scan(fonts, fontFamily);
            case 2:
              result = _context2.v;
              result.forEach(function (font) {
                return installedFonts.add(font);
              });
            case 3:
              _i++;
              _context2.n = 1;
              break;
            case 4:
              scanTime = Date.now() - startTime; // Calculate total fonts to scan
              totalFontsScanned = Object.values(fontsToScan).reduce(function (sum, fonts) {
                return sum + fonts.length;
              }, 0);
              return _context2.a(2, {
                installedFonts: Array.from(installedFonts),
                scanTime: scanTime,
                scannedAt: Date.now(),
                totalFontsScanned: totalFontsScanned,
                totalFontsFound: installedFonts.size
              });
          }
        }, _callee2, this);
      }));
      function _scanForInstalledFonts() {
        return _scanForInstalledFonts2.apply(this, arguments);
      }
      return _scanForInstalledFonts;
    }()
  }]);
}();
exports["default"] = FontCollection;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/FontCollectionFeature.js":
/*!************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/FontCollectionFeature.js ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../../../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var FontsDetectionContract_1 = __webpack_require__(/*! ../../../../contract/staticContracts/FontsDetectionContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/FontsDetectionContract.js");
var FontVersionType_1 = __importDefault(__webpack_require__(/*! ./v2/types/FontVersionType */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/types/FontVersionType.js"));
var FontCollection_1 = __importDefault(__webpack_require__(/*! ./FontCollection */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/FontCollection.js"));
var FontMigrationStage_1 = __importDefault(__webpack_require__(/*! ./v2/types/FontMigrationStage */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/types/FontMigrationStage.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../../../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var featureSettings = {
  configKey: 'isFonts',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: true,
  isFrameRelated: false,
  runInUns: true,
  runInSlave: false,
  runInLean: false,
  isRunning: false,
  instance: null
};
/**
 * FontCollectionFeature
 *
 * Collects installed fonts using two detection strategies:
 * - **Canvas Detection**: Measures text dimensions via the Canvas API, offering fast and reliable detection across modern browsers.
 * - **DOM Detection**: Compares text dimensions in hidden spans against baseline fonts, serving as a fallback for restricted or older environments.
 *
 * ## Architecture:
 * - **Scanner**: Splits font lists into batches for efficient, non-blocking processing.
 * - **Detector**:
 *    - **Canvas Detector**: Primary method using the Canvas API for performance and broad compatibility.
 *    - **DOM Detector**: Backup method using DOM rendering for environments without Canvas support.
 *
 * ## Points To Know
 * - The amount of fonts on Safari is going to be higher than Chrome.
 * - The amount of fonts on old code is lower than the new code
 * - Old code had bug - OldOffLoadScanner provide 48 fonts - OldBatchScanner provides 45 fonts - it means different id for user
 *
 * ## Resources
 * Background: https://biocatch.atlassian.net/wiki/spaces/~712020ea4044df5ae84c1db6c8150a825e5219/pages/edit-v2/5270142999?draftShareId=4672c69e-1654-4b31-800b-091a2b2c9df9
 * Migration Plan : https://biocatch.atlassian.net/wiki/pages/resumedraft.action?draftId=5298978821&draftShareId=e07d6273-5f3b-4dcd-b61f-38941df4f06e
 * Performance Measurements: https://biocatch.atlassian.net/wiki/spaces/~712020ea4044df5ae84c1db6c8150a825e5219/pages/5298815015/Fonts+Performance
 */
var FontCollectionFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  /**
   * Constructor for FontCollectionFeature
   * @param {CDUtils} utils - Provides general utility methods.
   * @param {DOMUtils} domUtils - Handles DOM-related operations.
   * @param {DataQueue} dataQueue - Manages queuing and processing of font data.
   * @param {ConfigurationRepository} configRepo - Provides configuration settings.
   * @param {FontCollection} v1Collector - Optional existing V1 collector.
   * @param {FontCollection} v2Collector - Optional existing V2 collector.
   * @throws {Error} If the font version is invalid or unsupported.
   */
  function FontCollectionFeature(utils, domUtils, dataQueue, configRepo) {
    var _this;
    var v1Collector = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;
    var v2Collector = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;
    _classCallCheck(this, FontCollectionFeature);
    _this = _callSuper(this, FontCollectionFeature);
    _this._logsTag = "[FONTS-COLLECTOR][MAIN]";
    if (!utils) throw new Error("CDUtils instance is required.");
    if (!domUtils) throw new Error("DOMUtils instance is required.");
    if (!dataQueue) throw new Error("DataQueue instance is required.");
    if (!configRepo) throw new Error("ConfigurationRepository instance is required.");
    _this._utils = utils;
    _this._domUtils = domUtils;
    _this._dataQueue = dataQueue;
    _this._configRepo = configRepo;
    _this._v1Collector = v1Collector;
    _this._v2Collector = v2Collector;
    return _this;
  }
  _inherits(FontCollectionFeature, _DataCollector_1$defa);
  return _createClass(FontCollectionFeature, [{
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var _fontCollectionConfig;
        var rawConfig, fontCollectionConfig, migrationMode, collectedV1Fonts, _collectedV1Fonts, collectedV2Fonts, collectedV2FontsPhase2, collectedV1FontsPhase2, collectedV2FontsPhase3;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              Logger_1["default"].info("".concat(this._logsTag, " Starting font feature."));
              //On desktops, fonts can be installed system-wide through the automatically by applications, 
              //such as design software, which can install their own fonts. On mobile, font installation is very unlikely to happen, 
              //because apps need specific permission to do that
              if (!this._isMobileDevice()) {
                _context.n = 1;
                break;
              }
              Logger_1["default"].info("".concat(this._logsTag, " Mobile phone has detected. aborting font detection."));
              return _context.a(2);
            case 1:
              // Initialize collectors if they don't exist
              // This is done to avoid creating new instances of the collectors on each startFeature call
              // and to ensure that the collectors are properly initialized with the correct configuration because config takes time to load 
              // and we want to avoid race conditions
              if (!this._v1Collector) {
                this._v1Collector = new FontCollection_1["default"](this._utils, this._domUtils, this._dataQueue, this._configRepo, FontVersionType_1["default"].VERSION1);
              }
              if (!this._v2Collector) {
                this._v2Collector = new FontCollection_1["default"](this._utils, this._domUtils, this._dataQueue, this._configRepo, FontVersionType_1["default"].VERSION2);
              }
              rawConfig = this._configRepo.get(ConfigurationFields_1.ConfigurationFields.fontCollection) || "{}";
              fontCollectionConfig = JSON.parse(rawConfig);
              Logger_1["default"].info("".concat(this._logsTag, " Font collection config: ").concat(JSON.stringify(fontCollectionConfig)));
              migrationMode = (_fontCollectionConfig = fontCollectionConfig.migrationMode) !== null && _fontCollectionConfig !== void 0 ? _fontCollectionConfig : FontMigrationStage_1["default"].DUAL_COLLECTION_V1_PRIORITY;
              if (!(migrationMode === FontMigrationStage_1["default"].V1_ONLY)) {
                _context.n = 3;
                break;
              }
              _context.n = 2;
              return this._v1Collector.collectFonts();
            case 2:
              collectedV1Fonts = _context.v;
              this._enqueueFontData(FontsDetectionContract_1.FontDataType.V1_ONLY, [collectedV1Fonts, null]);
              return _context.a(2);
            case 3:
              if (!(migrationMode === FontMigrationStage_1["default"].DUAL_COLLECTION_V1_PRIORITY)) {
                _context.n = 6;
                break;
              }
              _context.n = 4;
              return this._v1Collector.collectFonts();
            case 4:
              _collectedV1Fonts = _context.v;
              this._enqueueFontData(FontsDetectionContract_1.FontDataType.V1_ONLY, [_collectedV1Fonts, null]);
              _context.n = 5;
              return this._v2Collector.collectFonts();
            case 5:
              collectedV2Fonts = _context.v;
              this._enqueueFontData(FontsDetectionContract_1.FontDataType.V1_AND_V2, [_collectedV1Fonts, collectedV2Fonts]);
            case 6:
              if (!(migrationMode === FontMigrationStage_1["default"].DUAL_COLLECTION_V2_PRIORITY)) {
                _context.n = 9;
                break;
              }
              _context.n = 7;
              return this._v2Collector.collectFonts();
            case 7:
              collectedV2FontsPhase2 = _context.v;
              this._enqueueFontData(FontsDetectionContract_1.FontDataType.V2_ONLY, [null, collectedV2FontsPhase2]);
              _context.n = 8;
              return this._v1Collector.collectFonts();
            case 8:
              collectedV1FontsPhase2 = _context.v;
              this._enqueueFontData(FontsDetectionContract_1.FontDataType.V1_AND_V2, [collectedV1FontsPhase2, collectedV2FontsPhase2]);
            case 9:
              if (!(migrationMode === FontMigrationStage_1["default"].V2_ONLY)) {
                _context.n = 11;
                break;
              }
              _context.n = 10;
              return this._v2Collector.collectFonts();
            case 10:
              collectedV2FontsPhase3 = _context.v;
              this._enqueueFontData(FontsDetectionContract_1.FontDataType.V2_ONLY, [null, collectedV2FontsPhase3]);
            case 11:
              return _context.a(2);
          }
        }, _callee, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      var _this$_v1Collector, _this$_v2Collector;
      Logger_1["default"].info("".concat(this._logsTag, " Stopping font feature."));
      this._collectorHasStopped = true;
      (_this$_v1Collector = this._v1Collector) === null || _this$_v1Collector === void 0 || _this$_v1Collector.release();
      (_this$_v2Collector = this._v2Collector) === null || _this$_v2Collector === void 0 || _this$_v2Collector.release();
      this._v1Collector = null;
      this._v2Collector = null;
    }
  }, {
    key: "_enqueueFontData",
    value: function _enqueueFontData(dataType, fonts) {
      if (this._collectorHasStopped) return;
      if (!fonts) throw Error("IllegalState fonts undefined");
      var storedFontsMessage = new FontsDetectionContract_1.FontsDetectionContract(dataType, fonts).buildQueueMessage();
      this._dataQueue.addToQueue('static_fields', storedFontsMessage, false);
      Logger_1["default"].debug("".concat(this._logsTag, " Fonts enqueued: ").concat(JSON.stringify(fonts)));
    }
  }, {
    key: "_isMobileDevice",
    value: function _isMobileDevice() {
      return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = FontCollectionFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/FontScannerResolver.js":
/*!**********************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/FontScannerResolver.js ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var ConfigurationFields_1 = __webpack_require__(/*! ../../../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
//V1
var OldBatchFontsScanner_1 = __importDefault(__webpack_require__(/*! ./v1/OldBatchFontsScanner */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/OldBatchFontsScanner.js"));
var OldOffloadFontsScanner_1 = __importDefault(__webpack_require__(/*! ./v1/OldOffloadFontsScanner */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/OldOffloadFontsScanner.js"));
//V2
var FontVersionType_1 = __importDefault(__webpack_require__(/*! ./v2/types/FontVersionType */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/types/FontVersionType.js"));
var BatchFontScanner_1 = __importDefault(__webpack_require__(/*! ./v2/BatchFontScanner */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/BatchFontScanner.js"));
var FontDetectorProvider_1 = __importDefault(__webpack_require__(/*! ./v2/detector/FontDetectorProvider */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/detector/FontDetectorProvider.js"));
/**
 * Resolves the correct instance of the font scanner.
 *
 * @param {Object} params - Configuration and dependencies for resolving the scanner.
 * @param {Object} params.configurationRepository - Configuration repository instance.
 * @param {string} params.fontVersion - The font version type (use FontVersionType enum).
 * @param {Object} params.domUtils - DOM utility instance.
 * @param {Object} params.utils - General utility instance.
 * @param {Object} [params.fontScanner=null] - Optional pre-existing font scanner instance.
 * @param {Object} [params.fontDetector=null] - Optional font detector instance.
 * @returns {Object} - The resolved font scanner instance.
 */
function resolveFontScanner(_ref) {
  var _fontCollectionConfig, _fontCollectionConfig2, _fontCollectionConfig3, _fontCollectionConfig4;
  var utils = _ref.utils,
    domUtils = _ref.domUtils,
    configurationRepository = _ref.configurationRepository,
    fontVersion = _ref.fontVersion,
    _ref$fontDetector = _ref.fontDetector,
    fontDetector = _ref$fontDetector === void 0 ? null : _ref$fontDetector;
  //Do not delete OldBatchFontsScanner, it is used for the old version of the font collection and changing it will cause to diff font list
  if (fontVersion === FontVersionType_1["default"].VERSION1) {
    var offloadFontsCollectionEnabled = configurationRepository.get(ConfigurationFields_1.ConfigurationFields.offloadFontsCollectionEnabled);
    if (offloadFontsCollectionEnabled) {
      return new OldOffloadFontsScanner_1["default"](domUtils);
    }
    return new OldBatchFontsScanner_1["default"](domUtils);
  }
  var fontDetectorProvider = new FontDetectorProvider_1["default"](domUtils);
  var fontCollectionConfig = JSON.parse(configurationRepository.get(ConfigurationFields_1.ConfigurationFields.fontCollection) || "{}");
  var batchSize = (_fontCollectionConfig = fontCollectionConfig === null || fontCollectionConfig === void 0 || (_fontCollectionConfig2 = fontCollectionConfig.v2) === null || _fontCollectionConfig2 === void 0 ? void 0 : _fontCollectionConfig2.batchSize) !== null && _fontCollectionConfig !== void 0 ? _fontCollectionConfig : 10;
  var timeoutGap = (_fontCollectionConfig3 = fontCollectionConfig === null || fontCollectionConfig === void 0 || (_fontCollectionConfig4 = fontCollectionConfig.v2) === null || _fontCollectionConfig4 === void 0 ? void 0 : _fontCollectionConfig4.timeoutGap) !== null && _fontCollectionConfig3 !== void 0 ? _fontCollectionConfig3 : 0;
  return new BatchFontScanner_1["default"]({
    utils: utils,
    domUtils: domUtils,
    detector: fontDetector !== null && fontDetector !== void 0 ? fontDetector : fontDetectorProvider.getBestDetector(),
    batchSize: batchSize,
    timeoutGap: timeoutGap
  });
}
exports["default"] = resolveFontScanner;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/FontsProvider.js":
/*!****************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/FontsProvider.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
// Import font versions from external files
var FontVersionType_1 = __importDefault(__webpack_require__(/*! ./v2/types/FontVersionType */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/types/FontVersionType.js"));
var FontsVersion1_1 = __importDefault(__webpack_require__(/*! ./v1/FontsVersion1 */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/FontsVersion1.js"));
var FontsVersion2_1 = __importDefault(__webpack_require__(/*! ./v2/FontsVersion2 */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/FontsVersion2.js"));
/**
 * FontsProvider
 * A class to manage font versions and provide font lists based on version type.
 */
var FontsProvider = /*#__PURE__*/function () {
  function FontsProvider() {
    _classCallCheck(this, FontsProvider);
    // Static font lists for different versions
    this.fontVersions = _defineProperty(_defineProperty({}, FontVersionType_1["default"].VERSION1, FontsVersion1_1["default"]), FontVersionType_1["default"].VERSION2, FontsVersion2_1["default"]);
  }
  /**
   * Get fonts by version type
   * @param {string} versionType - The type of font version (use FontVersionType enum)
   * @returns {string[]} - List of fonts for the specified version type
   * @throws {Error} - If an invalid version type is passed
   */
  return _createClass(FontsProvider, [{
    key: "getFontsByVersion",
    value: function getFontsByVersion(versionType) {
      if (this.fontVersions[versionType]) {
        return this.fontVersions[versionType];
      } else {
        throw new Error("Invalid version type. Use one of: ".concat(Object.keys(FontVersionType_1["default"]).join(", ")));
      }
    }
  }]);
}();
exports["default"] = FontsProvider;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/FontsVersion1.js":
/*!*******************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/FontsVersion1.js ***!
  \*******************************************************************************************/
/***/ (function(module) {



// fontsVersion1.js
var fontsVersion1 = {
  "serif": ['adobe jenson', 'adobe text', 'albertus', 'aldus', 'alexandria', 'algerian', 'american typewriter', 'antiqua', 'arno', 'aster', 'aurora', 'baskerville', 'bell', 'bembo', 'bembo schoolbook', 'benguiat', 'berkeley old style', 'bernhard modern', 'bodoni', 'book antiqua', 'bookman', 'bordeaux roman', 'californian fb', 'calisto', 'capitals', 'cambria', 'cartier', 'caslon', 'caslon antique', 'catull', 'centaur', 'century old style', 'century schoolbook', 'new century schoolbook', 'chaparral', 'charis sil', 'cheltenham', 'clearface', 'cochin', 'colonna', 'computer modern', 'concrete roman', 'constantia', 'cooper black', 'corona', 'dejavu fonts', 'ecotype', 'elephant', 'espy serif', 'excelsior', 'fairfield', 'ff scala', 'footlight', 'freeserif', 'friz quadrata', 'garamond', 'gentium', 'georgia', 'gloucester', 'goudy old style', 'goudy schoolbook', 'goudy pro font', 'granjon', 'heather', 'hercules', 'high tower text', 'hiroshige', 'hoefler text', 'humana serif', 'imprint', 'ionic no. 5', 'janson', 'jenson', 'joanna', 'korinna', 'kursivschrift', 'legacy serif', 'lexicon', 'liberation fonts', 'linux libertine', 'literaturnaya', 'lucida', 'melior', 'memphis', 'miller', 'minion', 'didone', 'mona lisa', 'mrs eaves', 'ms serif', 'new york', 'nimbus roman', 'nps rawlinson roadway', 'ocr a extended', 'palatino', 'perpetua', 'plantin', 'plantin schoolbook', 'playbill', 'poor richard', 'rawlinson roadway', 'renault', 'requiem', 'roman', 'rotis serif', 'sabon', 'seagull', 'sistina', 'souvenir', 'stix', 'stone informal', 'stone serif', 'sylfaen', 'times new roman', 'times', 'trajan', 'trinit', 'trump mediaeval', 'utopia', 'vale type', 'bitstream vera', 'versailles', 'wanted', 'weiss', 'wide latin', 'windsor', 'xits', 'apex', 'archer', 'athens', 'city', 'cholla slab', 'clarendon', 'courier', 'egyptienne', 'guardian egyptian', 'lexia', 'museo slab', 'rockwell', 'nilland', 'skeleton antique', 'tower', /* from Apr/2024 https://en.wikipedia.org/wiki/List_of_serif_typefaces */
  'allegro', 'amiri', 'athelas', 'belwe', 'bookerly', 'bulmer', 'caledonia', 'constructium', 'copperplate Gothic', 'dejaVu serif', 'didot', 'droid serif', 'emerson', 'galliard', 'iowan old style', 'itc lubalin graph', 'ibm plex', 'ibm plex serif', 'junicode', 'literata', 'lucida bright', 'rotis', 'serifa', 'source serif pro', 'theano', 'zilla slab', 'bitstream charter', 'roboto slab', 'university of california old style', 'berkeley old style', 'candida', 'doves', 'hightower', 'liberation sans', 'lucida grande', 'vera sans', 'vercetti regular', 'computer modern sans', 'rotis ii sans', 'sherbrooke', 'tilson', 'triplex'],
  "sans-serif": ['abadi', 'agency fb', 'akzidenz grotesk', 'aptifer', 'arial', 'arial unicode ms', 'avant garde', 'avenir', 'bank gothic', 'barmeno', 'bauhaus', 'bell centennial', 'bell gothic', 'benguiat gothic', 'berlin sans', 'beteckna', 'brandon grotesque', 'cabin', 'cafeteria', 'calibri', 'century gothic', 'charcoal', 'chicago', 'clearface gothic', 'clearview', 'co headline', 'co text', 'compacta', 'corbel', 'ff dax', 'dotum', 'droid', 'dyslexie', 'ecofont', 'eras', 'espy sans', 'nu sans', 'eurocrat', 'eurostile', 'ff meta', 'flama', 'formata', 'freesans', 'franklin gothic', 'frutiger', 'futura', 'geneva', 'gill sans', 'gill sans schoolbook', 'gotham', 'handel gothic', 'denmark', 'haettenschweiler', 'hei', 'helvetica', 'helvetica neue', 'swiss 721', 'highway gothic', 'hiroshige sans', 'hobo', 'impact', 'industria', 'interstate', 'johnston', 'kabel', 'lato', 'legacy sans', 'lexia readable', 'meiryo', 'microgramma', 'motorway', 'ms sans serif', 'museo sans', 'myriad', 'neutraface', 'neuzeit s', 'news gothic', 'nimbus sans l', 'nina', 'optima', 'parisine', 'pricedown', 'prima sans', 'pt sans', 'rail alphabet', 'revue', 'roboto', 'rotis sans', 'ff scala sans', 'segoe', 'skia', 'souvenir gothic', 'stone sans', 'syntax', 'tahoma', 'template gothic', 'tiresias', 'trade gothic', 'transport alphabet', 'trebuchet ms', 'trump gothic', 'tw cen', 'twentieth century', 'ubuntu font family', 'univers', 'zurich', 'verdana', 'virtue', /* from Apr/2024 https://en.wikipedia.org/wiki/List_of_sans_serif_typefaces */
  'acumin', 'akzidenz-grotesk', 'amplitude', 'andal sans', 'antique olive', 'archivo', 'austria', 'itc avant garde', 'itc avant garde gothic', 'averta', 'bahnschrift', 'barlow', 'bobcaygeon', 'breeze sans', 'cantarell', 'caractres', 'cera Pro', 'cisco sans', 'adobe clean', 'clear sans', 'comic neue', 'dejaVu sans', 'din 1451', 'dosis', 'drogowskaz', 'droid sans', 'dubai', 'e-ukraine', 'fira sans', 'folio', 'gerstner programm', 'grand slang', 'harmonyos sans', 'ibm plex sans', 'inter', 'ge inspira', 'karrik', 'klavika', 'libre franklin', 'linux biolinum', 'fs me', 'ff meta', 'montserrat', 'national trust', 'nokia pure', 'noto sans', 'nunito sans', 'open sans', 'overpass', 'oxygen', 'poppins', 'proxima nova', 'radis sans', 'raleway', 'Selawik', 'semplicit', 'seravek', 'oneplus', 'snv', 'source sans pro', 'sweden sans', 'thesis sans', 'transport', 'tratex', 'unica', 'universalis', 'vag rounded', 'whitney', 'aphont', 'ff clan', 'gilroy', 'greycliff', 'nobel'],
  "monospace": ['andale mono', 'anonymous', 'consolas', 'courierhp', 'courier new', 'courierps', 'fontcraft courier', 'everson mono', 'fedra mono', 'fixed', 'fixedsys', 'fixedsys excelsior', 'inconsolata', 'hyperfont', 'letter gothic', 'magnetic ink character recognition', 'menlo', 'miriam fixed', 'monaco', 'monofur', 'monospace', 'ms gothic', 'ms mincho', 'nimbus mono l', 'ocr-a', 'ocr-b', 'orator', 'ormaxx', 'pragmatapro', 'prestige elite', 'profont', 'proggy programming fonts', 'small fonts', 'sydnie', 'terminal', 'tex gyre cursor', 'um typewriter', 'william monospace', 'balloon', 'brush script', 'dragonwick', 'choc', 'dom casual', 'mistral', 'papyrus', 'tempus sans', 'amazone', 'ams euler', 'apple chancery', 'aristocrat', 'bickley script', 'civitype', 'codex', 'edwardian script', 'forte', 'french script', 'kuenstler script', 'monotype corsiva', 'old english text mt', 'palace script', 'park avenue', 'scriptina', 'shelley volante', 'vivaldi', 'vladimir script', 'zapf chancery', 'zapfino', 'andy', 'ashley script', 'chalkboard', 'comic sans', 'cezanne', 'fontoon', 'irregularis', 'jefferson', 'kristen', 'lucida handwriting', 'rage italic', 'rufscript', 'scribble', 'soupbone', 'tekton', 'alecko', 'cinderella', 'cupola', 'curlz', 'magnificat', 'script', 'american text', 'cloister black', 'fraktur', 'goudy text', 'old english text', 'wedding text', 'aegyptus', 'aharoni', 'aisha', 'amienne', 'batak script', 'chandas', 'hanacaraka', 'japanese gothic typeface', 'jomolhari', 'kochi font', 'lontara script', 'maiola', 'minch', 'mona font', 'nassim', 'nastaliq navees', 'neacademia', 'perpetua greek', 'simsun', 'skolar', 'skolar devanagari', 'sundanese unicode', 'sutturah', 'tai le valentinium', 'tengwar', 'tibetan machine uni', 'tunga', 'wadalab', 'apple symbols', 'bookshelf symbol 7', 'braille', 'commercial pi', 'corel', 'erler dingbats', 'hm phonetic', 'mathematical pi', 'morse code', 'opensymbol', 'richstyle', 'symbol', 'symbolps', 'wingdings', 'wingdings 2', 'wingdings 3', 'webdings', 'zapf dingbats', 'abracadabra', 'ad lib', 'allegro', 'andreas', 'arnold bcklin', 'astur', 'balloon pop outlaw black', 'banco', 'beat', 'braggadocio', 'broadway', 'ellington', 'exablock', 'exocet', 'fig script', 'gigi', 'harlow solid', 'harrington', 'horizon', 'jim crow', 'jokerman', 'juice', 'lo-type', 'magneto', 'megadeth', 'neuland', 'peignot', 'ravie', 'san francisco', 'showcard gothic', 'snap', 'stencil', 'umbra', 'westminster', 'willow', 'bagel', 'lithos', 'aldhabi', 'andalus', 'angsana new', 'angsanaupc', 'aparajita', 'arabic typesetting', 'arial black', 'arial narrow', 'arial rounded mt bold', 'baskerville old face', 'batang', 'batangche', 'bauhaus 93', 'bell mt', 'berlin sans fb', 'berlin sans fb demi', 'bernard mt condensed', 'blackadder itc', 'bodoni mt', 'bodoni mt black', 'bodoni mt condensed', 'bodoni mt poster compressed', 'bookman old style', 'bradley hand itc', 'britannic bold', 'browallia new', 'browalliaupc', 'brush script mt', 'buxton sketch', 'calibri light', 'calisto mt', 'cambria math', 'candara', 'castellar', 'century', 'chiller', 'colonna mt', 'comic sans ms', 'copperplate gothic bold', 'copperplate gothic light', 'cordia new', 'cordiaupc', 'curlz mt', 'daunpenh', 'david', 'dfkai-sb', 'dilleniaupc', 'dokchampa', 'dotumche', 'ebrima', 'edwardian script itc', 'engravers mt', 'eras bold itc', 'eras demi itc', 'eras light itc', 'eras medium itc', 'estrangelo edessa', 'eucrosiaupc', 'euphemia', 'fangsong', 'felix titling', 'footlight mt light', 'franklin gothic book', 'franklin gothic demi', 'franklin gothic demi cond', 'franklin gothic heavy', 'franklin gothic medium', 'franklin gothic medium cond', 'frankruehl', 'freesiaupc', 'freestyle script', 'french script mt', 'gabriola', 'gadugi', 'gautami', 'gill sans mt', 'gill sans mt condensed', 'gill sans mt ext condensed bold', 'gill sans ultra bold', 'gill sans ultra bold condensed', 'gisha', 'gloucester mt extra condensed', 'goudy stout', 'gulim', 'gulimche', 'gungsuh', 'gungsuhche', 'harlow solid italic', 'imprint mt shadow', 'informal roman', 'irisupc', 'iskoola pota', 'jasmineupc', 'javanese text', 'juice itc', 'kaiti', 'kalinga', 'kartika', 'khmer ui', 'kodchiangupc', 'kokila', 'kristen itc', 'kunstler script', 'lao ui', 'latha', 'leelawadee', 'leelawadee ui', 'leelawadee ui semilight', 'levenim mt', 'lilyupc', 'lucida bright', 'lucida calligraphy', 'lucida console', 'lucida fax', 'lucida sans', 'lucida sans typewriter', 'lucida sans unicode', 'maiandra gd', 'malgun gothic', 'mangal', 'marlett', 'matura mt script capitals', 'meiryo ui', 'microsoft himalaya', 'microsoft jhenghei', 'microsoft jhenghei light', 'microsoft jhenghei ui', 'microsoft jhenghei ui light', 'microsoft new tai lue', 'microsoft phagspa', 'microsoft sans serif', 'microsoft tai le', 'microsoft uighur', 'microsoft yahei', 'microsoft yahei light', 'microsoft yahei ui', 'microsoft yahei ui light', 'microsoft yi baiti', 'mingliu', 'mingliu-extb', 'mingliu_hkscs', 'mingliu_hkscs-extb', 'miriam', 'modern', 'modern no. 20', 'mongolian baiti', 'moolboran', 'ms outlook', 'ms pgothic', 'ms pmincho', 'ms reference sans serif', 'ms reference specialty', 'ms ui gothic', 'mt extra', 'mv boli', 'myanmar text', 'narkisim', 'niagara engraved', 'niagara solid', 'nirmala ui', 'nirmala ui semilight', 'nsimsun', 'nyala', 'onyx', 'palace script mt', 'palatino linotype', 'parchment', 'perpetua titling mt', 'plantagenet cherokee', 'pmingliu', 'pmingliu-extb', 'pristina', 'raavi', 'rockwell condensed', 'rockwell extra bold', 'rod', 'sakkal majalla', 'script mt bold', 'segoe marker', 'segoe print', 'segoe script', 'segoe ui', 'segoe ui black', 'segoe ui emoji', 'segoe ui light', 'segoe ui semibold', 'segoe ui semilight', 'segoe ui symbol', 'shonar bangla', 'shruti', 'simhei', 'simplified arabic', 'simplified arabic fixed', 'simsun-extb', 'sitka banner', 'sitka display', 'sitka heading', 'sitka small', 'sitka subheading', 'sitka text', 'sketchflow print', 'snap itc', 'system', 'tempus sans itc', 'traditional arabic', 'tw cen mt', 'tw cen mt condensed', 'tw cen mt condensed extra bold', 'urdu typesetting', 'utsaah', 'vani', 'vijaya', 'viner hand itc', 'vrinda', 'yu gothic', 'yu gothic light', 'yu mincho', 'yu mincho demibold', 'yu mincho light', /** from Apr/2024 https://en.wikipedia.org/wiki/List_of_monospaced_typefaces  */
  'bitstream vera sans mono', 'cascadia code', 'century schoolbook monospace', 'comic mono', 'computer modern mono', 'typewriter', 'curier', 'cousine', 'dejavu sans mono', 'droid sans mono', 'envy code r', 'fantasque sans', 'fira code', 'fira mono', 'freemono', 'gnu freefont', 'go mono', 'hack', 'ibm monochrome display adapter', 'ibm mda', 'ibm plex mono', 'input', 'iosevka', 'jetbrains mono', 'juliamono', 'liberation mono', 'nk57 monospace', 'noto mono', 'operator mono', 'overpass mono', 'oxygen mono', 'pt mono', 'recursive mono', 'roboto mono', 'sf mono', 'source code pro', 'spleen', 'terminus', 'ubuntu mono', 'victor mono', 'wumpus mono'],
  "rat_fonts": ['Teamviewer11', 'Teamviewer12', 'Teamviewer13', 'Teamviewer14', 'Teamviewer15']
};
module.exports = fontsVersion1;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/OldBaseFontsScanner.js":
/*!*************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/OldBaseFontsScanner.js ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SPAN_TAG = void 0;
var SystemFrameName_1 = __webpack_require__(/*! ../../../../../core/frames/SystemFrameName */ "./dist/js-sdk-legacy/src/main/core/frames/SystemFrameName.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
exports.SPAN_TAG = 'span';
var BaseFontsScanner = /*#__PURE__*/function () {
  function BaseFontsScanner(domUtils) {
    _classCallCheck(this, BaseFontsScanner);
    this._domUtils = domUtils;
    // a font will be compared against all the four default fonts, base fonts.
    // and if it doesn't match all 4 then that font is not available.
    this._baseFonts = ['rat-fonts', 'monospace', 'sans-serif', 'serif'];
    // we use m or w because these two characters take up the maximum width.
    // And we use a LLi so that the same matching fonts can get separated
    this._testString = "mmmmmmmmmmlli";
    // we test using 72px font size, we may use any size. I guess larger the better.//
    this._testSize = '72px';
    this._chunkSize = 30;
    this._defaultWidth = {};
    this._defaultHeight = {};
    this._body = null;
    this._iframe = null;
    this._spanArray = null;
    this._allFontsDiffs = [];
  }
  return _createClass(BaseFontsScanner, [{
    key: "release",
    value: function release() {
      if (this._body && this._iframe) {
        this._body.removeChild(this._iframe);
      }
      this._iframe = null;
      this._spanArray = null;
      this._allFontsDiffs = [];
    }
  }, {
    key: "init",
    value: function init() {
      var _this = this;
      return new Promise(function (resolve, reject) {
        try {
          _this.initCallback(resolve);
        } catch (error) {
          reject(error);
        }
      });
    }
    /**
     * Prepare the Scanner for the font detection tests
     * @param callback - Called once the Scanner is initialized and ready for the test
     * @returns {string}
     */
  }, {
    key: "initCallback",
    value: function initCallback(callback) {
      var _this2 = this;
      this._body = document.body;
      if (!this._body) {
        return '';
      }
      // Create the iframe so we can do the fonts detection behind the scenes without being noticed
      // IFrame visibility is set to hidden with width & height of 0 so it will not take any space
      this._iframe = document.createElement('iframe');
      //use sandbox to allow the minimum level of capability necessary for the content of the iframe
      //to do it's job
      //in FontScanner usage - the iframe and the iframe's parent document are Same Origin
      //and we allow to reach up into the parent
      this._iframe.setAttribute('sandbox', 'allow-same-origin');
      this._iframe.id = SystemFrameName_1.SystemFrameName.fontDetectionFrame;
      this._iframe.style.visibility = 'hidden';
      this._iframe.style.zIndex = '-1';
      this._iframe.style.width = 0;
      this._iframe.style.height = 0;
      this._iframe.style.position = 'absolute';
      this._iframe.style.top = '-9999px';
      this._iframe.style.left = '-9999px';
      this._iframe.style.border = 'none';
      this._iframe.style.margin = '0';
      this._iframe.style.padding = '0';
      this._iframe.style.overflow = 'hidden';
      this._body.appendChild(this._iframe);
      // ie8 requires adding a body + frame must have a size do we null it...
      if (!this._iframe.contentDocument.body) {
        this._iframe.style.width = null;
        this._iframe.style.height = null;
        this._iframe.contentDocument.appendChild(document.createElement('body'));
      }
      this._domUtils.onWindowDocumentReady(this._iframe.contentWindow, function () {
        _this2._createCalculationElements(callback);
      });
    }
    /**
     * Create all the elements required for the font test
     * @param callback - Once all elements are created the callback is called to continue to process
     * @private
     */
  }, {
    key: "_createCalculationElements",
    value: function _createCalculationElements(callback) {
      // Create a SPAN in the document to get the width of the text we use to test
      var span = document.createElement('span');
      span.style.fontSize = this._testSize;
      span.style.visibility = 'hidden';
      span.style.position = 'absolute';
      span.style.zIndex = '-1';
      span.style.lineHeight = 'normal';
      span.innerHTML = this._testString;
      for (var i = 0; i < this._baseFonts.length; i++) {
        // get the default width for the three base fonts
        span.style.fontFamily = this._baseFonts[i];
        this._iframe.contentDocument.body.appendChild(span);
        this._defaultWidth[this._baseFonts[i]] = span.offsetWidth; // width for the default font
        this._defaultHeight[this._baseFonts[i]] = span.offsetHeight; // height for the default font
        this._iframe.contentDocument.body.removeChild(span);
      }
      Logger_1["default"].debug("FontsScanner:init - base fonts width: \n                ".concat(this._baseFonts[0], ":").concat(this._defaultWidth[this._baseFonts[0]], ";\n                ").concat(this._baseFonts[1], ":").concat(this._defaultWidth[this._baseFonts[1]], ";\n                ").concat(this._baseFonts[2], ":").concat(this._defaultWidth[this._baseFonts[2]], ";\n                ").concat(this._baseFonts[3], ":").concat(this._defaultWidth[this._baseFonts[3]]));
      Logger_1["default"].debug("FontsScanner:init - base fonts height: \n                ".concat(this._baseFonts[0], ":").concat(this._defaultHeight[this._baseFonts[0]], ";\n                ").concat(this._baseFonts[1], ":").concat(this._defaultHeight[this._baseFonts[1]], ";\n                ").concat(this._baseFonts[2], ":").concat(this._defaultHeight[this._baseFonts[2]], ";\n                ").concat(this._baseFonts[3], ":").concat(this._defaultHeight[this._baseFonts[3]]));
      // the span array for all the tests
      this._createSpanArray();
      callback();
    }
    /**
     * create array of spans for testing in chunks
     */
  }, {
    key: "_createSpanArray",
    value: function _createSpanArray() {
      var currDiv = document.createElement('div');
      currDiv.id = 'currentDiv';
      currDiv.style.position = 'absolute';
      currDiv.style.visibility = 'hidden';
      for (var i = 0; i < this._chunkSize; i++) {
        var s1 = document.createElement('span');
        s1.style.lineHeight = 'normal';
        s1.style.position = 'absolute';
        s1.style.zIndex = '-1';
        s1.style.fontSize = this._testSize;
        s1.innerHTML = this._testString;
        currDiv.appendChild(s1);
        var br = document.createElement('br');
        currDiv.appendChild(br);
      }
      this._iframe.contentDocument.body.appendChild(currDiv);
      this._spanArray = currDiv;
    }
  }, {
    key: "getAllFontsDiffs",
    value: function getAllFontsDiffs() {
      return this._allFontsDiffs;
    }
  }]);
}();
exports["default"] = BaseFontsScanner;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/OldBatchFontsScanner.js":
/*!**************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/OldBatchFontsScanner.js ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var OldBaseFontsScanner_1 = __webpack_require__(/*! ./OldBaseFontsScanner */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/OldBaseFontsScanner.js");
var OldBaseFontsScanner_2 = __importDefault(__webpack_require__(/*! ./OldBaseFontsScanner */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/OldBaseFontsScanner.js"));
var OldBatchFontsScanner = /*#__PURE__*/function (_OldBaseFontsScanner_) {
  function OldBatchFontsScanner(domUtils) {
    _classCallCheck(this, OldBatchFontsScanner);
    return _callSuper(this, OldBatchFontsScanner, [domUtils]);
  }
  _inherits(OldBatchFontsScanner, _OldBaseFontsScanner_);
  return _createClass(OldBatchFontsScanner, [{
    key: "scan",
    value: function scan(fonts, fontFamily) {
      var _this = this;
      return this.init() // Init from super base class
      .then(function () {
        return new Promise(function (resolve, reject) {
          try {
            _this.detectCallback(fonts, fontFamily, resolve);
          } catch (error) {
            reject(error);
          }
        });
      })["catch"](function (error) {
        return Promise.reject(error);
      });
    }
    /**
     * @param {Array} fonts
     * @param {Number} fontFamily
     * @param {Function} callback
     */
  }, {
    key: "detectCallback",
    value: function detectCallback(fonts, fontFamily, callback) {
      var _this2 = this;
      var availableFonts = [];
      var index = 0;
      var currentLoopIndex = 0;
      if (!this._spanArray) {
        callback(availableFonts);
        return availableFonts;
      }
      var allSpans = this._spanArray.getElementsByTagName(OldBaseFontsScanner_1.SPAN_TAG);
      var baseFontDefaultWidth = this._defaultWidth[fontFamily];
      var baseFontDefaultHeight = this._defaultHeight[fontFamily];
      var checkDetection = function checkDetection(arryOfSpans) {
        arryOfSpans.forEach(function (span) {
          var diffWidth = Math.abs(span.offsetWidth - baseFontDefaultWidth);
          var diffHeight = Math.abs(span.offsetHeight - baseFontDefaultHeight);
          // collect all the diffs of all fonts in case we see the issue of all fonts.
          // If it happens the FontDetectionFeature will take this and send to server for analysis
          _this2._allFontsDiffs.push([span.id, diffWidth, diffHeight]);
          if (diffWidth > 1 || diffHeight > 1) {
            availableFonts[index] = span.id;
            index++;
          }
        });
      };
      fonts.forEach(function (font) {
        if (currentLoopIndex >= _this2._chunkSize) {
          currentLoopIndex = 0;
          checkDetection(Array.from(allSpans));
        }
        allSpans[currentLoopIndex].style.fontFamily = font + ',' + fontFamily;
        allSpans[currentLoopIndex].id = font;
        currentLoopIndex++;
      });
      /** one more run for the rest of the tail */
      if (currentLoopIndex < this._chunkSize) {
        checkDetection(Array.from(allSpans).slice(0, currentLoopIndex));
      }
      callback(availableFonts);
    }
  }]);
}(OldBaseFontsScanner_2["default"]);
exports["default"] = OldBatchFontsScanner;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/OldOffloadFontsScanner.js":
/*!****************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/OldOffloadFontsScanner.js ***!
  \****************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var OldBaseFontsScanner_1 = __importDefault(__webpack_require__(/*! ./OldBaseFontsScanner */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/OldBaseFontsScanner.js"));
var OldBaseFontsScanner_2 = __webpack_require__(/*! ./OldBaseFontsScanner */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v1/OldBaseFontsScanner.js");
/**
 * Does the font calculation in an multi-task manner:
 * Instead of iterating the provided fonts synchronically - it posting dedicated window task per each font.
 * The intention was to fix Latency during page load for prospect users, reported by some of our customers.
 * see - https://biocatch.atlassian.net/browse/BC-38110
 * The idea was to keep the original synchronic behavior, while remotely configure for the problematic customers the alternative
 * behavior implemented on that class.   the 'legacy' behavior now captured within the BatchFontsScanner.
 */
var OldOffloadFontsScanner = /*#__PURE__*/function (_OldBaseFontsScanner_) {
  /**
   * @param {CDUtils} domUtils
   */
  function OldOffloadFontsScanner(domUtils) {
    var _this;
    _classCallCheck(this, OldOffloadFontsScanner);
    _this = _callSuper(this, OldOffloadFontsScanner, [domUtils]);
    _this._getElementOffsetTask = _this._getElementOffsetTask.bind(_this);
    _this._lastChunck = true;
    return _this;
  }
  _inherits(OldOffloadFontsScanner, _OldBaseFontsScanner_);
  return _createClass(OldOffloadFontsScanner, [{
    key: "scan",
    value: function scan(fonts, fontFamily) {
      var _this2 = this;
      return this.init().then(function () {
        return new Promise(function (resolve, reject) {
          try {
            _this2.detectCallback(fonts, fontFamily, resolve);
          } catch (error) {
            reject(error);
          }
        });
      })["catch"](function (error) {
        return Promise.reject(error);
      });
    }
    /**
     * @param {Array} fonts
     * @param {Number} fontFamily
     * @param {Function} callback
     */
  }, {
    key: "detectCallback",
    value: function detectCallback(fonts, fontFamily, callback) {
      if (!this._spanArray) {
        callback([]);
        return [];
      }
      var allSpans = this._spanArray.getElementsByTagName(OldBaseFontsScanner_2.SPAN_TAG);
      var createTaskIterator = function createTaskIterator(start, end, values) {
        var _nextIndex = start;
        var _availableFonts = [];
        var _callback = callback;
        var _fontsArray = fonts;
        var _fontFamily = fontFamily;
        var taskIterator = {
          next: function next() {
            var nextValue = null;
            if (_nextIndex < end) {
              nextValue = values[_nextIndex];
              _nextIndex++;
              return nextValue;
            }
            return null;
          },
          reset: function reset() {
            _nextIndex = 0;
          },
          addFont: function addFont(font) {
            _availableFonts.push(font);
          },
          runCallback: function runCallback() {
            _callback(_availableFonts);
          },
          getFontsArray: function getFontsArray() {
            return _fontsArray;
          },
          getFontFamily: function getFontFamily() {
            return _fontFamily;
          },
          getAvailableFonts: function getAvailableFonts() {
            return _availableFonts;
          }
        };
        return taskIterator;
      };
      var taskIterator = createTaskIterator(0, Math.min(fonts.length, this._chunkSize), allSpans);
      // First execution
      this._lastChunck = true;
      this._applyFontsToSpanElements(taskIterator, 0);
    }
    /**
     *
     * @param {Object} spansTaskIterator
     * @param {Number} fontsLoopIndex
     */
  }, {
    key: "_applyFontsToSpanElements",
    value: function _applyFontsToSpanElements(spansTaskIterator, fontsLoopIndex) {
      var _this3 = this;
      Logger_1["default"].trace("[FONTS-COLLECTOR][VERSION1] Checking font ".concat(fontsLoopIndex, "."));
      var nextElement = spansTaskIterator.next();
      var fontsArray = spansTaskIterator.getFontsArray();
      var fontFamily = spansTaskIterator.getFontFamily();
      while (nextElement !== null && fontsLoopIndex < fontsArray.length) {
        nextElement.style.fontFamily = fontsArray[fontsLoopIndex] + ', ' + fontFamily;
        nextElement.id = fontsArray[fontsLoopIndex];
        fontsLoopIndex++;
        nextElement = spansTaskIterator.next();
      }
      spansTaskIterator.reset();
      if (fontsLoopIndex >= fontsArray.length) {
        // eslint-disable-next-line no-console
        // console.log('calling callback', spansTaskIterator.getAvailableFonts());
        /** one more run for the rest of the tail */
        if (this._lastChunck) {
          this._lastChunck = false;
          return window.setTimeout(function () {
            _this3._getElementOffsetTask(spansTaskIterator, fontsLoopIndex);
          }, 0);
        }
        spansTaskIterator.runCallback();
      } else {
        window.setTimeout(function () {
          _this3._getElementOffsetTask(spansTaskIterator, fontsLoopIndex);
        }, 0);
      }
    }
    /**
     * Get the offset width/height information of the requested element
     * and execute the provided callback when finished
     * @param {Object} spansTaskIterator
     * @param {Number} fontsLoopIndex
     * @param {Number} indexOfBaseFonts
     */
  }, {
    key: "_getElementOffsetTask",
    value: function _getElementOffsetTask(spansTaskIterator, fontsLoopIndex) {
      var _this4 = this;
      var fontFamily = spansTaskIterator.getFontFamily();
      var baseFontDefaultWidth = this._defaultWidth[fontFamily];
      var baseFontDefaultHeight = this._defaultHeight[fontFamily];
      var element = spansTaskIterator.next();
      if (element && element.offsetWidth) {
        var diffWidth = Math.abs(element.offsetWidth - baseFontDefaultWidth);
        var diffHeight = Math.abs(element.offsetHeight - baseFontDefaultHeight);
        this._allFontsDiffs.push([element.id, diffWidth, diffHeight]);
        if (diffWidth > 1 || diffHeight > 1) {
          spansTaskIterator.addFont(element.id);
        }
        window.setTimeout(function () {
          _this4._getElementOffsetTask(spansTaskIterator, fontsLoopIndex);
        }, 0);
      } else {
        spansTaskIterator.reset();
        this._applyFontsToSpanElements(spansTaskIterator, fontsLoopIndex);
      }
    }
  }, {
    key: "isSupported",
    value: function isSupported() {
      return true;
    }
  }]);
}(OldBaseFontsScanner_1["default"]);
exports["default"] = OldOffloadFontsScanner;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/BatchFontScanner.js":
/*!**********************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/BatchFontScanner.js ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
/**
 * BatchFontScanner
 * Efficiently detects fonts in a list by processing them in controlled batches.
 * This approach avoids blocking the browser's main thread and ensures responsiveness
 * for UI interactions.
 */
var BatchFontScanner = /*#__PURE__*/function () {
  /**
   * @constructor
   * @param {Object} config - Configuration object.
   * @param {Object} config.utils - General utility functions (mandatory).
   * @param {Object} config.domUtils - DOM-specific utility functions (mandatory).
   * @param {Object} [config.detector=null] - Instance of a font detector.
   * @param {number} [config.batchSize=10] - Number of fonts to process per batch.
   */
  function BatchFontScanner(_ref) {
    var utils = _ref.utils,
      domUtils = _ref.domUtils,
      _ref$detector = _ref.detector,
      detector = _ref$detector === void 0 ? null : _ref$detector,
      _ref$batchSize = _ref.batchSize,
      batchSize = _ref$batchSize === void 0 ? 10 : _ref$batchSize,
      _ref$timeoutGap = _ref.timeoutGap,
      timeoutGap = _ref$timeoutGap === void 0 ? 0 : _ref$timeoutGap;
    _classCallCheck(this, BatchFontScanner);
    if (!utils) throw new Error("The 'utils' parameter is required.");
    if (!domUtils) throw new Error("The 'domUtils' parameter is required.");
    this._logsTag = "[FONTS-COLLECTOR][BATCH-FONT-SCANNER]";
    this._utils = utils;
    this._domUtils = domUtils;
    this.detector = detector;
    this.batchSize = batchSize;
    this.timeoutGap = timeoutGap;
    this._hasReleased = false;
  }
  /**
   * Releases resources associated with the BatchFontScanner.
   * Marks the scanner as released and prevents further operations.
   *
   * @returns {Promise<void>} Resolves when all resources are released.
   */
  return _createClass(BatchFontScanner, [{
    key: "release",
    value: (function () {
      var _release = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              this._hasReleased = true;
              if (!(this.detector && typeof this.detector.release === "function")) {
                _context.n = 1;
                break;
              }
              _context.n = 1;
              return this.detector.release();
            case 1:
              return _context.a(2);
          }
        }, _callee, this);
      }));
      function release() {
        return _release.apply(this, arguments);
      }
      return release;
    }()
    /**
     * Scans the provided list of fonts to detect availability in the browser.
     * The operation is performed in batches to maintain responsiveness.
     *
     * @param {Array<string>} fonts - List of font names to detect.
     * @returns {Promise<Array<string>>} A promise that resolves with a list of detected fonts.
     * @throws {Error} If the scanner has been released or is released during scanning.
     */
    )
  }, {
    key: "scan",
    value: (function () {
      var _scan = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(fonts) {
        var detectedFonts, batches, _iterator, _step, _step$value, start, end, batchStartTime, batchDuration, _t;
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.p = _context2.n) {
            case 0:
              if (!this._hasReleased) {
                _context2.n = 1;
                break;
              }
              throw new Error("BatchFontScanner has been released and cannot be used.");
            case 1:
              if (Array.isArray(fonts)) {
                _context2.n = 2;
                break;
              }
              throw new TypeError("The 'fonts' parameter must be an array.");
            case 2:
              if (!(fonts.length === 0)) {
                _context2.n = 3;
                break;
              }
              return _context2.a(2, []);
            case 3:
              detectedFonts = [];
              batches = this._createBatchIndices(fonts.length, this.batchSize);
              _iterator = _createForOfIteratorHelper(batches);
              _context2.p = 4;
              _iterator.s();
            case 5:
              if ((_step = _iterator.n()).done) {
                _context2.n = 9;
                break;
              }
              _step$value = _step.value, start = _step$value.start, end = _step$value.end;
              if (!this._hasReleased) {
                _context2.n = 6;
                break;
              }
              throw new Error("BatchFontScanner was released during scanning. Operation aborted.");
            case 6:
              batchStartTime = performance.now();
              _context2.n = 7;
              return this._processBatch(fonts.slice(start, end), detectedFonts);
            case 7:
              batchDuration = performance.now() - batchStartTime;
              Logger_1["default"].trace("".concat(this._logsTag, " Batch processed (").concat(start, "-").concat(end, ") in ").concat(batchDuration.toFixed(2), "ms."));
              if (!(end < fonts.length)) {
                _context2.n = 8;
                break;
              }
              _context2.n = 8;
              return this._delay(this.timeoutGap);
            case 8:
              _context2.n = 5;
              break;
            case 9:
              _context2.n = 11;
              break;
            case 10:
              _context2.p = 10;
              _t = _context2.v;
              _iterator.e(_t);
            case 11:
              _context2.p = 11;
              _iterator.f();
              return _context2.f(11);
            case 12:
              if (!this._hasReleased) {
                _context2.n = 13;
                break;
              }
              throw new Error("BatchFontScanner was released after scanning. Operation aborted.");
            case 13:
              return _context2.a(2, detectedFonts);
          }
        }, _callee2, this, [[4, 10, 11, 12]]);
      }));
      function scan(_x) {
        return _scan.apply(this, arguments);
      }
      return scan;
    }()
    /**
     * Processes a single batch of fonts by detecting their availability.
     * Fonts are processed sequentially to maintain control and ensure efficient use
     * of the browser's single-threaded nature.
     *
     * @param {Array<string>} batch - Subset of font names to process.
     * @param {Array<string>} detectedFonts - Accumulated list of detected fonts.
     * @returns {Promise<void>} Resolves when the batch is processed.
     * @throws {Error} If the scanner is released during processing.
     */
    )
  }, {
    key: "_processBatch",
    value: (function () {
      var _processBatch2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(batch, detectedFonts) {
        var _iterator2, _step2, font, _this$detector, isDetected, _t2, _t3;
        return _regenerator().w(function (_context3) {
          while (1) switch (_context3.p = _context3.n) {
            case 0:
              _iterator2 = _createForOfIteratorHelper(batch);
              _context3.p = 1;
              _iterator2.s();
            case 2:
              if ((_step2 = _iterator2.n()).done) {
                _context3.n = 7;
                break;
              }
              font = _step2.value;
              if (!this._hasReleased) {
                _context3.n = 3;
                break;
              }
              throw new Error("BatchFontScanner was released during batch processing. Operation aborted.");
            case 3:
              _context3.p = 3;
              _context3.n = 4;
              return (_this$detector = this.detector) === null || _this$detector === void 0 ? void 0 : _this$detector.detect(font);
            case 4:
              isDetected = _context3.v;
              if (isDetected) {
                detectedFonts.push(font);
              }
              _context3.n = 6;
              break;
            case 5:
              _context3.p = 5;
              _t2 = _context3.v;
              Logger_1["default"].error("Error detecting font \"".concat(font, "\":"), _t2);
            case 6:
              _context3.n = 2;
              break;
            case 7:
              _context3.n = 9;
              break;
            case 8:
              _context3.p = 8;
              _t3 = _context3.v;
              _iterator2.e(_t3);
            case 9:
              _context3.p = 9;
              _iterator2.f();
              return _context3.f(9);
            case 10:
              return _context3.a(2);
          }
        }, _callee3, this, [[3, 5], [1, 8, 9, 10]]);
      }));
      function _processBatch(_x2, _x3) {
        return _processBatch2.apply(this, arguments);
      }
      return _processBatch;
    }()
    /**
     * Creates batch indices to divide the font list into manageable chunks.
     *
     * @param {number} listLength - Total number of fonts to process.
     * @param {number} batchSize - Number of fonts per batch.
     * @returns {Array<{start: number, end: number}>} List of batch index ranges.
     */
    )
  }, {
    key: "_createBatchIndices",
    value: function _createBatchIndices(listLength, batchSize) {
      return Array.from({
        length: Math.ceil(listLength / batchSize)
      }, function (_, i) {
        return {
          start: i * batchSize,
          end: Math.min((i + 1) * batchSize, listLength)
        };
      });
    }
    /**
     * Introduces a delay between asynchronous operations to avoid blocking the event loop.
     *
     * @param {number} ms - Delay duration in milliseconds.
     * @returns {Promise<void>} Resolves after the specified delay.
     */
  }, {
    key: "_delay",
    value: function _delay(ms) {
      return new Promise(function (resolve) {
        return setTimeout(resolve, ms);
      });
    }
  }]);
}();
exports["default"] = BatchFontScanner;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/FontsCache.js":
/*!****************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/FontsCache.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var FontVersionType_1 = __importDefault(__webpack_require__(/*! ./types/FontVersionType */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/types/FontVersionType.js"));
var FontsCache = /*#__PURE__*/function () {
  /**
   * Constructor for FontsCache
   * @param {Object} storageUtils - Utility for handling storage operations.
   * @param {Object} versionKeys - Mapping of font versions to storage keys.
   */
  function FontsCache(storageUtils) {
    _classCallCheck(this, FontsCache);
    this._storageUtils = storageUtils;
    this._versionKeys = _defineProperty(_defineProperty({}, FontVersionType_1["default"].VERSION1, 'detectedFonts_2.1.5'), FontVersionType_1["default"].VERSION2, 'detectedFonts_3');
  }
  /**
   * Saves detected fonts to local storage based on the font version.
   * @param {string} fonts - Comma-separated string of fonts to save.
   * @param {FontVersionType} fontVersion - The font version to determine the storage key.
   */
  return _createClass(FontsCache, [{
    key: "saveFonts",
    value: (function () {
      var _saveFonts = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(fonts, fontVersion) {
        var key;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              key = this._getKeyByVersion(fontVersion);
              Logger_1["default"].debug("[FONTS-COLLECTOR][".concat(fontVersion, "] Saving fonts to localStorage under key: ").concat(key));
              _context.n = 1;
              return this._storageUtils.saveToLocalStorage(key, fonts);
            case 1:
              return _context.a(2);
          }
        }, _callee, this);
      }));
      function saveFonts(_x, _x2) {
        return _saveFonts.apply(this, arguments);
      }
      return saveFonts;
    }()
    /**
     * Retrieves stored fonts from local storage based on the font version.
     * @param {FontVersionType} fontVersion - The font version to determine the storage key.
     * @returns {string|null} - The stored fonts or null if none exist.
     */
    )
  }, {
    key: "getStoredFonts",
    value: function getStoredFonts(fontVersion) {
      var key = this._getKeyByVersion(fontVersion);
      var storedFonts = this._storageUtils.getFromLocalStorage(key);
      Logger_1["default"].debug("[FONTS-COLLECTOR][".concat(fontVersion, "] Retrieved fonts from localStorage under key ").concat(key, ": ").concat(storedFonts));
      return storedFonts;
    }
    /**
     * Private method to determine the storage key based on the font version.
     * @param {FontVersionType} fontVersion - The font version to determine the key.
     * @returns {string} - The corresponding storage key.
     * @throws {Error} - If the font version type is unsupported.
     */
  }, {
    key: "_getKeyByVersion",
    value: function _getKeyByVersion(fontVersion) {
      var key = this._versionKeys[fontVersion];
      if (!key) {
        throw new Error("Unsupported font version type: ".concat(fontVersion));
      }
      return key;
    }
  }]);
}();
exports["default"] = FontsCache;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/FontsVersion2.js":
/*!*******************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/FontsVersion2.js ***!
  \*******************************************************************************************/
/***/ (function(module) {



// fontsVersion2.js
// === FONTS STATISTICS ===
// Total unique fonts: 2790
// Original font count: 2891
// It structured into map of font families and fonts because v1, but there is no real use for it in v2
var fontsVersion2 = {
  "unlabled": ["Ayuthaya", "Baskerville", "Beirut", "BigCaslon", "Didot", "Farisi", "Galvji", "GurmukhiMT", "HeitiSC", "HeitiTC", "HiraginoKakuGothicPro", "HiraginoKakuGothicProN", "HiraginoKakuGothicStdN", "HiraginoMaruGothicPro", "HiraginoMaruGothicProN", "HiraginoMinchoPro", "HiraginoMinchoProN", "HiraginoSans", "HoeflerText", "HoeflerTextOrnaments", "ITFDevanagari", "ITFDevanagariMarathi", "IowanOldStyle", "Kailasa", "Kokonor", "LucidaGrande", "LaoMN", "LaoSangamMN", "MalayalamMN", "Mishafi-Bold", "Mshtakan", "Muna", "NotoSansCuneiform", "PTMono", "PTSans", "Palatino", "PartyLET", "Raanana", "Rockwell", "Sana", "Sathu", "Seravek", "ShreeDevanagari714", "Silom", "SinhalaSangamMN", "SongtiSC", "SongtiTC", "SukhumvitSet", "Symbol", "SystemFont", "Waseem", "ZapfDingbats", "Geneva", "Galvji-Regular", "Ubuntu-Regular", "NotoSansCanadianAboriginal-Regular", "MuktaMahee-Regular", "NotoSansMasaramGondi-Regular", "NirmalaUI", "MyanmarText", "Gadugi", "DejaVuSans", "HelveticaNeue", "Roboto-Regular", "SegoeUIEmoji", "JavaneseText", "LeelawadeeUI", "OpenSymbol", "NotoSansGunjalaGondi-Regular", "ArialMT", "ArialNarrow", "VnAvant", "VnAvantH", "VnGothicH", "VnHelvetIns", "VnGothic", "VnHelvetInsH", "LucidaSans", "VnUniverse-H", "3MCircularTT-Bold", "ABeeZee-Regular", "AbadiMTCondensedLight", "AbadiMTCondensed-ExtraBold", "Abel-Regular", "AboriginalSans", "ARBerkeley", "AccentSF-Regular", "Abscissa-Regular", "AccordHeavySF", "AccordLightSF", "AccordSF-Regular", "AcuminPro", "AdobeHeitiStd", "AdobeGothicStd", "Aileron", "AgencyFB-Regular", "Aharoni-Bold", "AirCut-Light", "AlegreyaSansSC-Regular", "AlekyaExtraBold", "Alekya-Thin", "Alekya-Medium", "AndaleSans", "AlternateGothic-No2-D", "AlternateGothic2-BT", "AmerikaSans", "Antonio-Regular", "AntiqueOlive", "LiGothic-Regular", "AppleGothic", "Arimo-Regular", "Asenine-Thin", "Architext-Regular", "AppleSDGothicNeo-Regular", "AppleSDGothicNeo-ExtraBold", "AsenineSuperThin", "Arimo-BoldItalic", "AvantGarde-Book", "Avenir-Medium", "Charter-Bold", "Futura-Medium", "Phosphate-Solid", "Bariol-Regular", "AveriaSans", "BankGothic", "AveriaSerifLibre-Regular", "Avinor-Regular", "BaronNeue-Regular", "BebasNeue-Bold", "BelfastLightSF", "BerlinSansFB-Regular", "Belfast-SF", "BellGothicStd-Bold", "Biko-Regular", "BlairMdITCttMedium", "BitstreamVeraSans", "BowlbyOneSC-Regular", "BrandonGrotesque-Bold", "Cabin", "CairoSF-Regular", "Calibri", "Candara", "Cantarell-Bold", "Carlito-Regular", "CenturyGothic", "CharcoalCY", "CarroisGothicSC-Regular", "CaviarDreams", "CircularStd-Bold", "Coda-Regular", "ClearSans", "ComicSansMS", "Comfortaa-Regular", "Commons-Regular", "Corbel-Regular", "CordiaUPC-Regular", "CorporateSansMedium", "Coolvetica", "CronosPro-Regular", "DaysRegular", "DIN-Bold", "DFKGothic-Md", "Dayton-Regular", "Damascus-Bold", "DengXian", "Dosis-Regular", "Dosis-ExtraLight", "Dotum", "DotumChe-Regular", "DroidSans", "DroidSansArmenian", "DroidSansArabic", "DroidSansEthiopic", "DroidSansHebrew", "DroidSansGeorgian", "DroidSansJapanese", "DroidSansFallback", "DroidSansThai", "Ebrima", "ElaSans-LightCaps", "ErasBoldITC", "Euclid", "ExistenceLight", "Eurostile", "EuphemiaUCAS", "Euclid-ExtraBold", "Fabrica-Regular", "FiraSans-Regular", "Formata-LightCondensed", "FolioXBdBT", "FrancoisOne", "FranklinGothicMedium", "FreeSans", "FuturaStd", "GenW01-Light", "GeotypeTT-Regular", "Gidole-Regular", "GillSans-Bold", "GillSans", "GilliusADF-Regular", "GilliusADFNo2", "GilliusADF-Cd", "Gotham-Book", "Gisha", "GilliusADFNo2-Condensed", "Gothic720-BT", "GothicE", "GothicI-Black", "GothicG", "GothicNo13-BT", "HPSimplified-Regular", "HGHeiseiKakugothicW5", "HGHeiseiKakugothicW3", "HGPAGothic2-Latin1K", "HGPHeiseiKakugothicW3", "HGPHeiseiKakugothictaiW5", "Haettenschweiler", "Hebar-Regular", "HeitiTC-W5", "Helvetica-Light", "HeitiSC-Regular", "Helvetica", "HannotateTC-Bold", "HiraginoKakuGothicPro-W3", "HiraginoKakuGothicProN-W3", "HiraginoMaruGothicPro-W3", "HiraginoKakuGothicStdN-W3", "HypatiaSansPro-Regular", "HiraginoMaruGothicProN-W3", "Humanist777BT-Regular", "HiraginoSansGB-W3", "IPAPGothic", "HiraginoSans-W3", "IPAGothic", "IdealSans-Bold", "ISOCPEUR", "Interstate-Bold", "Impact", "Inder-Regular", "JLSDataGothicCNC", "JuliusSansOne", "JLSDataGothicRNC", "KleeDemibold", "Kokila-Regular", "Laila-Medium", "LatinModernSans", "LantingheiSC-Extralight", "Latha", "KozukaGothicPr6N-Medium", "LantingheiSC-Demibold", "LatinModernSans-DemiCondensed", "Lato-Regular", "LMSans10-Regular", "LevenimMT", "LinuxBiolinumKeyboardO", "LiberationSans", "LinuxBiolinumG-Regular", "LinuxBiolinumO", "LucidaSans-Demibold", "Loma", "LucidaSansUnicode", "LuzSans-Book", "MMCenturyNew-Bold", "MMVariable-Bold", "MMVariableDBold", "MMVariableFBold", "MMaVariable-Bold", "MSReferenceSansSerif", "MSSansSerif", "MyriadPro", "MaiandraGD", "MalgunGothic", "Meiryo", "MarquisetteBTN-Light", "NeoGothic-Regular", "MicrosoftSansSerif", "Montserrat-Regular", "PhagsPa", "MuktiNarrow", "Muli", "MSGothic", "Muna-Bold", "Museo100-Regular", "MyriadArabic-Bold", "MuseoSans-100", "MyriadCAD-Regular", "NanumBarunGothic-Regular", "MyriadPro-Semibold", "Neolith-Regular", "NanumGothic-Regular", "Narkisim", "NapaSF-Regular", "NeoSansPro-Light", "NewGulim", "NewsCycle-Regular", "NeueHaasGroteskTextPro-Black", "NewsGothicMT", "NewsGothicBT", "Nexa-Bold", "NexaXBold", "NimbusSansL-Regular", "Nobile-Regular", "NotoSans-Regular", "NovaFlat-Regular", "NovaOval-Regular", "NovaSlim-Regular", "SimpleSansOC-Regular", "Optima-Regular", "OpenSans-Regular", "OpusChordsSans", "OstrichSansRounded", "NovaSquare-Regular", "Nunito-Regular", "OstrichSans", "NuevaStd-BoldCondensed", "OstrichSansDashed", "Oswald-Regular", "Oxygen-Regular", "PTBoldHeading", "Padauk-Regular", "Paralucent-ExtraLight", "ParalucentDemiBoldItalic", "PingFangSC-Regular", "Paralucent-ExtraLightItalic", "PingFangTC-Regular", "PlacardMTCondensed", "PoiretOne", "PoetsenOne-Regular", "Praxis-Regular", "PrimaSansBT", "Purisa", "ProximaNova", "QTOptimum-Bold", "QuickTypeII-Condensed", "Quicksand-Regular", "Quicksand-Dash", "RacingSansOne-Regular", "Raanana-Bold", "Rakesly-Light", "SFCompactText", "SFNSDisplay", "RotisSansSerifStd-Bold", "RotisSansSerifStd-BoldExtrabold", "Rondalo-Regular", "SWGothic", "STXihei-Regular", "SamsungImagination-Bold", "Raleway-Regular", "SansSerif", "Skia-Regular", "Seravek-Regular", "SofiaPro", "SohoGothicPro-Bold", "Seravek-ExtraLight", "Square721BT", "SourceSansPro-Regular", "StoneSansITCTT", "SukhumvitSet-Regular", "Swiss721-BlackCondensed", "Swiss721BlackExBT", "Swiss721-BoldOul", "Swiss721LTStd-LightCn", "Swiss721-BoldCondensedOul", "Swiss721BT-Regular", "Swiss721LTEx-Bold", "Swiss721BT", "Tahoma", "TakaoPGothic", "Swiss911XCmBT", "Technic", "TeXGyreHeros", "Swiss921BT-Regular", "Technic-Bold", "TempusSansITC-Regular", "StezSans", "Thonburi", "Titillium", "Titillium-Bold", "TitilliumLight", "Titillium-Regular", "Titillium-Semibold", "Swiss721-BlackOulBT", "TitilliumThinUpright", "TitilliumText22L-Bold", "TrebuchetMS", "TradeGothicLTStd", "TitilliumText22-Bold", "TsukushiBRoundGothic", "TsukushiArounGothic", "TwCenMT", "URWGLN", "TwCenMTCondensed-ExtraBold", "URWGroteskT", "UmeGothic", "UmePGothic", "VLGothic", "UnDotum-Regular", "Univers-55Roman", "VNI-Bauhaus", "VLPGothic", "VNIHelve", "VNI-HelveticaCondensed", "Verdana", "VodafoneRg", "Verlag-Book", "Vogue-ExtraBold", "WPMultinationalA-Helvetica", "VNI-Swiss-Condense", "WPMultinationalB-Helvetica", "WPGreekHelve", "WenQuanYiMicroHei", "YuCirilHelvetica", "YuGothic", "ZapfHumanistBT", "ZolanoSansBTN", "ZurichExBT", "CMSS10", "ZurichBoldExBT", "Chicago", "CMSS12", "Bahnschrift", "CMSS17", "CMSS8", "CMSS9", "CMSSBX10", "CMSSQ8", "Dubai", "CMSSDC10", "HeitiStd", "LCMSSB8-Regular", "CambriaMath", "LetterGothicStd", "Luminari-Regular", "Futura-Bold", "InaiMathi-Bold", "SignPainterHouseScript-Semibold", "GentiumBookBasic", "Amiri-Regular", "NotoSerifYezidi-Regular", "VnAristote", "VnBodoni", "VnBodoniH", "AmericanTypewriter-Semibold", "VnBookAntiquaH", "CenturySchoolbook", "VnClarendon", "VnClarendonH", "VnBookAntiqua", "18thCentury", "CenturySchoolbook-Bold", "ARHermann-Regular", "AboriginalSerif", "AbrilFatface", "AccanthisADFStd", "AcademyEngravedLetPlain", "AbyssinicaSIL", "AccanthisADFStdNo2", "AdlerStd-Regular", "AccanthisADFStd-No3", "AdobeGaramond-Regular", "AdobeCaslonPro", "AdobeHebrew-Regular", "AdobeJensonStd", "AkhbarMT", "AdobeNaskh-Regular", "AlbanyAMT-Regular", "Aleo-Regular", "AlbertusExtraBold", "AmadeusStd-Regular", "AdobeMingStd-L", "MyungjoStd-Regular", "AmazoneBT", "Ambages-Regular", "Andalus", "AmericanTypewriter", "Angostura-Regular", "AngleterreBook-DGL", "AngsanaNew", "AppleMyungjo-Regular", "Ariston-Regular", "ArnoPro", "Aparajita-Regular", "AmiriQuran", "Athelas-Regular", "Arvo-Regular", "AutourOne-Regular", "AveriaSerif", "BacktalkSerif-BTN", "BanmaiTimes", "Augusta-Regular", "Batang", "BaronNeue-Italic", "BauerBodoniStd-Bold", "BellMT", "Bellota-Regular", "BelweBoldBT", "Bentham-Regular", "BenguiatBookBT", "BerlingStd-Regular", "BerlingRoman", "BauerBodni-BT", "BernardMTCondensed", "BernhardFashion-BT", "Bevan-Regular", "BirchStd-Regular", "BernhardModBT-Regular", "BitstreamCharter", "BookAntiqua", "BitstreamVeraSerif", "BookmanOldStyle", "BordeauxRoman-BoldLET", "BordeauxRoman-Bold", "BordeauxRoman-BoldLETPlain", "BrowalliaNew", "BreeSerif-Regular", "Caladea-Regular", "CalistoMT", "Cambria", "CalifornianFB-Regular", "Canterbury-Regular", "Catull-Regular", "Castellar-Regular", "Century", "CentaurStd-Regular", "Chandas-Regular", "CentSchbookBT-Regular", "CharisSILCompact", "CharlemagneStd-Bold", "ChaparralPro-Regular", "ChunkFiveRoman", "ClarendonBT", "CloisterBlackBT", "Cinzel-Regular", "ColonnaMT", "Cochin-Bold", "Constantia", "CooperStd-Black", "Copperplate-Bold", "CordiaNew-Regular", "CumberlandAMT-Regular", "DayRoman", "DejaVuSerif", "Didot-Regular", "Dominican-Regular", "DoulosSIL", "Dutch801-Roman", "DroidSerif-Regular", "DiavloBook", "Dutch801-Black", "Egyptian710BT-Regular", "English157BT-Regular", "EngraverFontSet", "EngraverTextHTTF", "EngraverTextTT", "EngraversMT", "EngraverText-NC", "EngraverTime", "EuclidFraktur-Regular", "EuroRoman-Regular", "EzraSIL", "EzraSILSR", "FanwoodStd-Regular", "FinaleCopyistTextExt", "FelixTitling", "FinaleCopyistText", "Firenze-SF", "FootlightMTLight", "Formal436BT", "FrankfurterVenetianTT", "GFSArtemisia", "FreeSerif", "GFSComplutum", "GFSBaskerville", "GFSBodoniClassic", "FrankRuhlLibre-Regular", "GFSDidot", "GFSDidotClassic", "GFSGazis", "GFSNeohellenic", "GFSOlga", "GFSTheokritos", "GFSolomos-Regular", "Gabriola", "GFSPorson", "GaramondPremrPro", "GalatiaSIL-Regular", "GeezaPro", "GentiumBasic", "Georgia", "GentiumAlt-Regular", "Glegoo-Regular", "GermanicaStd-Regular", "GloucesterMTExtraCondensed", "GiovanniITCTT-Regular", "GoudyOldStyle", "Granjon-Bold", "GujaratiMT", "GoudyHandtooledBT", "GravurCondensed-Light", "HGPMinchoL", "HGMinchoL-Medium", "HYSerif-Medium", "HGSMinchoL", "HiraginoMinchoProN-W3", "HighTowerText", "Humanist521BT-Regular", "Humanist521Bold", "HuxleyTitling", "IPAMincho", "IMFELLDWPica", "IPAPMincho-Regular", "Italianate-Regular", "JFArmenianSerif", "IowanOldStyleTitling", "JFGeorgianContrast", "Joan-Regular", "JosefinSlab-Regular", "Jomolhari", "Judson-Regular", "Junicode", "Kalyani-Regular", "Kartika", "Kalinga", "KinoMT", "KievitOffcPro-Regular", "KohinoorBangla-Regular", "Langdon-Regular", "KozMinPro6N-Regular", "KohinoorDevanagari-Book", "LatiennePro-Regular", "LatinModernRoman", "LMRomanDunhill", "LMRomanSlanted", "LeituraDisplayRoman", "LexiaRegular", "LatinModernRoman-Unslanted", "LiberationSerif", "LatinModernRoman-Caps", "LiberationSerif-Regular", "LindenHill-Regular", "LinuxLibertineDisplayG-Regular", "LinuxLibertineG-Regular", "LinuxLibertineInitialsO", "LinuxLibertineO", "LucidaFax", "LucidaBright", "Times-Roman", "MMCenturyNew-Italic", "MMCenturyOld-Bold", "MMCenturyOldGreek", "MMTextBook-Italic", "MMTextBookB-Italic", "MMTimes-Regular", "MMaCentury", "MMaCenturyK", "MMaCenturyKSBold", "MMaCenturyKSS-Bold", "MMaCenturySSStd", "MMaCenturyS", "MMaPascal-Bold", "MMaFraktur", "MMaTextBook-Bold", "MSMincho", "MSPMincho", "MSSerif", "MSReferenceSerif", "MaestroTimes-Regular", "Manorama-Regular", "Marion-Bold", "Martina-Regular", "Menlo-Regular", "Merriweather-Black", "MingLiU", "Minerva-Regular", "Merriweather-Bold", "MinionPro-Regular", "ModernAntiqua", "ModernNo20", "MrsEavesRoman", "MudirMT", "Museo700-Regular", "NafeesWebNaskh", "MyanmarSangamMN-Regular", "NewAthenaUnicode", "NanumMyeongjo-Regular", "NewPeninimMT", "NewPeninimMTInclined", "NewPeninimMT-BoldItalic", "NimbusRomNo9L-Regular", "Norasi-Regular", "Nonfiction-Regular", "NotoNaskhArabic-Regular", "NuevaStd-Regular", "NotoSerif-Regular", "NuevaStd-BoldCond", "NuevaStd-Condensed", "OldCentury", "OpusText", "Nyala", "OdessaLET-Regular", "PTBarnum-BT", "PTSerif-Regular", "PCMyungjo-Regular", "OriyaSangamMN-Regular", "OratorStd", "PalatinoStd", "PanRoman", "Perpetua", "PersiaBT-Regular", "PerpetuaTitlingMT", "PetrucciStd-Regular", "PlayfairDisplay-Regular", "PlantagenetCherokee", "Piranesi-Italic", "PlayfairDisplaySC-Regular", "PoorRichard", "PoplarStd", "PosterBodoniBT-Regular", "PrioriSerifOT-Regular", "PrincetownLET-Regular", "STLiti-Regular", "SerifaBT-Regular", "RockwellStd", "RobotoSlab-Regular", "SWRomans", "SerifaThBT", "SinhalaMN-Regular", "SimSun", "SitkaBanner", "Seville-Regular", "SitkaHeading-Regular", "SitkaSubheading-Regular", "SitkaDisplay-Regular", "SongtiSC-Regular", "SortsMillGoudy", "SourceSerifPro-Regular", "SouvenirLTBT", "Superclarendon-Regular", "SongtiTC-Regular", "Sylfaen", "TeXGyreAdventor", "TeXGyreChorus", "TeXGyreBonum", "TeXGyrePagella", "TeXGyreSchola", "TheatreAntoine", "TeXGyreTermes", "ThorndaleAMT", "ThorndaleVST", "Tinos-Regular", "TirantiSolidLET", "Tinos-BoldItalic", "TlwgTypo", "TrajanPro", "Trocchi-Regular", "TwCenMT-Italic", "URWAntiquaT", "URWPalladioL-Regular", "BookmanStd-Regular", "UmeMincho", "UmePMincho", "UnBatang-Regular", "UniversityRomanLET", "UniversityRomanAltsLET", "UncialAntiqua", "VNI-Bodon", "Utopia", "VNI-Chaucer", "VNI-Cooper", "VNI-Garamond", "VNI-Couri", "VNI-Bodon-Poster", "VNI-Palatin", "VNI-Times", "Verona-Regular", "TimesNewRomanPSMT", "VnTimes", "Vijaya", "VnTimes2", "VogueStd-Bold", "VNI-Goudy", "WPGreekCentury", "Vollkorn-Bold", "WPMultinationalARoman", "WarnockPro-Regular", "Waverly-Regular", "WPMultinationalB-Roman", "Westminster-Regular", "YuMincho-Medium", "YuMincho-Kana", "ZolanoSerifBTN", "AlbertusMedium", "Ceriph05", "BodoniMT", "ComputerModern-Bold", "CMR10", "CMEX12", "CMEX10", "CMU", "CMEX7", "CMBig8", "CMR10Italic", "ComputerModernRoman10", "ComputerModern-BoldItalic", "CMR12", "CMR17", "CMR5", "CMR6", "CMR7", "ComputerModernRoman", "ComputerModernRoman-Regular", "CMTI8", "CMTI12", "CMTI9", "EurM10", "NewYork", "NewCenturySchlbk", "StMary10", "FangSongStd-Regular", "AdobeKaitiStd-R", "AdobeMingStd-Regular", "AdobeSongStd-Light", "BatangChe-Regular", "BiauKai", "LiSung", "CSongGB18030C-Light", "DFKai-SB", "Kaiti", "HGSHeiseiMinchoW3", "HYSWLongFangSong", "KaiTiGB2312", "KaitiSC-Regular", "KaitiTC-Regular", "LiSongPro-Regular", "MSungStd", "MingLiU-ExtB", "NSimSun", "MingLiU-HKSCS", "PMingLiU", "STKaiti-Regular", "STFangsong-Regular", "STSongti-SC-Regular", "STXingkai-Regular", "STZhongSong", "SimSun-ExtB", "WeibeiSC-Regular", "DancingScript", "XingkaiSC-Bold", "KohinoorDevanagari-Medium", "VnMystical", "VnMysticalH", "28DaysLater", "ZWAdobeF", "ActionJackson", "African", "AajaxSurrealFreak", "AirConditioner", "Airstream-Regular", "Algerian", "AliceAndTheWickedMonster", "AlienEncounters", "AlphaClown", "AntFarmGoneCamping", "AppleBoyBTN", "AquaductWarp", "Army", "BadaBoomBB", "Bauhaus93", "Benguiat", "BlackoakStd-Regular", "BladeRunnerMovieFont", "BlackoutRegular", "Blockbuster-Regular", "Boogaloo", "Braggadocio-Regular", "BrokenPlanewing", "BroadwayBT", "BubblegumSans", "BurstMyBubble-Regular", "CandyRoundBTN", "Canter-Bold3D", "Chalkduster", "Chewy-Regular", "Chiller", "CinemaGothicBTNShadow", "CoasterShadow", "ComicRelief", "Coolsville-Regular", "Cracked-Regular", "ColdSpaghettiBTN-Regular", "Creepygirl", "CrackedJohnnie", "CutMeOut", "DirtyHeadline", "DistantGalaxy", "Drivebye3", "Elephant-Regular", "DotMatrix", "CurlzMT", "Ethnocentric-Regular", "Dynalight", "FascinateInline", "FingerPaint", "Flubber-Regular", "Fingerpop-Regular", "FluffySlacksBTN", "Forte-Regular", "GoodTimes", "GelflingSF-Regular", "GaleforceBTN-Regular", "GoudyStout", "GrilledCheeseBTN", "GreekDinerInlineTT", "GrilledCheeseBTToasted", "Gunplay-Regular", "HelterSkelter", "HarryP", "Harrington", "HoboStd", "HennyPenny", "HolidaySpringsBTN", "HolidayPiBT", "HotMustardBTN", "HotMustardBTNPoster", "HollywoodHills", "IMGBaby", "IceKingdom", "ImprintMTShadow", "ItalicOutlineArt", "JazzBT-Regular", "IguanaLover-BTN", "JazzText-Regular", "JazzTextExtended", "Jokerman", "JokermanAlternatesLET", "KingthingsVersalis", "LaBambaLET", "LucidaBlackletter", "MVBoli", "MagicSchoolOne", "MagicSchoolTwo", "LAHeadlightsBTN-Regular", "Magneto-Regular", "MarkerFelt-Wide", "Monoton-Regular", "NeonLights", "NewRocker-Regular", "Metamorphous-Regular", "MekanikLET-Regular", "NightclubBTN-Regular", "NightclubBTN-UltraCn", "MasterOfBreak", "OldAnticDecorative", "PaintStroke", "OldAnticOutlineShaded", "OldEnglishTextMT", "OldAnticOutline", "ParryHotter", "Puppylike", "PTBoldStars", "PartyLET-Regular", "PhosphateInline", "PointedlyMad", "Poster", "Pirate", "PressStart2P", "Pricedown-Bold", "Ravie", "Pricedown", "RazerText-Regular", "Rage-Italic", "SFDistantGalaxy", "RosewoodStd-Regular", "SFDistantGalaxyAltOutline", "SFDistantGalaxyAlternate", "SFSlapstickComic", "SacredGeometry-Regular", "SFSlapstickComicShaded", "SigmarOne", "ShowcardGothic", "SimpleIndustShaded", "SonicX-Bold", "SneakerheadBTN-Regular", "SnapITC-Regular", "SonicCutThru-Bold", "SpaceAge", "SupernaturalKnight", "StarlinerBTN-Regular", "SuperFrench-Regular", "TallBoy3D-Regular", "TerminatorTwo", "Tarzan-Regular", "TanglewoodTales-Regular", "TitanOne", "Unicorn", "TrueLies", "TypeEmbellishmentsOneLET", "Playbill", "VNI-Disney", "VictorianLET", "VirtualDJ-Regular", "VNI-Shadow", "VinetaBT-Regular", "WesternBangBang", "WhimsyTT", "WideLatin", "WolfInTheCity-Regular", "Woodcut-Regular", "XFiles-Regular", "Fantasy", "balonezfantasiabr", "balonezfantasia", "YearSupplyOfFairyCakes", "Simpson", "Surfer", "HarlowSolidItalic", "LucidaConsole", "SourceCodePro-Regular", "LiberationMono", "Cousine-Regular", "Monaco", "DroidSansMono", "VnCourier", "CourierNewPSMT", "CourierNewPS-BoldMT", "AndaleMono", "AnonymicePowerline", "Consolas", "Code2000", "BitstreamVeraSansMono", "Courier", "CousineforPowerline", "CousineBoldItalicforPowerline", "DV1TTYogesh", "DejaVuSansMono", "DroidSansMonoDottedPowerline", "DejaVuSansMono-BoldOblique", "FiraCode-Regular", "FiraMono", "DroidSansMonoSlashedForPowerline", "FiraMono-Bold-Powerline", "FiraMono-MediumPowerline", "FixedMiriamTransparent", "Fixedsys", "FreeMono", "Hack-Bold", "IBM3270-Regular", "Inconsolata-Regular", "LMMono10-Regular", "LMMonoCaps10", "LMMono10-LightCondensed", "Inconsolata-dz-Powerline", "Inconsolata-gforPowerline", "LMMonoSlanted", "LinuxLibertineMonoO", "LiterationMonoPowerline", "LucidaSansTypewriter", "Math4Mono-Regular", "Math3Mono", "Math2Mono-Regular", "Math1Mono", "LucidaSansTypewriter-BoldOblique", "Menlo-Bold", "MesloLGMDZ-Regular", "MesloLG-Regular", "Math5Mono", "MiriamFixed", "MesloLGSDZ-Regular", "MitraMono", "Monospac821BT-Regular", "Monotxt-Regular", "NewRenexTerminal", "NimbusMonoL-Regular", "NotoMono-Regular", "NotoSansMonoCJKjp-Regular", "OCR-A", "OsakaMono", "PrestigeEliteStd", "QuickTypeII-Mono", "RobotoMono-Regular", "RomanMono", "RocketArabicFixed", "SauceCodePowerline", "SWMono-Regular", "SpecialElite", "SASMonospace", "SauceCodePowerline-ExtraLight", "SymbolMonoBT", "Teletype", "Terminal", "TerminalGreek737437G", "TlwgTypewriter-Regular", "Typewriter", "UbuntuMono-Regular", "WPBoxDrawing", "WPGreekCourier", "TeXGyreCursor", "TerminalGreek869", "TlwgMono", "TlwgTypist", "WPMultinationalACourier", "WPMultinationalBCourier", "Courier-Oblique", "WenQuanYiMicroHeiMono", "Mono07", "CMVTT10", "Monoeger05", "MonofurPowerline", "Monooge05", "SaxMono-Regular", "CourierNew", "AppleColorEmoji", "NotoColorEmoji", "ArialRoundedMTBold", "TwemojiMozilla", "NovaRound-Regular", "VAGRounded-BT", "TsukushiBRoundGothic-Regular", "VNIArialRounded", "SFCompactRounded-Regular", "AsanaMath", "DejaVuMathTeXGyre", "EuclidMathOne", "LibertinusMath-Regular", "LatinModernMath-Regular", "EuclidMathTwo", "Math2", "Math4", "Math3-Regular", "Math1", "Math5", "STIXMath", "STIXNonUnicode-Regular", "STIXNonUnicode-BoldItalic", "STIXSizeThreeSym-Regular", "STIXTwoSym-Regular", "SWMath-Regular", "Symath-Regular", "TGPagellaMath", "TGTermesMath", "TeXGyreBonumMath", "TeXGyrePagellaMath", "UniversalMath1-BT", "WPMathA", "WPMathB-Regular", "TeXGyreTermesMath", "WPMathExtendedB", "XITSMath", "WPMathExtendedA", "CMEX8", "CMEX9", "CMI5", "CMI6", "CMI8", "CMI10", "CMMIB10", "CMMI6", "CMMIB7", "CMR8-MediumItalic", "CMSY10", "CMSY5", "CMSY6", "CMSY7", "CMSY9", "MSAM6", "MSAM5", "CMSY8", "MSAM7", "MSAM8", "MSAM9", "MSBM5", "MSAM10", "MSBM10", "MSBM9", "MSBM7-Regular", "MSBM6", "DroidNaskh", "MSBM8-Regular", "KhmerOSsys", "MSDialog", "MSSystemEx", "SanFranciscoDisplay-Regular", "SegoeMDL2Assets", "SystemFontItalicG1", "SystemFontBoldItalicG1", "SystemFontBoldG1", "SystemFontMediumItalicP4", "DroidNaskhUI", "SystemFontRegularG1", "HeitiSC-Light", "AppleSDGothicNeo-SemiBold", "KhmerUI", "HeitiTC-Light", "LaoUI", "MSDialogLight", "MSPGothic", "LeelawadeeUI-Semilight", "MSUIGothic", "MalgunGothicSemilight", "LucidaGrandeBold", "MicrosoftJhengHei", "Meiryo-BoldItalic", "MeiryoUI", "MicrosoftJhengHeiUI", "MicrosoftYaHeiUI", "MicrosoftMHei", "NirmalaUI-Semilight", "NotoSansUI-Regular", "MicrosoftYaHei", "PingFangHK-Regular", "STHeiti-Regular", "SegoeUI", "SegoeUIHistoric", "SegoeUISemilight", "SegoeUISymbol", "SegoeCondensed", "SkypeUISymbol", "SegoeWP-SemiLight", "SegoeWP", "UmeGothic-Regular", "YuGothic-Medium", "YuGothicUI", "YuantiSC-Bold", "YuantiTC-Light", "YuGothicUISemiLight", "SegoeFluentIcons", "HoloLensMDL2Assets", "MSOutlook", "KACSTOffice", "STIXTwoText-Regular", "PingFangHK-Light", "Chilanka-Regular", "Manal-Black", "TwentiethCenturyBold", "MondulkiriU-Regular", "Vn3DH", "VnArabiaH", "VnArabia", "VnAristoteH", "VnBahamas-Bold", "VnBlack", "VnCooperH", "VnCooper", "VnExotic", "VnFree", "VnBlackH", "VnExoticH", "VnFreeH-Regular", "VnKoala", "VnLincoln", "VnKoalaH", "VnLincolnH", "VnLinus", "VnLinusH", "VnPark", "VnMemorandum", "VnParkH", "VnMemorandumH", "VnPresent", "VnPresentH", "VnRevue", "VnRevueH", "VnSouthern", "VnStamp", "VnShelleyAllegro", "VnTeknicalH", "VnTeknical", "VnTifaniHeavy", "VnSouthernH", "VnTime", "VnTifani-HeavyH", "VnVogueH", "VnUniverse", "VnTimeH", "VnVogue", "Barcode39", "Nineteen", "1942Report", "ThickBRK", "ThirtySixDaysAgoBRK", "FiftyOne", "3dsLight", "36pKanaDemibold", "FuturaStd-Book", "Futura-Book", "F56-Regular", "HelveticaNeue-CondensedBlack", "F57", "65Black", "HelveticaNeue-CondensedBold", "67Regular", "8514oem", "ABite", "ASensibleArmadillo", "Absalom-Regular", "ALewis", "Abigail-Regular", "ADMUI2Lg", "ADMUI3Lg", "ADMUI2SM", "ADMUI3SM", "8PinMatrix", "AGaramond", "AIGDT-Regular", "AMGDT-Regular", "AGAArabesque", "AndroidRobot", "ARBlanca", "AR-CARTER", "AR-CENA", "ARDecode-Regular", "ARDestine", "ArcherStd-Regular", "AREssence", "ASTTDurga", "ARJulian", "Fujiyama", "Fujiyama2", "AVFontBen1", "AVFontKan1", "AVFontMal1", "AVFontGuj1", "AVFontSymbol", "AVFontSin1", "AVWebHin1", "Fujiyama-ExtraBold", "AVFontTam1", "AVFontSin", "AVFontHin1", "AVG-Medium-Bold", "AVWebTam1", "Aarcover-Regular", "AVWebTel1", "AardvarkCafe", "Abduction2002", "Abscissa-Italic", "Aberration-Regular", "Aardvark-Bold", "AbstraktRegular", "AcmeFont-Regular", "AdamskySF", "AcadEref-Regular", "AdobeArabic", "AdobeDevanagari", "AddJazz-Regular", "Gurmukhi", "AdmisiDisplaySSi", "AdobeFanHeitiStd", "AdobeHebrew-Bold", "AdobeKaitiStd", "AeroviasBrasilNF", "AdobePiStd", "Aftermath-Regular", "AftershockDebris", "AlBayan", "Akaash-Regular", "AksharUnicode-Regular", "Ahnberg-Regular", "AftershockDebris-CondSolid", "AlNile", "Aldhabi", "AlTarikh", "Alekya-Bold", "Alfredo-Regular", "Alibi-Regular", "Alison-Regular", "AllCaps-Regular", "AllegroStd", "AlmonteSnow", "AlligatorPuree", "AmerTypeMediumBT", "Amerika", "AmdtSymbols", "Analgesics-Regular", "Amethyst-Regular", "Amudham-Regular", "AmerikaAlternates", "AnandapatraCMJ-Regular", "Andong-Regular", "Angiang-Regular", "Ancuu-Regular", "Angstrom-Regular", "AnnRegular", "AnjaliOldLipi", "AngsanaUPC-Regular", "AppleBraille", "AnticFont", "AngiomaAOE", "AppleBraillePinpoint6Dot", "AppleSymbols", "ArabicTransparent", "AquaductPlain", "ArabicTypesetting", "Archicoco-Regular", "Aquaduct-Italic", "Aramis-Italic", "AppleBrailleOutline6Dot", "Archive-Regular", "ArgosMF-Regular", "Arctic-Regular", "ArhialkhanMJ-Regular", "Arkhip", "Ashwariya-Regular", "ArrusBT-Regular", "ArhialkhanOMJ", "Arrobatherapy-Regular", "Asimov-Regular", "Asenine-Regular", "Atlas-Regular", "AtraiMJ-Regular", "Atzur-Regular", "AuroraCnBT", "AtraiOMJ", "Batavia-Regular", "AvantiStd", "B095", "BJCreeUni", "Autumn", "BNJinx", "BNMachine", "BNTTDurga", "BOUTONInternationalSymbols", "BPGClassic99U", "Baamini", "BPGPaataKhutsuriU", "Braddon-Regular", "Baclieu-Regular", "Baghdad", "BaiduanNumber", "Bamini", "BangkokCirilica", "Bahiana-Regular", "BaluBold", "BanglaSangamMN", "BanglaMN", "Barrio-Regular", "BaronNeue-BoldItalic", "BaoliSC-Regular", "Bazooka-Regular", "Bastion-Regular", "BeatnikSF-Regular", "BelfastHeavySF", "BelweCnBT", "BhagirathiMJ-Regular", "BernardCondensed", "BhagirathiOMJ-Regular", "BhairabMJ-Regular", "Bhuma", "BhairabOMJ-Regular", "Bienhoa-Regular", "Bifurk-Regular", "Binhlong-Regular", "BinnerD-Regular", "Blackletter686BT-Regular", "Bobcat-Regular", "BlairMdITCtt", "Binhdinh-Regular", "BodoniOrnaments", "Bolster-Bold", "BoldItalicArt", "BongshaiMJ-Regular", "BongshaiOMJ", "BookshelfSymbol7", "BorhalMJ-Regular", "Borealis-Regular", "BorakOMJ-Regular", "BrahmaputraMJ-Regular", "BorakMJ-Regular", "Brandish-Regular", "BritannicBold", "BrilliantStd-Bold", "Brussels-Regular", "BrowalliaUPC-Regular", "BuiltTitling-Bold", "BuiltTitling-BoldItalic", "BurigangaKamalaOMJ", "BurigangaOMJ", "BurigangaSushreeMJ", "CMedium", "BurigangaMJ-Regular", "Campbell", "BurigangaSushreeOMJ", "Casimira-Regular", "CATIA-Symbols", "C-MediumHWL", "Chanl-Regular", "CLMedi", "CSD16-Regular", "ClarenceStd-Regular", "CSongGB18030C-LightHWL", "CZEC-Regular", "Calvin-Regular", "Camau-Regular", "CDTKhmer", "Camranh-Regular", "Canter-Bold", "Canter-BoldStrips", "Capitals-Regular", "CarbonBlock", "Canter-Outline", "Cantho-Regular", "CarolinaStd-Regular", "Chalkboard", "ChandrabatiMJ-Regular", "ChandrabatiMatraMJ-Regular", "ChandrabatiMatraOMJ-Regular", "ChandrabatiOMJ", "ChessBerlin", "ChessAlpha", "ChessMarroquin", "ChessMaya", "Chinyen-Regular", "Chipotle-Regular", "ChitraMJ-Regular", "ChitraOMJ", "ChitraSMJ-Regular", "ChondanaMJ-Regular", "ChessMerida", "ChandrabatiSushreeMJ", "CityBlueprint-Regular", "Clubland-Regular", "Code39AzaleaNarrow1", "Code39AzaleaNarrow2", "Code39AzaleaRegular", "Code39AzaleaNarrow3", "Code39AzaleaRegular2", "Code39AzaleaRegular3", "Code39AzaleaWide1", "Code39AzaleaWide2", "Code39AzaleaWide3", "Colbert-Regular", "CommercialPi-BT", "ComplexStd-Regular", "ConcursoItalian-BTN", "CopperplateGothicBold", "Copyist-Regular", "CooperBlack", "Cortoba-Regular", "ChondanaOMJ-Regular", "CrystalCF", "Cuulong-Regular", "CountryBlueprint-Regular", "DFMaruGothic-Md", "DSCrystal", "DVTtyogesh", "DYMOSymbols", "Daclac-Regular", "DYMObvba", "Damascus", "David", "DavidTransparent", "DecoTypeNaskh", "DecoTypeNaskhExtensions", "DecoTypeNaskhSpecial", "Decor", "DecoTypeNaskhVariants", "Deepa-Regular", "DecoTypeThuluth", "DecoTypeNaskhSwashes", "Deepak-Regular", "Deneane-Regular", "DevanagariMT", "DevanagariSangamMN", "DhanshirhiOMJ", "DholeshwariMJ-Regular", "DhakarchithiMJ-Regular", "DhakarchithiOMJ-Regular", "DhanshirhiMJ-Regular", "DholeshwariOMJ-Regular", "DhonooMJ-Regular", "DhonooOMJ", "DhorolaMJ-Regular", "DhorolaOMJ", "DigifaceWide-Regular", "Digifit-Regular", "Diavlo-Bold", "Divya-Regular", "DilleniaUPC-Regular", "DigitalReadoutUpright", "DiwanKufi", "DiwanThuluth", "DiwaniBent", "DiwaniLetter", "DokChampa", "Dot", "DiwaniSimpleStriped", "DiwaniSimpleOutline", "DiwaniOutlineShaded", "Dollar", "Drivebye1", "DroidArabicNaskh", "DroidNaskhShift", "DroidNaskhShiftAlt", "Dyname-BlackSSK", "Dyuthi-Regular", "ELEGANCE", "ElangoTMLPanchaliNormal", "Ducmy-Regular", "Ellis-Regular", "ENGL-Bold", "EQUIS-Regular", "Excess-Regular", "ESTO-Regular", "EccentricStd", "EkusheyPunarbhaba", "ElegantIcons", "EmbassyBT", "Emmett-Regular", "EngraverFontExtras", "EstrangeloEdessa", "Enliven-Regular", "EuclidExtra", "EthiopiaJiret", "EuroSign", "EucrosiaUPC-Regular", "EuphemiaUCAS-Italic", "EuclidSymbol", "Feliz-Regular", "FMLAkhila", "FMLIndulekha", "FMLLeela", "FMLIndulekhaHeavy", "FMLKarthika", "FMLLeelaHeavy", "FMLMohini", "FMLNanditha", "FMLPadmanabha", "FMLRevathi", "FMLSruthy", "FMLTTAmbili", "FML-TTAnjali", "FMLTTAnakha", "FMLTTAparna", "FML-TTAshtamudi", "FML-TTAswathi", "FMLTTAtchu", "FML-TTAshtamudiExBold", "FML-TTAyilyamBold", "FMLTTBeckal-Bold", "FMLTTChandrika", "FMLTTBhavana", "FMLTTChithira", "FMLTTDevika", "FMLTTChithiraHeavy", "FMLTTGauri", "FML-TTGeethika", "FMLTTGopika", "FMLTTGauriHeavy", "FMLTTIndulekha", "FMLTTJaya", "FMLTTIndulekhaHeavy", "FML-TTJyotsna", "FMLTTGuruvayur", "FML-TTJyothy", "FMLTTKala", "FMLTTKamini", "FMLTTKanika", "FMLTTKarthika", "FMLTTKaumudi", "FML-TTKeerthi", "FMLTTLeela", "FMLTTLeelaHeavy", "FML-TTMalavika", "FMLTTMangalaExBold", "FMLTTMadhaviExBold", "FMLTTMayoori", "FMLTTNandini", "FMLTTNanditha", "FMLTTNila", "FMLTTOnam", "FMLTTNarmadaExBold", "FMLTTPeriyar", "FMLTTPoornima", "FML-TTPooram", "FMLTTNalini", "FMLTTRavivarma", "FMLTTRevathi", "FMLTTSabari", "FMLTTRohini", "FML-TTSarada", "FMLTTSugatha", "FMLTTSruthy", "FMLTTSankara", "FML-TTSwathyBold", "FML-TTSuparna", "FMLTTThakazhi", "FMLTTTheyyam", "FMLTTThiruvathira", "FML-TTVaisali", "FMLTTVarsha", "FMLTTVeenaHeavy", "FMLTTThunchan", "FMLTTVinay", "FML-TTSurya", "FMLTTVisakham", "FMLTTVishu", "FMLTTYashasri", "FMLTTAathira", "FREH-Regular", "FTEasci1", "FTEasci1-f", "FTEbaudo-Regular", "FTEasci2", "FTEbaudo-f", "FTEebcd1", "FTEasci2-f", "FTEebcd1-f", "FTEebcd2-f", "FTEspec-Regular", "FTEspecf", "FTEebcd2", "Farah-Regular", "FarsiSimpleOutline", "FarsiSimple-Bold", "Farisi-Regular", "FZLanTingHeiS-UL-GBK", "Fences-Regular", "FerroRosso", "FinaleMallets", "FinaleAlphaNotes", "FinalePercussion", "FordLineDraw", "FinaleNumerics", "Fren-Regular", "FreesiaUPC-Regular", "GB18030Bitmap", "FontAwesome5Free", "GDTRegular", "GENISO-Regular", "GFZemenUnicode", "TTAvantika", "GlyphiconsHalflings", "Genuine", "Ganesh-Black", "Grobold", "Ganesh-Bold", "Ganesh-ExtraBold", "Ganesh-Medium", "GaneshNarrow-Regular", "Ganesh-Thin", "GangaMJ-Regular", "GangaOMJ-Regular", "Garuda-Regular", "Gauge-Regular", "Gautami", "Gayathri", "GenW01-Regular", "GangaSagarMJ-Regular", "Gazzarelli-Regular", "Germ", "GhorautraMJ-Regular", "Giadinh-Regular", "Giolinh-Regular", "Gocong-Regular", "Glockenspiel-Regular", "GoomtiMJ-Regular", "GoraiOMJ", "GoraiMJ-Medium", "GothamLightItalic", "Gravity-Regular", "GreekC", "GreekS", "Gridnik-Regular", "Gulim", "GujaratiMT-Bold", "GujaratiSangamMN", "GulimChe", "GrilledCheeseBTN-WideBlack", "GungSeo-Regular", "Gungsuh", "GungsuhChe-Regular", "GurmukhiMN", "Hana", "GuttmanYad", "GurmukhiSangamMN", "Herman", "HGHangle", "HGHeiseiMinchoW3", "HGHeiseiMinchoW9", "HGHeiseiKakugothictaiW9", "GhorautraOMJ", "HGPHeiseiKakugothicW9", "HGPHeiseiMinchoW3", "HGSHeiseiKakuGothicW3", "HGSHeiseiMinchoW9", "HGSHeiseiKakugothicW5", "HPPsgd", "Hadong-Regular", "Huntson-Regular", "HKSCS-ExtB", "HKSCS-Regular", "HGPHeiseiMinchoW9", "HGSHeiseiKakuGothicW9", "HaldaMJ-Regular", "Halong-Regular", "HaldaOMJ", "HannotateSC-Regular", "Hansen-Regular", "HannotateTC-Regular", "HariSree-Regular", "HanziPenTC-Bold", "HanziPenSC-Bold", "Harvest-Italic", "HarvestRegular", "HaxtonLogosTT", "HeatherBTN-Regular", "HeadLineA-Bold", "HeavyFont", "HeavyHeap-Regular", "Hoian-Regular", "Herculanum", "HighlightLET", "HoboStd-Medium", "Hombre-Regular", "HucklebuckJF-Regular", "Hue", "HooglyOMJ", "HooglyMJ-Regular", "IDAutomationPDF417n2", "IMGExtreme", "IDAutomationPDF417n5", "IDAutomationPDF417n3", "IMGSeasons", "IDAutomationPDF417n4", "IMGSymbols", "InspectionXpertGDTFrames", "IMGTravel", "IRIS-Regular", "InspectionXpertGDTNoForms", "Isabelle-Regular", "ISOCP-Regular", "ISOCP2", "ISOCP3", "ISOCT-Regular", "ISOCT2", "ISOCT3", "ISOCTEUR", "ITCAvantGardeStd-Book", "IchamotiMJ-Regular", "IchamotiOMJ", "ImpregnablePersonalUseOnly", "InaiMathi", "Incised901-BoldCn", "Incised901CTBT", "Incised901Std-Nd", "Incised901-BookItalic", "Induction-Regular", "Industrial736BT-Regular", "IrisUPC-Regular", "ItalicStd", "IskoolaPota", "ItalicC", "ItalicT", "JLSSpaceGothicCNC", "JUSTICE-Regular", "JLSSpaceGothicRNC", "JaJaDiMJ", "JaJaDiOMJ", "Janaranjani-Regular", "Jayanthi", "JazzPerc", "JomunaMJ-Regular", "JuiceITC-Regular", "JameelNooriNastaleeq", "Jwala", "JumunaOMJ", "KN-TTUma", "KBVibrocentric", "JugantorMJ-Regular", "Kabin-Bold", "JazzCord-Regular", "KacstArt", "KacstBook", "KacstDecorative", "KacstDigital", "KacstLetter", "KacstFarsi", "KacstNaskh", "KacstOffice", "KacstOne", "KacstPoster", "KacstPen-Regular", "KacstQurn", "KacstScreen", "KacstTitle", "Kailasa-Regular", "KacstTitleL-Regular", "KalegongaMJ-Regular", "KalegongaOMJ", "Kalakaumudi-Regular", "KalindiSMJ-Regular", "KalindiMJ-Regular", "KalindiOMJ", "Kalpurush", "KalpurushANSI", "Kanalisirung-Regular", "KanchanMJ-Regular", "KannadaMN-Regular", "KanchanOMJ-Regular", "KannadaSangamMN", "KasseFLF-Regular", "Kedage-Regular", "Kefa-Regular", "KeralaRegular", "KhSrokKhleang", "KhalidArt-Bold", "Khanhoa-Regular", "KhmerOS", "KhmerOSFasthand", "KhmerOSFreehand", "KhmerMN", "KhmerOSMetalChrieng", "KhmerOSMuol", "KarnaphuliOMJ-Regular", "KhmerSangamMN", "KievitPro-Regular", "Kinnari-Regular", "Klee", "Kiran-Regular", "KodchiangUPC-Regular", "Kokonor-Regular", "KohinoorDevanagari-Regular", "KohinoorBangla-Bold", "KohinoorBangla-Semibold", "Krungthep", "KtavRegular", "KufiExtendedOutline", "KrutiAstro", "Kumudam-Regular", "KufiStandardGK", "Kundli-Regular", "KufiOutlineShaded", "LCD", "KundliEnglish", "LETTERRS", "Livingwell-Regular", "LTETRamya", "LT-TM-Barani", "LKLUG-Regular", "LT-TM-Lakshman", "LTHYSZK", "Laksaman-Regular", "KohinoorTelugu-Regular", "KarnaphuliMJ-Regular", "LantingheiTC-Regular", "LaoMN-Regular", "LantingheiTC-Extralight", "LantingheiSC-Regular", "LaoSangamMN-Regular", "LatinoElongatedLETPlain", "LearningCurveDashedPro", "Lapidary333-Bold", "LearningCurvePro", "Led-Italic", "LetterOMatic-Regular", "LeituraDisplaySwashes", "Leelawadee", "LibelSuit-Regular", "LiHeiPro-Regular", "LibianSC-Regular", "LightSC-Regular", "Likhan-Regular", "LilyUPC-Regular", "Limousine", "Linowrite-Regular", "LingoesUnicode", "Logo3Mtt", "Logo3Mv3tt", "LithosPro-Regular", "LohitBengali", "LohitDevanagari", "LohitGujarati-Regular", "LohitTamil-Regular", "LohitHindi-Regular", "LunaBar", "LohitPunjabi", "Mandela", "MarketPro-Regular", "MatterOfFact-Regular", "Maximo-Regular", "MLIndulekhaHeavy", "MLNILA01", "MLNILA03", "MLNILA02", "MLNILA04", "MLNILA05", "MLNILA07", "ML-TTAathira", "ML-TTAnakha", "MLTTAmbili", "MLTTAnjali", "MLTTAparna", "ML-TTAshtamudi", "MLTTAswathi", "ML-TTAshtamudiExBold", "MLNILA06", "ML-TTAtchu", "ML-TTAyilyam-Bold", "MLTTBhavana", "ML-TTBeckal-Bold", "MLTTChandrika", "MLTTChithira", "MLTTChithiraHeavy", "MLTTGauri", "MLTTGauriHeavy", "ML-TTGeethika", "MLTTDevika", "MLTTGopika", "MLTTGuruvayur", "MLTTIndulekha", "MLTTIndulekhaHeavy", "MLTTJaya", "ML-TTJyothy", "MLTTJyotsna", "MLTTKala", "MLTTKarthika", "MLTTKanika", "MLTTKaumudi", "MLTTLeela", "MLTTKeerthi", "MLTTMadhaviExBold", "MLTTMalavika", "MLTTMangalaExBold", "MLTTLeelaHeavy", "MLTTNandini", "MLTTNarmadaExBold", "MLTTMayoori", "MLTTNalini", "MLTTNila-Regular", "MLTTNanditha", "MLTTOnam", "MLTTPeriyar", "ML-TTPooram", "ML-TTPoornima", "MLTTRevathi", "MLTTRavivarma", "MLTTSabari", "MLTTRohini", "MLTTSankara", "MLTTSarada", "MLTTSruthy", "MLTTSugatha", "ML-TTSuparna", "MLTTSurya", "MLTTSwathy-Bold", "MLTTThakazhi", "MLTTThiruvathira", "MLTTThunchan", "ML-TTVaisali", "ML-TTTheyyam", "MLTTVarsha", "MLTTVeenaHeavy", "MLTTKamini", "MLTTVisakham", "MLTTYashasri", "MLTTVishu", "ML1-TTAmbili", "MLTTVinay", "ML1-TTAswathi", "ML1-TTIndulekha", "MLB-TTAmbili", "MLUPanini", "MLB-TTIndulekha", "MLB-TTAswathi", "MMArrow", "MMBinary", "MLW-TTKarthika", "MMCenturyNew-Regular", "MMCenturyOld", "MMCenturyNewRD-Regular", "MMEtc-Regular", "MMNegate", "MMExtra-Regular", "MMGreek", "MMSchoolRD-Regular", "MMTextBook-Regular", "MMTextBook-Bold", "MMVariable", "MMVariable2", "MMVariableA", "MMRelation-Regular", "MMVariableB", "MMVariableC", "MMVariableD-Regular", "MMVariableF-Regular", "MMaArrow", "MMaBinarySS", "MMaCenturyKSS", "MMaArrowSS", "MMaEtcSS", "MMaFermat", "MMaExtra", "MMaEtc", "MMaExtraSS", "MMaGreek", "MMaGreekS", "MMaGreekSS", "MMaNegate", "MMaNegateSS", "MMaPascal", "MMaRelation", "MMaRelationSS", "MMaTextBook", "MMaVariableSS", "MMaVariable", "MMaVariable2", "MMaVariableASS", "MMaVariable2SS", "MMaVariableB", "MMaVariableA", "MMaBinary", "MMaGauss", "MMaCenturyKS-Regular", "MMaVariableBSS", "MMaVariableD", "MMaVariableDSS", "MMaVariableF", "MSReference1", "MMaVariableC", "MMaVariableCSS", "MTExtraTiger", "MTExtra", "MSReferenceSpecialty", "MYingHei-Regular", "Mael-Regular", "MaestroStd", "MaidenOrange", "MaestroPercussion", "MalayalamMN-Regular", "Manorly-Regular", "Mangal", "Mallige-Regular", "MapSymbols-Regular", "MapInfoCartographic", "Marion-Regular", "Marlett", "MarquisetteBTN-Regular", "MarquisetteBTN-Lined", "Mathilde-Regular", "Medlin-Regular", "MayencePremium", "MalayalamSangamMN", "Meera", "MelodBold", "Microdot-Regular", "MicrosoftTaiLe", "Himalaya", "NewTaiLue", "MesquiteStd-Regular", "MicrosoftYiBaiti", "MicrosoftUighur", "Miama-Regular", "Minisystem-Regular", "MingLiU-HKSCS-ExtB", "Miriam", "MiriamTransparent", "MishafiGold", "Ml-Regular", "ModernNo.20", "ModenaPrinted", "MongolianBaiti", "MonaLisaSolidITCtt", "MonotypeSorts", "MonotypeKoufi", "Monotype.com", "MoonFlower-Bold", "MoolBoran-Regular", "MotoyaLMaru-Regular", "MotoyaL-Cedar", "Mshtakan-Regular", "Muna-Regular", "Mshtakan-BoldOblique", "MyanmarMN", "MyriadArabic", "MyriadHebrew-Regular", "Mycalc", "Mytho-Regular", "MyanmarSangamMN-Bold", "NaturalBorn", "NBPInformaFiveSix", "NBPInformaFiveThree", "NORMAL", "Nadeem", "Nasalization", "NewtonPhoneticABBYY", "NewRenexSpecialGraphics", "NiagaraEngraved-Regular", "NiagaraSolid", "NinaRegular", "NixieOne", "NixieOne-Regular", "Notethis", "NoFlash", "NotoKufiArabic-Regular", "Noteworthy-Bold", "Notram-Regular", "NotoSansCuneiform-Regular", "NovemberStd-Regular", "NovaCut-Regular", "NuevaStd-BoldCondensedItalic", "TTSarala", "OliveOil-Regular", "OpenClassic-Regular", "OldAntic-Bold", "OneDance-Bold", "OpineHeavy", "Onyx-Regular", "OpusStd", "OpusChords", "OpusFiguredBassExtras", "OpusFunctionSymbols", "OpusFiguredBass", "OpusJapaneseChords", "OpusMetronome", "OpusNoteNames", "OpusPercussion", "OpusOrnaments", "OpusPlainChords", "Origin-Regular", "OpusSpecial", "OpusRomanChords", "OratorStd-Medium", "OratorStdSlanted", "OriyaMN", "Osaka", "OriyaSangamMN-Bold", "OskiDakelh-Regular", "PFFuelPro-Regular", "POLI-Regular", "PN-TTAmar", "PMingLiU-ExtB", "Pretext-Regular", "PTBoldBroken", "PTBoldDusky", "PTBoldArch", "PRCelticNarrow", "PTBoldMirror", "PTSeparatedBalloon", "PTSimpleBoldRuled", "Papyrus", "Paralucent-Bold", "ParisianBT", "Parvathi-Bold", "ParkAvenueBT-Regular", "Parvathi-Thin", "Parvathi-Medium", "Penultimate-Regular", "Pegypta-Regular", "Penultimate-Light", "Pegasus-Regular", "Penultimate-LightItal", "Phatdiem", "PhetsarathOT", "PhnomPenhOT", "PhotoshopLarge", "PickwickStd-Regular", "Pigiarniq-Regular", "PilGi-Regular", "Phrastic-Medium", "PondFreeBoss", "PondAllRounder-Regular", "PondFreeMe", "PondFreeZoo", "PortagoITC-TT", "PoplarStd-Black", "PowerClear", "Pothana", "Pothana2000", "PowerGreen", "PowerRedandBlueIntl", "Praveen", "PowerRedandBlue", "Prema-Regular", "PowerRedAndGreen", "Proxy1", "Pujeeta-Regular", "PujeetaNarrow", "PrisonerSF-Regular", "PujeetaSpecial", "Pythagoras-Regular", "QuickTypeII", "Qaskin-Black", "QuickTypeII-Pi", "QTOptimum-Regular", "Quinhon-Regular", "Quiver-Italic", "Quangngai-Regular", "Radagund-Regular", "QumpellkaNo12", "Ruma", "Raanana-Regular", "Rachana-Regular", "Rachana", "Radha-Regular", "Rachgia-Regular", "Raavi", "Raghindi-Regular", "RaghuMalayalam-Regular", "RazerHeader-Light", "RaisinDesSables", "Rakesly-Bold", "RakeslyUl", "Reginet-Regular", "RealVirtue", "Rakesly-Regular", "Reswysokr-Regular", "Rekha", "RomanT", "Ribbon-Bold", "Rod-Regular", "RomanD-Regular", "RomanC", "RupeeForadian", "RowdyHeavy", "RodTransparent", "RomanS", "SAF-Regular", "Rumburak-Regular", "SAPGUI-Icons", "SC", "SDTTSurekh", "SFMoviePoster", "Radha-Bold", "SerifB", "SHELMAN-Regular", "SAPIcons", "SAPDings", "Span-Regular", "SWAstro-Regular", "STXinwei-Regular", "SWED-Regular", "SWComp-Regular", "SWGothe-Regular", "SolidworksGDT", "STHupo-Regular", "SWGDT-Regular", "SWGrekc", "SWIsop3-Regular", "SWGamekeysMT", "SWIsot1-Regular", "SWIsop2-Regular", "SWIsot2-Regular", "SWIsot3-Regular", "SWIsop1-Regular", "SWGreks-Regular", "SWItal", "SWITCIT", "SWLink-Regular", "SWItalt", "SWMap-Regular", "SWMeteo-Regular", "SWMusic", "SWRomnd-Regular", "SWRomnc-Regular", "SWMacro", "SWScrpc-Regular", "SWRomnt-Regular", "SWSimp-Regular", "TrajanPro-Regular", "SWTxt-Regular", "SabrinaStd", "SaiEmbed-Regular", "SaiMeera-Regular", "SaiVrishin-Regular", "Saab-Regular", "SaiSai-Regular", "SakkalMajalla", "SaiIndira-Regular", "SaintAndrewdesKiwis", "Salina-Regular", "SamsungImagination-Regular", "Sana-Regular", "Salilam-Regular", "Sanpya-Regular", "Sanskrit", "Samathwa", "Sasfont", "Sathu-Regular", "SeagullAPL-Regular", "SceptreStd", "SchoolHousePrintedA", "SanskritNew", "Selena-Regular", "SherwoodStd-Regular", "SegoeMarker", "ShreeKan0853", "Shruti", "ShreeTelugu0900-Regular", "Signboard-Regular", "ShreeDevanagari714-Regular", "ShreeMal0502", "ShonarBangla", "Silom-Regular", "SimHei", "SimpleBoldJutOut", "SimpleOutlinePat", "Simplex-Regular", "SimplifiedArabic", "SimplifiedArabicFixed", "SilentReaction", "SinhalaMN-Bold", "SimpleIndust-Outline", "SinhalaSangamMN-Regular", "SixCaps-Regular", "SketchBlock", "SiyamRupaliANSI", "SiyamRupali", "SketchMatch", "SketchRockwell", "Skinny-Regular", "SmallFonts", "SmartyPantsBTN", "Smooth", "Sniglet-Regular", "Socket-Regular", "Snowdrift-Regular", "Smokum-Regular", "SmartGothic-Regular", "Splash-Regular", "Sosa-Regular", "Steamer-Regular", "StMarieThin", "Staccato222BT", "StandardSymbolsL", "StencilStd", "StephenScript", "SteppesTT", "SpaceBoldBT", "Storybook-Regular", "SubwayRegular", "SunExtA", "SutonnyMJ-Regular", "Syastro-Regular", "SutonnyOMJ-Regular", "SymbolMT", "Symap-Regular", "TAB", "Symusic", "Suruma-Regular", "TACBarathi", "Symeteo-Regular", "TAC-Kabilar", "TAC-Kambar", "SynchroLET-Regular", "TACValluvar", "TAM", "TAMShree800", "TAMKavi", "TAMElango", "TAMILFIX", "TAMLKamban", "TAMILLATIN", "TAU-Kabilar", "TAUBarathi", "TAU-Valluvar", "TITUSCyberbitBasic", "TLArabic-Regular", "TLPashto", "TAU-Kambar", "TL-TTHemalatha", "TAU-Kaveri-Regular", "Trial-Regular", "TSCu", "TallBoyWest", "TURK-Regular", "TLUrdu-Regular", "TM-TTValluvar", "TMBW-TTValluvar", "Tamburo-Regular", "TamilMN", "TamilAiswarya", "TeamViewer10-Regular", "TeamViewer11-Regular", "TamilSangamMN", "TeamViewer-Regular", "TeamViewer13-Regular", "TeamViewer7-Regular", "TeamViewer12-Regular", "TeX", "TechnicLite-Regular", "TeenStd-Regular", "Technical", "TeleMarines", "TektonPro", "TerminatorRealNFI", "TeluguMN", "TeluguSangamMN", "TeamViewer9-Regular", "TeraSpecial", "TextilePiEF", "Thanhoa-Regular", "ThoolikaUnicode-Regular", "ThrowMyHandsUpInTheAir", "Tiger", "TigerExpert", "TibetanMachineUni", "Timeless-Regular", "TraditionalArabic", "Tristan-Regular", "TtsNote", "Tubular-Regular", "Toledo-Regular", "Tuyenduc-Regular", "TypeEmbellishmentsOneLET-Plain", "Txt-Regular", "Tunga", "TypoUprightBT-Regular", "Ultra", "Umpush-Regular", "UnDinaru-Regular", "UnGraphic-Regular", "UnPilgi-Regular", "UnitedStates-Regular", "Uqammaq-Regular", "UnknownCallerBTN-SC", "UnGungseo-Regular", "Untitled1", "UrduNaskhAsiatype", "Urvasi-Regular", "UrduTypesetting", "Uttara-Regular", "Utsaah-Regular", "VISCII-Sample-Font", "VANAVIL-Avvaiyar", "VN-NTime", "VNIGreece", "VNICambodia", "VNILao", "VNI-Russia", "VNI-Algerian", "VNI-Allegie", "VNI-Ariston", "VNI-Auchon", "VNI-Avo", "VNI-Awchon", "VNI-Aztek", "VNI-Baybuom", "VNI-Bandit", "VNI-Aptima", "VNI-Bazooka", "VNI-Book", "VNI-BostonBlack", "VNI-Briquet", "VNI-Bragga", "VNI-Broad", "VNI-Butlong", "VNI-Centur", "VNI-Commerce", "VNI-Coronet", "VNI-DOS", "VNI-DesdemonaU", "VNI-Colonna", "VNI-Diudang", "VNI-Dom", "VNI-Duff", "VNI-Dur", "VNI-Fato", "VNIFranko", "VNI-Fillmore", "VNI-Free", "VNIHLThuphap", "VNI-Harrington", "VNI-GlabXb", "VNIHobo", "VNIHeather", "VNIJuni", "VNI-Jamai", "VNI-InternetMail", "VNI-Linus", "VNI-Korin", "VNILithos", "VNI-Kun", "VNI-Maria", "VNIMeli", "VNI-Lydi", "VNI-Netbut", "VNI-Murray", "VNI-Nhatban", "VNIPresent", "VNI-Park", "VNI-OngDoHL", "VNIRevue", "VNI-Slogan", "VNI-ShellaL", "VNI-Souvir", "VNIStageCoach", "VNI-Standout", "VNI-Thanhcao", "VNI-Thufap1", "VNI-Thufap3", "VNIStencilU", "VNI-Thufap2", "VNI-Stylus", "VNI-Tekon", "VNI-Thufapfan", "VNI-Truck", "VNI-Tubes", "VNI-Top", "VNI-Vari", "VNI-Univer", "VNI-Vivi", "VNI-WINSampleFont", "VNIWideLatin", "VNI-Viettay", "VNIWhimsy", "VNIYahoo", "VNI-Zap", "VTCTribal-Regular", "Vagabond-Regular", "Valluvan", "Valken-Regular", "Vani", "Vikatan-Regular", "Vemana2000", "Vinhan-Regular", "VisitorTT2-Bold", "VisualGeezUnicode", "VisualGeezUnicodeAgazian", "VisitorTT1-BRK", "VisualGeezUnicodeTitle", "Vonique64", "VoyagerNBP-Regular", "WPArabicSihafa", "Vrinda-Regular", "WPArabicScriptSihafa", "WPCyrillicA", "WPCyrillicB", "WPIconicSymbolsA", "WPHebrewDavid", "WPJapanese", "WPPhonetic", "WST", "WPTypographicSymbols", "WPIconicSymbolsB", "WSTCzec", "WSTEngl", "WSTFren", "WST_Germ", "WSTSpan", "WSTItal", "WSTSwed", "WalterTurncoat", "Waree-Regular", "Warsaw-Regular", "WawatiSC-Regular", "WebServeroff", "WawatiTC-Regular", "Webdunia-Regular", "WeibeiSCBold", "Waseem-Regular", "Wellfleet-Regular", "Wingdings", "WeibeiTC-Regular", "WestwoodLET-Regular", "WolfInTheCity-Light", "XingkaiSC-Regular", "XpressSF-Regular", "YD2002", "Webdings", "XpressHeavySF", "YuantiSC-Regular", "YesevaOne", "XeroxMalfunctionBRK", "YuppySC-Regular", "Xirod-Regular", "YuantiTC-Regular", "YuppyTC", "Zar11F8", "Z@R123A", "Zar120A", "Z@R13D5", "Zar16EB", "Zar16FD", "R170E", "Zar1720", "Zar1751", "Zar1774", "Zar1816Regular", "Zar183A", "Z@R1828", "Zar184B", "Zar185D-Regular", "Zar1762", "R277-Regular", "Zar195D", "ZapfElliptBT", "Zirkon-Regular", "Zuzumbo-Regular", "akaDora-Regular", "AeStd", "Amaze-Regular", "Athletic-Regular", "AtMostSphere-Regular", "Bart", "Balthazar", "Bimini", "Cafeta-Regular", "Boot", "ChalkboardSE-Regular", "Classic10", "Cmbsy10", "CochinStd-BoldItalic", "Cmbsy7", "Cmbsy6", "Cmbsy9", "Cmdunh10", "CMIT10", "CMSSLT10", "CMSSBI8", "CMTCsc10", "CMSS12Italic", "CMTeX8", "CMTI7", "Cnefont", "Cnefonts", "CMTeX9", "Copy08", "EuclidEx10", "DBLDWRSW", "Euex9-Regular", "Euex7-Regular", "EurEur", "EuclidBold6", "EuclidBold5", "EuclidBold7", "EuclidBold8", "EuclidMath10", "EuclidBold9", "EuclidBold10", "EuclidMath5", "EuclidMathRegular", "Eurbd10", "EuclidMath8", "EurB7", "EurB6", "EurB8", "EurostileBold", "EurB9", "EurM5", "EurM6", "EurM8", "EurM7", "EurM9", "EuclidSans-Bold", "EuclidMedium", "Eusm7", "EuclidMath5-Regular", "EuclidMediumItalic", "FakeFont2", "FoxInTheSnow", "Gargi-Regular", "Hooge04", "ISO08", "JPN", "Kawoszeh", "Koruri-Regular", "Lcircle10", "Kroeger04", "Lcirclew10", "Header08", "LCMSS8-Regular", "LCMSSIB8", "Line10", "Lettau06", "Linew10", "ModStMary10", "Mryad", "OldDreadfulNo7-BT", "Ori1Uni", "PumpDemiBoldLet", "Roland-Regular", "MixtapeMike", "Schoenecker10", "SignsNormal", "Spinwerad-Regular", "SmartWatch-Regular", "Standard07", "Terk-Regular", "Uni05", "Trendy-Regular", "Type07", "Vivian-Regular", "W01-Regular", "WGL4", "Western"]
};
module.exports = fontsVersion2;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/detector/CanvasFontDetector.js":
/*!*********************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/detector/CanvasFontDetector.js ***!
  \*********************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var FontDetector_1 = __importDefault(__webpack_require__(/*! ./FontDetector */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/detector/FontDetector.js"));
/**
 * CanvasFontDetector
 * Detects font availability using the canvas text measurement technique.
 */
var CanvasFontDetector = /*#__PURE__*/function (_FontDetector_1$defau) {
  function CanvasFontDetector(domUtils) {
    var _this;
    _classCallCheck(this, CanvasFontDetector);
    _this = _callSuper(this, CanvasFontDetector);
    _this._domUtils = domUtils;
    _this._testText = "AaBb123!@#            "; // Sample text for measurement
    _this._fontSize = "48px"; // Font size for measurements
    _this._canvas = null; // Reusable canvas element
    _this._context = null; // Cached 2D context
    return _this;
  }
  /**
   * Detects the availability of a specified font.
   * Compares the width of the font's rendering against a fallback font.
   *
   * @param {string} fontName - The name of the font to check.
   * @returns {Promise<boolean>} Resolves to `true` if the font is available, `false` otherwise.
   */
  _inherits(CanvasFontDetector, _FontDetector_1$defau);
  return _createClass(CanvasFontDetector, [{
    key: "detect",
    value: (function () {
      var _detect = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(fontName) {
        var fallbackWidth, testWidth;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              if (!this._hasReleased) {
                _context.n = 1;
                break;
              }
              throw new Error('CanvasFontDetector has been released and is no longer usable. Please create a new instance to use the detector.');
            case 1:
              if (this._initialized) {
                _context.n = 2;
                break;
              }
              _context.n = 2;
              return this._initialize();
            case 2:
              // Measure the width with fallback font only
              this._context.font = "".concat(this._fontSize, " \"non-existed-font\", non-existed-fallback");
              fallbackWidth = this._context.measureText(this._testText).width; // Measure the width of the test font with the given fontFamily as fallback
              this._context.font = "".concat(this._fontSize, " \"").concat(fontName, "\", non-existed-fallback");
              testWidth = this._context.measureText(this._testText).width; // Compare the test width against the fallback width
              return _context.a(2, testWidth !== fallbackWidth);
          }
        }, _callee, this);
      }));
      function detect(_x) {
        return _detect.apply(this, arguments);
      }
      return detect;
    }()
    /**
     * Releases resources by cleaning up cached data and canvas elements.
     */
    )
  }, {
    key: "release",
    value: (function () {
      var _release = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.n) {
            case 0:
              this._hasReleased = true;
              this._canvas = null;
              this._context = null;
            case 1:
              return _context2.a(2);
          }
        }, _callee2, this);
      }));
      function release() {
        return _release.apply(this, arguments);
      }
      return release;
    }()
    /**
     * Checks if the canvas-based font detection system is supported by the browser.
     *
     * @returns {boolean} True if canvas is supported, false otherwise.
     */
    )
  }, {
    key: "isSupported",
    value: function isSupported() {
      try {
        var canvas = document.createElement('canvas');
        return Boolean(canvas.getContext && canvas.getContext('2d'));
      } catch (_unused) {
        return false;
      }
    }
    /**
     * Ensures the canvas-based font detection system is initialized.
     * Sets up the canvas for text measurements.
     *
     * @returns {Promise<void>} Resolves when initialization is complete.
     */
  }, {
    key: "_initialize",
    value: (function () {
      var _initialize2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {
        return _regenerator().w(function (_context3) {
          while (1) switch (_context3.n) {
            case 0:
              _context3.n = 1;
              return this._domUtils.awaitWindowDocumentReady(window);
            case 1:
              // Set up canvas and context
              this._canvas = document.createElement('canvas');
              this._context = this._canvas.getContext('2d');
              this._context.textBaseline = 'alphabetic';
              this._context.direction = 'ltr';
              this._initialized = true; // Mark as initialized
            case 2:
              return _context3.a(2);
          }
        }, _callee3, this);
      }));
      function _initialize() {
        return _initialize2.apply(this, arguments);
      }
      return _initialize;
    }())
  }]);
}(FontDetector_1["default"]);
exports["default"] = CanvasFontDetector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/detector/FontDetector.js":
/*!***************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/detector/FontDetector.js ***!
  \***************************************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * FontDetectorInterface
 * Defines the required methods for a font detector implementation.
 */
var FontDetector = /*#__PURE__*/function () {
  function FontDetector() {
    _classCallCheck(this, FontDetector);
  }
  return _createClass(FontDetector, [{
    key: "detect",
    value: (
    /**
     * Checks the availability of a group of fonts.
     * @param {Array<string>} fontName - A font name to check.
     * @returns {Promise<Array<string>>} A promise that resolves with the list of detected fonts.
     * @throws {Error} Throws an error if the number of fonts exceeds the allowed limit.
     */
    // eslint-disable-next-line no-unused-vars
    function () {
      var _detect = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(fontName, fontFamily) {
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              throw new Error('Method "checkFontList" must be implemented.');
            case 1:
              return _context.a(2);
          }
        }, _callee);
      }));
      function detect(_x, _x2) {
        return _detect.apply(this, arguments);
      }
      return detect;
    }()
    /**
     * Releases resources used by the font detection system, such as cleaning up DOM elements.
     * @returns {void}
     */
    )
  }, {
    key: "release",
    value: function release() {
      throw new Error('Method "release" must be implemented.');
    }
    /**
     * Checks if the font detection mechanism is supported by the environment.
     * This function can be overridden by implementations to provide specific checks
     * (e.g., availability of `document.fonts` or other APIs).
     * @returns {boolean} True if supported, false otherwise.
     */
  }, {
    key: "isSupported",
    value: function isSupported() {
      throw new Error('Method "isSupported" must be implemented.');
    }
  }]);
}();
exports["default"] = FontDetector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/detector/FontDetectorProvider.js":
/*!***********************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/detector/FontDetectorProvider.js ***!
  \***********************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var NativeFontDetector_1 = __importDefault(__webpack_require__(/*! ./NativeFontDetector */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/detector/NativeFontDetector.js"));
var CanvasFontDetector_1 = __importDefault(__webpack_require__(/*! ./CanvasFontDetector */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/detector/CanvasFontDetector.js"));
/**
 * FontDetectorProvider
 * A class to select the best font detection implementation based on the current environment.
 *
 * Preference Order:
 * 1. **NativeFontDetector**: Preferred for its native browser API usage and efficiency.
 * 2. **CanvasFontDetector**: Fallback for its simplicity, efficiency, and wide browser support. [20-30ms for 600 fonts - M3 PRO]
 *
 */
var FontDetectorProvider = /*#__PURE__*/function () {
  /**
   * @constructor
   * @param {Object} domUtils - Utility object for DOM-related operations.
   */
  function FontDetectorProvider(domUtils) {
    _classCallCheck(this, FontDetectorProvider);
    if (!domUtils) throw new Error('domUtils is required for FontDetectorProvider.');
    this._domUtils = domUtils;
    this._logsTag = "[FONTS-COLLECTOR]";
  }
  /**
   * Provides the best font detector based on the current environment.
   *
   * @returns {FontDetector} An instance of the best available font detector.
   */
  return _createClass(FontDetectorProvider, [{
    key: "getBestDetector",
    value: function getBestDetector() {
      var _this = this;
      // Detector preferences with explanations for their order
      var detectors = [{
        detector: function detector() {
          return new NativeFontDetector_1["default"]();
        },
        name: 'NativeFontDetector'
      }, {
        detector: function detector() {
          return new CanvasFontDetector_1["default"](_this._domUtils);
        },
        name: 'CanvasFontDetector'
      }];
      for (var _i = 0, _detectors = detectors; _i < _detectors.length; _i++) {
        var _detectors$_i = _detectors[_i],
          detector = _detectors$_i.detector,
          name = _detectors$_i.name;
        try {
          var instance = detector();
          if (instance.isSupported()) {
            Logger_1["default"].info("".concat(this._logsTag, " Using ").concat(name));
            return instance;
          }
        } catch (error) {
          Logger_1["default"].error("".concat(this._logsTag, " ").concat(name, " failed:"), error);
        }
      }
      throw new Error('[FontDetectorProvider] No suitable font detection implementation is supported in this environment.');
    }
  }]);
}();
exports["default"] = FontDetectorProvider;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/detector/NativeFontDetector.js":
/*!*********************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/detector/NativeFontDetector.js ***!
  \*********************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var FontDetector_1 = __importDefault(__webpack_require__(/*! ./FontDetector */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/detector/FontDetector.js"));
// Comments:
// Safari has more local font access than Chrome.
// Chrome intentionally blocks most system fonts from web pages.
// Your FontDetector will not see fonts like Charter, PingFang, STIX, Phosphate in Chrome.
var NativeFontDetector = /*#__PURE__*/function (_FontDetector_1$defau) {
  function NativeFontDetector() {
    var _this;
    var document = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.document;
    _classCallCheck(this, NativeFontDetector);
    _this = _callSuper(this, NativeFontDetector);
    _this._document = document;
    _this._testSize = '16px'; // Font size for consistent testing
    return _this;
  }
  /**
   * Detect if a font family is available.
   * @param {string} fontName - The name of the font family to check.
   * @returns {Promise<boolean>} - Resolves to true if the font is available, false otherwise.
   */
  _inherits(NativeFontDetector, _FontDetector_1$defau);
  return _createClass(NativeFontDetector, [{
    key: "detect",
    value: (function () {
      var _detect = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(fontName) {
        var fontFace, isAvailable, _t;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              _context.p = 0;
              // Create and load the font face
              fontFace = new FontFace(fontName, "local(\"".concat(fontName, "\")"));
              _context.n = 1;
              return fontFace.load();
            case 1:
              this._document.fonts.add(fontFace);
              // Check if the font is available
              isAvailable = this._document.fonts.check("".concat(this._testSize, " \"").concat(fontName, "\"")); // Cleanup: Remove the font from document.fonts
              this._document.fonts["delete"](fontFace);
              return _context.a(2, isAvailable);
            case 2:
              _context.p = 2;
              _t = _context.v;
              return _context.a(2, false);
          }
        }, _callee, this, [[0, 2]]);
      }));
      function detect(_x) {
        return _detect.apply(this, arguments);
      }
      return detect;
    }()
    /**
     * Check if the document.fonts API is supported.
     * @returns {boolean} - True if the API is supported, false otherwise.
     */
    )
  }, {
    key: "isSupported",
    value: function isSupported() {
      return Boolean(this._document.fonts && typeof this._document.fonts.check === 'function');
    }
    /**
     * Release resources used by the font detection system.
     * @returns {void}
     */
  }, {
    key: "release",
    value: function release() {
      // No resources to release
    }
  }]);
}(FontDetector_1["default"]);
exports["default"] = NativeFontDetector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/types/FontMigrationStage.js":
/*!******************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/types/FontMigrationStage.js ***!
  \******************************************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



/**
 * FontMigrationStage
 *
 * Defines the different stages of font collection migration from V1 to V2.
 * Each stage represents a different phase in the migration process:
 *
 * V1_ONLY (0): Only V1 collector is active
 * DUAL_COLLECTION_V1_PRIORITY (1): Both collectors active, V1 is primary
 * DUAL_COLLECTION_V2_PRIORITY (2): Both collectors active, V2 is primary
 * V2_ONLY (3): Only V2 collector is active
 */
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var FontMigrationStage = {
  V1_ONLY: "0",
  DUAL_COLLECTION_V1_PRIORITY: "1",
  DUAL_COLLECTION_V2_PRIORITY: "2",
  V2_ONLY: "3",
  /**
   * Checks if a given stage is valid
   * @param {string} stage - The migration stage to validate
   * @returns {boolean} True if the stage is valid, false otherwise
   */
  isValid: function isValid(stage) {
    return Object.values(FontMigrationStage).includes(stage);
  },
  /**
   * Gets a description of what each stage represents
   * @param {string} stage - The migration stage to get description for
   * @returns {string} Description of the stage
   */
  getDescription: function getDescription(stage) {
    var descriptions = _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, FontMigrationStage.V1_ONLY, "Only V1 collector is active"), FontMigrationStage.DUAL_COLLECTION_V1_PRIORITY, "Both collectors active, V1 is primary"), FontMigrationStage.DUAL_COLLECTION_V2_PRIORITY, "Both collectors active, V2 is primary"), FontMigrationStage.V2_ONLY, "Only V2 collector is active");
    return descriptions[stage] || "Unknown stage";
  }
};
exports["default"] = FontMigrationStage;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/types/FontVersionType.js":
/*!***************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/types/FontVersionType.js ***!
  \***************************************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
// Enum for font version types
var FontVersionType = Object.freeze({
  VERSION1: "VERSION1",
  VERSION2: "VERSION2"
});
exports["default"] = FontVersionType;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/emoji/FontEmojiFeature.js":
/*!**************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/emoji/FontEmojiFeature.js ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../../../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var featureSettings = {
  configKey: 'isFontEmojiFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
/**
FontEmojiFeature momentarily inserts 80 invisible emoji characters,
measures their getBoundingClientRect() values, and sends a JSON payload with:
position (x/y/left/right/top/bottom), size (width/height), and the font family name.
 Because no font-family is specified, the browser falls back to the devices
default emoji font (Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji, etc.).
 The resulting width and height vary with operating system, browser engine, resolution,
zoom level, and even font updates, creating a rendering fingerprint unique to each environment.
 After the measurement the span is removed, so the process has no visual impact on the page.
**/
var FontEmojiFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function FontEmojiFeature(dataQ) {
    var _this;
    var window = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : __webpack_require__.g.window;
    var document = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : __webpack_require__.g.document;
    var logger = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Logger_1["default"];
    _classCallCheck(this, FontEmojiFeature);
    _this = _callSuper(this, FontEmojiFeature);
    _this._dataQ = dataQ;
    _this._window = window;
    _this._document = document;
    _this._logger = logger;
    return _this;
  }
  _inherits(FontEmojiFeature, _DataCollector_1$defa);
  return _createClass(FontEmojiFeature, [{
    key: "_getBoundingBox",
    value: function _getBoundingBox(element, win) {
      var boundingRect = element.getBoundingClientRect();
      var properties = ["x", "y", "left", "right", "bottom", "height", "top", "width"];
      var boundingBox = {};
      properties.forEach(function (prop) {
        if (prop in boundingRect) {
          boundingBox[prop] = boundingRect[prop];
        }
      });
      var fontFamily = win.getComputedStyle(element, null).getPropertyValue("font-family");
      boundingBox.font = fontFamily;
      return boundingBox;
    }
  }, {
    key: "_renderEmojis",
    value: function _renderEmojis() {
      var emojis = Array.from({
        length: 80
      }, function (_, i) {
        return String.fromCodePoint(128512 + i);
      }).join("");
      var span = this._document.createElement("span");
      span.style.whiteSpace = "nowrap";
      span.innerHTML = emojis;
      this._document.body.append(span);
      var result = this._getBoundingBox(span, this._window);
      span.remove();
      return result;
    }
  }, {
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var emojiFontInfo;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              try {
                emojiFontInfo = this._renderEmojis();
                this._dataQ.addToQueue('static_fields', ['font_emoji_info', emojiFontInfo], false);
              } catch (error) {
                this._logger.error('Failed to collect emoji font information', error);
              }
            case 1:
              return _context.a(2);
          }
        }, _callee, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = FontEmojiFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/fontmath/FontMathFeature.js":
/*!****************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/fontmath/FontMathFeature.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../../../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var featureSettings = {
  configKey: 'isFontMathFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
/**
 FontMathFeature renders a complex MathML formula ( with multi-scripts), measures its getBoundingClientRect(),
  and returns a JSON object containing position, size, and the chosen font family.
 Because the node is <math>, the browser must load a dedicated math fontCambria Math on Windows,
 Apple Symbols / STIX on macOS, STIX-Two-Math / Noto Math on Android/Linuxwhich is exposed in the font field.
 Math fonts include an OpenType MATH table and are processed by the MathML engine,
  yielding much larger variability in width/height than regular text.
 That variabilitytogether with the actual font namediffers by OS, browser engine, DPI, zoom level, and font version,
  producing a distinctive rendering fingerprint for each device.
 After measuring, the element is removed
 */
var FontMathFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function FontMathFeature(dataQ) {
    var _this;
    var window = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : __webpack_require__.g.window;
    var document = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : __webpack_require__.g.document;
    var logger = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Logger_1["default"];
    _classCallCheck(this, FontMathFeature);
    _this = _callSuper(this, FontMathFeature);
    _this._dataQ = dataQ;
    _this._window = window;
    _this._document = document;
    _this._logger = logger;
    return _this;
  }
  _inherits(FontMathFeature, _DataCollector_1$defa);
  return _createClass(FontMathFeature, [{
    key: "_getBoundingBox",
    value: function _getBoundingBox(element, win) {
      try {
        var boundingRect = element.getBoundingClientRect();
        var properties = ["x", "y", "left", "right", "bottom", "height", "top", "width"];
        var boundingBox = {};
        properties.forEach(function (prop) {
          if (prop in boundingRect) {
            boundingBox[prop] = boundingRect[prop];
          }
        });
        var fontFamily = win.getComputedStyle(element, null).getPropertyValue("font-family");
        boundingBox.font = fontFamily;
        return boundingBox;
      } catch (error) {
        this._logger.error('Failed to get bounding box', error);
        return null;
      }
    }
  }, {
    key: "_renderMathFormulas",
    value: function _renderMathFormulas() {
      try {
        var createMultiScripts = function createMultiScripts(main, sub1, sub2, pre1, pre2) {
          return "<mmultiscripts><mi>".concat(main, "</mi><mi>").concat(sub1, "</mi><mi>").concat(sub2, "</mi>\n                        <mprescripts></mprescripts><mi>").concat(pre1, "</mi><mi>").concat(pre2, "</mi></mmultiscripts>");
        };
        var mathContent = "<mrow><munderover><mmultiscripts><mo></mo>";
        var scriptData = [["", "", "", "", ""], ["", "", "", "", ""], ["", "", "", "", ""], ["", "", "", "", ""], ["", "", "", "", ""], ["", "", "", "", ""]];
        scriptData.forEach(function (s) {
          mathContent += createMultiScripts(s[0], s[1], s[2], s[3], s[4]);
        });
        mathContent += "</munderover></mrow>";
        var mathElement = this._document.createElement("math");
        mathElement.style.whiteSpace = "nowrap";
        mathElement.innerHTML = mathContent;
        this._document.body.append(mathElement);
        var result = this._getBoundingBox(mathElement, this._window);
        mathElement.remove();
        return result;
      } catch (error) {
        this._logger.error('Failed to render math formulas', error);
        return null;
      }
    }
  }, {
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var mathFontInfo;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              try {
                mathFontInfo = this._renderMathFormulas();
                if (mathFontInfo) {
                  this._dataQ.addToQueue('static_fields', ['font_math_info', mathFontInfo], false);
                }
              } catch (error) {
                this._logger.error('Failed to collect math font information', error);
              }
            case 1:
              return _context.a(2);
          }
        }, _callee, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = FontMathFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/font/size-prefences/FontWidthFeature.js":
/*!***********************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/font/size-prefences/FontWidthFeature.js ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../../../DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var featureSettings = {
  configKey: 'isFontWidthFeature',
  isDefault: false,
  shouldRunPerContext: false,
  shouldRunPerSession: true,
  shouldRun: false,
  isFrameRelated: false,
  runInUns: false,
  runInSlave: true,
  runInLean: true,
  isRunning: false,
  instance: null
};
/**
  FontWidthFeature creates a clean <iframe>, renders the test string mmMwWLliI0fiflO&1 in seven common font families,
  measures each spans pixel width, and returns a JSON payload. The width values vary across operating systems, browser engines,
  DPI, and zoom settings, producing a numeric width-fingerprint.
  This complements FontEmojiFeature, which measures the bounding box of 80 emoji,
  and FontMathFeature, which measures a complex MathML formula in a math font.
  Together the three collectors build a richer typographic profile for fingerprinting and rendering diagnostics.
 */
var FontWidthFeature = /*#__PURE__*/function (_DataCollector_1$defa) {
  function FontWidthFeature(dataQ) {
    var _this;
    var document = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.document;
    var devicePixelRatio = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window.devicePixelRatio;
    _classCallCheck(this, FontWidthFeature);
    _this = _callSuper(this, FontWidthFeature);
    _this._dataQ = dataQ;
    _this._document = document;
    _this._devicePixelRatio = devicePixelRatio;
    return _this;
  }
  _inherits(FontWidthFeature, _DataCollector_1$defa);
  return _createClass(FontWidthFeature, [{
    key: "_measureFontWidths",
    value: function _measureFontWidths() {
      var _this2 = this;
      var fontStyles = {
        "default": [],
        apple: [{
          font: "-apple-system-body"
        }],
        serif: [{
          fontFamily: "serif"
        }],
        sans: [{
          fontFamily: "sans-serif"
        }],
        mono: [{
          fontFamily: "monospace"
        }],
        min: [{
          fontSize: "1px"
        }],
        system: [{
          fontFamily: "system-ui"
        }]
      };
      var testString = "mmMwWLliI0fiflO&1";
      var defaultWidth = 4000;
      function createTestEnvironment(callback) {
        var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultWidth;
        var iframe = this._document.createElement("iframe");
        this._document.body.appendChild(iframe);
        var doc = iframe.contentDocument;
        doc.open();
        doc.write('<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1"></head><body></body></html>');
        doc.close();
        var result = callback(doc, doc.body, width);
        this._document.body.removeChild(iframe);
        return result;
      }
      function prepareDocument(doc, body, width) {
        body.style.width = "".concat(width, "px");
        body.style.webkitTextSizeAdjust = body.style.textSizeAdjust = "none";
        if (this._isZoomNeeded()) {
          body.style.zoom = "".concat(1 / this._devicePixelRatio);
        } else if (this._isZoomResetNeeded()) {
          body.style.zoom = "reset";
        }
        var testDiv = doc.createElement("div");
        testDiv.textContent = Array.from({
          length: width / 20 >> 0
        }, function () {
          return "word";
        }).join(" ");
        body.appendChild(testDiv);
      }
      function measureFonts(doc, body) {
        var elements = {};
        var results = {};
        var _loop = function _loop() {
          var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),
            key = _Object$entries$_i[0],
            styles = _Object$entries$_i[1];
          var style = styles[0] || {};
          var span = doc.createElement("span");
          span.textContent = testString;
          span.style.whiteSpace = "nowrap";
          Object.entries(style).forEach(function (_ref) {
            var _ref2 = _slicedToArray(_ref, 2),
              prop = _ref2[0],
              val = _ref2[1];
            if (val !== undefined) span.style[prop] = val;
          });
          elements[key] = span;
          body.append(doc.createElement("br"), span);
        };
        for (var _i = 0, _Object$entries = Object.entries(fontStyles); _i < _Object$entries.length; _i++) {
          _loop();
        }
        Object.keys(fontStyles).forEach(function (key) {
          results[key] = elements[key].getBoundingClientRect().width;
        });
        return results;
      }
      return createTestEnvironment.call(this, function (doc, body, width) {
        prepareDocument.call(_this2, doc, body, width);
        return measureFonts(doc, body);
      });
    }
  }, {
    key: "_isZoomNeeded",
    value: function _isZoomNeeded() {
      return true;
    }
  }, {
    key: "_isZoomResetNeeded",
    value: function _isZoomResetNeeded() {
      return false;
    }
  }, {
    key: "startFeature",
    value: function () {
      var _startFeature = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var fontWidthInfo;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              try {
                fontWidthInfo = this._measureFontWidths();
                this._dataQ.addToQueue('static_fields', ['font_width_info', fontWidthInfo], false);
              } catch (error) {
                Logger_1["default"].error('Failed to collect font width information', error);
              }
            case 1:
              return _context.a(2);
          }
        }, _callee, this);
      }));
      function startFeature() {
        return _startFeature.apply(this, arguments);
      }
      return startFeature;
    }()
  }], [{
    key: "getDefaultSettings",
    value: function getDefaultSettings() {
      return featureSettings;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = FontWidthFeature;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/collectors/static/index.js":
/*!****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/collectors/static/index.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ScreenHighResFeature = exports.FontWidthFeature = exports.FontMathFeature = exports.FontEmojiFeature = exports.KeyboardLayoutFeature = exports.StorageFeature = exports.DRMDataCollector = exports.BrowserExtensionsCollector = exports.SpeechVoiceCollector = exports.WebRTCDataCollector = exports.WebglCollector = exports.AdblockerListsCollector = exports.NavigatorFeature = exports.EncryptedMuidFeature = exports.AudioDetectFeature = exports.GfxRenderingFeature = exports.FontCollectionFeature = exports.IsPrivateBrowsingFeature = exports.UserPermissions = exports.MediaDevicesFeature = exports.GraphicDetectFeature = exports.DoNotTrackFeature = exports.BrowserPropsFeature = exports.BrowserDetect = void 0;
var BrowserDetect_1 = __webpack_require__(/*! ./BrowserDetect */ "./dist/js-sdk-legacy/src/main/collectors/static/BrowserDetect.js");
Object.defineProperty(exports, "BrowserDetect", ({
  enumerable: true,
  get: function get() {
    return __importDefault(BrowserDetect_1)["default"];
  }
}));
var BrowserPropsFeature_1 = __webpack_require__(/*! ./BrowserPropsFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/BrowserPropsFeature.js");
Object.defineProperty(exports, "BrowserPropsFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(BrowserPropsFeature_1)["default"];
  }
}));
var DoNotTrackFeature_1 = __webpack_require__(/*! ./DoNotTrackFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/DoNotTrackFeature.js");
Object.defineProperty(exports, "DoNotTrackFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(DoNotTrackFeature_1)["default"];
  }
}));
var GraphicDetectFeature_1 = __webpack_require__(/*! ./GraphicDetectFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/GraphicDetectFeature.js");
Object.defineProperty(exports, "GraphicDetectFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(GraphicDetectFeature_1)["default"];
  }
}));
var MediaDevicesFeature_1 = __webpack_require__(/*! ./MediaDevicesFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/MediaDevicesFeature.js");
Object.defineProperty(exports, "MediaDevicesFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(MediaDevicesFeature_1)["default"];
  }
}));
var UserPermissions_1 = __webpack_require__(/*! ./UserPermissions */ "./dist/js-sdk-legacy/src/main/collectors/static/UserPermissions.js");
Object.defineProperty(exports, "UserPermissions", ({
  enumerable: true,
  get: function get() {
    return __importDefault(UserPermissions_1)["default"];
  }
}));
var IsPrivateBrowsingFeature_1 = __webpack_require__(/*! ./IsPrivateBrowsingFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/IsPrivateBrowsingFeature.js");
Object.defineProperty(exports, "IsPrivateBrowsingFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(IsPrivateBrowsingFeature_1)["default"];
  }
}));
var FontCollectionFeature_1 = __webpack_require__(/*! ./font/collection/FontCollectionFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/FontCollectionFeature.js");
Object.defineProperty(exports, "FontCollectionFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(FontCollectionFeature_1)["default"];
  }
}));
var GfxRenderingFeature_1 = __webpack_require__(/*! ./GfxRenderingFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/GfxRenderingFeature.js");
Object.defineProperty(exports, "GfxRenderingFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(GfxRenderingFeature_1)["default"];
  }
}));
var AudioDetectFeature_1 = __webpack_require__(/*! ./AudioDetectFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/AudioDetectFeature.js");
Object.defineProperty(exports, "AudioDetectFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(AudioDetectFeature_1)["default"];
  }
}));
var EncryptedMuidFeature_1 = __webpack_require__(/*! ./EncryptedMuidFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/EncryptedMuidFeature.js");
Object.defineProperty(exports, "EncryptedMuidFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(EncryptedMuidFeature_1)["default"];
  }
}));
var NavigatorFeature_1 = __webpack_require__(/*! ./NavigatorFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/NavigatorFeature.js");
Object.defineProperty(exports, "NavigatorFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(NavigatorFeature_1)["default"];
  }
}));
var AdblockerListsCollector_1 = __webpack_require__(/*! ./adblock/AdblockerListsCollector */ "./dist/js-sdk-legacy/src/main/collectors/static/adblock/AdblockerListsCollector.js");
Object.defineProperty(exports, "AdblockerListsCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(AdblockerListsCollector_1)["default"];
  }
}));
var WebglCollector_1 = __webpack_require__(/*! ./WebglCollector */ "./dist/js-sdk-legacy/src/main/collectors/static/WebglCollector.js");
Object.defineProperty(exports, "WebglCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(WebglCollector_1)["default"];
  }
}));
var WebRTCDataCollector_1 = __webpack_require__(/*! ./WebRTCDataCollector */ "./dist/js-sdk-legacy/src/main/collectors/static/WebRTCDataCollector.js");
Object.defineProperty(exports, "WebRTCDataCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(WebRTCDataCollector_1)["default"];
  }
}));
var SpeechVoiceCollector_1 = __webpack_require__(/*! ./SpeechVoiceCollector */ "./dist/js-sdk-legacy/src/main/collectors/static/SpeechVoiceCollector.js");
Object.defineProperty(exports, "SpeechVoiceCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(SpeechVoiceCollector_1)["default"];
  }
}));
var BrowserExtensionsCollector_1 = __webpack_require__(/*! ./BrowserExtensionsCollector */ "./dist/js-sdk-legacy/src/main/collectors/static/BrowserExtensionsCollector.js");
Object.defineProperty(exports, "BrowserExtensionsCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(BrowserExtensionsCollector_1)["default"];
  }
}));
var DRMDataCollector_1 = __webpack_require__(/*! ./DRMDataCollector */ "./dist/js-sdk-legacy/src/main/collectors/static/DRMDataCollector.js");
Object.defineProperty(exports, "DRMDataCollector", ({
  enumerable: true,
  get: function get() {
    return __importDefault(DRMDataCollector_1)["default"];
  }
}));
var StorageFeature_1 = __webpack_require__(/*! ./StorageFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/StorageFeature.js");
Object.defineProperty(exports, "StorageFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(StorageFeature_1)["default"];
  }
}));
var KeyboardLayoutFeature_1 = __webpack_require__(/*! ./KeyboardLayoutFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/KeyboardLayoutFeature.js");
Object.defineProperty(exports, "KeyboardLayoutFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(KeyboardLayoutFeature_1)["default"];
  }
}));
var FontEmojiFeature_1 = __webpack_require__(/*! ./font/emoji/FontEmojiFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/font/emoji/FontEmojiFeature.js");
Object.defineProperty(exports, "FontEmojiFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(FontEmojiFeature_1)["default"];
  }
}));
var FontMathFeature_1 = __webpack_require__(/*! ./font/fontmath/FontMathFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/font/fontmath/FontMathFeature.js");
Object.defineProperty(exports, "FontMathFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(FontMathFeature_1)["default"];
  }
}));
var FontWidthFeature_1 = __webpack_require__(/*! ./font/size-prefences/FontWidthFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/font/size-prefences/FontWidthFeature.js");
Object.defineProperty(exports, "FontWidthFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(FontWidthFeature_1)["default"];
  }
}));
var ScreenHighResFeature_1 = __webpack_require__(/*! ./ScreenHighResFeature */ "./dist/js-sdk-legacy/src/main/collectors/static/ScreenHighResFeature.js");
Object.defineProperty(exports, "ScreenHighResFeature", ({
  enumerable: true,
  get: function get() {
    return __importDefault(ScreenHighResFeature_1)["default"];
  }
}));

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/const/communication.js":
/*!************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/const/communication.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.POST = exports.serverProtocolV4 = exports.serverProtocolV3 = exports.minifiedUrlV4Path = exports.minifiedUrlV3Path = exports.wupUrlV3Path = exports.wupUrlV4Path = void 0;
// wup url constants
exports.wupUrlV4Path = 'api/v4/wup';
exports.wupUrlV3Path = 'client/v3.1/web/wup';
exports.minifiedUrlV3Path = 'v3.1';
exports.minifiedUrlV4Path = 'v4';
exports.serverProtocolV3 = 3;
exports.serverProtocolV4 = 4;
// server request methods constants
exports.POST = 'POST';

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/APIConfigurationKey.js":
/*!*********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/APIConfigurationKey.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.APIConfigurationKey = void 0;
exports.APIConfigurationKey = {
  wupServerURL: 'wupServerURL',
  logServerURL: 'logServerURL',
  enableMinifiedLogUri: 'enableMinifiedLogUri',
  enableFramesProcessing: 'enableFramesProcessing',
  enableCustomElementsProcessing: 'enableCustomElementsProcessing',
  enableSameSiteNoneAndSecureCookies: 'enableSameSiteNoneAndSecureCookies',
  maskElementsAttributes: 'maskElementsAttributes',
  serverURL: 'serverURL',
  customerID: 'customerID',
  useUrlWorker: 'useUrlWorker',
  workerUrl: 'workerUrl',
  clientSettings: 'clientSettings',
  collectionSettings: 'collectionSettings',
  elementSettings: 'elementSettings',
  enableCustomElementDetector: 'enableCustomElementDetector',
  attributeSettings: 'attributeSettings',
  isWupServerURLProxy: 'isWupServerURLProxy',
  enableAcknowledgeMessageEvents: 'enableAcknowledgeMessageEvents',
  inputElementSettings: 'inputElementSettings',
  customInputElementSettings: 'customInputElementSettings',
  agentType: 'agentType',
  mode: 'mode',
  collectionMode: 'collectionMode',
  enableStartupCustomerSessionId: 'enableStartupCustomerSessionId',
  mutationMaxChunkSize: 'mutationMaxChunkSize',
  mutationChunkDelayMs: 'mutationChunkDelayMs',
  isFlutterApp: 'isFlutterApp',
  enableMinifiedWupUri: 'enableMinifiedWupUri',
  maxShadowDepth: 'maxShadowDepth',
  iframeLoadingTimeout: 'iframeLoadingTimeout',
  elementCategories: 'elementCategories',
  elementAttributes: 'elementAttributes',
  enableMathDetect: 'enableMathDetect',
  enableBrowserDisplayDetect: 'enableBrowserDisplayDetect',
  enableGraphCard: 'enableGraphCard',
  useLegacyZeroTimeout: 'useLegacyZeroTimeout'
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/AgentType.js":
/*!***********************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/AgentType.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AgentType = void 0;
exports.AgentType = {
  PRIMARY: "primary",
  SECONDARY: "secondary"
};
Object.freeze(exports.AgentType);

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/BCProtocolType.js":
/*!****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/BCProtocolType.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BCProtocolType = void 0;
exports.BCProtocolType = {
  V3: 3,
  V4: 4
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/ClientSettingsKey.js":
/*!*******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/ClientSettingsKey.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ClientSettingsKey = void 0;
exports.ClientSettingsKey = {
  enableRestart: 'enableRestart',
  enableFlush: 'enableFlush',
  enableCustomElements: 'enableCustomElements',
  enableCoordinatesMasking: 'enableCoordinatesMasking'
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/CollectionMode.js":
/*!****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/CollectionMode.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CollectionMode = void 0;
exports.CollectionMode = {
  FULL: 'full',
  LEAN: 'lean'
};
Object.freeze(exports.CollectionMode);

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/AudioDetectContract.js":
/*!*************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/AudioDetectContract.js ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var AudioDetectContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} acoustic
   */
  function AudioDetectContract(acoustic) {
    var _this;
    _classCallCheck(this, AudioDetectContract);
    _this = _callSuper(this, AudioDetectContract);
    _this.validateParams(acoustic);
    _this.acoustic = acoustic;
    return _this;
  }
  _inherits(AudioDetectContract, _StaticContract_1$def);
  return _createClass(AudioDetectContract, [{
    key: "validateParams",
    value: function validateParams(acoustic) {
      var isValid = typeof acoustic === 'string';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in AudioDetect parameters. renderer: {expected: string, received: ".concat(_typeof(acoustic), "}"));
      }
    }
    /**
     * @return  {[string, string]} for example: ['audio_detect', 'acoustic']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.acoustic];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        Logger_1["default"].warn('AudioDetect - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'audio_detect';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = AudioDetectContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/BrowserDetectContract.js":
/*!***************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/BrowserDetectContract.js ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var BrowserDetectContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {boolean} isChrome
   * @param  {boolean} isFirefox
   * @param  {boolean} isEdge
   * @param  {boolean} isIE
   * @param  {boolean} isSafari
   * @param  {boolean} isOpera
   * @param  {boolean} isBlink
   */
  function BrowserDetectContract(isChrome, isFirefox, isEdge, isIE, isSafari, isOpera, isBlink) {
    var _this;
    _classCallCheck(this, BrowserDetectContract);
    _this = _callSuper(this, BrowserDetectContract);
    _this.validateParams(isChrome, isFirefox, isEdge, isIE, isSafari, isOpera, isBlink);
    _this.isChrome = isChrome;
    _this.isFirefox = isFirefox;
    _this.isEdge = isEdge;
    _this.isIE = isIE;
    _this.isSafari = isSafari;
    _this.isOpera = isOpera;
    _this.isBlink = isBlink;
    return _this;
  }
  _inherits(BrowserDetectContract, _StaticContract_1$def);
  return _createClass(BrowserDetectContract, [{
    key: "validateParams",
    value: function validateParams(isChrome, isFirefox, isEdge, isIE, isSafari, isOpera, isBlink) {
      var isValid = typeof isChrome === 'boolean' && typeof isFirefox === 'boolean' && typeof isEdge === 'boolean' && typeof isIE === 'boolean' && typeof isSafari === 'boolean' && typeof isOpera === 'boolean' && typeof isBlink === 'boolean';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in Per, BrowserDetectContract, parameters. isChrome : {expected: boolean, received: ".concat(_typeof(isChrome), "},\n            isFirefox : {expected: boolean, received: ").concat(_typeof(isFirefox), "},isEdge : {expected: boolean, received: ").concat(_typeof(isEdge), "},isIE : {expected: boolean, received: ").concat(_typeof(isIE), "},\n            isSafari : {expected: boolean, received: ").concat(_typeof(isSafari), "},isOpera : {expected: boolean, received: ").concat(_typeof(isOpera), "} ,isBlink : {expected: boolean, received: ").concat(_typeof(isBlink), "}"));
      }
    }
    /**
     * @return  {[string,[...boolean]]} for example: ['browser_spoofing', [true, false, false, false,  false,  false,  false]]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, [this.isChrome, this.isFirefox, this.isEdge, this.isIE, this.isSafari, this.isOpera, this.isBlink]];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]) && message[1].length === 7;
      if (!isValid) {
        Logger_1["default"].warn('BrowserDetect - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'browser_spoofing';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = BrowserDetectContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/DevDebugInfoContract.js":
/*!**************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/DevDebugInfoContract.js ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var DevDebugInfoContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {Object} data - The data object to be used in the contract.
   */
  function DevDebugInfoContract(data) {
    var _this;
    _classCallCheck(this, DevDebugInfoContract);
    _this = _callSuper(this, DevDebugInfoContract);
    _this.validateParams(data);
    _this.data = data;
    return _this;
  }
  /**
   * Validates the parameters passed to the constructor.
   * @param {Object} data - The data object to validate.
   * @throws {Error} If the data is not valid.
   */
  _inherits(DevDebugInfoContract, _StaticContract_1$def);
  return _createClass(DevDebugInfoContract, [{
    key: "validateParams",
    value: function validateParams(data) {
      if (data === null || _typeof(data) !== 'object' || Array.isArray(data)) {
        throw new Error("DevDebugInfoContract - Invalid parameter: data should be a non-null object. Received: ".concat(JSON.stringify(data)));
      }
    }
    /**
     * Builds the queue message to be used for logging or further processing.
     * @return {[string, Object]} A tuple containing the name and data.
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.data];
      this.validateMessage(message);
      return message;
    }
    /**
     * Validates the message structure.
     * @param {Array} message - The message array to validate.
     * @throws {Error} If the message is not valid.
     */
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var _message = _slicedToArray(message, 2),
        name = _message[0],
        data = _message[1];
      var isValid = typeof name === 'string' && _typeof(data) === 'object' && data !== null;
      if (!isValid) {
        throw new Error("DevDebugInfoContract - Message validation failed. Invalid message structure: ".concat(JSON.stringify(message)));
      }
    }
    /**
     * Retrieves the name for the contract.
     * @return {string} The name of the contract.
     */
  }, {
    key: "getName",
    value: function getName() {
      return 'client_debug_info';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = DevDebugInfoContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/DoNotTrackContract.js":
/*!************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/DoNotTrackContract.js ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var DoNotTrackContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {number} dnt
   */
  function DoNotTrackContract(dnt) {
    var _this;
    _classCallCheck(this, DoNotTrackContract);
    _this = _callSuper(this, DoNotTrackContract);
    _this.validateParams(dnt);
    _this.dnt = dnt;
    return _this;
  }
  _inherits(DoNotTrackContract, _StaticContract_1$def);
  return _createClass(DoNotTrackContract, [{
    key: "validateParams",
    value: function validateParams(dnt) {
      var isValid = typeof dnt === 'number' && (dnt === 0 || dnt === 1 || dnt === 2);
      if (!isValid) {
        Logger_1["default"].warn("wrong type in DoNotTrackContract parameters. dnt : {expected: number in {0,1,2}, received: type: ".concat(_typeof(dnt), ", value: ").concat(dnt));
      }
    }
    /**
     * @return  {[string,number]} for example: ['dnt', 1]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.dnt];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        Logger_1["default"].warn('DoNotTrack - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'dnt';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = DoNotTrackContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/FontsDetectionContract.js":
/*!****************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/FontsDetectionContract.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.FontDataType = exports.FontsDetectionContract = void 0;
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
/**
 * Font Detection Contract
 * Handles the payload structure for font detection during migration phases.
 */
var FontsDetectionContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} dataType - Specifies the type of data being handled (e.g., 'v1', 'v2', 'v1+v2').
   * @param  {Array} fontList - A tuple containing font data in the format [v1Fonts (string), v2Fonts (array)].
   */
  function FontsDetectionContract(dataType, fontList) {
    var _this;
    _classCallCheck(this, FontsDetectionContract);
    _this = _callSuper(this, FontsDetectionContract);
    _this.validateParams(dataType, fontList);
    _this.dataType = dataType;
    _this.fontList = fontList;
    return _this;
  }
  /**
   * Validates the parameters passed to the constructor.
   * @param {string} dataType - Type of font data (e.g., 'v1', 'v2', 'v1+v2').
   * @param {Array} fontList - Tuple containing font data, e.g., ['Arial, Verdana, Tahoma', ['Roboto', 'Open Sans']].
   */
  _inherits(FontsDetectionContract, _StaticContract_1$def);
  return _createClass(FontsDetectionContract, [{
    key: "validateParams",
    value: function validateParams(dataType, fontList) {
      var isValid = Array.isArray(fontList) && fontList.length === 2 && Object.values(FontDataType).includes(dataType);
      if (!isValid) {
        Logger_1["default"].warn("Invalid parameters in FontsDetectionContract. \n                dataType: {expected: ".concat(Object.keys(FontDataType).join(", "), ", received: ").concat(dataType, "},\n                fontList: {expected: tuple [string, array], received: ").concat(JSON.stringify(fontList), "}"));
        throw new Error("Invalid parameters provided to FontsDetectionContract.");
      }
    }
    /**
     * Builds a queue message for font detection.
     * The structure is a tuple: [key, payload].
     * - Key is derived from `getName()`.
     * - Payload varies based on `dataType`:
     *   - "v1": A single string representing V1 fonts.
     *   - "v2": An array of strings representing V2 fonts.
     *   - "v1+v2": A tuple of [V1 fonts (string), V2 fonts (array)].
     *
     * @return {Array} - Tuple [key, payload] for font detection.
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var payload;
      // Determine the payload structure based on `dataType`
      if (this.dataType === FontDataType.V1_ONLY) {
        payload = this.fontList[0].join(','); // V1 as a single string
      } else if (this.dataType === FontDataType.V2_ONLY) {
        payload = this.fontList[1]; // V2 as an array of strings
      } else if (this.dataType === FontDataType.V1_AND_V2) {
        payload = [this.fontList[0].join(','), this.fontList[1]]; // Tuple of V1 and V2
      } else {
        throw new Error("Invalid dataType: ".concat(this.dataType));
      }
      var message = [this.getName(), [this.dataType, payload]];
      this.validateMessage(message);
      return message;
    }
    /**
    * Validates the generated message structure.
    * - Ensures the key is a valid string.
    * - Ensures the payload is structured as [dataType, payload]:
    *   - For "v1": payload should be a string.
    *   - For "v2": payload should be an array of strings.
    *   - For "v1+v2": payload should be a tuple [string, array].
    *
    * @param {Array} message - The generated message array in the format [key, [dataType, payload]].
    */
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      // Validate the key (message[0])
      var isKeyValid = typeof message[0] === "string";
      // Validate the payload structure (message[1])
      var _ref = message[1] || [],
        _ref2 = _slicedToArray(_ref, 2),
        dataType = _ref2[0],
        payload = _ref2[1];
      var isPayloadValid = false;
      if (dataType === FontDataType.V1_ONLY) {
        isPayloadValid = typeof payload === "string";
      } else if (dataType === FontDataType.V2_ONLY) {
        isPayloadValid = Array.isArray(payload) && payload.every(function (font) {
          return typeof font === "string";
        });
      } else if (dataType === FontDataType.V1_AND_V2) {
        isPayloadValid = Array.isArray(payload) && payload.length === 2 && typeof payload[0] === "string" && Array.isArray(payload[1]) && payload[1].every(function (font) {
          return typeof font === "string";
        });
      }
      // Combined validation
      if (!isKeyValid || !isPayloadValid) {
        Logger_1["default"].warn("FontsDetectionContract - Queue message validation failed.");
        Logger_1["default"].debug("Invalid message: ".concat(JSON.stringify(message)));
        throw new Error("Invalid message structure.");
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return "fonts";
    }
  }]);
}(StaticContract_1["default"]);
exports.FontsDetectionContract = FontsDetectionContract;
/**
 * Enum for font data types.
 */
var FontDataType = Object.freeze({
  V1_ONLY: "v1",
  V2_ONLY: "v2",
  V1_AND_V2: "v1+v2" // Data from both V1 and V2 combined,
});
exports.FontDataType = FontDataType;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/GfxRenderingContract.js":
/*!**************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/GfxRenderingContract.js ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var GfxRenderingContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /*
   * @param {boolean} winding
   * @param {string} text
   * @param {string} geometry
   */
  function GfxRenderingContract(winding, text, geometry) {
    var _this;
    _classCallCheck(this, GfxRenderingContract);
    _this = _callSuper(this, GfxRenderingContract);
    _this.validateParams(winding, text, geometry);
    _this.winding = winding;
    _this.text = text;
    _this.geometry = geometry;
    return _this;
  }
  /*
   * @param {boolean} winding
   * @param {string} text
   * @param {string} geometry
   */
  _inherits(GfxRenderingContract, _StaticContract_1$def);
  return _createClass(GfxRenderingContract, [{
    key: "validateParams",
    value: function validateParams(winding, text, geometry) {
      var isValid = typeof winding === 'boolean' && typeof text === 'string' && typeof geometry === 'string';
      if (!isValid) {
        var logMsg = "wrong type in GfxRenderingContract parameters. winding: {expected: boolean, received: ".concat(_typeof(winding), "}, text: {expected: string, received: ").concat(_typeof(text), "},\n            geometry: {expected: string, received: ").concat(_typeof(geometry), "}");
        Logger_1["default"].warn(logMsg);
      }
    }
    /**
     * @return  {[string,[boolean, string, string]]} for example: ['gfx', [true, 'abcdefg' , 'a1b2c3']]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, [this.winding, this.text, this.geometry]];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]) && message[1].length === 3;
      if (!isValid) {
        Logger_1["default"].warn('GfxRendering - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'gfx';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = GfxRenderingContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/GraphicDetectContract.js":
/*!***************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/GraphicDetectContract.js ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var GraphicDetectContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} renderer
   * @param  {string} vendor
   * @param  {string} version
   * @param  {string} supportedExtensions
   */
  function GraphicDetectContract(renderer, vendor, version, supportedExtensions) {
    var _this;
    _classCallCheck(this, GraphicDetectContract);
    _this = _callSuper(this, GraphicDetectContract);
    _this.validateParams(renderer, vendor, version, supportedExtensions);
    _this.renderer = renderer;
    _this.vendor = vendor;
    _this.version = version;
    _this.supportedExtensions = supportedExtensions;
    return _this;
  }
  _inherits(GraphicDetectContract, _StaticContract_1$def);
  return _createClass(GraphicDetectContract, [{
    key: "validateParams",
    value: function validateParams(renderer, vendor, version, supportedExtensions) {
      var isValid = typeof renderer === 'string' && typeof vendor === 'string' && typeof version === 'string' && typeof supportedExtensions === 'string';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in GraphicDetectContract parameters. renderer: {expected: string, received: ".concat(_typeof(renderer), "}, vendor: {expected: string, received: ").concat(_typeof(vendor), "},\n            version: {expected: string, received: ").concat(_typeof(version), "}, supportedExtensions: {expected: string, received: ").concat(_typeof(supportedExtensions), "}"));
      }
    }
    /**
     * @return  {[string,[...string]]} for example: ['grph_card', ['renderer', 'vendor' , 'version', 'supportedExtensions']]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, [this.renderer, this.vendor, this.version, this.supportedExtensions]];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]) && message[1].length === 4;
      if (!isValid) {
        Logger_1["default"].warn('GraphicDetect - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'grph_card';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = GraphicDetectContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/IsPrivateBrowsingContract.js":
/*!*******************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/IsPrivateBrowsingContract.js ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var IsPrivateBrowsingContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {boolean} isPrivate,
   */
  function IsPrivateBrowsingContract(isPrivate) {
    var _this;
    _classCallCheck(this, IsPrivateBrowsingContract);
    _this = _callSuper(this, IsPrivateBrowsingContract);
    _this.validateParams(isPrivate);
    _this.isPrivate = isPrivate;
    return _this;
  }
  _inherits(IsPrivateBrowsingContract, _StaticContract_1$def);
  return _createClass(IsPrivateBrowsingContract, [{
    key: "validateParams",
    value: function validateParams(isPrivate) {
      var isValid = typeof isPrivate === 'boolean';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in IsPrivateBrowsingContract parameters. isPrivate : {expected: boolean, received: ".concat(_typeof(isPrivate), "}"));
      }
    }
    /**
     * @return  {[string,boolean]} for example: ['is_private_browsing', true]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.isPrivate];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'boolean';
      if (!isValid) {
        Logger_1["default"].warn('IsPrivateBrowsing - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'is_private_browsing';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = IsPrivateBrowsingContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/KeyboardLayoutContract.js":
/*!****************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/KeyboardLayoutContract.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var KeyboardLayoutContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} keyboardLayout
   */
  function KeyboardLayoutContract(keyboardLayout) {
    var _this;
    _classCallCheck(this, KeyboardLayoutContract);
    _this = _callSuper(this, KeyboardLayoutContract);
    _this.validateParams(keyboardLayout);
    _this.keyboardLayout = keyboardLayout;
    return _this;
  }
  _inherits(KeyboardLayoutContract, _StaticContract_1$def);
  return _createClass(KeyboardLayoutContract, [{
    key: "validateParams",
    value: function validateParams(keyboardLayout) {
      var isValid = typeof keyboardLayout === 'string';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in KeyboardLayout parameters. keyboardLayout : {expected: string, received: ".concat(_typeof(keyboardLayout), "}"));
      }
    }
    /**
     * @return  {[string, string]} for example: ['keyboard_layout', 'b0e106ee1de7ce5ea7bcc1bd50542ddd']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.keyboardLayout];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        Logger_1["default"].warn('KeyboardLayout - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'keyboard_layout';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = KeyboardLayoutContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/MathDetectContract.js":
/*!************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/MathDetectContract.js ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var MathDetectContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} math
   */
  function MathDetectContract(math) {
    var _this;
    _classCallCheck(this, MathDetectContract);
    _this = _callSuper(this, MathDetectContract);
    _this.validateParams(math);
    _this.math = math;
    return _this;
  }
  _inherits(MathDetectContract, _StaticContract_1$def);
  return _createClass(MathDetectContract, [{
    key: "validateParams",
    value: function validateParams(math) {
      var isValid = typeof math === 'string';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in MathDetect parameters. renderer: {expected: string, received: ".concat(_typeof(math), "}"));
      }
    }
    /**
     * @return  {[string, string]} for example: ['math_detect', 'math']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.math];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        Logger_1["default"].warn('MathDetect - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'math_detect';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = MathDetectContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/MediaDevicesContract.js":
/*!**************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/MediaDevicesContract.js ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MediaDevicesContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {[[...string]]} mediaDevices, Array of Arrays of strings : [['kind':string, 'label':string, 'deviceId':string, 'groupId':string],...]
   */
  function MediaDevicesContract(mediaDevices) {
    var _this;
    _classCallCheck(this, MediaDevicesContract);
    _this = _callSuper(this, MediaDevicesContract);
    _this.validateParams(mediaDevices);
    _this.mediaDevices = mediaDevices;
    return _this;
  }
  _inherits(MediaDevicesContract, _StaticContract_1$def);
  return _createClass(MediaDevicesContract, [{
    key: "validateParams",
    value: function validateParams(mediaDevices) {
      var isValid = Array.isArray(mediaDevices) && this._eachDeviceIsValid(mediaDevices);
      if (!isValid) {
        Logger_1["default"].warn(" wrong type in MediaDevicesContract parameters. mediaDevices : {expected: [[...string]], received: ".concat(mediaDevices, "}"));
      }
    }
  }, {
    key: "_eachDeviceIsValid",
    value: function _eachDeviceIsValid(mediaDevices) {
      var validArrays = true;
      var validStrings = true;
      var validLengths = true;
      var _iterator = _createForOfIteratorHelper(mediaDevices),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var i = _step.value;
          if (!Array.isArray(i)) {
            validArrays = false;
          } else {
            if (i.length !== 4) {
              validLengths = false;
            }
            var _iterator2 = _createForOfIteratorHelper(i),
              _step2;
            try {
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                var j = _step2.value;
                if (typeof j !== 'string') {
                  validStrings = false;
                }
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return validArrays && validLengths && validStrings;
    }
    /**
     * @return  {[string,[[...string]]]} for example : ['media_devices',[['kind1', 'label1', 'deviceId1', 'groupId1'], ['kind2', 'label2', 'deviceId2', 'groupId2']]]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.mediaDevices];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]);
      if (!isValid) {
        Logger_1["default"].warn('MediaDevices - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'media_devices';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = MediaDevicesContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/ScreenHighResContract.js":
/*!***************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/ScreenHighResContract.js ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var ScreenHighResContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {boolean} isHighRes
   */
  function ScreenHighResContract(isHighRes) {
    var _this;
    _classCallCheck(this, ScreenHighResContract);
    _this = _callSuper(this, ScreenHighResContract);
    _this.validateParams(isHighRes);
    _this.isHighRes = isHighRes;
    return _this;
  }
  _inherits(ScreenHighResContract, _StaticContract_1$def);
  return _createClass(ScreenHighResContract, [{
    key: "validateParams",
    value: function validateParams(isHighRes) {
      var isValid = typeof isHighRes === 'boolean';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in ScreenHighRes parameters. isHighRes : {expected: boolean, received: ".concat(_typeof(isHighRes), "}"));
      }
    }
    /**
     * @return  {[string, boolean]} for example: ['screen_high_res', true]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.isHighRes];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'boolean';
      if (!isValid) {
        Logger_1["default"].warn('ScreenHighRes - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'screen_high_res';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = ScreenHighResContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js":
/*!********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract = /*#__PURE__*/function () {
  function StaticContract() {
    _classCallCheck(this, StaticContract);
  }
  return _createClass(StaticContract, [{
    key: "validateParams",
    value:
    //the message should insert to queue regardless of the param validation.
    //upon receiving invalid values- a log should be send
    function validateParams() {
      throw new Error('_validateParams should be overridden');
    }
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      throw new Error('buildQueueMessage should be overridden');
    }
    //the message should insert to queue regardless of the message validation.
    //upon receiving invalid value- a log should be send
  }, {
    key: "validateMessage",
    value: function validateMessage() {
      throw new Error('_validateMessage should be overridden');
    }
  }, {
    key: "getName",
    value: function getName() {
      throw new Error('_getName should be overridden');
    }
  }]);
}();
exports["default"] = StaticContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StorageDirectoryContract.js":
/*!******************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/StorageDirectoryContract.js ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var StorageDirectoryContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} directoryName
   */
  function StorageDirectoryContract(directoryName) {
    var _this;
    _classCallCheck(this, StorageDirectoryContract);
    _this = _callSuper(this, StorageDirectoryContract);
    _this.validateParams(directoryName);
    _this.directoryName = directoryName;
    return _this;
  }
  _inherits(StorageDirectoryContract, _StaticContract_1$def);
  return _createClass(StorageDirectoryContract, [{
    key: "validateParams",
    value: function validateParams(directoryName) {
      var isValid = typeof directoryName === 'string';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in StorageDirectory parameters. directoryName : {expected: string, received: ".concat(_typeof(directoryName), "}"));
      }
    }
    /**
     * @return  {[string, string]} for example: ['storage_directory', 'root']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.directoryName];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        Logger_1["default"].warn('StorageDirectory - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'storage_directory';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = StorageDirectoryContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StorageEstimateContract.js":
/*!*****************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/StorageEstimateContract.js ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ./StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var StorageEstimateContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {number} usage
   * @param  {number} quota
   */
  function StorageEstimateContract(usage, quota) {
    var _this;
    _classCallCheck(this, StorageEstimateContract);
    _this = _callSuper(this, StorageEstimateContract);
    _this.validateParams(usage, quota);
    _this.usage = usage;
    _this.quota = quota;
    return _this;
  }
  _inherits(StorageEstimateContract, _StaticContract_1$def);
  return _createClass(StorageEstimateContract, [{
    key: "validateParams",
    value: function validateParams(usage, quota) {
      var isValid = typeof usage === 'number' && typeof quota === 'number';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in StorageEstimate parameters. usage : {expected: number, received: ".concat(_typeof(usage), "}, quota : {expected: number, received: ").concat(_typeof(quota), "}"));
      }
    }
    /**
     * @return  {[string, [number, number]]} for example: ['storage_estimate', [2126, 296630877388]]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, [this.usage, this.quota]];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]) && message[1].length === 2;
      if (!isValid) {
        Logger_1["default"].warn('StorageEstimate - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'storage_estimate';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = StorageEstimateContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/UserPermissionsContracts/PerKindUserPermissionContract.js":
/*!************************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/UserPermissionsContracts/PerKindUserPermissionContract.js ***!
  \************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var PerKindUserPermissionContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} kind
   * @param {number} perm
   */
  function PerKindUserPermissionContract(kind, perm) {
    var _this;
    _classCallCheck(this, PerKindUserPermissionContract);
    _this = _callSuper(this, PerKindUserPermissionContract);
    _this.validateParams(kind, perm);
    _this.kind = kind;
    _this.perm = perm;
    return _this;
  }
  _inherits(PerKindUserPermissionContract, _StaticContract_1$def);
  return _createClass(PerKindUserPermissionContract, [{
    key: "validateParams",
    value: function validateParams(kind, perm) {
      var isValid = typeof kind === 'string' && typeof perm === 'number';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in PerKind , UserPermissionContract, parameters. kind : {expected: string, received: ".concat(_typeof(kind), "}, perm : {expected: number, received: ").concat(_typeof(perm), "}"));
      }
    }
    /**
     * @return  {[string,number]} for example: ['per_kind', -1]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.perm];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        Logger_1["default"].warn('PerKind, UserPermissionContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return "per_".concat(this.kind);
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = PerKindUserPermissionContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/UserPermissionsContracts/PerStorageUserPermissionContract.js":
/*!***************************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/UserPermissionsContracts/PerStorageUserPermissionContract.js ***!
  \***************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var PerStorageUserPermissionContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param {number} persistent
   */
  function PerStorageUserPermissionContract(persistent) {
    var _this;
    _classCallCheck(this, PerStorageUserPermissionContract);
    _this = _callSuper(this, PerStorageUserPermissionContract);
    _this.validateParams(persistent);
    _this.persistent = persistent;
    return _this;
  }
  _inherits(PerStorageUserPermissionContract, _StaticContract_1$def);
  return _createClass(PerStorageUserPermissionContract, [{
    key: "validateParams",
    value: function validateParams(persistent) {
      var isValid = typeof persistent === 'number';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in PerStorage , UserPermissionContract, parameters. persistent : {expected: number, received: ".concat(_typeof(persistent), "}"));
      }
    }
    /**
     * @return  {[string,number]} for example: ['per_storage', -1]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.persistent];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        Logger_1["default"].warn('per_storage, UserPermissionContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return "per_storage";
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = PerStorageUserPermissionContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/UserPermissionsContracts/PerUserPermissionContract.js":
/*!********************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/UserPermissionsContracts/PerUserPermissionContract.js ***!
  \********************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var PerUserPermissionContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} per
   * @param {number} state
   */
  function PerUserPermissionContract(per, state) {
    var _this;
    _classCallCheck(this, PerUserPermissionContract);
    _this = _callSuper(this, PerUserPermissionContract);
    _this.validateParams(per, state);
    _this.per = per;
    _this.state = state;
    return _this;
  }
  _inherits(PerUserPermissionContract, _StaticContract_1$def);
  return _createClass(PerUserPermissionContract, [{
    key: "validateParams",
    value: function validateParams(per, state) {
      var isValid = typeof per === 'string' && typeof state === 'number';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in Per, UserPermissionContract, parameters. per : {expected: string, received: ".concat(_typeof(per), "}, state : {expected: number, received: ").concat(_typeof(state), "}"));
      }
    }
    /**
     * @return  {[string,number]} for example: ['per_per', -1]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.state];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        Logger_1["default"].warn('per, UserPermissionContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return "per_".concat(this.per);
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = PerUserPermissionContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/BrowserDisplayBrowserPropsContract.js":
/*!*************************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/BrowserDisplayBrowserPropsContract.js ***!
  \*************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BrowserDisplayBrowserPropsContract = void 0;
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var BrowserDisplayBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} browserDisplay,
   */
  function BrowserDisplayBrowserPropsContract(browserDisplay) {
    var _this;
    _classCallCheck(this, BrowserDisplayBrowserPropsContract);
    _this = _callSuper(this, BrowserDisplayBrowserPropsContract);
    _this.validateParams(browserDisplay);
    _this.browserDisplay = browserDisplay;
    return _this;
  }
  _inherits(BrowserDisplayBrowserPropsContract, _StaticContract_1$def);
  return _createClass(BrowserDisplayBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(browserDisplay) {
      var isValid = typeof browserDisplay === 'string';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in BrowserDisplay, BrowserProps parameters. BrowserDisplay : {expected: string, received: ".concat(_typeof(browserDisplay), "}"));
      }
    }
    /**
     * @return  {[string,string]} for example: ['browser_display', '']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.browserDisplay];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        Logger_1["default"].warn('TransparencyReduced, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'browser_display_detect';
    }
  }]);
}(StaticContract_1["default"]);
exports.BrowserDisplayBrowserPropsContract = BrowserDisplayBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/BuildIDBrowserPropsContract.js":
/*!******************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/BuildIDBrowserPropsContract.js ***!
  \******************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var BuildIDBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param {string} buildID, indicates the representing string of the build identifier of the browser.
   * The build ID is in the form YYYYMMDDHHMMSS. in Firefox 64 onwards.
   */
  function BuildIDBrowserPropsContract(buildID) {
    var _this;
    _classCallCheck(this, BuildIDBrowserPropsContract);
    _this = _callSuper(this, BuildIDBrowserPropsContract);
    _this.validateParams(buildID);
    _this.buildID = buildID;
    return _this;
  }
  _inherits(BuildIDBrowserPropsContract, _StaticContract_1$def);
  return _createClass(BuildIDBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(buildID) {
      var isValid = buildID !== undefined && typeof buildID === 'string';
      if (!isValid) {
        Logger_1["default"].warn("The buildID is either undefined or of a wrong type. Expected string, received: ".concat(_typeof(buildID)));
      }
    }
    /**
     * @return  {[string, string]} for example: ['navigator_build_id', 20220308175500]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.buildID];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        Logger_1["default"].warn('navigator_build_id, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'navigator_build_id';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = BuildIDBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/CookieEnabledBrowserPropsContract.js":
/*!************************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/CookieEnabledBrowserPropsContract.js ***!
  \************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var CookieEnabledBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {boolean} isCookie,
   */
  function CookieEnabledBrowserPropsContract(isCookie) {
    var _this;
    _classCallCheck(this, CookieEnabledBrowserPropsContract);
    _this = _callSuper(this, CookieEnabledBrowserPropsContract);
    _this.validateParams(isCookie);
    _this.isCookie = isCookie;
    return _this;
  }
  _inherits(CookieEnabledBrowserPropsContract, _StaticContract_1$def);
  return _createClass(CookieEnabledBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(isCookie) {
      var isValid = typeof isCookie === 'boolean';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in CookieEnabled, BrowserProps parameters. isCookie : {expected: boolean, received: ".concat(_typeof(isCookie), "}"));
      }
    }
    /**
     * @return  {[string,boolean]} for example: ['cookie_enabled', true]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.isCookie];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'boolean';
      if (!isValid) {
        Logger_1["default"].warn('CookieEnabled,BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'cookie_enabled';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = CookieEnabledBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/CoresBrowserPropsContract.js":
/*!****************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/CoresBrowserPropsContract.js ***!
  \****************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var CoresBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {number} hardwareConcurrency, A number between 1 and the number of logical processors potentially available to the user agent || 0 if not supported in the browser.
   */
  function CoresBrowserPropsContract(hardwareConcurrency) {
    var _this;
    _classCallCheck(this, CoresBrowserPropsContract);
    _this = _callSuper(this, CoresBrowserPropsContract);
    _this.validateParams(hardwareConcurrency);
    _this.hardwareConcurrency = hardwareConcurrency;
    return _this;
  }
  _inherits(CoresBrowserPropsContract, _StaticContract_1$def);
  return _createClass(CoresBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(hardwareConcurrency) {
      var isValid = typeof hardwareConcurrency === 'number';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in cores, BrowserProps parameters. hardwareConcurrency : {expected: number, received: ".concat(_typeof(hardwareConcurrency), "}"));
      }
    }
    /**
     * @return  {[string,number]} for example: ['cores',12]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.hardwareConcurrency];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        Logger_1["default"].warn('cores,BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'cores';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = CoresBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/DeviceMemoryBrowserPropsContract.js":
/*!***********************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/DeviceMemoryBrowserPropsContract.js ***!
  \***********************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var DeviceMemoryBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {float} memory, A floating point number; one of 0.25, 0.5, 1, 2, 4, 8,|| 0 if the browser is not supporting the method
   */
  function DeviceMemoryBrowserPropsContract(memory) {
    var _this;
    _classCallCheck(this, DeviceMemoryBrowserPropsContract);
    _this = _callSuper(this, DeviceMemoryBrowserPropsContract);
    _this.validateParams(memory);
    _this.memory = memory;
    return _this;
  }
  _inherits(DeviceMemoryBrowserPropsContract, _StaticContract_1$def);
  return _createClass(DeviceMemoryBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(memory) {
      var isValid = typeof memory === 'number' && (memory === 0.25 || memory === 0.5 || memory === 1 || memory === 2 || memory === 4 || memory === 8 || memory === 0);
      if (!isValid) {
        Logger_1["default"].warn("wrong type in DeviceMemoryBrowser, BrowserProps parameters. memory : {expected: number in {0.25, 0.5, 1, 2, 4, 8, 0} received: type:".concat(_typeof(memory), " value:").concat(memory, "}"));
      }
    }
    /**
     * @return  {[string,float]} for example : ['device_memory', 0.25]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.memory];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        Logger_1["default"].warn('device_memory, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'device_memory';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = DeviceMemoryBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/DeviceSourceBrowserPropsContract.js":
/*!***********************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/DeviceSourceBrowserPropsContract.js ***!
  \***********************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var DeviceSourceBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} source, for example:'js'
   */
  function DeviceSourceBrowserPropsContract(source) {
    var _this;
    _classCallCheck(this, DeviceSourceBrowserPropsContract);
    _this = _callSuper(this, DeviceSourceBrowserPropsContract);
    _this.validateParams(source);
    _this.source = source;
    return _this;
  }
  _inherits(DeviceSourceBrowserPropsContract, _StaticContract_1$def);
  return _createClass(DeviceSourceBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(source) {
      var isValid = typeof source === 'string';
      if (!isValid) {
        Logger_1["default"].warn(" wrong type in DeviceSource, BrowserProps parameters. source : {expected: string, received: ".concat(_typeof(source), "}"));
      }
    }
    /**
     * @return  {[string,string]} for example: ['device_source', 'js']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.source];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        Logger_1["default"].warn('device_source, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'device_source';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = DeviceSourceBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/InputMechBrowserPropsContract.js":
/*!********************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/InputMechBrowserPropsContract.js ***!
  \********************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var InputMechBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {number} pointer, , for example: 1
   * @param  {number} hover , for example: 2
   */
  function InputMechBrowserPropsContract(pointer, hover) {
    var _this;
    _classCallCheck(this, InputMechBrowserPropsContract);
    _this = _callSuper(this, InputMechBrowserPropsContract);
    _this.validateParams(pointer, hover);
    _this.pointer = pointer;
    _this.hover = hover;
    return _this;
  }
  _inherits(InputMechBrowserPropsContract, _StaticContract_1$def);
  return _createClass(InputMechBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(pointer, hover) {
      var isValid = typeof pointer === 'number' && (pointer === 1 || pointer === 2 || pointer === 3 || pointer === 4 || pointer === 5) && typeof hover === 'number' && (hover === 1 || hover === 2 || hover === 3 || hover === 4 || hover === 5);
      if (!isValid) {
        Logger_1["default"].warn(" wrong type in InputMech, BrowserProps parameters. pointer : {expected: number, received: ".concat(_typeof(pointer), "}, hover : {expected: number, received: ").concat(_typeof(hover), "}"));
      }
    }
    /**
     * @return  {[string,[...number]]} for example:['input_mech', [1,2]]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, [this.pointer, this.hover]];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]) && message[1].length === 2;
      if (!isValid) {
        Logger_1["default"].warn('input_mech, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'input_mech';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = InputMechBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/JsUaBrowserPropsContract.js":
/*!***************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/JsUaBrowserPropsContract.js ***!
  \***************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var JsUaBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} userAgent,
   */
  function JsUaBrowserPropsContract(userAgent) {
    var _this;
    _classCallCheck(this, JsUaBrowserPropsContract);
    _this = _callSuper(this, JsUaBrowserPropsContract);
    _this.validateParams(userAgent);
    _this.userAgent = userAgent;
    return _this;
  }
  _inherits(JsUaBrowserPropsContract, _StaticContract_1$def);
  return _createClass(JsUaBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(userAgent) {
      var isValid = typeof userAgent === 'string';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in JsUa, BrowserProps parameters. userAgent : {expected: string, received: ".concat(_typeof(userAgent), "}"));
      }
    }
    /**
     * @return  {[string,string]} for example: ['js_ua', 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) ApML, like Gecko) Chrome/97.0.4692.71 Safari/537.36']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.userAgent];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        Logger_1["default"].warn('js_ua, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'js_ua';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = JsUaBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/LangBrowserPropsContract.js":
/*!***************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/LangBrowserPropsContract.js ***!
  \***************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var LangBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} language for example: 'en-US'
   */
  function LangBrowserPropsContract(language) {
    var _this;
    _classCallCheck(this, LangBrowserPropsContract);
    _this = _callSuper(this, LangBrowserPropsContract);
    _this.validateParams(language);
    _this.language = language;
    return _this;
  }
  _inherits(LangBrowserPropsContract, _StaticContract_1$def);
  return _createClass(LangBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(language) {
      var isValid = typeof language === 'string';
      if (!isValid) {
        Logger_1["default"].warn(" wrong type in Lang, BrowserProps parameters. language : {expected: string, received: ".concat(_typeof(language), "}"));
      }
    }
    /**
     * @return  {[string,string]} for example: ['main_lang', 'en-US']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.language];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        Logger_1["default"].warn('main_lang, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'main_lang';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = LangBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/LanguagesListBrowserPropsContract.js":
/*!************************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/LanguagesListBrowserPropsContract.js ***!
  \************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var LanguagesListBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {[...string]} languagesList for example: ['en-US', 'en']
   */
  function LanguagesListBrowserPropsContract(languagesList) {
    var _this;
    _classCallCheck(this, LanguagesListBrowserPropsContract);
    _this = _callSuper(this, LanguagesListBrowserPropsContract);
    _this.validateParams(languagesList);
    _this.languagesList = languagesList;
    return _this;
  }
  _inherits(LanguagesListBrowserPropsContract, _StaticContract_1$def);
  return _createClass(LanguagesListBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(languagesList) {
      var isValid = Array.isArray(languagesList) && this._eachLangIsValid(languagesList);
      if (!isValid) {
        Logger_1["default"].warn(" wrong type in LanguagesList, BrowserProps parameters. languagesList : {expected: [...string], received: ".concat(_typeof(languagesList), "}"));
      }
    }
  }, {
    key: "_eachLangIsValid",
    value: function _eachLangIsValid(languagesList) {
      var validStrings = true;
      var _iterator = _createForOfIteratorHelper(languagesList),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var i = _step.value;
          if (typeof i !== 'string') {
            validStrings = false;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return validStrings;
    }
    /**
     * @return  {[string,string]} for example: ['main_lang', ['en-US', 'en']]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.languagesList];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]);
      if (!isValid) {
        Logger_1["default"].warn('languages, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'languages';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = LanguagesListBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/MaxTouchPointsBrowserPropsContract.js":
/*!*************************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/MaxTouchPointsBrowserPropsContract.js ***!
  \*************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MaxTouchPointsBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {number} maxTouchPoints, indicates the maximum number of simultaneous touch contact points that are supported by the current device.
   */
  function MaxTouchPointsBrowserPropsContract(maxTouchPoints) {
    var _this;
    _classCallCheck(this, MaxTouchPointsBrowserPropsContract);
    _this = _callSuper(this, MaxTouchPointsBrowserPropsContract);
    _this.validateParams(maxTouchPoints);
    _this.maxTouchPoints = maxTouchPoints;
    return _this;
  }
  _inherits(MaxTouchPointsBrowserPropsContract, _StaticContract_1$def);
  return _createClass(MaxTouchPointsBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(maxTouchPoints) {
      var isValid = maxTouchPoints !== undefined && typeof maxTouchPoints === 'number';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in MaxTouchPointsContract parameters. Expected: number, received: ".concat(_typeof(maxTouchPoints)));
      }
    }
    /**
     * @return  {[string, number]} for example: ['navigator_max_touch_points', 0]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.maxTouchPoints];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        Logger_1["default"].warn("navigator_max_touch_points, BrowserPropsContract - Contract verification failed");
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'navigator_max_touch_points';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = MaxTouchPointsBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/OSBrowserPropsContract.js":
/*!*************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/OSBrowserPropsContract.js ***!
  \*************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var OSBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} platform string of type DOMString. for example: 'MacIntel'
   */
  function OSBrowserPropsContract(platform) {
    var _this;
    _classCallCheck(this, OSBrowserPropsContract);
    _this = _callSuper(this, OSBrowserPropsContract);
    _this.validateParams(platform);
    _this.platform = platform;
    return _this;
  }
  _inherits(OSBrowserPropsContract, _StaticContract_1$def);
  return _createClass(OSBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(platform) {
      var isValid = typeof platform === 'string';
      if (!isValid) {
        Logger_1["default"].warn(" wrong type in OS, BrowserProps parameters. platform : {expected: string, received: ".concat(_typeof(platform), "}"));
      }
    }
    /**
     * @return  {[string,string]} for example: ['os', 'Win32']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.platform];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        Logger_1["default"].warn('os, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'os';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = OSBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/OSFamilyBrowserPropsContract.js":
/*!*******************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/OSFamilyBrowserPropsContract.js ***!
  \*******************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var OSFamilyBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} osName, for example: 'Macintosh'
   */
  function OSFamilyBrowserPropsContract(osName) {
    var _this;
    _classCallCheck(this, OSFamilyBrowserPropsContract);
    _this = _callSuper(this, OSFamilyBrowserPropsContract);
    _this.validateParams(osName);
    _this.osName = osName;
    return _this;
  }
  _inherits(OSFamilyBrowserPropsContract, _StaticContract_1$def);
  return _createClass(OSFamilyBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(osName) {
      var isValid = typeof osName === 'string';
      if (!isValid) {
        Logger_1["default"].warn(" wrong type in OSFamily, BrowserProps parameters. osName : {expected: string, received: ".concat(_typeof(osName), "}"));
      }
    }
    /**
     * @return  {[string,string]} for example: ['os_version', 'posix']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.osName];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        Logger_1["default"].warn('os_family, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'os_family';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = OSFamilyBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/OSVersionBrowserPropsContract.js":
/*!********************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/OSVersionBrowserPropsContract.js ***!
  \********************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var OSVersionBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {number} version, for example: 10.157 or null
   */
  function OSVersionBrowserPropsContract(version) {
    var _this;
    _classCallCheck(this, OSVersionBrowserPropsContract);
    _this = _callSuper(this, OSVersionBrowserPropsContract);
    _this.validateParams(version);
    _this.version = version;
    return _this;
  }
  _inherits(OSVersionBrowserPropsContract, _StaticContract_1$def);
  return _createClass(OSVersionBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(version) {
      var isValid = typeof version === 'number' || version === null;
      if (!isValid) {
        Logger_1["default"].warn(" wrong type in OSVersion, BrowserProps parameters. version : {expected: number, received: ".concat(_typeof(version), "}"));
      }
    }
    /**
     * @return  {[string,number]} for example: ['os_version', 10.157]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.version];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && (typeof message[1] === 'number' || message[1] === null);
      if (!isValid) {
        Logger_1["default"].warn('os_version, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'os_version';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = OSVersionBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/PluginsBrowserPropsContract.js":
/*!******************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/PluginsBrowserPropsContract.js ***!
  \******************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var PluginsBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {[[...string]]} plugins, Array of Arrays of strings : [['name':string, 'filename':string, 'description':string, 'version':string],...]
   */
  function PluginsBrowserPropsContract(plugins) {
    var _this;
    _classCallCheck(this, PluginsBrowserPropsContract);
    _this = _callSuper(this, PluginsBrowserPropsContract);
    _this.validateParams(plugins);
    _this.plugins = plugins;
    return _this;
  }
  _inherits(PluginsBrowserPropsContract, _StaticContract_1$def);
  return _createClass(PluginsBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(plugins) {
      var isValid = Array.isArray(plugins) && this._eachPluginIsValid(plugins);
      if (!isValid) {
        Logger_1["default"].warn(" wrong type in plugins, BrowserProps parameters. plugins : {expected: [[...string]], received: ".concat(_typeof(plugins), "}"));
      }
    }
  }, {
    key: "_eachPluginIsValid",
    value: function _eachPluginIsValid(plugins) {
      var validArrays = true;
      var validStrings = true;
      var validLengths = true;
      var _iterator = _createForOfIteratorHelper(plugins),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var i = _step.value;
          if (!Array.isArray(i)) {
            validArrays = false;
          } else {
            if (i.length !== 4) {
              validLengths = false;
            }
            var _iterator2 = _createForOfIteratorHelper(i),
              _step2;
            try {
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                var j = _step2.value;
                if (typeof j !== 'string') {
                  validStrings = false;
                }
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return validArrays && validLengths && validStrings;
    }
    /**
     * @return  {[string,[[...string]]]} for example : ['plugins',[['PDF Viewer', 'internal-pdf-viewer', 'Portable Document Format', ''], ['name2', 'filename2', 'description2', 'version2']]]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.plugins];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && Array.isArray(message[1]);
      if (!isValid) {
        Logger_1["default"].warn('plugins, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'plugins';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = PluginsBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/TimeZoneBrowserPropsContract.js":
/*!*******************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/TimeZoneBrowserPropsContract.js ***!
  \*******************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var TimeZoneBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {number} tz, positive number, for example: 180
   */
  function TimeZoneBrowserPropsContract(tz) {
    var _this;
    _classCallCheck(this, TimeZoneBrowserPropsContract);
    _this = _callSuper(this, TimeZoneBrowserPropsContract);
    _this.validateParams(tz);
    _this.tz = tz;
    return _this;
  }
  _inherits(TimeZoneBrowserPropsContract, _StaticContract_1$def);
  return _createClass(TimeZoneBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(tz) {
      var isValid = typeof tz === 'number';
      if (!isValid) {
        Logger_1["default"].warn("wrong type in TimeZone, BrowserProps parameters. tz : {expected: string, received: ".concat(_typeof(tz), "}"));
      }
    }
    /**
     * @return  {[string,number]} for example: ['time_zone', 180]
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.tz];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'number';
      if (!isValid) {
        Logger_1["default"].warn('time_zone, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'time_zone';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = TimeZoneBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/VersionClientBrowserPropsContract.js":
/*!************************************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/contract/staticContracts/browserPropsContract/VersionClientBrowserPropsContract.js ***!
  \************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var StaticContract_1 = __importDefault(__webpack_require__(/*! ../StaticContract */ "./dist/js-sdk-legacy/src/main/contract/staticContracts/StaticContract.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var VersionClientBrowserPropsContract = /*#__PURE__*/function (_StaticContract_1$def) {
  /**
   * @param  {string} scriptVersion, for example:'dev-version.0.18c28ea0'
   */
  function VersionClientBrowserPropsContract(scriptVersion) {
    var _this;
    _classCallCheck(this, VersionClientBrowserPropsContract);
    _this = _callSuper(this, VersionClientBrowserPropsContract);
    _this.validateParams(scriptVersion);
    _this.scriptVersion = scriptVersion;
    return _this;
  }
  _inherits(VersionClientBrowserPropsContract, _StaticContract_1$def);
  return _createClass(VersionClientBrowserPropsContract, [{
    key: "validateParams",
    value: function validateParams(scriptVersion) {
      var isValid = typeof scriptVersion === 'string';
      if (!isValid) {
        Logger_1["default"].warn(" wrong type in VersionClient, BrowserProps parameters. scriptVersion : {expected: string, received: ".concat(_typeof(scriptVersion), "}"));
      }
    }
    /**
     * @return  {[string,string]} for example: ['version_client', 'dev-version.0.18c28ea0']
     */
  }, {
    key: "buildQueueMessage",
    value: function buildQueueMessage() {
      var name = this.getName();
      var message = [name, this.scriptVersion];
      this.validateMessage(message);
      return message;
    }
  }, {
    key: "validateMessage",
    value: function validateMessage(message) {
      var isValid = typeof message[0] === 'string' && typeof message[1] === 'string';
      if (!isValid) {
        Logger_1["default"].warn('version_client, BrowserPropsContract - Contract verification failed');
      }
    }
  }, {
    key: "getName",
    value: function getName() {
      return 'version_client';
    }
  }]);
}(StaticContract_1["default"]);
exports["default"] = VersionClientBrowserPropsContract;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/ConfigMapper.js":
/*!**********************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/ConfigMapper.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ConfigMapper = void 0;
var StartupConfigurations_1 = __importDefault(__webpack_require__(/*! ../api/StartupConfigurations */ "./dist/js-sdk-legacy/src/main/api/StartupConfigurations.js"));
var APIConfigurationKey_1 = __webpack_require__(/*! ../contract/APIConfigurationKey */ "./dist/js-sdk-legacy/src/main/contract/APIConfigurationKey.js");
var CollectionSettings_1 = __importDefault(__webpack_require__(/*! ../api/CollectionSettings */ "./dist/js-sdk-legacy/src/main/api/CollectionSettings.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ./configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var ConfigMapper = /*#__PURE__*/function () {
  function ConfigMapper() {
    _classCallCheck(this, ConfigMapper);
  }
  return _createClass(ConfigMapper, [{
    key: "mapStartupConfigurations",
    value: function mapStartupConfigurations(wupServerUrl, configurations) {
      return new StartupConfigurations_1["default"](wupServerUrl, configurations[APIConfigurationKey_1.APIConfigurationKey.logServerURL], configurations[APIConfigurationKey_1.APIConfigurationKey.enableFramesProcessing], configurations[APIConfigurationKey_1.APIConfigurationKey.enableCustomElementsProcessing], configurations[APIConfigurationKey_1.APIConfigurationKey.enableSameSiteNoneAndSecureCookies], configurations[APIConfigurationKey_1.APIConfigurationKey.useUrlWorker] || false, configurations[APIConfigurationKey_1.APIConfigurationKey.workerUrl] || '', configurations[APIConfigurationKey_1.APIConfigurationKey.isWupServerURLProxy] || false, configurations[APIConfigurationKey_1.APIConfigurationKey.clientSettings], new CollectionSettings_1["default"](configurations[APIConfigurationKey_1.APIConfigurationKey.collectionSettings]), configurations[APIConfigurationKey_1.APIConfigurationKey.enableStartupCustomerSessionId], configurations[APIConfigurationKey_1.APIConfigurationKey.mutationMaxChunkSize] || 0, configurations[APIConfigurationKey_1.APIConfigurationKey.mutationChunkDelayMs] || 100, configurations[ConfigurationFields_1.ConfigurationFields.passwordIdMaskingList], configurations[ConfigurationFields_1.ConfigurationFields.enableUnmaskedValues] || false, configurations[ConfigurationFields_1.ConfigurationFields.allowedUnmaskedValuesList] || [], configurations[ConfigurationFields_1.ConfigurationFields.enableCoordinatesMasking] || false, configurations[APIConfigurationKey_1.APIConfigurationKey.isFlutterApp] || false, configurations[APIConfigurationKey_1.APIConfigurationKey.enableMinifiedWupUri] !== undefined ? configurations[APIConfigurationKey_1.APIConfigurationKey.enableMinifiedWupUri] : true, configurations[APIConfigurationKey_1.APIConfigurationKey.enableMinifiedLogUri] !== undefined ? configurations[APIConfigurationKey_1.APIConfigurationKey.enableMinifiedLogUri] : false, configurations[APIConfigurationKey_1.APIConfigurationKey.maxShadowDepth] || 0, configurations[APIConfigurationKey_1.APIConfigurationKey.iframeLoadingTimeout] || 5000, configurations[APIConfigurationKey_1.APIConfigurationKey.elementCategories], configurations[APIConfigurationKey_1.APIConfigurationKey.elementAttributes], configurations[APIConfigurationKey_1.APIConfigurationKey.enableMathDetect] !== undefined ? configurations[APIConfigurationKey_1.APIConfigurationKey.enableMathDetect] : false, configurations[APIConfigurationKey_1.APIConfigurationKey.enableBrowserDisplayDetect] !== undefined ? configurations[APIConfigurationKey_1.APIConfigurationKey.enableBrowserDisplayDetect] : false, configurations[APIConfigurationKey_1.APIConfigurationKey.enableGraphCard] !== undefined ? configurations[APIConfigurationKey_1.APIConfigurationKey.enableGraphCard] : false, configurations[APIConfigurationKey_1.APIConfigurationKey.useLegacyZeroTimeout] !== undefined ? configurations[APIConfigurationKey_1.APIConfigurationKey.useLegacyZeroTimeout] : true);
    }
  }]);
}();
exports.ConfigMapper = ConfigMapper;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/DynamicCdApiLoader.js":
/*!****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/DynamicCdApiLoader.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DynamicCdApiLoader = void 0;
var DynamicCdApiLoader = /*#__PURE__*/function () {
  function DynamicCdApiLoader() {
    _classCallCheck(this, DynamicCdApiLoader);
  }
  return _createClass(DynamicCdApiLoader, [{
    key: "attachCdApi",
    value: function attachCdApi(window, customerSessionId) {
      var cdApi = this.createCdApi(window, customerSessionId);
      window.cdApi = cdApi;
      window.cdApi.listenToEvents();
    }
  }, {
    key: "createCdApi",
    value: function createCdApi(window, customerSessionId) {
      // Create the "cdApi" object in the browser:
      return {
        // Map of events and their subscribed listeners
        _eventListeners: {},
        /**
         * Handle messages arriving from the SDK library
         * @param e - The message event
         */
        onMessage: function onMessage(e) {
          var eventListeners = this._eventListeners[e.data.type];
          // If there are no listeners, abort at this point
          if (!eventListeners) {
            return;
          }
          for (var i = 0; i < eventListeners.length; i++) {
            eventListeners[i](e.data.event);
          }
        },
        listenToEvents: function listenToEvents() {
          if (window.addEventListener) {
            window.addEventListener('message', this.onMessage.bind(this), true);
          } else {
            window.attachEvent('onmessage', this.onMessage.bind(this));
          }
        },
        getCustomerSessionID: function getCustomerSessionID(callback) {
          if (customerSessionId) {
            callback(customerSessionId);
          } else {
            callback(undefined);
          }
        },
        registerSessionNumberChange: function registerSessionNumberChange(callback) {
          function onNotification(e) {
            var msg = e.data;
            if (msg.type === 'SNumNotification') {
              callback(msg.cdSNum);
            }
          }
          if (window.addEventListener) {
            window.addEventListener('message', onNotification, true);
          } else {
            window.attachEvent('onmessage', onNotification);
          }
        },
        addEventListener: function addEventListener(eventType, listenerFunction) {
          var listenersList = this._eventListeners[eventType];
          if (!listenersList) {
            listenersList = [];
            this._eventListeners[eventType] = listenersList;
          }
          listenersList.push(listenerFunction);
        },
        removeEventListener: function removeEventListener(eventType, listenerFunction) {
          var listenersList = this._eventListeners[eventType];
          // If nothing is subscribed for this event, return
          if (!listenersList) {
            return;
          }
          for (var i = 0; i < listenersList.length; i++) {
            if (listenersList[i] === listenerFunction) {
              listenersList.splice(i, 1); // Corrected to remove only the specific function
              break; // Exit loop after removing the listener
            }
          }
        },
        changeContext: function changeContext(contextName) {
          window.postMessage({
            type: 'ContextChange',
            context: contextName
          }, window.location.href);
        },
        startNewSession: function startNewSession(csid) {
          window.postMessage({
            type: 'ResetSession',
            resetReason: 'customerApi',
            csid: csid
          }, window.location.href);
        },
        pauseCollection: function pauseCollection() {
          window.postMessage({
            type: 'cdChangeState',
            toState: 'pause'
          }, window.location.href);
        },
        resumeCollection: function resumeCollection() {
          window.postMessage({
            type: 'cdChangeState',
            toState: 'run'
          }, window.location.href);
        },
        sendMetadata: function sendMetadata(data) {
          window.postMessage({
            type: 'cdCustomerMetadata',
            data: data
          }, window.location.href);
        },
        setCustomerSessionId: function setCustomerSessionId(csid) {
          window.postMessage({
            type: 'cdSetCsid',
            csid: csid
          }, window.location.href);
        },
        setCustomerBrand: function setCustomerBrand(brand) {
          window.postMessage({
            type: 'cdSetCustomerBrand',
            brand: brand
          }, window.location.href);
        }
      };
    }
  }]);
}();
exports.DynamicCdApiLoader = DynamicCdApiLoader;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/EncryptedMuidService.js":
/*!******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/EncryptedMuidService.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var EncryptedIndexedDBStorage_1 = __importDefault(__webpack_require__(/*! ../technicalServices/storage/EncryptedIndexedDBStorage */ "./dist/js-sdk-legacy/src/main/technicalServices/storage/EncryptedIndexedDBStorage.js"));
/**
 * A service for managing the Machine/User ID (MUID), which is encrypted and stored
 * securely in IndexedDB. The service handles MUID generation, validation, retrieval,
 * and queuing for server-side processing.
 */
var EncryptedMuidService = /*#__PURE__*/function () {
  function EncryptedMuidService(_ref) {
    var domUtils = _ref.domUtils,
      utils = _ref.utils,
      configurationRepository = _ref.configurationRepository,
      _ref$keys = _ref.keys,
      keys = _ref$keys === void 0 ? {
        indexedDBKey: "emuid"
      } : _ref$keys,
      _ref$encryptedIndexed = _ref.encryptedIndexedDB,
      encryptedIndexedDB = _ref$encryptedIndexed === void 0 ? new EncryptedIndexedDBStorage_1["default"]({
        storeName: "emuid"
      }) : _ref$encryptedIndexed;
    _classCallCheck(this, EncryptedMuidService);
    this._domUtils = domUtils;
    this._utils = utils;
    this._configurationRepository = configurationRepository;
    this._encryptedStorage = encryptedIndexedDB;
    this._keys = keys;
  }
  /**
   * Initializes the encrypted MUID. If a valid MUID exists, it is retrieved
   * from storage; otherwise, a new MUID is generated.
   *
   * @return {!Promise<string>} A promise that resolves to the initialized MUID.
   * @throws {Error} If the MUID initialization fails.
   */
  return _createClass(EncryptedMuidService, [{
    key: "getEncryptedMuid",
    value: (function () {
      var _getEncryptedMuid = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var muid, _t;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              _context.p = 0;
              Logger_1["default"].debug("Fetching existing Encrypted MUID from storage...");
              _context.n = 1;
              return this._fetchMuidFromStorage();
            case 1:
              muid = _context.v;
              if (this._isValidMuid(muid)) {
                _context.n = 3;
                break;
              }
              Logger_1["default"].warn("No valid Encrypted MUID found. Generating a new one...");
              _context.n = 2;
              return this._generateNewMuid();
            case 2:
              muid = _context.v;
              _context.n = 3;
              return this._saveMuidToStorage(muid);
            case 3:
              return _context.a(2, muid);
            case 4:
              _context.p = 4;
              _t = _context.v;
              Logger_1["default"].error("Failed to initialize MUID:", _t);
              return _context.a(2, null);
          }
        }, _callee, this, [[0, 4]]);
      }));
      function getEncryptedMuid() {
        return _getEncryptedMuid.apply(this, arguments);
      }
      return getEncryptedMuid;
    }()
    /**
     * Fetches the encrypted MUID from storage.
     *
     * @return {!Promise<string|null>} A promise that resolves to the stored MUID,
     *     or null if no MUID exists.
     */
    )
  }, {
    key: "_fetchMuidFromStorage",
    value: (function () {
      var _fetchMuidFromStorage2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {
        var data, _t2;
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.p = _context2.n) {
            case 0:
              _context2.p = 0;
              _context2.n = 1;
              return this._encryptedStorage.getRecord(this._keys.indexedDBKey);
            case 1:
              data = _context2.v;
              Logger_1["default"].debug("Fetched Encrypted MUID from storage.");
              return _context2.a(2, (data === null || data === void 0 ? void 0 : data.emuid) || null);
            case 2:
              _context2.p = 2;
              _t2 = _context2.v;
              Logger_1["default"].error("Error retrieving Encrypted MUID from storage:", _t2);
              return _context2.a(2, null);
          }
        }, _callee2, this, [[0, 2]]);
      }));
      function _fetchMuidFromStorage() {
        return _fetchMuidFromStorage2.apply(this, arguments);
      }
      return _fetchMuidFromStorage;
    }()
    /**
     * Saves the encrypted MUID to storage.
     *
     * @param {string} newEmuid The MUID to save.
     * @return {!Promise<void>} A promise that resolves when the MUID is saved.
     */
    )
  }, {
    key: "_saveMuidToStorage",
    value: (function () {
      var _saveMuidToStorage2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(newEmuid) {
        var _t3;
        return _regenerator().w(function (_context3) {
          while (1) switch (_context3.p = _context3.n) {
            case 0:
              _context3.p = 0;
              _context3.n = 1;
              return this._encryptedStorage.updateRecord(this._keys.indexedDBKey, {
                emuid: newEmuid
              });
            case 1:
              Logger_1["default"].debug("Encrypted MUID saved to storage.");
              _context3.n = 3;
              break;
            case 2:
              _context3.p = 2;
              _t3 = _context3.v;
              Logger_1["default"].error("Error saving Encrypted MUID to storage:", _t3);
            case 3:
              return _context3.a(2);
          }
        }, _callee3, this, [[0, 2]]);
      }));
      function _saveMuidToStorage(_x) {
        return _saveMuidToStorage2.apply(this, arguments);
      }
      return _saveMuidToStorage;
    }())
  }, {
    key: "_generateNewMuid",
    value: function _generateNewMuid() {
      return this._utils.dateNow() + '-' + this._utils.generateUUID().toUpperCase();
    }
    /**
     * Checks if the provided MUID is valid.
     *
     * @param {string} muid The MUID to validate.
     * @return {boolean} True if the MUID is valid; otherwise, false.
     */
  }, {
    key: "_isValidMuid",
    value: function _isValidMuid(muid) {
      if (!muid) return false;
      return /^([0-9]{13,}-)?[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(muid);
    }
  }]);
}();
exports["default"] = EncryptedMuidService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/MuidService.js":
/*!*********************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/MuidService.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MuidService = /*#__PURE__*/function () {
  function MuidService(utils, dataQ, storageUtilsWrapper, configurationRepository) {
    _classCallCheck(this, MuidService);
    this.muid = null;
    this._utils = utils;
    this._storageUtilsWrapper = storageUtilsWrapper;
    this._dataQ = dataQ;
    this._configurationRepository = configurationRepository;
    this.EXPIRATION = utils.minutesToMilliseconds(365 * 24 * 60);
  }
  /**
   * Try and keep the muid - machine uid for ever. save in cookie and storage, and
   * use the one that exists if it does, and always save again for a year expiration
   * and eventually send to server
   */
  return _createClass(MuidService, [{
    key: "initMuid",
    value: function initMuid() {
      // Try to find muid in either cookie or local storage
      var tempCookie = this._storageUtilsWrapper.getCookie('bmuid');
      var tempStorage = this._storageUtilsWrapper.getFromLocalStorage('bmuid');
      this.muid = tempCookie || tempStorage; // if either one of them exists
      this.muid = this._utils.StorageUtils.validateBcId(this.muid);
      // If muid was not found in storage we generate one
      if (!this.muid) {
        this.muid = this._utils.dateNow() + '-' + this._utils.generateUUID().toUpperCase();
        Logger_1["default"].info("Generated a new muid: ".concat(this.muid));
      }
      this._saveAndSendMuid();
      Logger_1["default"].info("Muid is: ".concat(this.muid));
    }
  }, {
    key: "updateMuid",
    value: function updateMuid(restoredMuid) {
      if (!restoredMuid) {
        Logger_1["default"].warn('MUID is not defined');
        return;
      }
      this.muid = restoredMuid;
      this.muid = this._utils.StorageUtils.validateBcId(this.muid);
      if (!this.muid) {
        Logger_1["default"].warn('Invalid format of restored MUID');
        return;
      }
      this._saveAndSendMuid();
      Logger_1["default"].info("Restored MUID is: ".concat(this.muid));
    }
  }, {
    key: "_saveAndSendMuid",
    value: function _saveAndSendMuid() {
      this._setStorageAndCookieKey();
      this._addMuidToQueue();
    }
    // Save muid to cookie and local storage
  }, {
    key: "_setStorageAndCookieKey",
    value: function _setStorageAndCookieKey() {
      this._storageUtilsWrapper.setCookie('bmuid', this.muid, this.EXPIRATION);
      this._storageUtilsWrapper.saveToLocalStorage('bmuid', this.muid);
    }
    // Send muid to server
  }, {
    key: "_addMuidToQueue",
    value: function _addMuidToQueue() {
      this._dataQ.addToQueue('static_fields', ['muid', this.muid], false);
    }
  }]);
}();
exports["default"] = MuidService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/ServerUrlResolver.js":
/*!***************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/ServerUrlResolver.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ServerUrlResolver = void 0;
var BCProtocolType_1 = __webpack_require__(/*! ../contract/BCProtocolType */ "./dist/js-sdk-legacy/src/main/contract/BCProtocolType.js");
var communication_1 = __webpack_require__(/*! ../const/communication */ "./dist/js-sdk-legacy/src/main/const/communication.js");
var ServerUrlResolver = /*#__PURE__*/function () {
  function ServerUrlResolver() {
    _classCallCheck(this, ServerUrlResolver);
  }
  return _createClass(ServerUrlResolver, [{
    key: "resolve",
    value: function resolve(serverUrl, configuredCustomerID, configuredProtocolType) {
      var url = new URL(serverUrl);
      // Determine the path based on the configured protocol type
      var newPath = '';
      if (configuredProtocolType === BCProtocolType_1.BCProtocolType.V4) {
        newPath = "/".concat(communication_1.wupUrlV4Path);
      } else if (configuredProtocolType === BCProtocolType_1.BCProtocolType.V3) {
        newPath = "/".concat(communication_1.wupUrlV3Path);
      }
      // Check if the serverUrl already has a protocol path (V3 or V4)
      if (!serverUrl.includes(communication_1.wupUrlV3Path) && !serverUrl.includes(communication_1.wupUrlV4Path)) {
        url.pathname = newPath;
      } else if (configuredProtocolType === BCProtocolType_1.BCProtocolType.V4 && serverUrl.includes(communication_1.wupUrlV3Path)) {
        // Replace existing V3 path with V4 if protocol type is V4
        url.pathname = newPath;
      }
      // Handle `cid`: use configuredCustomerID if provided, otherwise keep the original `cid`
      if (configuredCustomerID) {
        url.searchParams.set('cid', configuredCustomerID);
      } else if (!url.searchParams.has('cid')) {
        // If no `cid` is present and `configuredCustomerID` is undefined, log a warning or handle as needed
        console.warn('No cid found, and configuredCustomerID is undefined.');
      }
      return url.toString();
    }
  }]);
}();
exports.ServerUrlResolver = ServerUrlResolver;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/SystemBootstrapper.js":
/*!****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/SystemBootstrapper.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function get() {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
  __setModuleDefault(result, mod);
  return result;
};
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
// eslint-disable-next-line max-classes-per-file
var CDUtils_1 = __importDefault(__webpack_require__(/*! ../technicalServices/CDUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/CDUtils.js"));
var WorkerCommand_1 = __webpack_require__(/*! ../events/WorkerCommand */ "./dist/js-sdk-legacy/src/main/events/WorkerCommand.js");
var ConfigurationFields_1 = __webpack_require__(/*! ./configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var State_1 = __webpack_require__(/*! ./state/State */ "./dist/js-sdk-legacy/src/main/core/state/State.js");
var WorkerWrapperFactory_1 = __importDefault(__webpack_require__(/*! ../technicalServices/WorkerWrapperFactory */ "./dist/js-sdk-legacy/src/main/technicalServices/WorkerWrapperFactory.js"));
var WorkerCommunicator_1 = __importDefault(__webpack_require__(/*! ../technicalServices/WorkerCommunicator */ "./dist/js-sdk-legacy/src/main/technicalServices/WorkerCommunicator.js"));
var DataQ_1 = __importDefault(__webpack_require__(/*! ../technicalServices/DataQ */ "./dist/js-sdk-legacy/src/main/technicalServices/DataQ.js"));
var PerfMonitor_1 = __importDefault(__webpack_require__(/*! ../technicalServices/PerfMonitor */ "./dist/js-sdk-legacy/src/main/technicalServices/PerfMonitor.js"));
var SiteMapper_1 = __importDefault(__webpack_require__(/*! ../technicalServices/SiteMapper */ "./dist/js-sdk-legacy/src/main/technicalServices/SiteMapper.js"));
var ContextMgr_1 = __importDefault(__webpack_require__(/*! ./context/ContextMgr */ "./dist/js-sdk-legacy/src/main/core/context/ContextMgr.js"));
var GlobalExceptionHandler_1 = __importDefault(__webpack_require__(/*! ../infrastructure/GlobalExceptionHandler */ "./dist/js-sdk-legacy/src/main/infrastructure/GlobalExceptionHandler.js"));
var MessageBus_1 = __importDefault(__webpack_require__(/*! ../technicalServices/MessageBus */ "./dist/js-sdk-legacy/src/main/technicalServices/MessageBus.js"));
var CidCache_1 = __importDefault(__webpack_require__(/*! ./session/CidCache */ "./dist/js-sdk-legacy/src/main/core/session/CidCache.js"));
var ServerStateMgr_1 = __importDefault(__webpack_require__(/*! ./state/ServerStateMgr */ "./dist/js-sdk-legacy/src/main/core/state/ServerStateMgr.js"));
var ConfigurationRepository_1 = __importDefault(__webpack_require__(/*! ./configuration/ConfigurationRepository */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationRepository.js"));
var ConfigurationService_1 = __importDefault(__webpack_require__(/*! ./configuration/ConfigurationService */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationService.js"));
var SensorsDataQueue_1 = __importDefault(__webpack_require__(/*! ../collectors/events/SensorsDataQueue */ "./dist/js-sdk-legacy/src/main/collectors/events/SensorsDataQueue.js"));
var ElementsCollector_1 = __importDefault(__webpack_require__(/*! ../collectors/events/ElementsCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/ElementsCollector.js"));
var FramesHandlerFactory_1 = __importDefault(__webpack_require__(/*! ./frames/FramesHandlerFactory */ "./dist/js-sdk-legacy/src/main/core/frames/FramesHandlerFactory.js"));
var FeatureService_1 = __importDefault(__webpack_require__(/*! ../collectors/FeatureService */ "./dist/js-sdk-legacy/src/main/collectors/FeatureService.js"));
var PauseResumeManager_1 = __importDefault(__webpack_require__(/*! ./state/PauseResumeManager */ "./dist/js-sdk-legacy/src/main/core/state/PauseResumeManager.js"));
var CustomerApiBridge_1 = __importDefault(__webpack_require__(/*! ../api/CustomerApiBridge */ "./dist/js-sdk-legacy/src/main/api/CustomerApiBridge.js"));
var MuidService_1 = __importDefault(__webpack_require__(/*! ./MuidService */ "./dist/js-sdk-legacy/src/main/core/MuidService.js"));
var PsidCache_1 = __importDefault(__webpack_require__(/*! ./session/PsidCache */ "./dist/js-sdk-legacy/src/main/core/session/PsidCache.js"));
var PsidService_1 = __importDefault(__webpack_require__(/*! ./session/PsidService */ "./dist/js-sdk-legacy/src/main/core/session/PsidService.js"));
var SidRepository_1 = __importDefault(__webpack_require__(/*! ./session/SidRepository */ "./dist/js-sdk-legacy/src/main/core/session/SidRepository.js"));
var CsidCache_1 = __importDefault(__webpack_require__(/*! ./session/CsidCache */ "./dist/js-sdk-legacy/src/main/core/session/CsidCache.js"));
var CsidService_1 = __importDefault(__webpack_require__(/*! ./session/CsidService */ "./dist/js-sdk-legacy/src/main/core/session/CsidService.js"));
var SessionService_1 = __importDefault(__webpack_require__(/*! ./session/SessionService */ "./dist/js-sdk-legacy/src/main/core/session/SessionService.js"));
var MetadataService_1 = __importDefault(__webpack_require__(/*! ./metadata/MetadataService */ "./dist/js-sdk-legacy/src/main/core/metadata/MetadataService.js"));
var SlaveListener_1 = __importDefault(__webpack_require__(/*! ../services/SlaveListener */ "./dist/js-sdk-legacy/src/main/services/SlaveListener.js"));
var FeaturesBuilder_1 = __importDefault(__webpack_require__(/*! ../collectors/FeaturesBuilder */ "./dist/js-sdk-legacy/src/main/collectors/FeaturesBuilder.js"));
var ContextApiHandler_1 = __importDefault(__webpack_require__(/*! ./context/ContextApiHandler */ "./dist/js-sdk-legacy/src/main/core/context/ContextApiHandler.js"));
var StateService_1 = __importDefault(__webpack_require__(/*! ./state/StateService */ "./dist/js-sdk-legacy/src/main/core/state/StateService.js"));
var ClientEventService_1 = __importDefault(__webpack_require__(/*! ../api/ClientEventService */ "./dist/js-sdk-legacy/src/main/api/ClientEventService.js"));
var ApiContextChangeEventHandler_1 = __importDefault(__webpack_require__(/*! ../events/ApiContextChangeEventHandler */ "./dist/js-sdk-legacy/src/main/events/ApiContextChangeEventHandler.js"));
var ApiResetSessionEventHandler_1 = __importDefault(__webpack_require__(/*! ../events/ApiResetSessionEventHandler */ "./dist/js-sdk-legacy/src/main/events/ApiResetSessionEventHandler.js"));
var ApiCustomerMetadataEventHandler_1 = __importDefault(__webpack_require__(/*! ../events/ApiCustomerMetadataEventHandler */ "./dist/js-sdk-legacy/src/main/events/ApiCustomerMetadataEventHandler.js"));
var ApiChangeStateEventHandler_1 = __importDefault(__webpack_require__(/*! ../events/ApiChangeStateEventHandler */ "./dist/js-sdk-legacy/src/main/events/ApiChangeStateEventHandler.js"));
var ApiSetCsidEventHandler_1 = __importDefault(__webpack_require__(/*! ../events/ApiSetCsidEventHandler */ "./dist/js-sdk-legacy/src/main/events/ApiSetCsidEventHandler.js"));
var ApiSetPsidEventHandler_1 = __importDefault(__webpack_require__(/*! ../events/ApiSetPsidEventHandler */ "./dist/js-sdk-legacy/src/main/events/ApiSetPsidEventHandler.js"));
var NewSessionStartedEventHandler_1 = __importDefault(__webpack_require__(/*! ../events/NewSessionStartedEventHandler */ "./dist/js-sdk-legacy/src/main/events/NewSessionStartedEventHandler.js"));
var ConfigurationLoadedEventHandler_1 = __importDefault(__webpack_require__(/*! ../events/ConfigurationLoadedEventHandler */ "./dist/js-sdk-legacy/src/main/events/ConfigurationLoadedEventHandler.js"));
var StateChangedEventHandler_1 = __importDefault(__webpack_require__(/*! ../events/StateChangedEventHandler */ "./dist/js-sdk-legacy/src/main/events/StateChangedEventHandler.js"));
var ApiSetCustomerBrandEventHandler_1 = __importDefault(__webpack_require__(/*! ../events/ApiSetCustomerBrandEventHandler */ "./dist/js-sdk-legacy/src/main/events/ApiSetCustomerBrandEventHandler.js"));
var Logger_1 = __importStar(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var DOMUtils_1 = __importDefault(__webpack_require__(/*! ../technicalServices/DOMUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/DOMUtils.js"));
var SameCharService_1 = __importDefault(__webpack_require__(/*! ../services/SameCharService */ "./dist/js-sdk-legacy/src/main/services/SameCharService.js"));
var HeartBeatService_1 = __importDefault(__webpack_require__(/*! ../services/HeartBeatService */ "./dist/js-sdk-legacy/src/main/services/HeartBeatService.js"));
var HeartBeatErrorsState_1 = __importDefault(__webpack_require__(/*! ./state/HeartBeatErrorsState */ "./dist/js-sdk-legacy/src/main/core/state/HeartBeatErrorsState.js"));
var SessionInfoService_1 = __importDefault(__webpack_require__(/*! ./session/SessionInfoService */ "./dist/js-sdk-legacy/src/main/core/session/SessionInfoService.js"));
var SensorGateKeeper_1 = __importDefault(__webpack_require__(/*! ../collectors/SensorGateKeeper */ "./dist/js-sdk-legacy/src/main/collectors/SensorGateKeeper.js"));
var CustomElementsDetector_1 = __importDefault(__webpack_require__(/*! ./customelements/CustomElementsDetector */ "./dist/js-sdk-legacy/src/main/core/customelements/CustomElementsDetector.js"));
var BrowserContextsCache_1 = __importDefault(__webpack_require__(/*! ./browsercontexts/BrowserContextsCache */ "./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContextsCache.js"));
var BrowserContext_1 = __importDefault(__webpack_require__(/*! ./browsercontexts/BrowserContext */ "./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContext.js"));
var CustomElementDetectedEventHandler_1 = __webpack_require__(/*! ../events/CustomElementDetectedEventHandler */ "./dist/js-sdk-legacy/src/main/events/CustomElementDetectedEventHandler.js");
var StartupConfigurationLoader_1 = __importDefault(__webpack_require__(/*! ./configuration/StartupConfigurationLoader */ "./dist/js-sdk-legacy/src/main/core/configuration/StartupConfigurationLoader.js"));
var MaskingService_1 = __importDefault(__webpack_require__(/*! ./masking/MaskingService */ "./dist/js-sdk-legacy/src/main/core/masking/MaskingService.js"));
var LogBridge_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/LogBridge */ "./dist/js-sdk-legacy/src/main/technicalServices/log/LogBridge.js"));
var LogDataQ_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/LogDataQ */ "./dist/js-sdk-legacy/src/main/technicalServices/log/LogDataQ.js"));
var StorageUtilsWrapper_1 = __importDefault(__webpack_require__(/*! ../technicalServices/StorageUtilsWrapper */ "./dist/js-sdk-legacy/src/main/technicalServices/StorageUtilsWrapper.js"));
var BrandService_1 = __importDefault(__webpack_require__(/*! ./branding/BrandService */ "./dist/js-sdk-legacy/src/main/core/branding/BrandService.js"));
var BrandRepository_1 = __importDefault(__webpack_require__(/*! ./branding/BrandRepository */ "./dist/js-sdk-legacy/src/main/core/branding/BrandRepository.js"));
var RestoredMuidEventHandler_1 = __importDefault(__webpack_require__(/*! ../events/RestoredMuidEventHandler */ "./dist/js-sdk-legacy/src/main/events/RestoredMuidEventHandler.js"));
var CoordinatesMaskingConfigurationUpdater_1 = __importDefault(__webpack_require__(/*! ../api/CoordinatesMaskingConfigurationUpdater */ "./dist/js-sdk-legacy/src/main/api/CoordinatesMaskingConfigurationUpdater.js"));
var AgentIdCache_1 = __importDefault(__webpack_require__(/*! ./session/AgentIdCache */ "./dist/js-sdk-legacy/src/main/core/session/AgentIdCache.js"));
var AgentIdService_1 = __importDefault(__webpack_require__(/*! ./session/AgentIdService */ "./dist/js-sdk-legacy/src/main/core/session/AgentIdService.js"));
var FeaturesList_1 = __importDefault(__webpack_require__(/*! ../collectors/FeaturesList */ "./dist/js-sdk-legacy/src/main/collectors/FeaturesList.js"));
var AgentType_1 = __webpack_require__(/*! ../contract/AgentType */ "./dist/js-sdk-legacy/src/main/contract/AgentType.js");
var CollectionMode_1 = __webpack_require__(/*! ../contract/CollectionMode */ "./dist/js-sdk-legacy/src/main/contract/CollectionMode.js");
var FlutterSdkBridge_1 = __webpack_require__(/*! ../flutter/FlutterSdkBridge */ "./dist/js-sdk-legacy/src/main/flutter/FlutterSdkBridge.js");
var ProtocolTypeCache_1 = __importDefault(__webpack_require__(/*! ./session/ProtocolTypeCache */ "./dist/js-sdk-legacy/src/main/core/session/ProtocolTypeCache.js"));
var ServerUrlCache_1 = __importDefault(__webpack_require__(/*! ./session/ServerUrlCache */ "./dist/js-sdk-legacy/src/main/core/session/ServerUrlCache.js"));
var EncryptedMuidService_1 = __importDefault(__webpack_require__(/*! ./EncryptedMuidService */ "./dist/js-sdk-legacy/src/main/core/EncryptedMuidService.js"));
var CategoryService_1 = __importDefault(__webpack_require__(/*! ../technicalServices/categories/CategoryService */ "./dist/js-sdk-legacy/src/main/technicalServices/categories/CategoryService.js"));
var DevDebugDataQ_1 = __webpack_require__(/*! ../technicalServices/dev_collectors/DevDebugDataQ */ "./dist/js-sdk-legacy/src/main/technicalServices/dev_collectors/DevDebugDataQ.js");
var SystemBootstrapper = /*#__PURE__*/function () {
  function SystemBootstrapper() {
    _classCallCheck(this, SystemBootstrapper);
    this._serverWorker = null;
    this._serverWorkerCommunicator = null;
    this._configurationService = null;
    this._featureBuilder = null;
    this._featureService = null;
    this._dataQ = null;
    this._frameHandler = null;
    this._eventHandlers = [];
    this._contextMgr = null;
    this._runWorker = function (configurations) {
      var workerWrapperFactory = new WorkerWrapperFactory_1["default"](configurations.getUseUrlWorker(), configurations.getWorkerUrl());
      return workerWrapperFactory.create();
    };
  }
  return _createClass(SystemBootstrapper, [{
    key: "start",
    value: function start(cdApiFacade, configurations) {
      this._loadSystem(cdApiFacade, configurations);
    }
  }, {
    key: "stop",
    value: function stop() {
      if (this._serverWorker) {
        this._serverWorker.close();
      }
      if (this.heartBeatService) {
        this.heartBeatService.stop();
      }
    }
  }, {
    key: "registerPostLoadEvents",
    value: function registerPostLoadEvents() {
      this._slaveListener.onResetSessionTrigger.subscribe(this._sessionService.resetSession.bind(this._sessionService));
    }
  }, {
    key: "flushAllMessages",
    value: function flushAllMessages() {
      this._dataQ.flushAllMessages();
    }
  }, {
    key: "handleCoordinatesMaskingConfigurationUpdate",
    value: function handleCoordinatesMaskingConfigurationUpdate(isEnabled) {
      this._coordinatesMaskingConfigurationUpdater.updateConfig(isEnabled);
    }
  }, {
    key: "getServerWorkerCommunicator",
    value: function getServerWorkerCommunicator() {
      return this._serverWorkerCommunicator;
    }
  }, {
    key: "getFeatureBuilder",
    value: function getFeatureBuilder() {
      return this._featureBuilder;
    }
  }, {
    key: "getFeatureService",
    value: function getFeatureService() {
      return this._featureService;
    }
  }, {
    key: "getConfigurationService",
    value: function getConfigurationService() {
      return this._configurationService;
    }
  }, {
    key: "getConfigurationRepository",
    value: function getConfigurationRepository() {
      return this._configurationRepository;
    }
  }, {
    key: "getSessionService",
    value: function getSessionService() {
      return this._sessionService;
    }
  }, {
    key: "getContextMgr",
    value: function getContextMgr() {
      return this._contextMgr;
    }
  }, {
    key: "getMuidService",
    value: function getMuidService() {
      return this._muidService;
    }
  }, {
    key: "getEncryptedMuidService",
    value: function getEncryptedMuidService() {
      return this._muidEncryptedService;
    }
  }, {
    key: "getApiBridge",
    value: function getApiBridge() {
      return this._customerApiBridge;
    }
  }, {
    key: "getPerfMonitor",
    value: function getPerfMonitor() {
      return this._perfMonitor;
    }
  }, {
    key: "getServerStateMgr",
    value: function getServerStateMgr() {
      return this._serverStateMgr;
    }
  }, {
    key: "getMessageBus",
    value: function getMessageBus() {
      return this._msgBus;
    }
  }, {
    key: "getAgentIdService",
    value: function getAgentIdService() {
      return this._agentIdService;
    }
  }, {
    key: "_loadSystem",
    value: function _loadSystem(cdApiFacade, configurations) {
      var _this$_configurationR, _this$_configurationR2;
      this._runServerWorker(configurations);
      this._serverWorkerCommunicator = new WorkerCommunicator_1["default"]();
      this._serverWorkerCommunicator.setMessagingPort(this._serverWorker.port);
      var logPerfDataQ = new LogDataQ_1["default"](DOMUtils_1["default"], this._serverWorkerCommunicator, null, 'logPerfQPassWorkerInterval', WorkerCommand_1.WorkerCommand.sendLogCommand);
      this._perfMonitor = new PerfMonitor_1["default"](logPerfDataQ);
      this._configurationRepository = new ConfigurationRepository_1["default"]();
      var startUpConfigurationLoader = new StartupConfigurationLoader_1["default"](this._configurationRepository, configurations);
      startUpConfigurationLoader.loadStartUpConfigurations();
      var enableWupMessagesHashing = (_this$_configurationR = this._configurationRepository) === null || _this$_configurationR === void 0 ? void 0 : _this$_configurationR.get(ConfigurationFields_1.ConfigurationFields.enableWupMessagesHashing);
      this._shouldEnableWorkerWupMessagesHashing(enableWupMessagesHashing, this._serverWorkerCommunicator);
      var storageUtilsWrapper = new StorageUtilsWrapper_1["default"](CDUtils_1["default"], this._configurationRepository);
      var contextSiteMapper = new SiteMapper_1["default"](self.MutationObserver, CDUtils_1["default"], DOMUtils_1["default"], 'contextConfiguration', null, true, 400);
      this._contextMgr = new ContextMgr_1["default"](CDUtils_1["default"], contextSiteMapper, this._serverWorkerCommunicator, storageUtilsWrapper);
      var mainLogBridge = new LogBridge_1["default"](logPerfDataQ, this._contextMgr.url);
      var logger = new Logger_1.Logger(mainLogBridge);
      Logger_1["default"].setLogger(logger);
      var collectionMode = (_this$_configurationR2 = this._configurationRepository) === null || _this$_configurationR2 === void 0 ? void 0 : _this$_configurationR2.get(ConfigurationFields_1.ConfigurationFields.collectionMode);
      this._registerFeatures(collectionMode);
      this._currScriptName = document.currentScript ? document.currentScript.src : '';
      this._globalexceptionHandler = new GlobalExceptionHandler_1["default"](CDUtils_1["default"], this._currScriptName);
      this._msgBus = new MessageBus_1["default"]();
      this._dataQ = new DataQ_1["default"](DOMUtils_1["default"], this._serverWorkerCommunicator, this._contextMgr, 'dataQPassWorkerInterval', WorkerCommand_1.WorkerCommand.sendDataCommand);
      this._devDebugDataQueue = new DevDebugDataQ_1.DevDebugDataQ(this._configurationRepository, this._dataQ);
      this._agentIdCache = new AgentIdCache_1["default"](storageUtilsWrapper);
      this._agentIdService = new AgentIdService_1["default"](this._agentIdCache, this._serverWorkerCommunicator);
      this._cidCache = new CidCache_1["default"](configurations.getWupServerURL());
      this._serverStateMgr = new ServerStateMgr_1["default"](this._serverWorkerCommunicator, CDUtils_1["default"], this._agentIdService);
      this._sessionInfoService = new SessionInfoService_1["default"]();
      this._sensorGateKeeper = new SensorGateKeeper_1["default"](this._sessionInfoService, this._configurationRepository);
      this._configurationService = new ConfigurationService_1["default"](CDUtils_1["default"], this._configurationRepository, this._msgBus, this._cidCache, this._serverWorkerCommunicator);
      this._sensorDataQ = new SensorsDataQueue_1["default"](this._configurationRepository, this._dataQ, this._msgBus, CDUtils_1["default"], this._sensorGateKeeper);
      this._maskingService = new MaskingService_1["default"](this._configurationRepository);
      var elementCategories = configurations.getElementCategories();
      var elementAttributes = configurations.getElementAttributes();
      this._categoryService = new CategoryService_1["default"](elementCategories, elementAttributes);
      this._elementsUtils = new ElementsCollector_1["default"](this._configurationRepository, CDUtils_1["default"], this._dataQ, this._contextMgr, this._maskingService, this._categoryService);
      var browserContextCache = new BrowserContextsCache_1["default"]();
      var framesHandlerFactory = new FramesHandlerFactory_1["default"](this._configurationRepository, DOMUtils_1["default"], CDUtils_1["default"]);
      this._frameHandler = framesHandlerFactory.create();
      this._featureService = new FeatureService_1["default"](FeaturesList_1["default"], this._frameHandler, this._configurationRepository, DOMUtils_1["default"], CDUtils_1["default"], browserContextCache);
      var customElementsDetector = new CustomElementsDetector_1["default"](CDUtils_1["default"], this._msgBus, this._configurationRepository);
      // Create the state service which is holding the current state of the SDK
      this._stateService = new StateService_1["default"](this._msgBus);
      this._pauseResumeMgr = new PauseResumeManager_1["default"](this._featureService, this._configurationRepository, this._dataQ, this._stateService, this._serverWorkerCommunicator);
      this._customerApiBridge = new CustomerApiBridge_1["default"](this._pauseResumeMgr, this._msgBus, cdApiFacade, CDUtils_1["default"]);
      if (this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.agentType) !== AgentType_1.AgentType.SECONDARY) {
        this._muidService = new MuidService_1["default"](CDUtils_1["default"], this._dataQ, storageUtilsWrapper, this._configurationRepository);
        this._muidEncryptedService = new EncryptedMuidService_1["default"]({
          domUtils: DOMUtils_1["default"],
          utils: CDUtils_1["default"],
          storage: storageUtilsWrapper,
          configurationRepository: this._configurationRepository
        });
      }
      this._psidCache = new PsidCache_1["default"]();
      var psidService = new PsidService_1["default"](this._psidCache, this._serverWorkerCommunicator);
      var resetSessionSiteMapper = new SiteMapper_1["default"](self.MutationObserver, CDUtils_1["default"], DOMUtils_1["default"], 'resetSessionConfig');
      var sidRepository = new SidRepository_1["default"](CDUtils_1["default"], storageUtilsWrapper, this._configurationRepository);
      this._csidCache = new CsidCache_1["default"]();
      var csidService = new CsidService_1["default"](this._customerApiBridge, this._csidCache, this._serverWorkerCommunicator);
      var brandRepository = new BrandRepository_1["default"](CDUtils_1["default"], storageUtilsWrapper);
      this._brandService = new BrandService_1["default"](this._serverWorkerCommunicator, brandRepository);
      this._coordinatesMaskingConfigurationUpdater = new CoordinatesMaskingConfigurationUpdater_1["default"](this._configurationRepository);
      var serverUrlCache = new ServerUrlCache_1["default"](configurations.getWupServerURL());
      var protocolTypeCache = new ProtocolTypeCache_1["default"](configurations.getWupServerURL());
      var minifiedWupUriEnabled = configurations.isMinifiedWupUriEnabled();
      this._sessionService = new SessionService_1["default"](this._msgBus, this._configurationService, this._configurationRepository, CDUtils_1["default"], DOMUtils_1["default"], this._serverWorkerCommunicator, this._contextMgr, this._muidService, this._serverStateMgr, resetSessionSiteMapper, sidRepository, serverUrlCache, this._cidCache, protocolTypeCache, minifiedWupUriEnabled, csidService, this._csidCache, this._psidCache, this._brandService, this._agentIdService);
      this._metadataService = new MetadataService_1["default"](this._configurationRepository, this._dataQ);
      // create the slave listener that will manage slaves slow and communication
      this._slaveListener = new SlaveListener_1["default"](this._dataQ, this._configurationRepository, CDUtils_1["default"], logPerfDataQ, this._contextMgr);
      this._slaveListener.listen();
      this._sameChar = new SameCharService_1["default"]();
      // Use the default MutationObserver on the window since this is the one that did not created issues
      this._featureBuilder = new FeaturesBuilder_1["default"](FeaturesList_1["default"], this._configurationRepository, CDUtils_1["default"], this._elementsUtils, self.MutationObserver, this._dataQ, this._devDebugDataQueue, configurations, this._sessionService, this._muidService, this._muidEncryptedService, this._perfMonitor, this._sensorDataQ, this._msgBus, this._cidCache, this._sameChar, this._maskingService, this._contextMgr);
      // Leave this crappy class until we remove its implementation to a better place.
      this._contextApiHandler = new ContextApiHandler_1["default"](this._contextMgr, this._dataQ);
      // subscribe the FeatureService to context changes
      this._contextMgr.onContextChange.subscribe(this._featureService.runPerContextFeatures.bind(this._featureService));
      // Create the service for client events (API events)
      var clientEventService = new ClientEventService_1["default"]();
      // Create the heartBeat postMessage service
      this.heartBeatService = new HeartBeatService_1["default"](this._serverWorkerCommunicator, new HeartBeatErrorsState_1["default"](), this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.heartBeatMessageInterval));
      this.heartBeatService.start();
      // Create the event handlers
      this._eventHandlers.push(new RestoredMuidEventHandler_1["default"](this._msgBus, this._muidService, clientEventService, this._serverWorkerCommunicator));
      this._eventHandlers.push(new ApiContextChangeEventHandler_1["default"](this._msgBus, this._contextMgr));
      this._eventHandlers.push(new ApiResetSessionEventHandler_1["default"](this._msgBus, this._sessionService));
      this._eventHandlers.push(new ApiCustomerMetadataEventHandler_1["default"](this._msgBus, this._metadataService));
      this._eventHandlers.push(new ApiChangeStateEventHandler_1["default"](this._msgBus, this._pauseResumeMgr, this._slaveListener));
      this._eventHandlers.push(new ApiSetCsidEventHandler_1["default"](this._msgBus, csidService));
      this._eventHandlers.push(new ApiSetPsidEventHandler_1["default"](this._msgBus, psidService));
      this._eventHandlers.push(new ApiSetCustomerBrandEventHandler_1["default"](this._msgBus, this._brandService));
      this._eventHandlers.push(new StateChangedEventHandler_1["default"](this._msgBus, clientEventService));
      this._eventHandlers.push(new ConfigurationLoadedEventHandler_1["default"](this._msgBus, this._featureService, this._dataQ, this._pauseResumeMgr, this._metadataService, logger, this._contextMgr, this._sessionService, this._sensorDataQ, this._slaveListener, this._stateService, this._perfMonitor, this.heartBeatService, this._sensorGateKeeper, sidRepository, this._coordinatesMaskingConfigurationUpdater));
      this._eventHandlers.push(new NewSessionStartedEventHandler_1["default"](this._msgBus, this._featureService, this._customerApiBridge, this._contextMgr, clientEventService, this._sessionInfoService));
      if (this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableCustomElementsProcessing)) {
        customElementsDetector.start(new BrowserContext_1["default"](window.self));
        this._eventHandlers.push(new CustomElementDetectedEventHandler_1.CustomElementDetectedEventHandler(browserContextCache, this._featureService, this._msgBus));
      }
      // Set the default log address if available
      if (configurations.getLogServerURL()) {
        this._configurationService.updateLogUrlToWorker(this._sessionService.sessionId, this._csidCache.get(), this._serverWorkerCommunicator);
      }
      if (configurations.isFlutterApp()) {
        if (window.bcClient) {
          window.bcClient.flutterBridge = new FlutterSdkBridge_1.FlutterSdkBridge(this._msgBus);
        } else {
          Logger_1["default"].error('Cannot initiate FlutterSdkBridge: bcClient object not found.');
        }
      }
      // Mark the state as starting
      this._stateService.updateState(State_1.State.starting);
    }
  }, {
    key: "_runServerWorker",
    value: function _runServerWorker(configurations) {
      this._serverWorker = this._runWorker(configurations);
    }
  }, {
    key: "_registerFeatures",
    value: function _registerFeatures(collectionMode) {
      switch (collectionMode) {
        case CollectionMode_1.CollectionMode.LEAN:
          {
            Logger_1["default"].info('Build features per collection mode: LEAN');
            FeaturesList_1["default"].registerLeanFeatures();
            break;
          }
        default:
          {
            Logger_1["default"].info('Build features per collection mode: FULL');
            FeaturesList_1["default"].register();
            return;
          }
      }
    }
  }, {
    key: "_shouldEnableWorkerWupMessagesHashing",
    value: function _shouldEnableWorkerWupMessagesHashing(enableWupMessagesHashing, serverWorkerCommunicator) {
      if (!enableWupMessagesHashing) return;
      serverWorkerCommunicator.sendAsync(WorkerCommand_1.WorkerCommand.enableWupMessagesHashingCommand, {
        enableWupMessagesHashing: enableWupMessagesHashing
      });
    }
  }]);
}();
exports["default"] = SystemBootstrapper;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/branding/BrandRepository.js":
/*!**********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/branding/BrandRepository.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var BrandRepository = /*#__PURE__*/function () {
  function BrandRepository(utils, storageUtilsWrapper) {
    _classCallCheck(this, BrandRepository);
    this.brandKey = 'brand';
    this._utils = utils;
    this._storageUtilsWrapper = storageUtilsWrapper;
    this.COOKIE_EXPIRATION_IN_MILLISECONDS = this._utils.minutesToMilliseconds(365 * 24 * 60);
  }
  return _createClass(BrandRepository, [{
    key: "get",
    value: function get() {
      // First try to get the brand from the cookie and validate it.
      var brandFromCookie = this._storageUtilsWrapper.getCookie(this.brandKey);
      var brand = this._validateBrand(brandFromCookie);
      // If the sid doesn't exist or was not valid we try to get it from the local storage
      if (!brand) {
        Logger_1["default"].debug('Brand was not found in cookie. Trying to get it from the local storage.');
        var brandFromLocalStorage = this._storageUtilsWrapper.getFromLocalStorage(this.brandKey);
        brand = this._validateBrand(brandFromLocalStorage);
        if (!brand) {
          Logger_1["default"].debug('Brand was not found in local storage.');
          return null;
        }
      }
      return brand;
    }
  }, {
    key: "set",
    value: function set(brand) {
      var val = this._validateBrand(brand);
      if (!val) {
        Logger_1["default"].error("Brand ".concat(brand, " is invalid. Will not save it."));
        return;
      }
      // Save both to local storage and to cookie
      if (!this._storageUtilsWrapper.saveToLocalStorage(this.brandKey, val)) {
        Logger_1["default"].error("Failed saving brand ".concat(brand, " to local storage."));
      }
      // Set the sid cookie. We use the cookie expiration configuration to prevent expiration at end of session
      if (!this._storageUtilsWrapper.setCookie(this.brandKey, val, this.COOKIE_EXPIRATION_IN_MILLISECONDS)) {
        Logger_1["default"].error("Failed saving brand ".concat(brand, " to cookie."));
      }
    }
  }, {
    key: "_validateBrand",
    value: function _validateBrand(brandFull) {
      return brandFull || null;
    }
  }]);
}();
exports["default"] = BrandRepository;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/branding/BrandService.js":
/*!*******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/branding/BrandService.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var WorkerCommand_1 = __webpack_require__(/*! ../../events/WorkerCommand */ "./dist/js-sdk-legacy/src/main/events/WorkerCommand.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var BrandService = /*#__PURE__*/function () {
  /**
   *
   * @param workerCommunicator
   * @param brandRepository {BrandRepository}
   */
  function BrandService(workerCommunicator, brandRepository) {
    _classCallCheck(this, BrandService);
    this._workerCommunicator = workerCommunicator;
    this._brandRepository = brandRepository;
  }
  return _createClass(BrandService, [{
    key: "set",
    value: function set(brand) {
      if (!this._validateBrand(brand)) {
        return;
      }
      this._brandRepository.set(brand);
      this._workerCommunicator.sendAsync(WorkerCommand_1.WorkerCommand.updateBrandCommand, {
        brand: brand
      });
    }
  }, {
    key: "update",
    value: function update() {
      var foundBrand = this._brandRepository.get();
      if (foundBrand) {
        this.set(foundBrand);
      }
    }
  }, {
    key: "_validateBrand",
    value: function _validateBrand(brand) {
      if (brand.length > 200) {
        Logger_1["default"].warn("The received brand name length is greater than 200. It is illegal. Ignoring the API call");
        return false;
      }
      if (!/^[a-zA-Z0-9.\-,_ ]+$/.test(brand)) {
        Logger_1["default"].warn("The received brand contains illegal characters. The legal characters are: A-Za-z0-9.-,_ and space. Ignoring the API call");
        return false;
      }
      return true;
    }
  }]);
}();
exports["default"] = BrandService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContext.js":
/*!****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContext.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
/**
 * Represents a browser context with custom access to it's private DOM
 */
var BrowserContext = /*#__PURE__*/function () {
  /**
   * @param {Window} context A DOM containing a document
   */
  function BrowserContext(context) {
    _classCallCheck(this, BrowserContext);
    this.context = context || window.self;
  }
  return _createClass(BrowserContext, [{
    key: "Context",
    get: function get() {
      return this.context;
    }
    /**
     *
     * @returns {Document} an accessible browser context document
     */
  }, {
    key: "getDocument",
    value: function getDocument() {
      return this.context.document;
    }
  }, {
    key: "collectAllElementsBySelectorAsync",
    value: function () {
      var _collectAllElementsBySelectorAsync = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(elementSelectors) {
        var _this$getDocument;
        var maxShadowDepth,
          iframeLoadingTimeout,
          collected,
          collectFromRoot,
          _collectFromRoot,
          waitForIframe,
          rootDoc,
          _args2 = arguments;
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.n) {
            case 0:
              waitForIframe = function _waitForIframe(iframe) {
                return new Promise(function (resolve, reject) {
                  try {
                    // Already loaded?
                    var doc = iframe.contentDocument;
                    if (doc && doc.readyState === 'complete') return resolve();
                    iframe.addEventListener('load', function () {
                      return resolve();
                    }, {
                      once: true
                    });
                    // Optional fallback timeout
                    setTimeout(function () {
                      return reject(new Error('Iframe load timeout'));
                    }, iframeLoadingTimeout);
                  } catch (err) {
                    reject(err);
                  }
                });
              };
              _collectFromRoot = function _collectFromRoot3() {
                _collectFromRoot = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(root) {
                  var currentShadowDepth,
                    matches,
                    allElements,
                    _iterator,
                    _step,
                    el,
                    iframeDoc,
                    _args = arguments,
                    _t,
                    _t2;
                  return _regenerator().w(function (_context) {
                    while (1) switch (_context.p = _context.n) {
                      case 0:
                        currentShadowDepth = _args.length > 1 && _args[1] !== undefined ? _args[1] : 0;
                        if (!(!root || typeof root.querySelectorAll !== 'function')) {
                          _context.n = 1;
                          break;
                        }
                        return _context.a(2);
                      case 1:
                        // Collect from this root
                        matches = root.querySelectorAll(elementSelectors);
                        matches.forEach(function (el) {
                          return collected.push(el);
                        });
                        // Traverse shadow roots and iframes
                        allElements = root.querySelectorAll('*');
                        _iterator = _createForOfIteratorHelper(allElements);
                        _context.p = 2;
                        _iterator.s();
                      case 3:
                        if ((_step = _iterator.n()).done) {
                          _context.n = 10;
                          break;
                        }
                        el = _step.value;
                        if (!(el.shadowRoot && currentShadowDepth < maxShadowDepth)) {
                          _context.n = 4;
                          break;
                        }
                        _context.n = 4;
                        return collectFromRoot(el.shadowRoot, currentShadowDepth + 1);
                      case 4:
                        if (!(el.tagName === 'IFRAME')) {
                          _context.n = 9;
                          break;
                        }
                        _context.p = 5;
                        _context.n = 6;
                        return waitForIframe(el);
                      case 6:
                        iframeDoc = el.contentDocument;
                        if (!iframeDoc) {
                          _context.n = 7;
                          break;
                        }
                        _context.n = 7;
                        return collectFromRoot(iframeDoc, currentShadowDepth);
                      case 7:
                        _context.n = 9;
                        break;
                      case 8:
                        _context.p = 8;
                        _t = _context.v;
                        Logger_1["default"].warn('Skipped iframe:', _t.message, el.title);
                      case 9:
                        _context.n = 3;
                        break;
                      case 10:
                        _context.n = 12;
                        break;
                      case 11:
                        _context.p = 11;
                        _t2 = _context.v;
                        _iterator.e(_t2);
                      case 12:
                        _context.p = 12;
                        _iterator.f();
                        return _context.f(12);
                      case 13:
                        return _context.a(2);
                    }
                  }, _callee, null, [[5, 8], [2, 11, 12, 13]]);
                }));
                return _collectFromRoot.apply(this, arguments);
              };
              collectFromRoot = function _collectFromRoot2(_x2) {
                return _collectFromRoot.apply(this, arguments);
              };
              maxShadowDepth = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : 0;
              iframeLoadingTimeout = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : 5000;
              collected = []; // Helper: returns a Promise that resolves when iframe is loaded
              rootDoc = ((_this$getDocument = this.getDocument) === null || _this$getDocument === void 0 ? void 0 : _this$getDocument.call(this)) || document;
              _context2.n = 1;
              return collectFromRoot(rootDoc);
            case 1:
              return _context2.a(2, collected);
          }
        }, _callee2, this);
      }));
      function collectAllElementsBySelectorAsync(_x) {
        return _collectAllElementsBySelectorAsync.apply(this, arguments);
      }
      return collectAllElementsBySelectorAsync;
    }()
  }]);
}();
exports["default"] = BrowserContext;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContextMutationObserver.js":
/*!********************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContextMutationObserver.js ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * Instances of this class can monitor and observe window mutations
 * Directly used by FramesDetector and CustomElementsDetector to respond DOM mutations
 * when detecting browser contexts that expose custom access to their private DOM.
 */
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ElementsMutationObserverFactory_1 = __importDefault(__webpack_require__(/*! ./ElementsMutationObserverFactory */ "./dist/js-sdk-legacy/src/main/core/browsercontexts/ElementsMutationObserverFactory.js"));
var BrowserContextMutationObserver = /*#__PURE__*/function () {
  /**
   *
   * @param elementsMutationObserverFactory
   * @param windowMutationObservers
   * @param messageBus
   * @param configurationRepository
   */
  function BrowserContextMutationObserver(windowMutationObservers, messageBus, configurationRepository) {
    _classCallCheck(this, BrowserContextMutationObserver);
    this._windowMutationObservers = windowMutationObservers;
    this._messageBus = messageBus;
    this._configurationRepository = configurationRepository;
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.BrowserContextAdded, this._processNewContext.bind(this));
    this._elementsMutationObserverFactory = new ElementsMutationObserverFactory_1["default"]();
  }
  /**
   * A designated observer that handles newly added contexts
   * @private
   * @param browserContext
   */
  return _createClass(BrowserContextMutationObserver, [{
    key: "_processNewContext",
    value: function _processNewContext(browserContext) {
      this.monitorWindow(browserContext);
    }
    /**
     *
     * @param {BrowserContext} browserContext
     * @public
     */
  }, {
    key: "monitorWindow",
    value: function monitorWindow(browserContext) {
      if (this._windowMutationObservers.has(browserContext)) {
        return;
      }
      var elementsMutationObserver = this._elementsMutationObserverFactory.create(browserContext, self.MutationObserver, this._configurationRepository);
      elementsMutationObserver.observe(browserContext.getDocument());
      elementsMutationObserver.nodesAdded.subscribe(this._nodesAddedMutationObserved.bind(this));
      elementsMutationObserver.nodesRemoved.subscribe(this._nodesRemovedMutationObserved.bind(this));
      this._windowMutationObservers.set(browserContext, elementsMutationObserver);
    }
    /**
     *
     * @param {ShadowRoot} browserContext
     * @public
     */
  }, {
    key: "unMonitorWindow",
    value: function unMonitorWindow(browserContext) {
      var mutationObserver = this._windowMutationObservers.get(browserContext);
      if (mutationObserver) {
        mutationObserver.nodesAdded.unsubscribe(this._nodesAddedMutationObserved.bind(this));
        mutationObserver.nodesRemoved.unsubscribe(this._nodesRemovedMutationObserved.bind(this));
        mutationObserver.disconnect();
      }
      this._windowMutationObservers["delete"](browserContext);
    }
    /**
     * Callback once a nodes added mutation\s is observed
     * @param nodesAddedMutationEvent
     * @private
     */
  }, {
    key: "_nodesAddedMutationObserved",
    value: function _nodesAddedMutationObserved(nodesAddedMutationEvent) {
      this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.MutationAddedNodes, nodesAddedMutationEvent);
    }
    /**
     * Callback once a nodes removed mutation\s is observed
     * @param nodesRemovedMutationEvent
     * @private
     */
  }, {
    key: "_nodesRemovedMutationObserved",
    value: function _nodesRemovedMutationObserved(nodesRemovedMutationEvent) {
      this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.MutationRemovedNodes, nodesRemovedMutationEvent);
    }
  }]);
}();
exports["default"] = BrowserContextMutationObserver;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContextsCache.js":
/*!**********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContextsCache.js ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function get() {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
  __setModuleDefault(result, mod);
  return result;
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDMap = __importStar(__webpack_require__(/*! ../../infrastructure/CDMap */ "./dist/js-sdk-legacy/src/main/infrastructure/CDMap.js"));
/**
 * Instances of this class expose a Map (CDMap) interface for storing and retrieving of
 * browser contexts detected by the BrowserContextDetector(s)
 */
var BrowserContextsCache = /*#__PURE__*/function () {
  function BrowserContextsCache() {
    _classCallCheck(this, BrowserContextsCache);
    this._contexts = CDMap.create();
  }
  return _createClass(BrowserContextsCache, [{
    key: "contexts",
    get: function get() {
      var contexts = [];
      this._contexts.forEach(function (value, key) {
        contexts.push(key);
      });
      return contexts;
    }
    /**
     * Returns a list of available browser contexts
     * @returns {[]}
     */
  }, {
    key: "browserContexts",
    get: function get() {
      var contexts = [];
      this._contexts.forEach(function (value) {
        contexts.push(value.browserContext);
      });
      return contexts;
    }
  }, {
    key: "count",
    get: function get() {
      return this._contexts.size;
    }
  }, {
    key: "add",
    value: function add(context) {
      this._contexts.set(context, {
        registered: true,
        features: CDMap.create()
      });
    }
    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "addBrowserContext",
    value: function addBrowserContext(browserContext) {
      this._contexts.set(browserContext.Context, {
        registered: true,
        features: CDMap.create(),
        browserContext: browserContext
      });
    }
  }, {
    key: "remove",
    value: function remove(context) {
      if (this.exists(context) && this._contexts.get(context).features.size === 0) {
        this._contexts["delete"](context);
      }
    }
  }, {
    key: "get",
    value: function get(context) {
      return this._contexts.get(context);
    }
  }, {
    key: "exists",
    value: function exists(context) {
      return this._contexts.has(context) && this._contexts.get(context).registered;
    }
  }, {
    key: "registerContextFeature",
    value: function registerContextFeature(context, feature) {
      if (this.exists(context)) {
        this._contexts.get(context).features.set(feature.configKey, true);
      }
    }
  }, {
    key: "unRegisterContextFeature",
    value: function unRegisterContextFeature(context, feature) {
      if (this.exists(context, feature)) {
        this._contexts.get(context).features["delete"](feature.configKey);
      }
    }
  }, {
    key: "unRegisterContextFeatures",
    value: function unRegisterContextFeatures(context, features) {
      for (var i = 0; i < features.length; i++) {
        var feature = features[i];
        this.unRegisterContextFeature(context, feature);
      }
    }
  }, {
    key: "hasFeature",
    value: function hasFeature(context, feature) {
      return this.exists(context) && this._contexts.get(context).features.has(feature.configKey);
    }
  }]);
}();
exports["default"] = BrowserContextsCache;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/browsercontexts/ElementsMutationObserver.js":
/*!**************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/browsercontexts/ElementsMutationObserver.js ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function get() {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
  __setModuleDefault(result, mod);
  return result;
};
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDEvent_1 = __importDefault(__webpack_require__(/*! ../../infrastructure/CDEvent */ "./dist/js-sdk-legacy/src/main/infrastructure/CDEvent.js"));
var CDSet = __importStar(__webpack_require__(/*! ../../infrastructure/CDSet */ "./dist/js-sdk-legacy/src/main/infrastructure/CDSet.js"));
var NodesRemovedMutationEvent_1 = __importDefault(__webpack_require__(/*! ../../events/NodesRemovedMutationEvent */ "./dist/js-sdk-legacy/src/main/events/NodesRemovedMutationEvent.js"));
var NodesAddedMutationEvent_1 = __importDefault(__webpack_require__(/*! ../../events/NodesAddedMutationEvent */ "./dist/js-sdk-legacy/src/main/events/NodesAddedMutationEvent.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var ElementsMutationObserver = /*#__PURE__*/function () {
  function ElementsMutationObserver(context, mutationObserver, configurationRepository) {
    _classCallCheck(this, ElementsMutationObserver);
    _defineProperty(this, "ignoreNodeTypes", CDSet.create([Node.COMMENT_NODE, Node.TEXT_NODE, Node.ATTRIBUTE_NODE, Node.CDATA_SECTION_NODE]));
    this._mutationObserver = new mutationObserver(this._mutationObserved.bind(this, context));
    this.nodesAdded = new CDEvent_1["default"]();
    this.nodesRemoved = new CDEvent_1["default"]();
    this.nodeAdded = new CDEvent_1["default"]();
    this.nodeRemoved = new CDEvent_1["default"]();
    this._configurationRepository = configurationRepository;
    // Mutation queue to process in idle time
    this.mutationQueue = [];
    this.processingQueue = false;
  }
  return _createClass(ElementsMutationObserver, [{
    key: "observe",
    value: function observe(document) {
      this._mutationObserver.observe(document, {
        childList: true,
        subtree: true
      });
    }
  }, {
    key: "disconnect",
    value: function disconnect() {
      this._mutationObserver.disconnect();
    }
    /**
     * Callback once a mutation\s is observed
     */
  }, {
    key: "_mutationObserved",
    value: function _mutationObserved(context, mutations) {
      var _this$_configurationR,
        _this$_configurationR2,
        _this = this;
      var chunkSize = ((_this$_configurationR = this._configurationRepository) === null || _this$_configurationR === void 0 ? void 0 : _this$_configurationR.get(ConfigurationFields_1.ConfigurationFields.mutationMaxChunkSize)) || 0;
      var chunkDelayMs = ((_this$_configurationR2 = this._configurationRepository) === null || _this$_configurationR2 === void 0 ? void 0 : _this$_configurationR2.get(ConfigurationFields_1.ConfigurationFields.mutationChunkDelayMs)) || 100;
      // Filter only element node mutations
      var filteredMutations = mutations.filter(function (mutation) {
        if (mutation.type === 'childList') {
          // Ensure added/removed nodes are ELEMENT_NODEs
          return [].concat(_toConsumableArray(mutation.addedNodes), _toConsumableArray(mutation.removedNodes)).some(function (node) {
            return _this._isValidNodeType(node);
          });
        }
        return false;
      });
      if (chunkSize && filteredMutations.length > chunkSize) {
        var _loop = function _loop() {
          var chunkOfMutations = filteredMutations.slice(i, i + Math.min(chunkSize, filteredMutations.length - i));
          setTimeout(function () {
            chunkOfMutations.forEach(function (mutation) {
              _this._processMutation(context, mutation);
            });
          }, chunkDelayMs);
        };
        // split it to chunks and defer each
        for (var i = 0; i < filteredMutations.length; i += chunkSize) {
          _loop();
        }
      } else {
        var _this$mutationQueue;
        //Now we store mutations in a queue and process them using `requestIdleCallbackSafe`
        (_this$mutationQueue = this.mutationQueue).push.apply(_this$mutationQueue, _toConsumableArray(filteredMutations));
        if (!this.processingQueue) {
          this.processingQueue = true;
          this.requestIdleCallbackSafe(function () {
            return _this._processMutationQueue(context);
          });
        }
      }
    }
    /**
     * Processes mutations in small batches when the browser is idle.
     */
  }, {
    key: "_processMutationQueue",
    value: function _processMutationQueue(context) {
      var _this$_configurationR3,
        _this2 = this;
      var chunkSize = ((_this$_configurationR3 = this._configurationRepository) === null || _this$_configurationR3 === void 0 ? void 0 : _this$_configurationR3.get(ConfigurationFields_1.ConfigurationFields.mutationMaxChunkSize)) || 50;
      while (this.mutationQueue.length > 0) {
        var chunk = this.mutationQueue.splice(0, chunkSize);
        chunk.forEach(function (mutation) {
          return _this2._processMutation(context, mutation);
        });
      }
      this.processingQueue = false;
    }
    /**
     * Process a mutation (a change) we are listening to
     */
  }, {
    key: "_processMutation",
    value: function _processMutation(context, mutation) {
      var addedNodes = this._processNodes(mutation.addedNodes, this.nodeAdded);
      var removedNodes = this._processNodes(mutation.removedNodes, this.nodeRemoved);
      this._publishNodesMutationEvents(context, addedNodes, removedNodes);
    }
  }, {
    key: "_publishNodesMutationEvents",
    value: function _publishNodesMutationEvents(context, addedNodes, removedNodes) {
      var _this3 = this;
      if (addedNodes.length > 0) {
        this.requestIdleCallbackSafe(function () {
          return _this3.nodesAdded.publish(new NodesAddedMutationEvent_1["default"](context, addedNodes));
        });
      }
      if (removedNodes.length > 0) {
        this.requestIdleCallbackSafe(function () {
          return _this3.nodesRemoved.publish(new NodesRemovedMutationEvent_1["default"](context, removedNodes));
        });
      }
    }
    /**
     * Process the added nodes of a single mutation record
     */
  }, {
    key: "_processNodes",
    value: function _processNodes(nodes, nodeEvent) {
      var validNodes = [];
      for (var i = 0; i < nodes.length; i++) {
        var node = nodes[i];
        if (this._isValidNodeType(node)) {
          validNodes.push(node);
          nodeEvent.publish(node);
        }
      }
      return validNodes;
    }
    /**
     * Verify the node has a valid nodeType and should be processed.
     */
  }, {
    key: "_isValidNodeType",
    value: function _isValidNodeType(node) {
      return !this.ignoreNodeTypes.has(node.nodeType);
    }
    /**
     * Fallback implementation for browsers that don't support requestIdleCallback
     */
  }, {
    key: "requestIdleCallbackSafe",
    value: function requestIdleCallbackSafe(cb) {
      return (window.requestIdleCallback || function (cb) {
        return setTimeout(function () {
          cb({
            timeRemaining: function timeRemaining() {
              return 0;
            },
            didTimeout: true
          });
        }, 1);
      })(cb);
    }
  }]);
}();
exports["default"] = ElementsMutationObserver;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/browsercontexts/ElementsMutationObserverFactory.js":
/*!*********************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/browsercontexts/ElementsMutationObserverFactory.js ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var ElementsMutationObserver_1 = __importDefault(__webpack_require__(/*! ./ElementsMutationObserver */ "./dist/js-sdk-legacy/src/main/core/browsercontexts/ElementsMutationObserver.js"));
var ElementsMutationObserverFactory = /*#__PURE__*/function () {
  function ElementsMutationObserverFactory() {
    _classCallCheck(this, ElementsMutationObserverFactory);
  }
  return _createClass(ElementsMutationObserverFactory, [{
    key: "create",
    value: function create(context, mutationObserver, configurationRepository) {
      return new ElementsMutationObserver_1["default"](context, mutationObserver, configurationRepository);
    }
  }]);
}();
exports["default"] = ElementsMutationObserverFactory;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ConfigurationFields = void 0;
exports.ConfigurationFields = {
  resetSessionApiThreshold: 'resetSessionApiThreshold',
  dataWupDispatchRateSettings: 'dataWupDispatchRateSettings',
  logWupDispatchRateSettings: 'logWupDispatchRateSettings',
  logServerURL: 'logAddress',
  enableMinifiedLogUri: 'enableMinifiedLogUri',
  forceDynamicDataWupDispatchSettings: 'forceDynamicDataWupDispatchSettings',
  wupStatisticsLogIntervalMs: 'wupStatisticsLogIntervalMs',
  serverCommunicationSettings: 'serverCommunicationSettings',
  wupResponseTimeout: 'wupResponseTimeout',
  wupMessageRequestTimeout: 'wupMessageRequestTimeout',
  logMessageRequestTimeout: 'logMessageRequestTimeout',
  collectKeyRegionValue: 'collectKeyRegionValue',
  crossDomainsList: 'crossDomainsList',
  crossDomainsTimeout: 'crossDomainsTimeout',
  isMutationObserver: 'isMutationObserver',
  isEnabled: 'isEnabled',
  slaveChannelHandshakeTimeout: 'slaveChannelHandshakeTimeout',
  slaveAliveMessageInterval: 'slaveAliveMessageInterval',
  collectCustomElementAttribute: 'collectCustomElementAttribute',
  customElementAttribute: 'customElementAttribute',
  enableFramesProcessing: 'enableFramesProcessing',
  enableSameSiteNoneAndSecureCookies: 'enableSameSiteNoneAndSecureCookies',
  wupServerURL: 'wupServerURL',
  logAddress: 'logAddress',
  isCaptureKeyEvents: 'isCaptureKeyEvents',
  locationEventsTimeoutMsec: 'locationEventsTimeoutMsec',
  heartBeatMessageInterval: 'heartBeatMessageInterval',
  isMotionAroundTouchEnabled: 'isMotionAroundTouchEnabled',
  motionPaddingAroundTouchMSec: 'motionPaddingAroundTouchMSec',
  isMotionOnSessionStart: 'isMotionOnSessionStart',
  motionPaddingOnSessionStartMSec: 'motionPaddingOnSessionStartMSec',
  isVMDetection: 'isVMDetection',
  isScrollCollect: 'isScrollCollect',
  isContextPropsFeature: 'isContextPropsFeature',
  isCrossDomain: 'isCrossdomain',
  gyroEventsThreshold: 'gyroEventsThreshold',
  gyroEventsSamplePeriod: 'gyroEventsSamplePeriod',
  dataQPassWorkerInterval: 'dataQPassWorkerInterval',
  accelerometerEventsSamplePeriod: 'accelerometerEventsSamplePeriod',
  orientationEventsThreshold: 'orientationEventsThreshold',
  orientationEventsSamplePeriod: 'orientationEventsSamplePeriod',
  isAudioDetection: 'isAudioDetection',
  stateChangeEnabled: 'stateChangeEnabled',
  logLevel: 'logLevel',
  enableCustomElementsProcessing: 'enableCustomElementsProcessing',
  keyEventsMaskSpecialChars: 'keyEventsMaskSpecialChars',
  collectSelectElementBlurAndFocusEvents: 'collectSelectElementBlurAndFocusEvents',
  allowedUnmaskedValuesList: 'allowedUnmaskedValuesList',
  enableUnmaskedValues: 'enableUnmaskedValues',
  wupMessageNumToRetry: 'wupMessageNumToRetry',
  wupMessageRetryInterval: 'wupMessageRetryInterval',
  wupIncrementalGrowthBetweenFailures: 'wupIncrementalGrowthBetweenFailures',
  wupMaxIntervalBetweenFailures: 'wupMaxIntervalBetweenFailures',
  logMessageNumToRetry: 'logMessageNumToRetry',
  logMessageRetryInterval: 'logMessageRetryInterval',
  logIncrementalGrowthBetweenFailures: 'logIncrementalGrowthBetweenFailures',
  logMaxIntervalBetweenFailures: 'logMaxIntervalBetweenFailures',
  cdsNumExpirationTime: 'cdsNumExpirationTime',
  enableCoordinatesMasking: 'enableCoordinatesMasking',
  maskElementsAttributes: 'maskElementsAttributes',
  enableAcknowledgeMessageEvents: 'enableAcknowledgeMessageEvents',
  timeTillClearingElementsBufferQueueTimeout: 'timeTillClearingElementsBufferQueueTimeout',
  acknowledgeDataDispatchingRate: 'acknowledgeDataDispatchingRate',
  isChannelSupportsAckMessageLogic: 'isChannelSupportsAckMessageLogic',
  parentElementSelector: 'parentElementSelector',
  childElementWithCustomAttribute: 'childElementWithCustomAttribute',
  elementDataAttribute: 'elementDataAttribute',
  customButtons: 'customButtons',
  enableElementHierarchy: 'enableElementHierarchy',
  enableElementCategory: 'enableElementCategory',
  agentType: 'agentType',
  collectionMode: 'collectionMode',
  enableWupMessagesHashing: 'enableWupMessagesHashing',
  enableStartupCustomerSessionId: 'enableStartupCustomerSessionId',
  offloadFontsCollectionEnabled: 'offloadFontsCollectionEnabled',
  mutationMaxChunkSize: 'mutationMaxChunkSize',
  mutationChunkDelayMs: 'mutationChunkDelayMs',
  passwordIdMaskingList: 'passwordIdMaskingList',
  elementUniqueIDConfiguration: 'elementUniqueIDConfiguration',
  fontCollection: 'fontCollection',
  useLegacyZeroTimeout: 'useLegacyZeroTimeout'
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationRepository.js":
/*!***********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationRepository.js ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function get() {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
  __setModuleDefault(result, mod);
  return result;
};
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ConfigurationDefaultTemplates = void 0;
var ConfigurationFields_1 = __webpack_require__(/*! ./ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var LogLevel_1 = __webpack_require__(/*! ../../technicalServices/log/LogLevel */ "./dist/js-sdk-legacy/src/main/technicalServices/log/LogLevel.js");
var CDMap = __importStar(__webpack_require__(/*! ../../infrastructure/CDMap */ "./dist/js-sdk-legacy/src/main/infrastructure/CDMap.js"));
var FontMigrationStage_1 = __importDefault(__webpack_require__(/*! ../../collectors/static/font/collection/v2/types/FontMigrationStage */ "./dist/js-sdk-legacy/src/main/collectors/static/font/collection/v2/types/FontMigrationStage.js"));
exports.ConfigurationDefaultTemplates = {
  defaultDynamicWupDispatchRateConfiguration: {
    type: 'dynamic'
  },
  defaultIncrementalWupDispatchRateConfiguration: {
    type: 'incremental',
    initialRateValueMs: 500,
    incrementStepMs: 500,
    incrementStopMs: 5000,
    incrementStartWupSendCount: 20 // After how many wups do we start increasing
  }
};
/**
 * List of config keys allowed to be modified only via local configuration.
 *
 * @type {string[]}
 */
var configOverrideBlackList = [
/**
 * This keys should be modified only from local configuration, to prevent security treat
 * in which sensitive inputs masking could be disabled remotely.
 * For example, by man-in-the middle attack.
 */
ConfigurationFields_1.ConfigurationFields.keyEventsMaskSpecialChars, ConfigurationFields_1.ConfigurationFields.passwordIdMaskingList, ConfigurationFields_1.ConfigurationFields.maskElementsAttributes, ConfigurationFields_1.ConfigurationFields.allowedUnmaskedValuesList, ConfigurationFields_1.ConfigurationFields.enableUnmaskedValues, ConfigurationFields_1.ConfigurationFields.enableCoordinatesMasking];
var ConfigurationRepository = /*#__PURE__*/function () {
  function ConfigurationRepository() {
    _classCallCheck(this, ConfigurationRepository);
    // Dictionary holds the config values which require parsing so we can parse them when they arrive from the server
    this._requireParseFields = CDMap.create();
    this._requireParseFields.set(ConfigurationFields_1.ConfigurationFields.dataWupDispatchRateSettings, ConfigurationFields_1.ConfigurationFields.dataWupDispatchRateSettings);
    this._requireParseFields.set(ConfigurationFields_1.ConfigurationFields.logWupDispatchRateSettings, ConfigurationFields_1.ConfigurationFields.logWupDispatchRateSettings);
    this._requireParseFields.set(ConfigurationFields_1.ConfigurationFields.crossDomainsList, ConfigurationFields_1.ConfigurationFields.crossDomainsList);
    this._requireParseFields.set(ConfigurationFields_1.ConfigurationFields.allowedUnmaskedValuesList, ConfigurationFields_1.ConfigurationFields.allowedUnmaskedValuesList);
    this._requireParseFields.set(ConfigurationFields_1.ConfigurationFields.serverCommunicationSettings, ConfigurationFields_1.ConfigurationFields.serverCommunicationSettings);
    this._configurationList = {};
    // For subscribing to configuration updates
    this.configDefault = {
      logLevel: LogLevel_1.LogLevel.INFO,
      isCrossdomain: false,
      isGfxRendering: false,
      isAudioDetectFeature: false,
      enableEmuidFeature: false,
      crossDomainsList: [],
      crossDomainsTimeout: 5000,
      orientationEventsSamplePeriod: 300,
      orientationEventsThreshold: 1,
      stateChangeEnabled: false,
      accelerometerEventsSamplePeriod: 0,
      dataQPassWorkerInterval: 500,
      gyroEventsSamplePeriod: 0,
      gyroEventsThreshold: 0.3,
      isContextPropsFeature: true,
      isEnabled: true,
      isResetEveryLoad: false,
      isScrollCollect: true,
      isVMDetection: true,
      isAudioDetection: false,
      wupStatisticsLogIntervalMs: 30000,
      heartBeatMessageInterval: 5000,
      resetSessionApiThreshold: 20000,
      wupMessageRequestTimeout: 5000,
      logMessageRequestTimeout: 5000,
      slaveChannelHandshakeTimeout: 60000,
      slaveAliveMessageInterval: 100,
      forceDynamicDataWupDispatchSettings: true,
      dataWupDispatchRateSettings: exports.ConfigurationDefaultTemplates.defaultDynamicWupDispatchRateConfiguration,
      logWupDispatchRateSettings: {
        type: 'constant',
        initialRateValueMs: 2500 // The initial rate
      },
      serverCommunicationSettings: {
        queueLoadThreshold: 100
      },
      collectKeyRegionValue: false,
      isMutationObserver: true,
      collectCustomElementAttribute: true,
      isCaptureKeyEvents: false,
      locationEventsTimeoutMsec: 10000,
      isMotionAroundTouchEnabled: true,
      motionPaddingAroundTouchMSec: 3000,
      isMotionOnSessionStart: true,
      motionPaddingOnSessionStartMSec: 20000,
      keyEventsMaskSpecialChars: false,
      collectSelectElementBlurAndFocusEvents: false,
      enableUnmaskedValues: false,
      allowedUnmaskedValuesList: [],
      wupMessageNumToRetry: 5,
      wupMessageRetryInterval: 1000,
      wupIncrementalGrowthBetweenFailures: 3500,
      wupMaxIntervalBetweenFailures: 16000,
      logMessageNumToRetry: 5,
      logMessageRetryInterval: 1000,
      logIncrementalGrowthBetweenFailures: 3500,
      logMaxIntervalBetweenFailures: 16000,
      cdsNumExpirationTime: 60,
      enableCoordinatesMasking: false,
      acknowledgeDataDispatchingRate: 3000,
      passwordIdMaskingList: [],
      isFontWidthFeature: false,
      isFontMathFeature: false,
      isFontEmojiFeature: false,
      isStorageFeature: false,
      isKeyboardLayoutFeature: false,
      isScreenHighResFeature: false,
      isBatteryStatusFeature: false,
      isNavigatorFeature: false,
      isWebglFeature: false,
      isWebRTCFeature: false,
      isSpeechVoicesFeature: false,
      isDRMFeature: false,
      isBrowserExtensionsFeature: false,
      isAdblockerListsFeature: false,
      elementUniqueIDConfiguration: {
        componentsFormat: "{tagName}_{index}_{id}_{className}_{ariaLabel}_{containerInfo}_{hierarchyPath}",
        hierarchyFormat: "{tagName}_{index}",
        enabledTags: ["input", "textarea", "button", "select", "div", "span"]
      },
      offloadFontsCollectionEnabled: true,
      fontCollection: JSON.stringify({
        "migrationMode": FontMigrationStage_1["default"].V1_ONLY,
        "v2": {
          "batchSize": 5,
          "timeoutGap": 0
        }
      }),
      enableElementHierarchy: false,
      enableElementCategory: true
    };
    this.loadConfigurations(this.configDefault);
  }
  /**
   * Indicates if we are using the a configuration which was updated from the server or not
   * @returns boolean True if update configuration is used. False if default one is used
   */
  return _createClass(ConfigurationRepository, [{
    key: "isConfigurationUpdatedFromServer",
    value: function isConfigurationUpdatedFromServer() {
      return !this._isDefaultConfiguration;
    }
    /**
     * get a list of configurations and sets them all
     * @param config
     * @param forceOverride
     */
  }, {
    key: "loadConfigurations",
    value: function loadConfigurations(config, forceOverride) {
      var _this = this;
      if (!config) {
        return;
      }
      this._isDefaultConfiguration = config === this.configDefault;
      Object.keys(config).forEach(function (key) {
        if (forceOverride || _this._isDefaultConfiguration || !configOverrideBlackList.includes(key)) {
          var configurationValue = config[key];
          if (_this._requireParseFields.has(key)) {
            var parsedValue = _this._tryParseConfigurationValue(configurationValue);
            if (parsedValue) {
              configurationValue = parsedValue;
            }
          }
          _this._configurationList[key] = configurationValue;
        }
      });
    }
    /**
     * get specific feature value
     * @param featureName
     * @constructor
     */
  }, {
    key: "get",
    value: function get(configurationName) {
      return this._configurationList[configurationName];
    }
  }, {
    key: "set",
    value: function set(name, value) {
      this._configurationList[name] = value;
    }
  }, {
    key: "getAll",
    value: function getAll() {
      return this._configurationList;
    }
  }, {
    key: "_tryParseConfigurationValue",
    value: function _tryParseConfigurationValue(configurationValue) {
      if (typeof configurationValue !== 'string') {
        return null;
      }
      try {
        return JSON.parse(configurationValue);
      } catch (ex) {
        // swallow error
      }
      return null;
    }
  }]);
}();
exports["default"] = ConfigurationRepository;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationService.js":
/*!********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationService.js ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var WorkerEvent_1 = __webpack_require__(/*! ../../events/WorkerEvent */ "./dist/js-sdk-legacy/src/main/events/WorkerEvent.js");
var ConfigurationFields_1 = __webpack_require__(/*! ./ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var WorkerCommand_1 = __webpack_require__(/*! ../../events/WorkerCommand */ "./dist/js-sdk-legacy/src/main/events/WorkerCommand.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ConfigurationService = /*#__PURE__*/function () {
  function ConfigurationService(utils, configurationRepository, messageBus, cidCache, workerCommunicator) {
    _classCallCheck(this, ConfigurationService);
    if (!messageBus) {
      throw new Error('messageBus param must be defined');
    }
    this._configurationLoadedCallback = null;
    this._utils = utils;
    this._configurationRepository = configurationRepository;
    this._messageBus = messageBus;
    this._cidCache = cidCache;
    // Register for the event only if we have a worker communicator. This hack should be removed and isntead the config manager, should only be used
    // by the main thread. Worker, Slave should use a configuration repository of some sort.
    if (workerCommunicator) {
      workerCommunicator.addMessageListener(WorkerEvent_1.WorkerEvent.ConfigurationLoadedEvent, this._onConfigurationLoadedEvent.bind(this));
    }
  }
  return _createClass(ConfigurationService, [{
    key: "updateLogUrlToWorker",
    value: function updateLogUrlToWorker(sid, csid, workerComm) {
      var logAddress = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.logAddress);
      if (this._isValidLogUrl(logAddress)) {
        var minify = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableMinifiedLogUri);
        if (minify) {
          var logAddressUrl = new URL(logAddress);
          // When minify configured - strip all path from the url.
          // The incentive for doing so is to make it less likely that Add-Blockers would block our url path pattern.
          logAddress = logAddressUrl.protocol + '//' + logAddressUrl.host;
        }
        var sessionIdentifiers = {
          cid: this._cidCache.get(),
          sid: sid,
          csid: csid,
          ds: 'js',
          sdkVer: this._utils.scriptVersion
        };
        /**
         *
         * Attach the session identifiers to the sdk main context Logger.
         *
         * By legacy - these parameters were set on the url as REST params.
         * The easiest why for AddBlockers to block network requests is by black-listing sub-path patterns contain specific args.
         *
         *  Log.attachSessionIdentifiers is insuring these params will be sent as part of the data in the request's body instead.
         */
        Logger_1["default"].attachSessionIdentifiers(sessionIdentifiers);
        var message = {
          logAddress: logAddress,
          // attaching the sessionIdentifiers so that the worker could use them for updating it own Logger as well.
          sessionIdentifiers: sessionIdentifiers
        };
        workerComm.sendAsync(WorkerCommand_1.WorkerCommand.updateLogUrlCommand, message);
      }
    }
  }, {
    key: "_isValidLogUrl",
    value: function _isValidLogUrl(url) {
      try {
        new URL(url);
        return true;
      } catch (e) {
        // Nothing to do. received invalid log url.
        // Therefore, logging this error will also would be useless
        return false;
      }
    }
    /**
     * Another hack to comply with the current requirement for a callback to be triggered once configuration is loaded
     * @param callback
     */
  }, {
    key: "setConfigurationLoadedCallback",
    value: function setConfigurationLoadedCallback(callback) {
      this._configurationLoadedCallback = callback;
    }
  }, {
    key: "_onConfigurationLoadedEvent",
    value: function _onConfigurationLoadedEvent(configurationsStructure) {
      // Load the configurations into the repository
      this._configurationRepository.loadConfigurations(configurationsStructure);
      // Should be removed ASAP. Ugly ugly ugly!!!!
      if (this._configurationLoadedCallback) {
        this._configurationLoadedCallback(this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.isEnabled));
      }
      // Notify the system that configuration was loaded
      this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.ConfigurationLoadedEvent, this._configurationRepository);
    }
  }]);
}();
exports["default"] = ConfigurationService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/configuration/StartupConfigurationLoader.js":
/*!**************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/configuration/StartupConfigurationLoader.js ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDUtils_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/CDUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/CDUtils.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ./ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var AgentType_1 = __webpack_require__(/*! ../../contract/AgentType */ "./dist/js-sdk-legacy/src/main/contract/AgentType.js");
var CollectionMode_1 = __webpack_require__(/*! ../../contract/CollectionMode */ "./dist/js-sdk-legacy/src/main/contract/CollectionMode.js");
var StartupConfigurationLoader = /*#__PURE__*/function () {
  function StartupConfigurationLoader(configurationRepository, startUpConfigurations) {
    _classCallCheck(this, StartupConfigurationLoader);
    this._configurationRepository = configurationRepository;
    this._startUpConfigurations = startUpConfigurations;
  }
  /**
   * Sets certain local startupConfiguration's values into their equivalent values in the remote configurationRepository.
   * By design - all configurations available both in remote and local - should be addressed explicitly within this function's body.
   */
  return _createClass(StartupConfigurationLoader, [{
    key: "loadStartUpConfigurations",
    value: function loadStartUpConfigurations() {
      var _this$_startUpConfigu, _this$_startUpConfigu2;
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.logAddress, this._startUpConfigurations.getLogServerURL(), null);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.enableMinifiedLogUri, this._startUpConfigurations.isMinifiedLogUriEnabled(), false);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.enableFramesProcessing, this._startUpConfigurations.getEnableFramesProcessing(), true);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.enableCustomElementsProcessing, this._startUpConfigurations.getEnableCustomElementsProcessing(), false);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.customElementAttribute, this._startUpConfigurations.getCollectionSettings().getElementSettings().getCustomElementAttribute(), 'data-automation-id');
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.enableSameSiteNoneAndSecureCookies, this._startUpConfigurations.getEnableSameSiteNoneAndSecureCookies(), true);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.maskElementsAttributes, this._startUpConfigurations.getCollectionSettings().getElementSettings().getAttributesToMask(), []);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.parentElementSelector, this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getParentElementSelector(), '');
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.childElementWithCustomAttribute, this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getChildElementWithCustomAttribute(), '');
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.elementDataAttribute, this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getElementDataAttribute(), '');
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.customButtons, this._startUpConfigurations.getCollectionSettings().getCustomInputElementSettings().getCustomButtons(), []);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.agentType, this._startUpConfigurations.getCollectionSettings().getAgentType(), AgentType_1.AgentType.PRIMARY);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.collectionMode, this._startUpConfigurations.getCollectionSettings().getAgentMode(), CollectionMode_1.CollectionMode.FULL);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.keyEventsMaskSpecialChars, this._startUpConfigurations.getCollectionSettings().getElementSettings().getKeyEventsMaskSpecialChars(), false);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.enableWupMessagesHashing, (_this$_startUpConfigu = this._startUpConfigurations.getClientSettings()) === null || _this$_startUpConfigu === void 0 ? void 0 : _this$_startUpConfigu.enableWupMessagesHashing, false);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.enableCoordinatesMasking, (_this$_startUpConfigu2 = this._startUpConfigurations.getClientSettings()) === null || _this$_startUpConfigu2 === void 0 ? void 0 : _this$_startUpConfigu2.enableCoordinatesMasking, false);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.enableStartupCustomerSessionId, this._startUpConfigurations.getEnableStartupCustomerSessionId(), false);
      this._setNumberConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.mutationMaxChunkSize, this._startUpConfigurations.getMutationMaxChunkSize(), 0);
      this._setNumberConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.mutationChunkDelayMs, this._startUpConfigurations.getMutationChunkDelayMs(), 100);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.passwordIdMaskingList, this._startUpConfigurations.getPasswordIdMaskingList(), []);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.enableUnmaskedValues, this._startUpConfigurations.isUnmaskedValuesEnabled(), false);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.allowedUnmaskedValuesList, this._startUpConfigurations.getAllowedUnmaskedValuesList(), []);
      this._setConfigurationOrDefault(ConfigurationFields_1.ConfigurationFields.useLegacyZeroTimeout, this._startUpConfigurations.getUseLegacyZeroTimeout(), []);
    }
  }, {
    key: "_setConfigurationOrDefault",
    value: function _setConfigurationOrDefault(ConfigurationField, startupConfiguration, defaultValue) {
      if (!CDUtils_1["default"].isUndefinedNull(startupConfiguration)) {
        this._configurationRepository.set(ConfigurationField, startupConfiguration);
      } else {
        this._configurationRepository.set(ConfigurationField, defaultValue);
      }
    }
  }, {
    key: "_setNumberConfigurationOrDefault",
    value: function _setNumberConfigurationOrDefault(ConfigurationField, startupConfiguration, defaultValue) {
      if (CDUtils_1["default"].isNumber(startupConfiguration)) {
        this._configurationRepository.set(ConfigurationField, startupConfiguration);
      } else {
        this._configurationRepository.set(ConfigurationField, defaultValue);
      }
    }
  }]);
}();
exports["default"] = StartupConfigurationLoader;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/context/ContextApiHandler.js":
/*!***********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/context/ContextApiHandler.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * This class is for handling api call from the CustomerApiBridge.
 * It is not handled in the ContextMgr since handling it there will require the context mgr to know
 * the DataQ which will cause circular reference
 */
var ContextApiHandler = /*#__PURE__*/function () {
  function ContextApiHandler(contextMgr, dataQ) {
    _classCallCheck(this, ContextApiHandler);
    this._contextMgr = contextMgr;
    this._dataQ = dataQ;
    // subscribe to context changes
    this._contextMgr.onContextChange.subscribe(this.sendContextToServer.bind(this));
    // generate a report of context change when the page first reloads in order to report the url
    this.handleContextChange({
      context: 'cd_auto'
    });
  }
  return _createClass(ContextApiHandler, [{
    key: "handleContextChange",
    value: function handleContextChange(apiMsg) {
      // activityType is for backward compatibility with 1.4 api
      this._contextMgr.changeContext(apiMsg.context || apiMsg.activityType);
    }
  }, {
    key: "sendContextToServer",
    value: function sendContextToServer(newContext) {
      if (newContext) {
        this._dataQ.addToQueue('contextChange', [null, newContext.url, newContext.name, newContext.timestamp, newContext.referrer, newContext.hLength]);
      }
    }
  }]);
}();
exports["default"] = ContextApiHandler;
// Better to do it with static (ES6) but Babel is unable to handle it in IE8, so for now...
ContextApiHandler.apiName = 'ContextChange';

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/context/ContextMgr.js":
/*!****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/context/ContextMgr.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var WorkerCommand_1 = __webpack_require__(/*! ../../events/WorkerCommand */ "./dist/js-sdk-legacy/src/main/events/WorkerCommand.js");
var CDEvent_1 = __importDefault(__webpack_require__(/*! ../../infrastructure/CDEvent */ "./dist/js-sdk-legacy/src/main/infrastructure/CDEvent.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
/**
 * The context is changing in the following logic:
 * - a new contextId on every page reload
 * - a url is taken on every page reload
 * - contextName is null unless the user updates about the context and then
 *   we are updating the server with an event. In the next page reload we will loose the state.
 *   The creation of ContextApiHandler will cause this class to generate the first context and since
 *   this is happening before reporting any data it is OK
 */
var ContextMgr = /*#__PURE__*/function () {
  function ContextMgr(utils, siteMapper, workerComm, storageUtilsWrapper) {
    _classCallCheck(this, ContextMgr);
    this._utils = utils;
    this._storageUtilsWrapper = storageUtilsWrapper;
    this._contextSiteMapper = siteMapper;
    // every time ContextMgr is created we are creating new context id (page load on non SPA).
    // on SPA this will stay fixed :(
    this.contextName = '';
    this.referrer = '';
    this.historyLen = -1;
    this.onContextChange = new CDEvent_1["default"]();
    this._contextSiteMapper.updateObserver(this.onSiteMapperMatch.bind(this));
    this._workerComm = workerComm;
    this._contextIdKey = 'cdContextId';
    // Generate a random value during initialization
    this.randomValue = Math.floor(Math.random() * 1000000); // Adjust the range as needed
  }
  return _createClass(ContextMgr, [{
    key: "contextData",
    value: function contextData() {
      return {
        contextId: this.contextId,
        contextHash: this.contextHash,
        url: this.url,
        name: this.contextName,
        referrer: this.referrer,
        hLength: this.historyLen,
        timestamp: this.timestamp
      };
    }
  }, {
    key: "getContextName",
    value: function getContextName() {
      return this.contextName;
    }
  }, {
    key: "setContext",
    value: function setContext(contextData) {
      // call changeContext in order to generate and save new context id.
      // Now keep the url, referrer and history of the context that was sent -
      // from the slave
      this.contextName = contextData.name;
      this._genContext();
      this.url = contextData.url;
      this.referrer = contextData.referrer;
      this.historyLen = contextData.hLength;
      this.timestamp = contextData.timestamp;
      this._publishContext();
    }
    /**
     * Publish the context change for every module registered
     * @param contextName
     */
  }, {
    key: "changeContext",
    value: function changeContext(contextName) {
      if (!contextName) {
        Logger_1["default"].error("Received an invalid context name ".concat(contextName, ". Aborting context change operation"));
        return;
      }
      if (contextName === this.contextName) {
        Logger_1["default"].warn("Received context ".concat(contextName, " but this is already the current context. Aborting operation."));
        return;
      }
      this.contextName = contextName;
      this._updateContext();
      this._publishContext();
      Logger_1["default"].info("Context changed to ".concat(contextName, " and Context hash its ").concat(this.contextHash));
    }
  }, {
    key: "onSiteMapperMatch",
    value: function onSiteMapperMatch(matchedMapping) {
      // If a trigger happened and we are about to change context to our current context, we abort at this stage
      // No need for the extra processing...
      if (matchedMapping.contextName === this.contextName) {
        return;
      }
      this.changeContext(matchedMapping.contextName);
    }
  }, {
    key: "_updateContext",
    value: function _updateContext() {
      this._genContext();
      this.url = this._utils.getDocUrl();
      this.referrer = this._utils.clearTextFromNumbers(document.referrer);
      this.historyLen = window.history.length;
      this.timestamp = this._utils.dateNow();
    }
  }, {
    key: "_genContext",
    value: function _genContext() {
      // moved from random number as context id to a running number, to keep track
      // save the id in a cookie in order to share across tabs but will not keep state between sessions
      this.contextId = this._storageUtilsWrapper.getCookie(this._contextIdKey);
      if (!this.contextId || isNaN(this.contextId)) {
        this.contextId = this._storageUtilsWrapper.getFromLocalStorage(this._contextIdKey);
        if (!this.contextId || isNaN(this.contextId)) {
          this.contextId = 0;
        }
      }
      this.contextId = parseInt(this.contextId);
      var val = this.contextId + 1;
      if (!this._storageUtilsWrapper.saveToLocalStorage(this._contextIdKey, val)) {
        Logger_1["default"].error("Failed saving contextId ".concat(this.contextId, " to local storage."));
      }
      // Set the sid cookie. We use the cookie expiration configuration to prevent expiration at end of session
      if (!this._storageUtilsWrapper.setCookie(this._contextIdKey, val.toString())) {
        Logger_1["default"].error("Failed saving contextId ".concat(this.contextId, " to cookie."));
      }
      this.contextHash = this._toInt32Hash(this.contextId);
    }
    // Helper function to create a 32-bit integer hash
  }, {
    key: "_toInt32Hash",
    value: function _toInt32Hash(val) {
      // Incorporate the random value into the hash computation
      val ^= this.randomValue; // XOR with the random value
      // Simple hash function example (bitwise operations)
      var hash = val;
      hash = (hash >>> 16 ^ hash) * 0x45d9f3b;
      hash = (hash >>> 16 ^ hash) * 0x45d9f3b;
      hash = hash >>> 16 ^ hash;
      return hash & 0xFFFFFFFF; // Ensure it's a 32-bit integer
    }
  }, {
    key: "_publishContext",
    value: function _publishContext() {
      // Need to change this to a specific message relevant for context change and remove the update Params...
      var msgToWorker = {
        contextName: this.contextName
      };
      // when the context manager is loaded in slave this message will be sent to parent and ignored (no one listens)
      this._workerComm.sendAsync(WorkerCommand_1.WorkerCommand.changeContextCommand, msgToWorker);
      this.onContextChange.publish(this.contextData());
    }
  }, {
    key: "initContextHandling",
    value: function initContextHandling() {
      this._contextSiteMapper.initTracking();
    }
  }, {
    key: "clearContextHandling",
    value: function clearContextHandling() {
      this._contextSiteMapper.stopTracking();
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate(configurationRepository) {
      this._contextSiteMapper.onConfigUpdate(configurationRepository);
    }
  }, {
    key: "onSessionReset",
    value: function onSessionReset() {
      this._publishContext();
    }
  }]);
}();
exports["default"] = ContextMgr;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/customelements/CustomElementEventMessage.js":
/*!**************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/customelements/CustomElementEventMessage.js ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CustomElementEventMessageActions = void 0;
exports.CustomElementEventMessageActions = {
  added: 'added',
  removed: 'removed'
};
/**
 * Represents a Custom Element message emitted by CustomElementsDetector
 */
var CustomElementEventMessage = /*#__PURE__*/_createClass(
/**
 * @param {BrowserContext} browserContext
 * @param {string} message
 */
function CustomElementEventMessage(browserContext, message) {
  _classCallCheck(this, CustomElementEventMessage);
  this.browserContext = browserContext;
  this.message = message;
});
exports["default"] = CustomElementEventMessage;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/customelements/CustomElementsClosedContext.js":
/*!****************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/customelements/CustomElementsClosedContext.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var BrowserContext_1 = __importDefault(__webpack_require__(/*! ../browsercontexts/BrowserContext */ "./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContext.js"));
/**
 * An instance of this class represents a Custom Element's direct access to the it's shadowRoot
 * Allows the representation of Custom Elements that their mode is set to closed
 * @example
 * const customElement = new CustomElementsClosedContext(someElement);
 * shadowRoot = customElement.getDocument();
 */
var CustomElementsClosedContext = /*#__PURE__*/function (_BrowserContext_1$def) {
  function CustomElementsClosedContext() {
    _classCallCheck(this, CustomElementsClosedContext);
    return _callSuper(this, CustomElementsClosedContext, arguments);
  }
  _inherits(CustomElementsClosedContext, _BrowserContext_1$def);
  return _createClass(CustomElementsClosedContext, [{
    key: "getDocument",
    value:
    /**
     *
     * @returns {Document}
     */
    function getDocument() {
      return this.context;
    }
  }]);
}(BrowserContext_1["default"]);
exports["default"] = CustomElementsClosedContext;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/customelements/CustomElementsDetector.js":
/*!***********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/customelements/CustomElementsDetector.js ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function get() {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
  __setModuleDefault(result, mod);
  return result;
};
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDMap = __importStar(__webpack_require__(/*! ../../infrastructure/CDMap */ "./dist/js-sdk-legacy/src/main/infrastructure/CDMap.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var CustomElementsOpenContext_1 = __importDefault(__webpack_require__(/*! ./CustomElementsOpenContext */ "./dist/js-sdk-legacy/src/main/core/customelements/CustomElementsOpenContext.js"));
var CustomElementsClosedContext_1 = __importDefault(__webpack_require__(/*! ./CustomElementsClosedContext */ "./dist/js-sdk-legacy/src/main/core/customelements/CustomElementsClosedContext.js"));
var BrowserContextMutationObserver_1 = __importDefault(__webpack_require__(/*! ../browsercontexts/BrowserContextMutationObserver */ "./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContextMutationObserver.js"));
var CustomElementEventMessage_1 = __importStar(__webpack_require__(/*! ./CustomElementEventMessage */ "./dist/js-sdk-legacy/src/main/core/customelements/CustomElementEventMessage.js"));
/**
 * Detection of custom elements (e.g. <my-custom-element> created using the
 * WebComponent and Shadow DOM API)
 * Detector should start before related event handlers (custom element) are started
 */
var CustomElementsDetector = /*#__PURE__*/function () {
  /**
   * @param {MutationObserver} elementsMutationObserverFactory
   * @param {CDUtils} domUtils
   * @param {MessageBus} messageBus
   * @param {ConfigurationRepository} configurationRepository
   */
  function CustomElementsDetector(domUtils, messageBus, configurationRepository) {
    _classCallCheck(this, CustomElementsDetector);
    this._domUtils = domUtils;
    this._messageBus = messageBus;
    // The detector use this Map to store previously detected elements so custom elements detected upon
    // the root context loading can be handled
    this._loadedCustomElements = CDMap.create();
    this._windowMutationObservers = CDMap.create();
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.MutationAddedNodes, this._processAddedNodes.bind(this));
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.MutationRemovedNodes, this._processRemovedNodes.bind(this));
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.CustomElementSubmitted, this._processSubmittedCustomElement.bind(this));
    this._browserContextMutationObserver = new BrowserContextMutationObserver_1["default"](this._windowMutationObservers, this._messageBus, configurationRepository);
    // Cache results for elements we've already checked
    this.customElementCache = new WeakMap();
  }
  /**
   *
   * @returns {Array}
   */
  return _createClass(CustomElementsDetector, [{
    key: "customElements",
    get: function get() {
      var customElements = [];
      this._loadedCustomElements.forEach(function (value, key) {
        customElements.push(key);
      });
      return customElements;
    }
    /**
     * @param customElement
     * @returns {boolean} true if the custom element exists in cache
     */
  }, {
    key: "hasCustomElement",
    value: function hasCustomElement(customElement) {
      if (this._loadedCustomElements.has(customElement)) {
        return true;
      }
      return false;
    }
    /**
     * @param customElement
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "addCustomElementToLoadedList",
    value: function addCustomElementToLoadedList(customElement, browserContext) {
      this._loadedCustomElements.set(customElement, browserContext);
    }
    /**
     * Start custom elements detection - this should be applied on the current (self/window) only!
     * @param {BrowserContext} rootWindow
     */
  }, {
    key: "start",
    value: function start(rootWindow) {
      var _this = this;
      this._browserContextMutationObserver.monitorWindow(rootWindow);
      this._findCustomElementsInBrowserContext(rootWindow.getDocument()).then(function (rootWindowCustomElements) {
        rootWindowCustomElements.forEach(function (element) {
          _this._processNewElement(element);
        });
      });
    }
  }, {
    key: "stop",
    value: function stop() {
      this.customElementCache = new WeakMap();
      this._windowMutationObservers.forEach(function (value) {
        value.disconnect();
      });
    }
    /**
     * Support the processing of a custom element that it's
     * shadowRoot is closed/inaccessible when obtained using the SDKs customer's API.
     * The element itself is the actual shadowRoot property of the
     * requested custom element.
     * @param element
     * @private
     */
  }, {
    key: "_processSubmittedCustomElement",
    value: function _processSubmittedCustomElement(element) {
      if (this._loadedCustomElements.has(element)) {
        return;
      }
      this._addCustomElement(element, new CustomElementsClosedContext_1["default"](element), 'closed');
    }
    /**
     * Process a newly added custom element context
     * @override
     * @param context
     * @private
     */
  }, {
    key: "_processNewElement",
    value: function _processNewElement(element) {
      // Ignore previously added custom elements
      if (this._loadedCustomElements.has(element)) {
        return;
      }
      // Nothing to do when shadowRoot is inaccessible
      if (element.shadowRoot == null) {
        // We should still report an inaccessible custom element
        // as we might respond to an external message to process the requested element
        this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.CustomElementInaccessible, element);
        return;
      }
      this._addCustomElement(element, new CustomElementsOpenContext_1["default"](element));
    }
    /**
     * Append a custom element collected from the current window document
     * @param {Element} element
     * @param {BrowserContext} browserContext
     * @param {string} mode
     * @private
     */
  }, {
    key: "_addCustomElement",
    value: function _addCustomElement(element, browserContext) {
      var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'open';
      // Continue to monitor the shadowRoot of the custom element
      if (mode === 'open') {
        this._browserContextMutationObserver.monitorWindow(browserContext);
      }
      // add the Custom Element to the map of loaded custom elements
      this._loadedCustomElements.set(element, browserContext);
      this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.CustomElementDetectedEvent, new CustomElementEventMessage_1["default"](browserContext, CustomElementEventMessage_1.CustomElementEventMessageActions.added));
    }
    /**
     * Remove and report a custom element
     * @param {Element} element
     * @private
     */
  }, {
    key: "_removeCustomElement",
    value: function _removeCustomElement(element) {
      var browserContextToRemove = this._loadedCustomElements.get(element);
      this._browserContextMutationObserver.unMonitorWindow(element.shadowRoot);
      if (this._loadedCustomElements["delete"](element)) {
        this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.CustomElementDetectedEvent, new CustomElementEventMessage_1["default"](browserContextToRemove, CustomElementEventMessage_1.CustomElementEventMessageActions.removed));
      }
    }
    /**
     * Process the added nodes of a single mutation record
     * @param {NodeAddedMutationEvent} nodeAddedMutationEvent
     * @private
     */
  }, {
    key: "_processAddedNodes",
    value: function _processAddedNodes(nodeAddedMutationEvent) {
      var _this2 = this;
      nodeAddedMutationEvent.addedNodes.forEach(function (node) {
        if (node.nodeType === Node.ELEMENT_NODE) {
          var documentOrRoot = node.shadowRoot ? node.shadowRoot : node.ownerDocument;
          _this2._processNewElement(node);
          // Go over nodes which were added and check if there are custom elements in it
          _this2._findCustomElementsInBrowserContext(documentOrRoot).then(function (detectedCustomElements) {
            detectedCustomElements.forEach(function (element) {
              _this2._processNewElement(element);
            });
          });
        }
      });
    }
    /**
     * Process the removed nodes of a single mutation record
     * @param nodeRemovedMutationEvent
     * @private
     */
  }, {
    key: "_processRemovedNodes",
    value: function _processRemovedNodes(nodeRemovedMutationEvent) {
      var _this3 = this;
      var removedNodes = nodeRemovedMutationEvent.removedNodes;
      var customElementsToRemove = [];
      // Go over nodes which were removed and check if there are custom elements in it
      for (var i = 0; i < removedNodes.length; i++) {
        var removedNode = removedNodes[i];
        if (!removedNode.hasChildNodes()) {
          if (this._isCustomElement(removedNode)) {
            if (removedNode.shadowRoot) {
              customElementsToRemove.push(removedNode);
            }
          }
        } else {
          this._findCustomElementsInBrowserContext(removedNode).then(function (detectedCustomElementsToRemove) {
            if (detectedCustomElementsToRemove.length > 0) {
              customElementsToRemove = customElementsToRemove.concat(detectedCustomElementsToRemove);
            }
          });
        }
      }
      if (customElementsToRemove.length === 0) return;
      customElementsToRemove.forEach(function (element) {
        _this3._removeCustomElement(element);
      });
    }
    /**
     * Returns true if an element is a custom element
     * e.g. - it's name contains dashes ('-')
     * e.g. <my-custom-element>
     * The private DOM of the custom element may or may no be accessible - depends
     * on the mode of the WebComponent (mode: "open" VS mode: "closed")
     * @private
     *
     * Optimized _isCustomElement()
     *  Uses a Set for quick lookups (O(1) instead of O(n)).
     *  Caches previously checked elements to prevent duplicate work.
     *  Avoids unnecessary function calls.
     */
  }, {
    key: "_isCustomElement",
    value: function _isCustomElement(element) {
      if (!element || typeof element.localName !== 'string') return false;
      // Use cache for repeated elements
      if (this.customElementCache.has(element)) {
        return this.customElementCache.get(element);
      }
      // Check if it's a custom element (contains '-')
      var isCustom = element.localName.includes('-');
      // Store result in cache
      this.customElementCache.set(element, isCustom);
      return isCustom;
    }
    /**
     * Query the dom for elements that has public shadowRoot attribute
     * In case the a Web Component is created in mode: closed, the shadowRoot is null
     * and there is no way to query.
     * @todo Report a private shadowRoot
     * Custom elements will be detected by querying the window context for elements with
     * occurrences of at least one dash in their names.
     * e.g. <my-custom-element>
     */
  }, {
    key: "_findCustomElementsInBrowserContext",
    value: (function () {
      var _findCustomElementsInBrowserContext2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(document) {
        var _this4 = this;
        var customElementsList, queryElements, shadowPromises;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              customElementsList = new Set();
              queryElements = document.querySelectorAll('*');
              if (!(queryElements.length === 0)) {
                _context.n = 1;
                break;
              }
              return _context.a(2, _toConsumableArray(customElementsList));
            case 1:
              // Collect Promises for processing shadow DOM elements
              shadowPromises = [];
              queryElements.forEach(function (nextElement) {
                if (!_this4._isCustomElement(nextElement)) return;
                customElementsList.add(nextElement);
                if (nextElement.shadowRoot) {
                  // Store the async result of processing the shadow DOM
                  var shadowProcessing = _this4._findCustomElementsInBrowserContext(nextElement.shadowRoot).then(function (subElements) {
                    subElements.forEach(function (el) {
                      return customElementsList.add(el);
                    });
                  });
                  shadowPromises.push(shadowProcessing);
                } else {
                  _this4._messageBus.publish(MessageBusEventType_1.MessageBusEventType.CustomElementInaccessible, nextElement);
                }
              });
              // Wait for all shadow-root processing to complete
              _context.n = 2;
              return Promise.all(shadowPromises);
            case 2:
              return _context.a(2, _toConsumableArray(customElementsList));
          }
        }, _callee);
      }));
      function _findCustomElementsInBrowserContext(_x) {
        return _findCustomElementsInBrowserContext2.apply(this, arguments);
      }
      return _findCustomElementsInBrowserContext;
    }())
  }]);
}();
exports["default"] = CustomElementsDetector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/customelements/CustomElementsOpenContext.js":
/*!**************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/customelements/CustomElementsOpenContext.js ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var BrowserContext_1 = __importDefault(__webpack_require__(/*! ../browsercontexts/BrowserContext */ "./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContext.js"));
/**
 * An instance of this class represents a WebComponent/Shadow DOM context
 * @example
 * const customElement = new CustomElementsContext(someElement);
 * shadowRoot = customElement.getDocument();
 */
var CustomElementsOpenContext = /*#__PURE__*/function (_BrowserContext_1$def) {
  function CustomElementsOpenContext() {
    _classCallCheck(this, CustomElementsOpenContext);
    return _callSuper(this, CustomElementsOpenContext, arguments);
  }
  _inherits(CustomElementsOpenContext, _BrowserContext_1$def);
  return _createClass(CustomElementsOpenContext, [{
    key: "getDocument",
    value:
    /**
     *
     * @returns {Document} ShadowRoot
     */
    function getDocument() {
      return this.context.shadowRoot;
    }
  }]);
}(BrowserContext_1["default"]);
exports["default"] = CustomElementsOpenContext;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/exceptions/CDAPIException.js":
/*!***********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/exceptions/CDAPIException.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _wrapNativeSuper(t) { var r = "function" == typeof Map ? new Map() : void 0; return _wrapNativeSuper = function _wrapNativeSuper(t) { if (null === t || !_isNativeFunction(t)) return t; if ("function" != typeof t) throw new TypeError("Super expression must either be null or a function"); if (void 0 !== r) { if (r.has(t)) return r.get(t); r.set(t, Wrapper); } function Wrapper() { return _construct(t, arguments, _getPrototypeOf(this).constructor); } return Wrapper.prototype = Object.create(t.prototype, { constructor: { value: Wrapper, enumerable: !1, writable: !0, configurable: !0 } }), _setPrototypeOf(Wrapper, t); }, _wrapNativeSuper(t); }
function _construct(t, e, r) { if (_isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments); var o = [null]; o.push.apply(o, e); var p = new (t.bind.apply(t, o))(); return r && _setPrototypeOf(p, r.prototype), p; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _isNativeFunction(t) { try { return -1 !== Function.toString.call(t).indexOf("[native code]"); } catch (n) { return "function" == typeof t; } }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDAPIException = /*#__PURE__*/function (_Error) {
  function CDAPIException() {
    _classCallCheck(this, CDAPIException);
    return _callSuper(this, CDAPIException, arguments);
  }
  _inherits(CDAPIException, _Error);
  return _createClass(CDAPIException);
}(/*#__PURE__*/_wrapNativeSuper(Error));
exports["default"] = CDAPIException;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/frames/FrameContext.js":
/*!*****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/frames/FrameContext.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var BrowserContext_1 = __importDefault(__webpack_require__(/*! ../browsercontexts/BrowserContext */ "./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContext.js"));
/**
 * Represents a FRAME/IFRAME based browser context
 */
var FrameContext = /*#__PURE__*/function (_BrowserContext_1$def) {
  function FrameContext() {
    _classCallCheck(this, FrameContext);
    return _callSuper(this, FrameContext, arguments);
  }
  _inherits(FrameContext, _BrowserContext_1$def);
  return _createClass(FrameContext, [{
    key: "getDocument",
    value:
    /**
     * Return the private DOM of this context
     * @returns {Document}
     */
    function getDocument() {
      return this.context.document || this.context.contentDocument;
    }
  }]);
}(BrowserContext_1["default"]);
exports["default"] = FrameContext;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/frames/FramesDetector.js":
/*!*******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/frames/FramesDetector.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function get() {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
  __setModuleDefault(result, mod);
  return result;
};
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDMap = __importStar(__webpack_require__(/*! ../../infrastructure/CDMap */ "./dist/js-sdk-legacy/src/main/infrastructure/CDMap.js"));
var CDSet = __importStar(__webpack_require__(/*! ../../infrastructure/CDSet */ "./dist/js-sdk-legacy/src/main/infrastructure/CDSet.js"));
var CDEvent_1 = __importDefault(__webpack_require__(/*! ../../infrastructure/CDEvent */ "./dist/js-sdk-legacy/src/main/infrastructure/CDEvent.js"));
var SystemFrameName_1 = __webpack_require__(/*! ./SystemFrameName */ "./dist/js-sdk-legacy/src/main/core/frames/SystemFrameName.js");
var FramesDetector = /*#__PURE__*/function () {
  function FramesDetector(elementsMutationObserverFactory, domUtils, configurationRepository) {
    _classCallCheck(this, FramesDetector);
    this._elementsMutationObserverFactory = elementsMutationObserverFactory;
    this._configurationRepository = configurationRepository;
    this._domUtils = domUtils;
    this._windowMutationObservers = CDMap.create();
    this._loadedFrames = CDMap.create();
    this._framesToIgnore = CDSet.create();
    this._frameSelector = 'frame, iframe';
    this._frameLoadedCallback = this._onFrameLoad.bind(this);
    // Triggered when a frame is added to our internal structures (after it is loaded and ready for use)
    this.frameAdded = new CDEvent_1["default"]();
    // Triggered when a frame is removed from the DOM and our internal structures (should not be used after this point)
    this.frameRemoved = new CDEvent_1["default"]();
    // Inaccessible Frames event. Triggered for frames which for some reason we are unable to access (cross domain for example)
    this.frameInaccessible = new CDEvent_1["default"]();
  }
  return _createClass(FramesDetector, [{
    key: "frames",
    get: function get() {
      var frames = [];
      this._loadedFrames.forEach(function (value, key) {
        frames.push(key);
      });
      return frames;
    }
    /**
     * Starts the frame detector.
     * @param rootWindow - The main window to monitor. Subtree of this window will be monitored for frames.
     */
  }, {
    key: "start",
    value: function start(rootWindow) {
      var _this = this;
      this._monitorWindow(rootWindow);
      var rootWindowSubFrames = this._findFrames(rootWindow.document);
      rootWindowSubFrames.forEach(function (frame) {
        _this._processNewFrame(frame);
      });
    }
  }, {
    key: "stop",
    value: function stop() {
      this._windowMutationObservers.forEach(function (value) {
        value.disconnect();
      });
      this._windowMutationObservers.clear();
      this._loadedFrames.clear();
      this._framesToIgnore.clear();
    }
    /**
     * Add a frame id to the ignore list. Frames in the ignore list will not be monitored
     * @param frameId
     */
  }, {
    key: "addToIgnoreList",
    value: function addToIgnoreList(frameId) {
      this._framesToIgnore.add(frameId);
    }
  }, {
    key: "_monitorWindow",
    value: function _monitorWindow(window) {
      if (this._windowMutationObservers.has(window)) {
        return;
      }
      var elementsMutationObserver = this._elementsMutationObserverFactory.create(window, self.MutationObserver, this._configurationRepository);
      elementsMutationObserver.observe(window.document);
      elementsMutationObserver.nodeAdded.subscribe(this._processAddedNode.bind(this));
      elementsMutationObserver.nodeRemoved.subscribe(this._processRemovedNode.bind(this));
      this._windowMutationObservers.set(window, elementsMutationObserver);
    }
  }, {
    key: "_unMonitorWindow",
    value: function _unMonitorWindow(window) {
      var mutationObserver = this._windowMutationObservers.get(window);
      if (mutationObserver) {
        mutationObserver.disconnect();
      }
      this._windowMutationObservers["delete"](window);
    }
    /**
     * Process the added nodes of a single mutation record
     * @param addedNode
     * @private
     */
  }, {
    key: "_processAddedNode",
    value: function _processAddedNode(addedNode) {
      var _this2 = this;
      // check if added node have child frames
      if (this._domUtils.matches(addedNode, this._frameSelector)) {
        this._processNewFrame(addedNode);
      } else {
        if (!addedNode.hasChildNodes()) {
          return;
        }
        var elementSubFrames = this._findFrames(addedNode);
        elementSubFrames.forEach(function (frame) {
          _this2._processNewFrame(frame);
        });
      }
    }
    /**
     * Process a new frame which was detected by the mutation observer
     * @param newFrame
     * @private
     */
  }, {
    key: "_processNewFrame",
    value: function _processNewFrame(newFrame) {
      // Make sure the frame id is not in the ignore list or does not contain a predefined prefix. If it is we abort the operation
      if (this._framesToIgnore.has(newFrame.id) || newFrame.id.startsWith(SystemFrameName_1.SystemFrameName.ignorePrefixFrame)) {
        return;
      }
      // If frame was already added we abort at this point because there is no need to add it again
      // Saw at least one scenario in which this could happen (adding a legacy frameset to the dom and than adding a frame to it)
      if (this._loadedFrames.has(newFrame)) {
        return;
      }
      // Subscribe for the load event listener because we want to know when a frame is loaded\reloaded
      // We want to subscribe even for inaccessible frames since they might reload with different content which is
      // of the same origin at some point
      this._domUtils.addEventListener(newFrame, 'load', this._frameLoadedCallback);
      // If the frame is inaccessible for some reason we abort at this point
      if (!this._domUtils.canAccessIFrame(newFrame)) {
        this.frameInaccessible.publish(newFrame);
        return;
      }
      // If the frame is not ready (readyState=complete) we will abort at this point and the frame will be added once it is loaded (in the load event callback)
      if (!this._domUtils.isWindowDocumentReady(newFrame.contentWindow)) {
        return;
      }
      // Add the new frame by monitoring it and adding it to our internal structures
      this._addFrame(newFrame);
    }
    /**
     * Processes a frame. Function checks if the frame is accessible and ready to be monitored
     * @param frame
     * @private
     */
  }, {
    key: "_addFrame",
    value: function _addFrame(frame) {
      var _this3 = this;
      // Monitor for mutations on the frame window
      this._monitorWindow(frame.contentWindow);
      // Search for sub frames and add them as well
      var frameSubFrames = this._findFrames(frame.contentWindow.document);
      frameSubFrames.forEach(function (subFrame) {
        _this3._processNewFrame(subFrame);
      });
      this._loadedFrames.set(frame, frame.contentDocument);
      this.frameAdded.publish(frame);
    }
    /**
     * Process the removed nodes of a single mutation record
     * @param removedNode
     * @private
     */
  }, {
    key: "_processRemovedNode",
    value: function _processRemovedNode(removedNode) {
      var _this4 = this;
      if (this._domUtils.matches(removedNode, this._frameSelector)) {
        this._removeFrame(removedNode);
      } else {
        if (!removedNode.hasChildNodes()) {
          return;
        }
        var elementSubFrames = this._findFrames(removedNode);
        elementSubFrames.forEach(function (frame) {
          _this4._removeFrame(frame);
        });
      }
    }
  }, {
    key: "_removeFrame",
    value: function _removeFrame(frameToRemove) {
      this._unMonitorWindow(frameToRemove.contentWindow);
      this._domUtils.removeEventListener(frameToRemove, 'load', this._frameLoadedCallback);
      if (this._loadedFrames["delete"](frameToRemove)) {
        this.frameRemoved.publish(frameToRemove);
      }
    }
    /**
     * Callback for frame load event
     * @param event
     * @private
     */
  }, {
    key: "_onFrameLoad",
    value: function _onFrameLoad(event) {
      var frame = event.target;
      // Remove the current frame subscription if exists so we can add it once again
      if (this._loadedFrames.has(frame)) {
        this._removeFrame(frame);
      }
      this._processNewFrame(frame);
    }
    /**
     * Recursively find all frames in page and bind unbind frames to key event handler.
     * @param element
     * @returns [Array] list pointer which will hold all the frames, should contain an array
     * @private
     */
  }, {
    key: "_findFrames",
    value: function _findFrames(element) {
      var frameList = [];
      // using querySelectorAll and not window.Frames since we need to listen to the frame and not
      // its content, which changes. if we listen to window.frames we do not get the event.
      var innerFrames = [];
      // use loops and not array conversion since Array.from in babel does not exist for ie11
      var frames = element.querySelectorAll(this._frameSelector);
      for (var i = 0; i < frames.length; i++) {
        innerFrames.push(frames[i]);
      }
      for (var _i = 0; _i < innerFrames.length; _i++) {
        var currentFrameSubFramesList = [];
        var innerFrame = innerFrames[_i];
        frameList.push(innerFrame);
        // Make sure the frame is accessible before trying to get its sub frames. Otherwise we will get some nice error...
        if (!this._domUtils.canAccessIFrame(innerFrame)) {
          this.frameInaccessible.publish(innerFrame);
          continue;
        }
        currentFrameSubFramesList = this._findFrames(innerFrame.contentWindow.document);
        if (currentFrameSubFramesList.length > 0) {
          frameList = frameList.concat(currentFrameSubFramesList);
        }
      }
      return frameList;
    }
  }]);
}();
exports["default"] = FramesDetector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/frames/FramesHandler.js":
/*!******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/frames/FramesHandler.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var FramesHandlerBase_1 = __importDefault(__webpack_require__(/*! ./FramesHandlerBase */ "./dist/js-sdk-legacy/src/main/core/frames/FramesHandlerBase.js"));
var SystemFrameName_1 = __webpack_require__(/*! ./SystemFrameName */ "./dist/js-sdk-legacy/src/main/core/frames/SystemFrameName.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var FrameContext_1 = __importDefault(__webpack_require__(/*! ./FrameContext */ "./dist/js-sdk-legacy/src/main/core/frames/FrameContext.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var FramesHandler = /*#__PURE__*/function (_FramesHandlerBase_1$) {
  function FramesHandler(framesCache, framesDetector, domUtils, utils, useLegacyZeroTimeout) {
    var _this;
    _classCallCheck(this, FramesHandler);
    _this = _callSuper(this, FramesHandler);
    _this._framesCache = framesCache;
    _this._framesDetector = framesDetector;
    _this._framesDetector.frameAdded.subscribe(_this._onFrameAdded.bind(_this));
    _this._framesDetector.frameRemoved.subscribe(_this._onFrameRemoved.bind(_this));
    _this._framesDetector.frameInaccessible.subscribe(_this._onFrameInaccessible.bind(_this));
    _this._featuresList = [];
    _this._domUtils = domUtils;
    _this._utils = utils;
    _this._framesDetector.addToIgnoreList(SystemFrameName_1.SystemFrameName.rtcframe);
    _this._framesDetector.addToIgnoreList(SystemFrameName_1.SystemFrameName.fontDetectionFrame);
    _this.callMethod = useLegacyZeroTimeout ? _this._utils.asyncCall : _this._utils.asyncTimeoutCall;
    // Startup the frames detector
    _this._framesDetector.start(window.self);
    // Create the frames cache so it will be up to date with the current frames state.
    // from now on it will be updated in the frames detector events
    _this._buildFramesCache();
    return _this;
  }
  _inherits(FramesHandler, _FramesHandlerBase_1$);
  return _createClass(FramesHandler, [{
    key: "startFeatures",
    value: function startFeatures(features) {
      try {
        this._buildFeaturesMap(features);
        if (this._featuresList.length === 0) {
          return;
        }
        Logger_1["default"].debug("startFeatures:Running features on ".concat(this._framesCache.count, " frames"));
        this._startFeaturesOnFrames(this._framesCache.contexts, features);
      } catch (ex) {
        Logger_1["default"].debug("Failed to start features in FrameHandler.startFeatures: ".concat(ex.message), ex);
      }
    }
  }, {
    key: "startFeature",
    value: function startFeature(feature) {
      try {
        // Add the feature to the features map
        this._featuresList.push(feature);
        feature.isRunning = true;
        this._startFeaturesOnFrames(this._framesCache.contexts, [feature]);
      } catch (ex) {
        Logger_1["default"].debug("Failed to start feature in FrameHandler.startFeature: ".concat(ex.message), ex);
      }
    }
  }, {
    key: "stopFeatures",
    value: function stopFeatures(features) {
      try {
        this._stopFeaturesOnFrames(features, this._framesCache.contexts);
      } catch (ex) {
        Logger_1["default"].debug("Failed to stop features in FrameHandler.stopFeatures: ".concat(ex.message), ex);
      }
    }
  }, {
    key: "stopFeature",
    value: function stopFeature(feature) {
      try {
        feature.isRunning = false;
        this._stopFeaturesOnFrames([feature], this._framesCache.contexts);
      } catch (ex) {
        Logger_1["default"].debug("Failed to stop feature in FrameHandler.stopFeature: ".concat(ex.message), ex);
      }
    }
    /**
     * After server configuration - features that might change inner behaviour need to
     * recheck configuration (stop/start mutation obeserver)
     * @param feature
     */
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig(feature) {
      if (feature.instance.updateFeatureConfig) {
        this._updateFeaturesConfigOnFrames([feature], this._framesCache.contexts);
      }
    }
  }, {
    key: "_onFrameAdded",
    value: function _onFrameAdded(frame) {
      try {
        Logger_1["default"].debug("Frame:".concat(frame.name, ", id:").concat(frame.id, ". was loaded."));
        if (!this._framesCache.exists(frame)) {
          this._framesCache.add(frame);
        } else {
          // If the frame already existed in the cache we unregister the features
          // so we can run them on the frame again
          // This can happen if the frame was reloaded
          this._framesCache.unRegisterContextFeatures(frame, this._featuresList);
        }
        this._startFeaturesOnFrames([frame], this._featuresList);
      } catch (ex) {
        Logger_1["default"].warn("Failed to start features on frame ".concat(frame.id, ": ").concat(ex.message), ex);
      }
    }
  }, {
    key: "_onFrameRemoved",
    value: function _onFrameRemoved(frame) {
      try {
        Logger_1["default"].debug("Frame:".concat(frame.name, ", id:").concat(frame.id, ". was removed."));
        this._stopFeaturesOnFrames(this._featuresList, [frame]);
      } catch (ex) {
        Logger_1["default"].warn("Failed to stop features on frame ".concat(frame.id, ": ").concat(ex.message), ex);
      }
    }
  }, {
    key: "_onFrameInaccessible",
    value: function _onFrameInaccessible(frame) {
      Logger_1["default"].debug("Frame:".concat(frame.name, ", id:").concat(frame.id, ". was detected as inaccessible."));
    }
    /**
     * Builds the features map structure
     * @param features - the list of features from which the structure is built
     * @private
     */
  }, {
    key: "_buildFeaturesMap",
    value: function _buildFeaturesMap(features) {
      var _this2 = this;
      this._featuresList = [];
      features.forEach(function (feature) {
        _this2._featuresList.push(feature);
      });
    }
    /**
     * Updates the frames cache from the frames detector
     * @private
     */
  }, {
    key: "_buildFramesCache",
    value: function _buildFramesCache() {
      var _this3 = this;
      this._framesDetector.frames.forEach(function (frame) {
        if (!_this3._framesCache.exists(frame)) {
          _this3._framesCache.add(frame);
        }
      });
    }
    /**
     * Start features on the frames
     * @param frames - the frames to start the features on
     * @param features - features to start on each frame
     * @private
     */
  }, {
    key: "_startFeaturesOnFrames",
    value: function _startFeaturesOnFrames(frames, features) {
      var _this4 = this;
      frames.forEach(function (innerFrame) {
        try {
          if (!_this4._domUtils.canAccessIFrame(innerFrame)) {
            return;
          }
          for (var i = 0; i < features.length; i++) {
            var feature = features[i];
            if (feature.shouldRun && !_this4._framesCache.hasFeature(innerFrame, feature)) {
              _this4._framesCache.registerContextFeature(innerFrame, feature);
              if (_this4._domUtils.isWindowDocumentReady(innerFrame.contentWindow)) {
                Logger_1["default"].debug("_startFeaturesOnFrames: run feature on frame:".concat(innerFrame.name, ", id:").concat(innerFrame.id, ". feature:").concat(feature.configKey));
                _this4.callMethod.call(_this4._runFeatureOnFrame, _this4, innerFrame, feature);
                feature.isRunning = true;
              }
            }
          }
        } catch (e) {
          Logger_1["default"].error("An error has occurred while starting features on frame ".concat(innerFrame.name, " with id: ").concat(innerFrame.id, ". Error: ").concat(e.message), e);
        }
      });
    }
  }, {
    key: "_runFeatureOnFrame",
    value: function _runFeatureOnFrame(frame, feature) {
      try {
        if (this._domUtils.canAccessIFrame(frame)) {
          feature.instance.startFeature(new FrameContext_1["default"](frame.contentWindow));
        } else {
          Logger_1["default"].debug("Not starting features on frame ".concat(frame.name, " with id: ").concat(frame.id, " as it is not accessible"));
        }
      } catch (ex) {
        Logger_1["default"].error("An error has occurred while starting feature ".concat(feature.configKey, " on frame ").concat(frame.name, " with id: ").concat(frame.id, ". Error: ").concat(ex.message), ex);
      }
    }
  }, {
    key: "_stopFeaturesOnFrames",
    value: function _stopFeaturesOnFrames(features, frames) {
      var _this5 = this;
      try {
        // I am using forEach and not iterator since IE 11 does not support
        frames.forEach(function (innerFrame) {
          try {
            if (!_this5._domUtils.canAccessIFrame(innerFrame)) {
              return;
            }
            if (innerFrame.contentWindow && innerFrame.contentWindow.document) {
              for (var j = 0, len = features.length; j < len; j++) {
                if (_this5._framesCache.hasFeature(innerFrame, features[j])) {
                  _this5.callMethod.call(_this5._stopFeatureOnFrame, _this5, innerFrame, features[j]);
                }
                features[j].isRunning = false;
              }
            }
          } catch (e) {
            Logger_1["default"].error("An error has occurred while stopping features on frame ".concat(innerFrame.name, " with id: ").concat(innerFrame.id, ". Error: ").concat(e.message), e);
          }
          if (_this5._framesCache.exists(innerFrame)) {
            _this5._framesCache.unRegisterContextFeatures(innerFrame, features);
          }
          _this5._framesCache.remove(innerFrame);
        });
      } catch (err) {
        Logger_1["default"].warn("Failed stopping features on frames ".concat(err.message), err);
      }
    }
  }, {
    key: "_stopFeatureOnFrame",
    value: function _stopFeatureOnFrame(frame, feature) {
      try {
        if (this._domUtils.canAccessIFrame(frame)) {
          feature.instance.stopFeature(new FrameContext_1["default"](frame.contentWindow));
        } else {
          Logger_1["default"].debug("Not stopping feature ".concat(feature.configKey, " on frame ").concat(frame.name, " with id: ").concat(frame.id, " as it is not accessible"));
        }
      } catch (ex) {
        Logger_1["default"].error("An error has occurred while stopping feature ".concat(feature.configKey, " ").concat(func, " on frame ").concat(frame.name, " with id: ").concat(frame.id, ". Error: ").concat(ex.message), ex);
      }
    }
  }, {
    key: "_updateFeaturesConfigOnFrames",
    value: function _updateFeaturesConfigOnFrames(features, frames) {
      var _this6 = this;
      // I am using forEach and not iterator since IE 11 does not support
      frames.forEach(function (innerFrame) {
        try {
          // If we can't access the iframe for some reason (cross domain...) we don't continue past this point
          if (!_this6._domUtils.canAccessIFrame(innerFrame)) {
            return;
          }
          for (var j = 0, len = features.length; j < len; j++) {
            if (_this6._framesCache.hasFeature(innerFrame, features[j])) {
              _this6.callMethod.call(_this6._updateFeatureConfigOnFrame, _this6, innerFrame, features[j]);
            }
          }
        } catch (e) {
          Logger_1["default"].error("An error has occurred while updating features configuration on frame ".concat(innerFrame.name, " with id: ").concat(innerFrame.id, ". Error: ").concat(e.message), e);
        }
      });
    }
  }, {
    key: "_updateFeatureConfigOnFrame",
    value: function _updateFeatureConfigOnFrame(frame, feature) {
      try {
        if (this._domUtils.canAccessIFrame(frame)) {
          feature.instance.updateFeatureConfig(new FrameContext_1["default"](frame.contentWindow));
        } else {
          Logger_1["default"].debug("Not updating feature ".concat(feature.configKey, " config on frame ").concat(frame.name, " with id: ").concat(frame.id, " as it is not accessible"));
        }
      } catch (ex) {
        Logger_1["default"].error("An error has occurred while updating feature ".concat(feature.configKey, " config on frame ").concat(frame.name, " with id: ").concat(frame.id, ". Error: ").concat(ex.message), ex);
      }
    }
  }]);
}(FramesHandlerBase_1["default"]);
exports["default"] = FramesHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/frames/FramesHandlerBase.js":
/*!**********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/frames/FramesHandlerBase.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var FramesHandlerBase = /*#__PURE__*/function () {
  function FramesHandlerBase() {
    _classCallCheck(this, FramesHandlerBase);
  }
  return _createClass(FramesHandlerBase, [{
    key: "startFeatures",
    value: function startFeatures() {}
  }, {
    key: "startFeature",
    value: function startFeature() {}
  }, {
    key: "stopFeatures",
    value: function stopFeatures() {}
  }, {
    key: "stopFeature",
    value: function stopFeature() {}
  }, {
    key: "updateFeatureConfig",
    value: function updateFeatureConfig() {}
  }]);
}();
exports["default"] = FramesHandlerBase;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/frames/FramesHandlerFactory.js":
/*!*************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/frames/FramesHandlerFactory.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var FramesDetector_1 = __importDefault(__webpack_require__(/*! ./FramesDetector */ "./dist/js-sdk-legacy/src/main/core/frames/FramesDetector.js"));
var FramesHandler_1 = __importDefault(__webpack_require__(/*! ./FramesHandler */ "./dist/js-sdk-legacy/src/main/core/frames/FramesHandler.js"));
var NullFramesHandler_1 = __importDefault(__webpack_require__(/*! ./NullFramesHandler */ "./dist/js-sdk-legacy/src/main/core/frames/NullFramesHandler.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var BrowserContextsCache_1 = __importDefault(__webpack_require__(/*! ../browsercontexts/BrowserContextsCache */ "./dist/js-sdk-legacy/src/main/core/browsercontexts/BrowserContextsCache.js"));
var ElementsMutationObserverFactory_1 = __importDefault(__webpack_require__(/*! ../browsercontexts/ElementsMutationObserverFactory */ "./dist/js-sdk-legacy/src/main/core/browsercontexts/ElementsMutationObserverFactory.js"));
/**
 * The class creates the appropriate FramesHandler. He takes into consideration:
 * 1. If enableFramesProcessing configuration is enabled it creates the default FramesHandler
 * 2. If enableFramesProcessing configuration is disabled it creates the NullFramesHandler
 */
var FramesHandlerFactory = /*#__PURE__*/function () {
  function FramesHandlerFactory(configurationRepository, domUtils, utils) {
    _classCallCheck(this, FramesHandlerFactory);
    this._configurationRepository = configurationRepository;
    this._domUtils = domUtils;
    this._utils = utils;
  }
  return _createClass(FramesHandlerFactory, [{
    key: "create",
    value: function create() {
      var enableFramesProcessing = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableFramesProcessing);
      var useLegacyZeroTimeout = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.useLegacyZeroTimeout);
      if (enableFramesProcessing) {
        var framesCache = new BrowserContextsCache_1["default"]();
        var framesDetector = new FramesDetector_1["default"](new ElementsMutationObserverFactory_1["default"](), this._domUtils, this._configurationRepository);
        return new FramesHandler_1["default"](framesCache, framesDetector, this._domUtils, this._utils, useLegacyZeroTimeout);
      }
      // Create the NullFramesHandler which is an empty skeleton implementation
      return new NullFramesHandler_1["default"]();
    }
  }]);
}();
exports["default"] = FramesHandlerFactory;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/frames/NullFramesHandler.js":
/*!**********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/frames/NullFramesHandler.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * The class is a skeleton implementation of the FramesHandler
 */
var FramesHandlerBase_1 = __importDefault(__webpack_require__(/*! ./FramesHandlerBase */ "./dist/js-sdk-legacy/src/main/core/frames/FramesHandlerBase.js"));
var NullFramesHandler = /*#__PURE__*/function (_FramesHandlerBase_1$) {
  function NullFramesHandler() {
    _classCallCheck(this, NullFramesHandler);
    return _callSuper(this, NullFramesHandler, arguments);
  }
  _inherits(NullFramesHandler, _FramesHandlerBase_1$);
  return _createClass(NullFramesHandler);
}(FramesHandlerBase_1["default"]);
exports["default"] = NullFramesHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/frames/SystemFrameName.js":
/*!********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/frames/SystemFrameName.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SystemFrameName = void 0;
exports.SystemFrameName = {
  rtcframe: 'cd__rtcframe',
  fontDetectionFrame: 'cd__fontDetectionFrame',
  ignorePrefixFrame: 'cd__frame__'
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/masking/MaskingService.js":
/*!********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/masking/MaskingService.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.defaultMaskedCoordinates = void 0;
var ControlsKeyTable_1 = __webpack_require__(/*! ../../collectors/events/ControlsKeyTable */ "./dist/js-sdk-legacy/src/main/collectors/events/ControlsKeyTable.js");
var ConfigurationFields_1 = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
exports.defaultMaskedCoordinates = -1000;
var MaskingService = /*#__PURE__*/function () {
  function MaskingService(configurationRepository) {
    _classCallCheck(this, MaskingService);
    this._configurationRepository = configurationRepository;
    this._attributesToMask = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.maskElementsAttributes);
    this.maskedCodeMapping = {
      original: function original(code, charCode, key) {
        return {
          code: code,
          charCode: charCode,
          key: key
        };
      },
      numpadKey: function numpadKey(key) {
        return {
          code: 'Numpad',
          charCode: 96,
          key: key
        };
      },
      letter: function letter() {
        return {
          code: 'Key',
          charCode: 65,
          key: 'A'
        };
      },
      digit: function digit() {
        return {
          code: 'Digit',
          charCode: 49,
          key: '1'
        };
      },
      specialChar: function specialChar() {
        return {
          code: 'SpecialChar',
          charCode: 42,
          key: '*'
        };
      },
      other: function other() {
        return {
          code: 'Other',
          charCode: 66,
          key: 'B'
        };
      },
      masked: function masked() {
        return {
          code: 'Masked',
          charCode: 'a'.charCodeAt(0),
          key: 'a'
        };
      }
    };
    this.digitMaskValue = "1";
    this.letterMaskValueLowerCase = "a";
    this.unicodeMaskValue = "B";
    this.specialCharMaskValue = "*";
    this.customPasswordMaskValue = "a";
    // Sets for faster lookup
    this.specialConfigurationChars = new Set([",", ".", " ", "@", ";", ":", "-", "+", "$"]);
    this.specialChars = new Set(["_", "!", "%", "^", "&", "*", "#", "(", ")", "=", "{", "}", "[", "]", "", "\\", "|", "/", "?", ">", "<", "~", "\"", "", "", "'"]);
    this.lettersSet = new Set(_toConsumableArray(Array(26)).map(function (_, i) {
      return String.fromCharCode(65 + i);
    }) // A-Z
    .concat(_toConsumableArray(Array(26)).map(function (_, i) {
      return String.fromCharCode(97 + i);
    })) // a-z
    .concat(_toConsumableArray(Array(27)).map(function (_, i) {
      return String.fromCharCode(0x05D0 + i);
    })) // Hebrew (-)
    );
    this.digitsSet = new Set(_toConsumableArray(Array(10)).map(function (_, i) {
      return String(i);
    })); // "0-9"
    this.cjkNumbersSet = new Set(["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]);
    this.allowedUnmaskedChars = new Set([",", ".", "@", ";", ":", "-", "+", "$", " "]);
    this.allowedMaskedChars = new Set(["a", "1", "*"]); // Allowed after masking
  }
  return _createClass(MaskingService, [{
    key: "maskKey",
    value: function maskKey(key, code, elementID) {
      if (this._isPasswordMaskedElementId(elementID)) {
        return this.maskedCodeMapping.masked();
      }
      if (ControlsKeyTable_1.ControlsKeyTable[key]) {
        var controlsCode = ControlsKeyTable_1.ControlsKeyTable[key];
        return this.maskedCodeMapping.original(code, controlsCode, key);
      }
      if (this._isANumberOrDigit(key)) {
        return code.includes('Numpad') ? this.maskedCodeMapping.numpadKey('1') : this.maskedCodeMapping.digit();
      }
      if (this._isALetter(key)) {
        return this.maskedCodeMapping.letter();
      }
      if (!this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.keyEventsMaskSpecialChars) && this.specialConfigurationChars.has(key)) {
        return this.maskedCodeMapping.original(code, key.charCodeAt(0), key);
      }
      if (this.specialChars.has(key) || this.specialConfigurationChars.has(key)) {
        return code.includes('Numpad') ? this.maskedCodeMapping.numpadKey('*') : this.maskedCodeMapping.specialChar();
      }
      return this.maskedCodeMapping.other();
    }
    /**
     * If the browser is not supporting e.key we will fallback to Legacy Properties(keycode and which)
     * Convert legacy to key value String
     * Pay attention that this will cause difference between keyDown/Up to Press
     * @returns String
     */
  }, {
    key: "getKeyFromLegacyProperties",
    value: function getKeyFromLegacyProperties(e) {
      var key = e.keyCode || e.which;
      if (key === 0 || key === undefined) {
        return '';
      }
      return String.fromCharCode(key);
    }
  }, {
    key: "_isALetter",
    value: function _isALetter(key) {
      return /^[a-zA-Z]$/.test(key) || this._isJapaneseOrChineseLetter(key) || this._isHebrewLetter(key);
    }
  }, {
    key: "_isANumberOrDigit",
    value: function _isANumberOrDigit(key) {
      return /[0-9]/.test(key) || this.cjkNumbersSet.has(key);
    }
  }, {
    key: "_isJapaneseOrChineseLetter",
    value: function _isJapaneseOrChineseLetter(key) {
      return this._isCJKUnifiedIdeographs(key) || this._isCJKUnifiedIdeographsExtenA(key) || this._isCJKUnifiedIdeographsExtenB(key) || this._isSmallKatakanaLetter(key);
    }
  }, {
    key: "_isCJKUnifiedIdeographsExtenB",
    value: function _isCJKUnifiedIdeographsExtenB(key) {
      return /[\u3041-\u309F]/.test(key);
    }
  }, {
    key: "_isSmallKatakanaLetter",
    value: function _isSmallKatakanaLetter(key) {
      return /[\u30A1-\u30FF]/.test(key);
    }
  }, {
    key: "_isCJKUnifiedIdeographsExtenA",
    value: function _isCJKUnifiedIdeographsExtenA(key) {
      return /[\u3400-\u4DB5]/.test(key);
    }
  }, {
    key: "_isCJKUnifiedIdeographs",
    value: function _isCJKUnifiedIdeographs(key) {
      return /[\u4E00-\u9FCC]/.test(key);
    }
  }, {
    key: "_isHebrewLetter",
    value: function _isHebrewLetter(key) {
      return /[\u05D0-\u05EA]/.test(key);
    }
  }, {
    key: "_isPasswordMaskedElementId",
    value: function _isPasswordMaskedElementId(elementID) {
      var passwordIdMaskingList = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.passwordIdMaskingList);
      return typeof elementID !== 'undefined' && Array.isArray(passwordIdMaskingList) && passwordIdMaskingList.includes(elementID);
    }
  }, {
    key: "getDropDownListValues",
    value: function getDropDownListValues(selectElem) {
      var options = [];
      for (var i = 0; i < selectElem.length; i++) {
        var optionTxt = selectElem.options[i].text || selectElem.options[i].value || '';
        options.push(this.maskText(optionTxt, selectElem.id));
      }
      return options;
    }
    /**
     * maskText
     * letters shall be masked as  a 
     * numbers / Numpads should be masked as   1 
     * special characters shall be masked as  * 
     * if keyEventsMaskSpecialChars is "true" Special Configuration characters will masked as  *  else they will not be masked original
     * all other characters 'B';
     * @param text - text to be masked
     * @returns string
     */
  }, {
    key: "maskText",
    value: function maskText(text, elementID) {
      var _this = this;
      if (!text) return "";
      if (this._isPasswordMaskedElementId(elementID)) {
        return text.replace(/./g, this.customPasswordMaskValue);
      }
      var result = _toConsumableArray(text).map(function (_char) {
        if (_this.digitsSet.has(_char)) return _this.digitMaskValue; // Numbers  "1"
        if (_this.lettersSet.has(_char)) return _this.letterMaskValueLowerCase; // Letters  "a"
        if (_this.cjkNumbersSet.has(_char)) return _this.digitMaskValue; // CJK Numbers  "1"
        if (_this.specialChars.has(_char)) return _this.specialCharMaskValue; // Special Chars  "*"
        if (_this.allowedUnmaskedChars.has(_char)) return _char; // Exception Chars  Keep as is
        return _this.unicodeMaskValue; // All other Unicode  "B"
      }).join("");
      // Handling masking configuration
      if (this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.keyEventsMaskSpecialChars)) {
        // If keyEventsMaskSpecialChars is enabled, mask exception characters and apply strict masking
        result = _toConsumableArray(result).map(function (_char2) {
          return _this.allowedUnmaskedChars.has(_char2) ? _this.specialCharMaskValue : _char2;
        }).map(function (_char3) {
          return !_this.allowedMaskedChars.has(_char3) ? _this.unicodeMaskValue : _char3;
        }).join("");
        return result;
      }
      return result;
    }
  }, {
    key: "maskAbsoluteIfRequired",
    value: function maskAbsoluteIfRequired(elementValue, elemID) {
      if (elementValue !== '' && this._shouldMask(elementValue)) {
        return this.maskText(elementValue, elemID);
      }
      return elementValue;
    }
  }, {
    key: "shouldMaskCoordinates",
    value: function shouldMaskCoordinates() {
      return this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableCoordinatesMasking);
    }
  }, {
    key: "_shouldMask",
    value: function _shouldMask(elementValue) {
      var _this2 = this;
      if (typeof this._attributesToMask === 'undefined') {
        return false;
      }
      return this._attributesToMask.some(function (element) {
        return _this2._isConformsRegex(element.regexPattern, elementValue) || element.name.toLowerCase() === (elementValue === null || elementValue === void 0 ? void 0 : elementValue.toLowerCase());
      });
    }
  }, {
    key: "_isConformsRegex",
    value: function _isConformsRegex(regexPattern, stringToCheck) {
      try {
        if (new RegExp(regexPattern).test(stringToCheck)) {
          Logger_1["default"].debug("The string ".concat(stringToCheck, " matches the pattern ").concat(regexPattern, "."));
          return true;
        }
      } catch (error) {
        Logger_1["default"].error("Invalid regex pattern: ".concat(error));
      }
      Logger_1["default"].debug("The string ".concat(stringToCheck, " does not match the pattern. ").concat(regexPattern, "."));
      return false;
    }
  }]);
}();
exports["default"] = MaskingService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/metadata/MetadataService.js":
/*!**********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/metadata/MetadataService.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MetadataService = /*#__PURE__*/function () {
  function MetadataService(configurationRepository, dataQ) {
    _classCallCheck(this, MetadataService);
    _defineProperty(this, "_dataQ", void 0);
    this._configurationRepository = configurationRepository;
    this._dataQ = dataQ;
    this._isEnabled = this._configurationRepository.get('isCustMetadata');
  }
  /**
   * Receive customer specific data from customer api implementation
   * and send to server
   * @param msg - the msg received from cdApi contains type and data
   */
  return _createClass(MetadataService, [{
    key: "onCustomerMetadata",
    value: function onCustomerMetadata(msg) {
      if (this._isEnabled === undefined || this._isEnabled == null || this._isEnabled === true) {
        Logger_1["default"].debug('HandleMetadata:onCustomerMetadata. data=' + JSON.stringify(msg.data));
        if (msg.data) {
          this._dataQ.addToQueue('customer_metadata', [null, msg.data]);
        }
      }
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate() {
      this._isEnabled = this._configurationRepository.get('isCustMetadata');
    }
  }]);
}();
exports["default"] = MetadataService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/session/AgentIdCache.js":
/*!******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/session/AgentIdCache.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var AGENT_ID_STORAGE_KEY = 'cdAgentId';
/**
 * A class that caches the agentId in local storage.
 * The agentId is determined by the server and they responsible for managing and generate it.
 * agentId is unique per agent, so if a session starts on mobile and then continues on web, each session will have
 * a different agentId.
 * The agentId will be used by the server in cases where they need to restore the 'ott' (one time token) of the session
 * in a case a wup is sent with an empty 'ott'
 */
var AgentIdCache = /*#__PURE__*/function () {
  function AgentIdCache(storageUtilsWrapper) {
    _classCallCheck(this, AgentIdCache);
    this._storageUtilsWrapper = storageUtilsWrapper;
    this._agentId = null;
    this._loadAgentIdFromStorage();
  }
  /**
   * Gets the cached agentId.
   * @returns {string|null} The cached agentId or null if not set.
   */
  return _createClass(AgentIdCache, [{
    key: "get",
    value: function get() {
      return this._agentId;
    }
    /**
     * Sets and caches the agentId.
     * @param {string} agentId The agentId to set and cache.
     */
  }, {
    key: "set",
    value: function set(agentId) {
      if (!agentId || typeof agentId !== 'string') {
        throw new Error('Invalid agentId value');
      }
      this._agentId = agentId;
      this._saveAgentIdToStorage();
    }
    /**
     * Saves the agentId to local storage.
     * @private
     */
  }, {
    key: "_saveAgentIdToStorage",
    value: function _saveAgentIdToStorage() {
      this._storageUtilsWrapper.saveToLocalStorage(AGENT_ID_STORAGE_KEY, this._agentId);
    }
    /**
     * Loads the agentId from local storage.
     * @private
     */
  }, {
    key: "_loadAgentIdFromStorage",
    value: function _loadAgentIdFromStorage() {
      this._agentId = this._storageUtilsWrapper.getFromLocalStorage(AGENT_ID_STORAGE_KEY) || null;
    }
  }]);
}();
exports["default"] = AgentIdCache;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/session/AgentIdService.js":
/*!********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/session/AgentIdService.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var WorkerCommand_1 = __webpack_require__(/*! ../../events/WorkerCommand */ "./dist/js-sdk-legacy/src/main/events/WorkerCommand.js");
var AgentIdService = /*#__PURE__*/function () {
  function AgentIdService(agentIdCache, serverWorkerCommunicator) {
    _classCallCheck(this, AgentIdService);
    this._agentIdCache = agentIdCache;
    this._serverWorkerCommunicator = serverWorkerCommunicator;
  }
  return _createClass(AgentIdService, [{
    key: "updateAgentIdWithServer",
    value: function updateAgentIdWithServer() {
      var agentId = this._agentIdCache.get();
      this._serverWorkerCommunicator.sendAsync(WorkerCommand_1.WorkerCommand.updateAgentIdCommand, {
        agentId: agentId
      });
    }
  }, {
    key: "set",
    value: function set(agentId) {
      if (!agentId) {
        throw new Error('Invalid agentId value of undefined');
      }
      this._agentIdCache.set(agentId);
    }
  }]);
}();
exports["default"] = AgentIdService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/session/CidCache.js":
/*!**************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/session/CidCache.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CidCache = /*#__PURE__*/function () {
  /**
   *
   *
   * @param url full server url containing the cid.
   * example input: https://wup-dtrackers.bc2.customers.biocatch.com/client/v3.1/web/wup?cid=dtrackers
   *
   * By contract, the sdk receives full url containing the protocol path and cid.
   * In practice - the cid provided on the url is used as standalone param.
   * for example - it is attached in certain cases to the log url.
   *
   * Pay Attention:  the serverUrl provided by the public SDK interface/cdApi will not necessarily be used at his exact form for the actual requests:
   * Instead, it will be recontacted by the WupServerClient based on certain API/cdApi configurations.
   *
   */
  function CidCache(url) {
    _classCallCheck(this, CidCache);
    var parsedUrl = new URL(url);
    this._cid = parsedUrl.searchParams.get('cid');
    if (!this._cid) {
      throw new Error('cid was not found on provided url.');
    }
  }
  /**
   * Get the cid from the cache.
   * @returns The cached cid or null if not available
   */
  return _createClass(CidCache, [{
    key: "get",
    value: function get() {
      return this._cid;
    }
  }]);
}();
exports["default"] = CidCache;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/session/CsidCache.js":
/*!***************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/session/CsidCache.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CsidCache = /*#__PURE__*/function () {
  function CsidCache() {
    _classCallCheck(this, CsidCache);
    this._csid = null;
  }
  /**
   * Get the csid from the cache.
   * @returns The cached csid or null if not available
   */
  return _createClass(CsidCache, [{
    key: "get",
    value: function get() {
      return this._csid;
    }
    /**
     * store the csid in the cache
     * @param csid - The new csid
     */
  }, {
    key: "set",
    value: function set(csid) {
      if (csid === undefined) {
        throw new Error('Invalid csid value of undefined');
      }
      this._csid = csid;
    }
  }]);
}();
exports["default"] = CsidCache;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/session/CsidService.js":
/*!*****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/session/CsidService.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * Class is responsible for getting the csid
 */
var WorkerCommand_1 = __webpack_require__(/*! ../../events/WorkerCommand */ "./dist/js-sdk-legacy/src/main/events/WorkerCommand.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var CsidService = /*#__PURE__*/function () {
  function CsidService(customerApi, csidCache, workerCommunicator) {
    _classCallCheck(this, CsidService);
    this._customerApi = customerApi;
    this._csidCache = csidCache;
    this._workerCommunicator = workerCommunicator;
  }
  /**
   * store the csid in the csid cache and send an update message to the server
   * @param csid - The new csid
   */
  return _createClass(CsidService, [{
    key: "set",
    value: function set(csid) {
      if (csid === undefined) {
        throw new Error('Invalid csid value of undefined');
      }
      this._csidCache.set(csid);
      this._workerCommunicator.sendAsync(WorkerCommand_1.WorkerCommand.updateCsidCommand, {
        csid: csid
      });
    }
    /**
     * Get the csid from the customer api. If fails it will retry several times.
     * This is the legacy way of getting the csid and should not be used
     * method is deprecated and is left until migrations to the new method are complete
     */
  }, {
    key: "get",
    value: function get(callback) {
      if (!this._customerApi.isApiAvailable('getCustomerSessionID')) {
        Logger_1["default"].debug('getCustomerSessionID API is unavailable. Hopefully this is because the setCustomerSessionId API is being used');
        return;
      }
      this._getCsidWithRetries(0, callback);
    }
    /**
     * The function is responsible for getting the customer session id from the cdApi.
     * If there was a failure in getting it in the first time, it will keep trying until the retryCount
     * @param retryCount
     * @param callback
     */
  }, {
    key: "_getCsidWithRetries",
    value: function _getCsidWithRetries(retryCount, callback) {
      var _this = this;
      if (retryCount > 20) {
        Logger_1["default"].error('Failed to get csid after all retries.');
        return;
      }
      // get customer session from the customer api
      try {
        this._customerApi.getCustomerSessionID(function (csid) {
          if (!csid) {
            // the bind is for the callback to pass
            setTimeout(_this._getCsidWithRetries.bind(_this, retryCount + 1, callback), 200);
            return;
          }
          // we have csid
          Logger_1["default"].debug("Got csid after ".concat(retryCount, " retries. csid: ").concat(csid));
          _this._csidCache.set(csid);
          callback();
        });
      } catch (ex) {
        // the bind is for the callback to pass
        setTimeout(this._getCsidWithRetries.bind(this, retryCount + 1, callback), 200);
      }
    }
  }]);
}();
exports["default"] = CsidService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/session/ProtocolTypeCache.js":
/*!***********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/session/ProtocolTypeCache.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var communication_1 = __webpack_require__(/*! ../../const/communication */ "./dist/js-sdk-legacy/src/main/const/communication.js");
/**
 * Convenient class for extracting the wupServer protocol type from the configured wupServerURL, and hold it in-memory.
 *
 * By legacy, the protocol type was given as part the configured wupServerUrl path.
 * In practice - there is a code logic in WupServerClient which behaves differently for v3 and v4.
 * This logic includes for now:
 * 1. different request and response headers handling (see WupServerClient.js)
 * 2. re-composing (with or without minification) the final wupUrl (see WupUrlBuilder.js)
 */
var ProtocolTypeCache = /*#__PURE__*/function () {
  function ProtocolTypeCache(configuredUrl) {
    _classCallCheck(this, ProtocolTypeCache);
    this._protocolType = configuredUrl.includes(communication_1.wupUrlV4Path) ? communication_1.serverProtocolV4 : communication_1.serverProtocolV3;
  }
  /**
   *
   * @returns
   * the number 3 for v3.1 protocol
   * and the number 4 for v4 protocol
   */
  return _createClass(ProtocolTypeCache, [{
    key: "get",
    value: function get() {
      return this._protocolType;
    }
  }]);
}();
exports["default"] = ProtocolTypeCache;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/session/PsidCache.js":
/*!***************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/session/PsidCache.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var PsidCache = /*#__PURE__*/function () {
  function PsidCache() {
    _classCallCheck(this, PsidCache);
    this._psid = null;
  }
  /**
   * Get the psid from the cache.
   * @returns The cached psid or null if not available
   */
  return _createClass(PsidCache, [{
    key: "get",
    value: function get() {
      return this._psid;
    }
    /**
     * store the psid in the cache
     * @param psid - The new psid
     */
  }, {
    key: "set",
    value: function set(psid) {
      if (psid === undefined) {
        throw new Error('Invalid psid value of undefined');
      }
      this._psid = psid;
    }
  }]);
}();
exports["default"] = PsidCache;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/session/PsidService.js":
/*!*****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/session/PsidService.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var WorkerCommand_1 = __webpack_require__(/*! ../../events/WorkerCommand */ "./dist/js-sdk-legacy/src/main/events/WorkerCommand.js");
var PsidService = /*#__PURE__*/function () {
  function PsidService(psidCache, workerCommunicator) {
    _classCallCheck(this, PsidService);
    this._psidCache = psidCache;
    this._workerCommunicator = workerCommunicator;
  }
  /**
   * store the psid in the psid cache and send an update message to the server
   * @param psid - The new psid
   */
  return _createClass(PsidService, [{
    key: "set",
    value: function set(psid) {
      if (psid === undefined) {
        throw new Error('Invalid psid value of undefined');
      }
      this._psidCache.set(psid);
      this._workerCommunicator.sendAsync(WorkerCommand_1.WorkerCommand.updatePsidCommand, {
        psid: psid
      });
    }
  }]);
}();
exports["default"] = PsidService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/session/SIDChangeType.js":
/*!*******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/session/SIDChangeType.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SIDChangeType = void 0;
exports.SIDChangeType = {
  none: 'none',
  init: 'init',
  configuration: 'config',
  configurationFromSlave: 'configFromSlave',
  customerApi: 'customerApi',
  pageTimeout: 'timeout',
  unknown: 'unknown'
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/session/ServerUrlCache.js":
/*!********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/session/ServerUrlCache.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var ServerUrlCache = /*#__PURE__*/function () {
  function ServerUrlCache(configuredUrl) {
    _classCallCheck(this, ServerUrlCache);
    // Strip the base url and protocolType, because SessionService expect them to be standalone parameters
    var url = new URL(configuredUrl);
    this._baseServerAddress = url.protocol + '//' + url.host;
  }
  return _createClass(ServerUrlCache, [{
    key: "get",
    value: function get() {
      return this._baseServerAddress;
    }
  }]);
}();
exports["default"] = ServerUrlCache;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/session/SessionInfoService.js":
/*!************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/session/SessionInfoService.js ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDUtils_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/CDUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/CDUtils.js"));
var SessionInfoService = /*#__PURE__*/function () {
  function SessionInfoService() {
    _classCallCheck(this, SessionInfoService);
    this.markStartTime();
  }
  return _createClass(SessionInfoService, [{
    key: "markStartTime",
    value: function markStartTime() {
      this.startTime = CDUtils_1["default"].dateNow();
    }
  }, {
    key: "getStartTime",
    value: function getStartTime() {
      return this.startTime;
    }
  }]);
}();
exports["default"] = SessionInfoService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/session/SessionService.js":
/*!********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/session/SessionService.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var WorkerEvent_1 = __webpack_require__(/*! ../../events/WorkerEvent */ "./dist/js-sdk-legacy/src/main/events/WorkerEvent.js");
var SIDChangeType_1 = __webpack_require__(/*! ./SIDChangeType */ "./dist/js-sdk-legacy/src/main/core/session/SIDChangeType.js");
var ConfigurationFields_1 = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var WorkerCommand_1 = __webpack_require__(/*! ../../events/WorkerCommand */ "./dist/js-sdk-legacy/src/main/events/WorkerCommand.js");
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var AgentType_1 = __webpack_require__(/*! ../../contract/AgentType */ "./dist/js-sdk-legacy/src/main/contract/AgentType.js");
var SessionService = /*#__PURE__*/function () {
  function SessionService(messageBus, configurationService, configurationRepository, utils, domUtils, workerComm, contextMgr, muidService, serverStateMgr, resetSessionSiteMapper, sidRepository, serverUrlCache, cidCache, protocolTypeCache, minifiedWupUriEnabled, csidService, csidCache, psidCache, brandService, agentIdService) {
    _classCallCheck(this, SessionService);
    this._messageBus = messageBus;
    this._configurationService = configurationService;
    this._configurationRepository = configurationRepository;
    this._utils = utils;
    this._domUtils = domUtils;
    this._workerComm = workerComm;
    this._contextMgr = contextMgr;
    this._muidService = muidService;
    this._serverStateMgr = serverStateMgr;
    this._resetSessionSiteMapper = resetSessionSiteMapper;
    this._sidRepository = sidRepository;
    this._csidService = csidService;
    this._csidCache = csidCache;
    this._serverAddress = serverUrlCache.get();
    this._cidCache = cidCache;
    this._protocolType = protocolTypeCache.get();
    this._minifiedWupUriEnabled = minifiedWupUriEnabled;
    this._psidCache = psidCache;
    this._brandService = brandService;
    this._agentIdService = agentIdService;
    this._agentType = configurationRepository.get(ConfigurationFields_1.ConfigurationFields.agentType);
    this._enableStartupCustomerSessionId = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableStartupCustomerSessionId);
    // External reset is either an api call for reset or a trigger by configuration
    // we use this parameter to prevent consecutive resets from occurring
    this.lastExternalResetCallTime = null;
    this.sessionId = null;
    this._resetSessionSiteMapper.updateObserver(this._onSiteMapperMatch.bind(this));
    workerComm.addMessageListener(WorkerEvent_1.WorkerEvent.NewSessionStartedEvent, this._onNewSessionStartedEvent.bind(this));
    // set the session agent type by sending a message to the worker that updates the wup request payload
    this._setSessionStartupData();
  }
  return _createClass(SessionService, [{
    key: "resumeOrStartSession",
    value: function resumeOrStartSession() {
      // Get existing sid if we have one available in storage. If we have a sid we will resume the session.
      // Otherwise we will send an empty sid to start a new session
      var sid = this._getSessionId();
      // We need to get rid of this idiotic isResetEveryLoad configuration.
      if (sid) {
        this._resumeSession(sid);
      } else {
        this._startNewSession();
      }
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate(confMgr) {
      this._resetSessionSiteMapper.onConfigUpdate(confMgr);
      if (this._configurationRepository.get('logAddress')) {
        this._configurationService.updateLogUrlToWorker(this.sessionId, this._csidCache.get(), this._workerComm);
      }
    }
  }, {
    key: "resetSession",
    value: function resetSession(msg) {
      this.onResetSession(msg);
    }
    /**
     * called by:
     * * the api of the customer in the cdApi
     * * onSiteMapperMatch
     * @param msg - should be in this structure { resetReason: 'my_reason'}
     */
  }, {
    key: "onResetSession",
    value: function onResetSession(msg) {
      var resetReason = msg.resetReason ? msg.resetReason : SIDChangeType_1.SIDChangeType.unknown;
      // we can't control the cdApi make sure it's customerApi - the only option for other reset reason
      if (!SIDChangeType_1.SIDChangeType.hasOwnProperty(resetReason)) {
        resetReason = SIDChangeType_1.SIDChangeType.customerApi;
      }
      Logger_1["default"].info("Received a Reset Session event, reason: ".concat(resetReason));
      // if from the last time we re-generated session number until now less then 20 seconds passed,
      // do not reset the session.
      // We want to avoid this re-generation
      // if the server requests we need to regenerate anyway because it expects it and will not save session correctly
      if (this._utils.dateNow() - this.lastExternalResetCallTime > this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.resetSessionApiThreshold)) {
        this._startNewSession(msg === null || msg === void 0 ? void 0 : msg.csid);
        // we need to update the sid in the log
        this._configurationService.updateLogUrlToWorker(this.sessionId, this._csidCache.get(), this._workerComm);
        this.lastExternalResetCallTime = this._utils.dateNow();
      } else {
        Logger_1["default"].info("Ignoring external reset session call since resetSessionApiThreshold hasn't passed");
      }
    }
  }, {
    key: "startNewSession",
    value: function startNewSession() {
      this._startNewSession();
    }
  }, {
    key: "_startNewSession",
    value: function _startNewSession() {
      var csid = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      Logger_1["default"].info("Starting a new session. Previous session was ".concat(this.sessionId));
      // Reset the sessionId until we get a new one from server
      this.sessionId = null;
      // If the sid has changed we reset the csid/psid if we already had one since we don't want it
      // to be included in the new session messages
      this._enableStartupCustomerSessionId ? this._setOrFetchCsid(csid) : this._csidCache.set(csid || null);
      this._psidCache.set(null);
      // If sid has changed, we don't want the server state anymore. We want to get a new one from server
      this._serverStateMgr.onSessionIdChange();
      this._onStartedNewSession();
    }
  }, {
    key: "_setOrFetchCsid",
    value: function _setOrFetchCsid(csid) {
      if (csid) {
        this._csidCache.set(csid);
      } else {
        this._csidService.get();
      }
    }
  }, {
    key: "_resumeSession",
    value: function _resumeSession(sid) {
      Logger_1["default"].info("Resuming an existing session with sid ".concat(sid));
      // Update the session id
      this.sessionId = sid;
      this._saveSidToStorage(this.sessionId);
      this._handleBrandResume();
      this._onResumedSession();
      this._handleCsid();
    }
    /**
     * Get an exising session number from the storage
     * @returns {*}
     * @private
     */
  }, {
    key: "_getSessionId",
    value: function _getSessionId() {
      Logger_1["default"].info('Attempting to get sid from storage');
      var sid = this._sidRepository.get();
      if (sid) {
        Logger_1["default"].info("Read sid ".concat(sid, " from storage"));
      }
      return sid;
    }
  }, {
    key: "_saveSidToStorage",
    value: function _saveSidToStorage(sid) {
      Logger_1["default"].info("Saving sid ".concat(sid, " to storage"));
      // Save the session id to a persistent storage
      this._sidRepository.set(sid);
    }
  }, {
    key: "_onStartedNewSession",
    value: function _onStartedNewSession() {
      var _this$_muidService;
      // We need to get rid of this crap. This creates a very unclear behavior... We shouldn't even get here
      // without a server address.
      if (!this._serverAddress) {
        return;
      }
      var message = {
        serverAddress: this._serverAddress,
        csid: this._csidCache.get(),
        cid: this._cidCache.get(),
        protocolType: this._protocolType,
        minifiedUri: this._minifiedWupUriEnabled,
        psid: this._psidCache.get(),
        muid: (_this$_muidService = this._muidService) === null || _this$_muidService === void 0 ? void 0 : _this$_muidService.muid,
        contextName: this._contextMgr.getContextName()
      };
      this._workerComm.sendAsync(WorkerCommand_1.WorkerCommand.startNewSessionCommand, message);
      this._configurationService.updateLogUrlToWorker(this.sessionId, this._csidCache.get(), this._workerComm);
    }
  }, {
    key: "_onResumedSession",
    value: function _onResumedSession() {
      var _this$_muidService2;
      // We need to get rid of this crap. This creates a very unclear behavior... We shouldn't even get here
      // without a server address.
      if (!this._serverAddress) {
        return;
      }
      var srvState = this._serverStateMgr.getServerState(this.sessionId);
      var message = {
        serverAddress: this._serverAddress,
        csid: this._csidCache.get(),
        cid: this._cidCache.get(),
        protocolType: this._protocolType,
        minifiedUri: this._minifiedWupUriEnabled,
        psid: this._psidCache.get(),
        cdsnum: this.sessionId,
        muid: (_this$_muidService2 = this._muidService) === null || _this$_muidService2 === void 0 ? void 0 : _this$_muidService2.muid,
        contextName: this._contextMgr.getContextName(),
        // notify the server for change by customer
        serverState: srvState
      };
      this._workerComm.sendAsync(WorkerCommand_1.WorkerCommand.resumeSessionCommand, message);
      this._configurationService.updateLogUrlToWorker(this.sessionId, this._csidCache.get(), this._workerComm);
    }
    /**
     * The below function should be deprecated and removed
     */
  }, {
    key: "_handleCsid",
    value: function _handleCsid() {
      var _this = this;
      this._domUtils.onDocumentBody(self, function () {
        Logger_1["default"].debug("SessionService:_sessionIdRegeneration, onDocumentBody callback: cdSNum: ".concat(_this.sessionId));
        _this._csidService.get(function () {
          Logger_1["default"].info("Received csid from client. csid: ".concat(_this._csidCache.get(), ", sid:").concat(_this === null || _this === void 0 ? void 0 : _this.sessionId));
          _this._sendCsidToServer();
        });
      });
    }
  }, {
    key: "_sendCsidToServer",
    value: function _sendCsidToServer() {
      // If there is no server address we don't continue since we have nowhere to send the data to
      if (!this._serverAddress) {
        return;
      }
      Logger_1["default"].info("Sending csid to worker. csid: ".concat(this._csidCache.get(), ", sid:").concat(this.sessionId));
      this._workerComm.sendAsync(WorkerCommand_1.WorkerCommand.updateCsidCommand, {
        csid: this._csidCache.get()
      });
      this._configurationService.updateLogUrlToWorker(this.sessionId, this._csidCache.get(), this._workerComm);
    }
  }, {
    key: "_handleBrandResume",
    value: function _handleBrandResume() {
      this._brandService.update();
    }
    /**
     * Sent to SiteMapper to be called on match for resetSession
     */
  }, {
    key: "_onSiteMapperMatch",
    value: function _onSiteMapperMatch() {
      this.onResetSession({
        resetReason: SIDChangeType_1.SIDChangeType.configuration
      });
    }
    /**
     * Event is triggered once a new session is started and we receive the notification from the server
     * @param newSid - the new sid received from the server
     * @private
     */
  }, {
    key: "_onNewSessionStartedEvent",
    value: function _onNewSessionStartedEvent(newSid) {
      this.sessionId = newSid;
      this._saveSidToStorage(this.sessionId);
      this._configurationService.updateLogUrlToWorker(this.sessionId, this._csidCache.get(), this._workerComm);
      this._notifyNewSessionStarted();
      // When agentType is Secondary, we should not act upon receiving "NewSessionStartedEvent" event.
      // The Primary is responsible for setting/resetting the Secondary CSID
      if (this._agentType !== AgentType_1.AgentType.SECONDARY) this._handleCsid();
      Logger_1["default"].info("A new session ".concat(newSid, " has started"));
    }
  }, {
    key: "_notifyNewSessionStarted",
    value: function _notifyNewSessionStarted() {
      // Notify subscribers about the session reset
      this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.NewSessionStartedEvent, this.sessionId);
    }
  }, {
    key: "_setSessionStartupData",
    value: function _setSessionStartupData() {
      this._workerComm.sendAsync(WorkerCommand_1.WorkerCommand.setAgentTypeCommand, {
        agentType: this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.agentType)
      });
      this._agentIdService.updateAgentIdWithServer();
    }
  }]);
}();
exports["default"] = SessionService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/session/SidRepository.js":
/*!*******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/session/SidRepository.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ConfigurationDefaultValues_1 = __webpack_require__(/*! ../../../worker/communication/ConfigurationDefaultValues */ "./dist/js-sdk-legacy/src/worker/communication/ConfigurationDefaultValues.js");
var ConfigurationFields_1 = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
/**
 * Class handles work with the persistent storage of the sid. It works with both localstorage and cookie to provide
 * read and write operations
 */
var SidRepository = /*#__PURE__*/function () {
  function SidRepository(utils, storageUtilsWrapper, configurationRepository) {
    _classCallCheck(this, SidRepository);
    this.sidKey = 'cdSNum';
    this._utils = utils;
    this._storageUtilsWrapper = storageUtilsWrapper;
    this.COOKIE_EXPIRATION_IN_MILLISECONDS = this.getExpirationTime(configurationRepository);
  }
  return _createClass(SidRepository, [{
    key: "onConfigUpdate",
    value: function onConfigUpdate(configurationRepository) {
      var updatedExpirationTime = this.getExpirationTime(configurationRepository);
      if (this._setExpirationTime(updatedExpirationTime)) {
        this.COOKIE_EXPIRATION_IN_MILLISECONDS = updatedExpirationTime;
      }
    }
  }, {
    key: "getExpirationTime",
    value: function getExpirationTime(configurationRepository) {
      var cdsNumExpirationTime = configurationRepository.get(ConfigurationFields_1.ConfigurationFields.cdsNumExpirationTime);
      return this._utils.minutesToMilliseconds(this._validateCDSNumExpirationTime(cdsNumExpirationTime));
    }
  }, {
    key: "_validateCDSNumExpirationTime",
    value: function _validateCDSNumExpirationTime(cdsNumExpirationTime) {
      if (cdsNumExpirationTime < ConfigurationDefaultValues_1.ConfigurationDefaultValues.MIN_CDS_NUM_EXPIRATION_TIME || cdsNumExpirationTime > ConfigurationDefaultValues_1.ConfigurationDefaultValues.MAX_CDS_NUM_EXPIRATION_TIME) {
        return ConfigurationDefaultValues_1.ConfigurationDefaultValues.DEFAULT_CDS_NUM_EXPIRATION_TIME;
      }
      return cdsNumExpirationTime;
    }
  }, {
    key: "_setExpirationTime",
    value: function _setExpirationTime(expirationTime) {
      // Set expiration both to local storage and to cookie
      if (this._storageUtilsWrapper.setExpirationInCookie(this.sidKey, expirationTime) === ConfigurationDefaultValues_1.ConfigurationDefaultValues.FAILURE_IN_CHANGED_EXPIRATION) {
        Logger_1["default"].warn("Failed set expiration time ".concat(expirationTime, " in cookie."));
        return false;
      }
      if (this._storageUtilsWrapper.setExpirationInLocalStorage(this.sidKey, expirationTime) === ConfigurationDefaultValues_1.ConfigurationDefaultValues.FAILURE_IN_CHANGED_EXPIRATION) {
        Logger_1["default"].warn("Failed set expiration time ".concat(expirationTime, " in local storage."));
        this._storageUtilsWrapper.setExpirationInCookie(this.sidKey, this._utils.minutesToMilliseconds(ConfigurationDefaultValues_1.ConfigurationDefaultValues.DEFAULT_CDS_NUM_EXPIRATION_TIME));
        return false;
      }
      return true;
    }
    /**
     * Get the sid from the storage. Will try to load it from the cookie and if not found will try the local storage
     * Reason for this order is that cookies are more resilient to domain changes
     * @returns The stored sid or null if not found
     */
  }, {
    key: "get",
    value: function get() {
      // First try to get the sid from the cookie and validate it.
      var sidFromCookie = this._storageUtilsWrapper.getCookie(this.sidKey);
      var sid = this._validateSid(sidFromCookie);
      // If the sid doesn't exist or was not valid we try to get it from the local storage
      if (!sid) {
        Logger_1["default"].info('Sid was not found in cookie. Trying to get it from the local storage.');
        var sidFromLocalStorage = this._storageUtilsWrapper.getFromLocalStorage(this.sidKey);
        sid = this._validateSid(sidFromLocalStorage);
        if (!sid) {
          Logger_1["default"].info('Sid was not found in local storage.');
          return null;
        }
      }
      return sid;
    }
    /**
     * store the data in localStorage or in cookie for session
     * @param sid - The updated sid
     */
  }, {
    key: "set",
    value: function set(sid) {
      var val = sid;
      val = this._validateSid(val);
      if (!val) {
        Logger_1["default"].error("Sid ".concat(sid, " is invalid. Will not save it."));
        return;
      }
      // Save both to local storage and to cookie
      if (!this._storageUtilsWrapper.saveToLocalStorage(this.sidKey, val, this.COOKIE_EXPIRATION_IN_MILLISECONDS)) {
        Logger_1["default"].error("Failed saving sid ".concat(sid, " to local storage."));
      }
      // Set the sid cookie. We use the cookie expiration configuration to prevent expiration at end of session
      if (!this._storageUtilsWrapper.setCookie(this.sidKey, val, this.COOKIE_EXPIRATION_IN_MILLISECONDS)) {
        Logger_1["default"].error("Failed saving sid ".concat(sid, " to cookie."));
      }
    }
    /**
     * validates the sid
     * @param sidFull
     */
  }, {
    key: "_validateSid",
    value: function _validateSid(sidFull) {
      return sidFull || null;
    }
  }]);
}();
exports["default"] = SidRepository;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/state/HeartBeatErrorsState.js":
/*!************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/state/HeartBeatErrorsState.js ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var HeartBeatEvent_1 = __webpack_require__(/*! ../../events/HeartBeatEvent */ "./dist/js-sdk-legacy/src/main/events/HeartBeatEvent.js");
var HeartBeatErrorsState = /*#__PURE__*/function () {
  function HeartBeatErrorsState() {
    _classCallCheck(this, HeartBeatErrorsState);
    this.errors = {};
  }
  return _createClass(HeartBeatErrorsState, [{
    key: "updateState",
    value: function updateState(heartBeatStatusEvent) {
      var category = heartBeatStatusEvent.category;
      var status = heartBeatStatusEvent.status;
      if (this._isErrorRecovery(category, status)) {
        Logger_1["default"].info('Received heart beat recovery event', heartBeatStatusEvent);
        delete this.errors[category];
      } else if (this._isNewError(category, status)) {
        Logger_1["default"].info('Received heart beat error event', heartBeatStatusEvent);
        this.errors[category] = category;
      }
    }
  }, {
    key: "_isErrorRecovery",
    value: function _isErrorRecovery(category, status) {
      return typeof this.errors[category] !== 'undefined' && status === HeartBeatEvent_1.statusTypes.Ok;
    }
  }, {
    key: "_isNewError",
    value: function _isNewError(category, status) {
      return typeof this.errors[category] === 'undefined' && status === HeartBeatEvent_1.statusTypes.Error;
    }
  }, {
    key: "getErrors",
    value: function getErrors() {
      var _this = this;
      return Object.keys(this.errors).map(function (error) {
        return "ERROR(".concat(_this.errors[error], ")");
      });
    }
  }, {
    key: "hasErrors",
    value: function hasErrors() {
      return Object.keys(this.errors).length > 0;
    }
  }]);
}();
exports["default"] = HeartBeatErrorsState;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/state/PauseResumeManager.js":
/*!**********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/state/PauseResumeManager.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PauseResumeState = void 0;
var Logger_1 = __importDefault(__webpack_require__(/*! ../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ConfigurationFields_1 = __webpack_require__(/*! ../configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var WorkerCommand_1 = __webpack_require__(/*! ../../events/WorkerCommand */ "./dist/js-sdk-legacy/src/main/events/WorkerCommand.js");
var State_1 = __webpack_require__(/*! ./State */ "./dist/js-sdk-legacy/src/main/core/state/State.js");
// TODO: Remove this and use the state enum instead
exports.PauseResumeState = {
  RUNNING: 0,
  PAUSED: 1
};
/**
 * This class manages the sdk state of RUNNING or PAUSED.
 * While sdk is paused as a result of API call (cdApi.pauseCollection()) no other API can be called
 * (beside cdApi.resumeCollection()). The CustomerApiBridge will query the isCustomerApiEnabled() to
 * check it.
 * The ability to pause / resume is configurable through the 'stateChangeEnabled' configuration.
 * By default it will be false and will be enabled only to customers who need it.
 * If someone called the api and he should not (maybe fraudster?) we are reporting it to the server side.
 */
var PauseResumeManager = /*#__PURE__*/function () {
  function PauseResumeManager(featureMgr, configurationRepository, dataQ, stateService, workerComm) {
    _classCallCheck(this, PauseResumeManager);
    this._featureMgr = featureMgr;
    this._dataQ = dataQ;
    this._configurationRepository = configurationRepository;
    this._pauseResumeEnabled = configurationRepository.get(ConfigurationFields_1.ConfigurationFields.stateChangeEnabled) || false;
    this._sdkState = exports.PauseResumeState.RUNNING;
    this._stateService = stateService;
    this._workerComm = workerComm;
  }
  return _createClass(PauseResumeManager, [{
    key: "onResume",
    value: function onResume() {
      if (this._sdkState === exports.PauseResumeState.PAUSED) {
        Logger_1["default"].info('Resuming JS SDK');
        // This will start all the feature based on the configuration
        this._featureMgr.updateRunByConfig(this._configurationRepository);
        this._sdkState = exports.PauseResumeState.RUNNING;
        this._stateService.updateState(State_1.State.started);
      } else {
        Logger_1["default"].warn('PauseResumeManager:onResume - resume api called when SDK already running');
      }
    }
  }, {
    key: "onPause",
    value: function onPause() {
      if (this._sdkState === exports.PauseResumeState.RUNNING) {
        Logger_1["default"].info('Pausing JS SDK');
        this._featureMgr.stopAllFeatures();
        this._sdkState = exports.PauseResumeState.PAUSED;
        this._stateService.updateState(State_1.State.paused);
      } else {
        Logger_1["default"].warn('Pause api called when SDK already paused');
      }
    }
  }, {
    key: "onStateChange",
    value: function onStateChange(msg) {
      if (msg.toState && this._verifyApiAllowed(msg.toState)) {
        if (msg.toState === 'pause') {
          this.onPause();
          this.updateSDKStateToWorker(exports.PauseResumeState.PAUSED);
        } else if (msg.toState === 'run') {
          this.onResume();
          this.updateSDKStateToWorker(exports.PauseResumeState.RUNNING);
        } else {
          Logger_1["default"].warn('stateChange api called with non valid toState: ' + msg.toState);
        }
      }
    }
  }, {
    key: "updateSDKStateToWorker",
    value: function updateSDKStateToWorker(state) {
      var message = {
        SDK_state: state
      };
      this._workerComm.sendAsync(WorkerCommand_1.WorkerCommand.updateSDKStateCommand, message);
    }
    /**
     * Related to the APIs that are not pause/resume
     * @returns {boolean}
     */
  }, {
    key: "isCustomerApiEnabled",
    value: function isCustomerApiEnabled() {
      return this._sdkState === exports.PauseResumeState.RUNNING;
    }
  }, {
    key: "_verifyApiAllowed",
    value: function _verifyApiAllowed(funcName) {
      if (!this._pauseResumeEnabled) {
        this._dataQ.addToQueue('forbidden_api_call', [null, funcName]);
        return false;
      }
      return true;
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate() {
      this._pauseResumeEnabled = this._configurationRepository.get(ConfigurationFields_1.ConfigurationFields.stateChangeEnabled) || false;
      if (this._configurationRepository.get('isEnabled') === false) {
        this.onPause();
      }
    }
  }]);
}();
exports["default"] = PauseResumeManager;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/state/ServerStateMgr.js":
/*!******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/state/ServerStateMgr.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var WorkerEvent_1 = __webpack_require__(/*! ../../events/WorkerEvent */ "./dist/js-sdk-legacy/src/main/events/WorkerEvent.js");
var WorkerCommand_1 = __webpack_require__(/*! ../../events/WorkerCommand */ "./dist/js-sdk-legacy/src/main/events/WorkerCommand.js");
/**
 * structure of the state:
 * requestId: int
 * sid: _me.messageStruct.cdsnum
 * sts: _me.messageStruct.sts,
 * std: _me.messageStruct.std,
 */
var ServerStateMgr = /*#__PURE__*/function () {
  function ServerStateMgr(workerCommunicator, utils, agentIdService) {
    _classCallCheck(this, ServerStateMgr);
    this._workerComm = workerCommunicator;
    this._utils = utils;
    this._currState = null;
    this._agentIdService = agentIdService;
    workerCommunicator.addMessageListener(WorkerEvent_1.WorkerEvent.ServerStateUpdatedEvent, this._onStateUpdateFromWorker.bind(this));
    workerCommunicator.addMessageListener(WorkerEvent_1.WorkerEvent.ServerNewAgentIdEvent, this._onNewAgentIdFromWorker.bind(this));
    // listen to changes in storage in case other tabs changed the data
    utils.addEventListener(window, 'storage', this._onStateUpdateFromStorage.bind(this), true);
  }
  /**
   * Get the server state we have cached. The state will be returned only if the expected sid param is equal to the cached state sid
   * @param expectedStateSid - The expected sid of the state
   * @returns {*}
   */
  return _createClass(ServerStateMgr, [{
    key: "getServerState",
    value: function getServerState(expectedStateSid) {
      // We require an expected sid so we can compare it to the sid of the state
      if (this._utils.isUndefinedNull(expectedStateSid)) {
        throw new Error("Invalid sid param of ".concat(expectedStateSid));
      }
      this._currState = this._currState || this._utils.StorageUtils.getFromLocalStorage('cdSrvrState');
      // Make sure the state we have is of the sid we expect
      if (this._currState && this._currState.sid !== expectedStateSid) {
        return null;
      }
      return this._currState;
    }
  }, {
    key: "onSessionIdChange",
    value: function onSessionIdChange() {
      this._utils.StorageUtils.removeFromLocalStorage('cdSrvrState');
      this._currState = null;
    }
  }, {
    key: "_onStateUpdateFromWorker",
    value: function _onStateUpdateFromWorker(state) {
      this._updateServerState(state);
    }
  }, {
    key: "_updateServerState",
    value: function _updateServerState(state) {
      this._currState = state;
      this._utils.StorageUtils.saveToLocalStorage('cdSrvrState', state);
    }
    /**
     * This method is called when we get a storage event from another tab
     * we update the storage of this tab with the new state
     * @param e
     * @private
     */
  }, {
    key: "_onStateUpdateFromStorage",
    value: function _onStateUpdateFromStorage(e) {
      if (e && e.storageArea && e.storageArea.cdSrvrState) {
        var serverState = JSON.parse(e.storageArea.cdSrvrState);
        this._workerComm.sendAsync(WorkerCommand_1.WorkerCommand.stateUpdateFromStorage, {
          requestId: serverState.val.requestId,
          sts: serverState.val.sts,
          std: serverState.val.std,
          ott: serverState.val.ott
        });
      }
    }
  }, {
    key: "_onNewAgentIdFromWorker",
    value: function _onNewAgentIdFromWorker(agentId) {
      this._agentIdService.set(agentId);
    }
  }]);
}();
exports["default"] = ServerStateMgr;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/state/State.js":
/*!*********************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/state/State.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.State = void 0;
exports.State = {
  stopped: 'stopped',
  starting: 'starting',
  started: 'started',
  paused: 'paused',
  faulted: 'faulted'
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/core/state/StateService.js":
/*!****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/core/state/StateService.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var State_1 = __webpack_require__(/*! ./State */ "./dist/js-sdk-legacy/src/main/core/state/State.js");
var MessageBusEventType_1 = __webpack_require__(/*! ../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var StateService = /*#__PURE__*/function () {
  function StateService(messageBus) {
    _classCallCheck(this, StateService);
    this._messageBus = messageBus;
    this._state = State_1.State.stopped;
  }
  return _createClass(StateService, [{
    key: "getState",
    value: function getState() {
      return this._state;
    }
  }, {
    key: "updateState",
    value: function updateState(newState) {
      var state = State_1.State[newState];
      if (!state) {
        throw new Error("Unknown state ".concat(newState));
      }
      this._state = state;
      this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.StateChangedEvent, {
        state: state
      });
    }
  }]);
}();
exports["default"] = StateService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/emitters/BeforeInstallPromptEventEmitter.js":
/*!*********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/emitters/BeforeInstallPromptEventEmitter.js ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var BeforeInstallPromptEventEmitter = /*#__PURE__*/function () {
  function BeforeInstallPromptEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, BeforeInstallPromptEventEmitter);
    _defineProperty(this, "handleBeforeInstallPrompt", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.BeforeInstallPromptEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(BeforeInstallPromptEventEmitter, [{
    key: "start",
    value: function start(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.addEventListener(windowInstance, 'beforeinstallprompt', this.handleBeforeInstallPrompt);
    }
  }, {
    key: "stop",
    value: function stop(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.removeEventListener(windowInstance, 'beforeinstallprompt', this.handleBeforeInstallPrompt);
    }
  }]);
}();
exports["default"] = BeforeInstallPromptEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/emitters/BlurEventEmitter.js":
/*!******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/emitters/BlurEventEmitter.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var BlurEventEmitter = /*#__PURE__*/function () {
  function BlurEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, BlurEventEmitter);
    _defineProperty(this, "handleBlurEvent", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.BlurEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(BlurEventEmitter, [{
    key: "start",
    value: function start(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.addEventListener(windowInstance, 'blur', this.handleBlurEvent, false, true);
    }
  }, {
    key: "stop",
    value: function stop(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.removeEventListener(windowInstance, 'blur', this.handleBlurEvent);
    }
  }]);
}();
exports["default"] = BlurEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/emitters/CopyEventEmitter.js":
/*!******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/emitters/CopyEventEmitter.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var CopyEventEmitter = /*#__PURE__*/function () {
  function CopyEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, CopyEventEmitter);
    _defineProperty(this, "handleCopyEvent", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.CopyEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(CopyEventEmitter, [{
    key: "start",
    value: function start(document) {
      if (!document) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.addEventListener(document, 'copy', this.handleCopyEvent);
    }
  }, {
    key: "stop",
    value: function stop(document) {
      if (!document) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.removeEventListener(document, 'copy', this.handleCopyEvent);
    }
  }]);
}();
exports["default"] = CopyEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/emitters/CutEventEmitter.js":
/*!*****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/emitters/CutEventEmitter.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var CutEventEmitter = /*#__PURE__*/function () {
  function CutEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, CutEventEmitter);
    _defineProperty(this, "handleCutEvent", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.CutEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(CutEventEmitter, [{
    key: "start",
    value: function start(document) {
      if (!document) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.addEventListener(document, 'cut', this.handleCutEvent);
    }
  }, {
    key: "stop",
    value: function stop(document) {
      if (!document) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.removeEventListener(document, 'cut', this.handleCutEvent);
    }
  }]);
}();
exports["default"] = CutEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/emitters/DOMContentLoadedEventEmitter.js":
/*!******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/emitters/DOMContentLoadedEventEmitter.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var DOMContentLoadedEventEmitter = /*#__PURE__*/function () {
  function DOMContentLoadedEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, DOMContentLoadedEventEmitter);
    _defineProperty(this, "handleDOMContentLoadedEvent", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.DOMContentLoadedEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(DOMContentLoadedEventEmitter, [{
    key: "start",
    value: function start(documentInstance) {
      if (!documentInstance) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.addEventListener(documentInstance, 'DOMContentLoaded', this.handleDOMContentLoadedEvent);
    }
  }, {
    key: "stop",
    value: function stop(documentInstance) {
      if (!documentInstance) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.removeEventListener(documentInstance, 'DOMContentLoaded', this.handleDOMContentLoadedEvent);
    }
  }]);
}();
exports["default"] = DOMContentLoadedEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/emitters/DeviceOrientationEventEmitter.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/emitters/DeviceOrientationEventEmitter.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var DeviceOrientationEventEmitter = /*#__PURE__*/function () {
  function DeviceOrientationEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, DeviceOrientationEventEmitter);
    _defineProperty(this, "handleDeviceOrientationEvent", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.DeviceOrientationEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(DeviceOrientationEventEmitter, [{
    key: "start",
    value: function start() {
      this._eventAggregator.addEventListener(window, 'deviceorientation', this.handleDeviceOrientationEvent);
    }
  }, {
    key: "stop",
    value: function stop() {
      this._eventAggregator.removeEventListener(window, 'deviceorientation', this.handleDeviceOrientationEvent);
    }
  }]);
}();
exports["default"] = DeviceOrientationEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/emitters/ElementBlurEventEmitter.js":
/*!*************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/emitters/ElementBlurEventEmitter.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ElementBlurEventEmitter = /*#__PURE__*/function () {
  function ElementBlurEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, ElementBlurEventEmitter);
    _defineProperty(this, "handleElementBlurEvents", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.ElementBlurEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(ElementBlurEventEmitter, [{
    key: "start",
    value: function start(elements) {
      var _this2 = this;
      elements.forEach(function (elem) {
        _this2._eventAggregator.addEventListener(elem, 'blur', _this2.handleElementBlurEvents);
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (elem) {
        _this3._eventAggregator.removeEventListener(elem, 'blur', _this3.handleElementBlurEvents);
      });
    }
  }]);
}();
exports["default"] = ElementBlurEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/emitters/ElementFocusEventEmitter.js":
/*!**************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/emitters/ElementFocusEventEmitter.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ElementFocusEventEmitter = /*#__PURE__*/function () {
  function ElementFocusEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, ElementFocusEventEmitter);
    _defineProperty(this, "handleElementFocusEvents", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.ElementFocusEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(ElementFocusEventEmitter, [{
    key: "start",
    value: function start(elements) {
      var _this2 = this;
      elements.forEach(function (elem) {
        _this2._eventAggregator.addEventListener(elem, 'focus', _this2.handleElementFocusEvents);
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (elem) {
        _this3._eventAggregator.removeEventListener(elem, 'focus', _this3.handleElementFocusEvents);
      });
    }
  }]);
}();
exports["default"] = ElementFocusEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/emitters/FocusEventEmitter.js":
/*!*******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/emitters/FocusEventEmitter.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var FocusEventEmitter = /*#__PURE__*/function () {
  function FocusEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, FocusEventEmitter);
    _defineProperty(this, "handleFocusEvent", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.FocusEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(FocusEventEmitter, [{
    key: "start",
    value: function start(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.addEventListener(windowInstance, 'focus', this.handleFocusEvent, false, true);
    }
  }, {
    key: "stop",
    value: function stop(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.removeEventListener(windowInstance, 'focus', this.handleFocusEvent);
    }
  }]);
}();
exports["default"] = FocusEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/emitters/PasteEventEmitter.js":
/*!*******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/emitters/PasteEventEmitter.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var PasteEventEmitter = /*#__PURE__*/function () {
  function PasteEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, PasteEventEmitter);
    _defineProperty(this, "handlePasteEvent", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.PasteEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(PasteEventEmitter, [{
    key: "start",
    value: function start(document) {
      if (!document) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.addEventListener(document, 'paste', this.handlePasteEvent);
    }
  }, {
    key: "stop",
    value: function stop(document) {
      if (!document) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.removeEventListener(document, 'paste', this.handlePasteEvent);
    }
  }]);
}();
exports["default"] = PasteEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/emitters/ResizeEventEmitter.js":
/*!********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/emitters/ResizeEventEmitter.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ResizeEventEmitter = /*#__PURE__*/function () {
  function ResizeEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, ResizeEventEmitter);
    _defineProperty(this, "handleResizeEvent", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.ResizeEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(ResizeEventEmitter, [{
    key: "start",
    value: function start(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.addEventListener(windowInstance, 'resize', this.handleResizeEvent, false, true);
    }
  }, {
    key: "stop",
    value: function stop(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.removeEventListener(windowInstance, 'resize', this.handleResizeEvent);
    }
  }]);
}();
exports["default"] = ResizeEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/emitters/ScrollEventEmitter.js":
/*!********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/emitters/ScrollEventEmitter.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ScrollEventEmitter = /*#__PURE__*/function () {
  function ScrollEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, ScrollEventEmitter);
    _defineProperty(this, "handleScrollEvent", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.ScrollEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(ScrollEventEmitter, [{
    key: "start",
    value: function start(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.addEventListener(windowInstance, 'scroll', this.handleScrollEvent, false, true);
    }
  }, {
    key: "stop",
    value: function stop(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid window parameter');
      }
      this._eventAggregator.removeEventListener(windowInstance, 'scroll', this.handleScrollEvent);
    }
  }]);
}();
exports["default"] = ScrollEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/emitters/VisibilityChangeEventEmitter.js":
/*!******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/emitters/VisibilityChangeEventEmitter.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var VisibilityChangeEventEmitter = /*#__PURE__*/function () {
  function VisibilityChangeEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, VisibilityChangeEventEmitter);
    _defineProperty(this, "handleVisibilityChangeEvent", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.VisibilityChangeEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
  }
  return _createClass(VisibilityChangeEventEmitter, [{
    key: "start",
    value: function start(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.addEventListener(windowInstance, 'visibilitychange', this.handleVisibilityChangeEvent, false, true);
    }
  }, {
    key: "stop",
    value: function stop(windowInstance) {
      if (!windowInstance) {
        throw new Error('invalid document parameter');
      }
      this._eventAggregator.removeEventListener(windowInstance, 'visibilitychange', this.handleVisibilityChangeEvent);
    }
  }]);
}();
exports["default"] = VisibilityChangeEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/ApiChangeStateEventHandler.js":
/*!**************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/ApiChangeStateEventHandler.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ./MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ApiChangeStateEventHandler = /*#__PURE__*/function () {
  function ApiChangeStateEventHandler(messageBus, pauseResumeManager, slaveListener) {
    _classCallCheck(this, ApiChangeStateEventHandler);
    this._messageBus = messageBus;
    this._pauseResumeManager = pauseResumeManager;
    this._slaveListener = slaveListener;
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ApiChangeStateEvent, this._handle.bind(this));
  }
  return _createClass(ApiChangeStateEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      // Forward api message to both pause resume manager so state will be changed locally + the slave listener so slaves will receive the state change
      this._pauseResumeManager.onStateChange(event);
      this._slaveListener.notifyStateChange(event);
    }
  }]);
}();
exports["default"] = ApiChangeStateEventHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/ApiContextChangeEventHandler.js":
/*!****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/ApiContextChangeEventHandler.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ./MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ApiContextChangeEventHandler = /*#__PURE__*/function () {
  function ApiContextChangeEventHandler(messageBus, contextMgr) {
    _classCallCheck(this, ApiContextChangeEventHandler);
    this._messageBus = messageBus;
    this._contextMgr = contextMgr;
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ApiContextChangeEvent, this._handle.bind(this));
  }
  return _createClass(ApiContextChangeEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      // activityType is for backward compatibility with 1.4 api
      this._contextMgr.changeContext(event.context || event.activityType);
    }
  }]);
}();
exports["default"] = ApiContextChangeEventHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/ApiCustomerMetadataEventHandler.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/ApiCustomerMetadataEventHandler.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ./MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ApiCustomerMetadataEventHandler = /*#__PURE__*/function () {
  function ApiCustomerMetadataEventHandler(messageBus, handleMetadata) {
    _classCallCheck(this, ApiCustomerMetadataEventHandler);
    this._messageBus = messageBus;
    this._handleMetadata = handleMetadata;
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ApiCustomerMetadataEvent, this._handle.bind(this));
  }
  return _createClass(ApiCustomerMetadataEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      this._handleMetadata.onCustomerMetadata(event);
    }
  }]);
}();
exports["default"] = ApiCustomerMetadataEventHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/ApiResetSessionEventHandler.js":
/*!***************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/ApiResetSessionEventHandler.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ./MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ApiResetSessionEventHandler = /*#__PURE__*/function () {
  function ApiResetSessionEventHandler(messageBus, sessionService) {
    _classCallCheck(this, ApiResetSessionEventHandler);
    this._messageBus = messageBus;
    this._sessionService = sessionService;
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ApiResetSessionEvent, this._handle.bind(this));
  }
  return _createClass(ApiResetSessionEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      this._sessionService.onResetSession(event);
    }
  }]);
}();
exports["default"] = ApiResetSessionEventHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/ApiSetCsidEventHandler.js":
/*!**********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/ApiSetCsidEventHandler.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ./MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ApiSetCsidEventHandler = /*#__PURE__*/function () {
  function ApiSetCsidEventHandler(messageBus, csidService) {
    _classCallCheck(this, ApiSetCsidEventHandler);
    this._messageBus = messageBus;
    this._csidService = csidService;
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ApiSetCsidEvent, this._handle.bind(this));
  }
  return _createClass(ApiSetCsidEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      if (!event.csid) {
        Logger_1["default"].warn("Received an invalid csid of ".concat(event.csid, ". Ignoring api call"));
        return;
      }
      this._csidService.set(event.csid);
    }
  }]);
}();
exports["default"] = ApiSetCsidEventHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/ApiSetCustomerBrandEventHandler.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/ApiSetCustomerBrandEventHandler.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ./MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ApiSetCustomerBrandEventHandler = /*#__PURE__*/function () {
  /**
   *
   * @param messageBus {MessageBus}
   * @param brandService {BrandService}
   */
  function ApiSetCustomerBrandEventHandler(messageBus, brandService) {
    _classCallCheck(this, ApiSetCustomerBrandEventHandler);
    this._messageBus = messageBus;
    this._brandService = brandService;
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ApiSetCustomerBrand, this._handle.bind(this));
  }
  return _createClass(ApiSetCustomerBrandEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      if (!event.brand) {
        Logger_1["default"].warn("Received an empty brand name. Ignoring the API call");
        return;
      }
      this._brandService.set(event.brand);
    }
  }]);
}();
exports["default"] = ApiSetCustomerBrandEventHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/ApiSetPsidEventHandler.js":
/*!**********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/ApiSetPsidEventHandler.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ./MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ApiSetPsidEventHandler = /*#__PURE__*/function () {
  function ApiSetPsidEventHandler(messageBus, psidService) {
    _classCallCheck(this, ApiSetPsidEventHandler);
    this._messageBus = messageBus;
    this._psidService = psidService;
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ApiSetPsidEvent, this._handle.bind(this));
  }
  return _createClass(ApiSetPsidEventHandler, [{
    key: "_handle",
    value: function _handle(event) {
      if (!event.psid) {
        Logger_1["default"].warn("Received an invalid psid of ".concat(event.psid, ". Ignoring api call"));
        return;
      }
      this._psidService.set(event.psid);
    }
  }]);
}();
exports["default"] = ApiSetPsidEventHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/ConfigurationLoadedEventHandler.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/ConfigurationLoadedEventHandler.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ./MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var State_1 = __webpack_require__(/*! ../core/state/State */ "./dist/js-sdk-legacy/src/main/core/state/State.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
/**
 * This class is for handling the configuration loaded event
 */
var ConfigurationLoadedEventHandler = /*#__PURE__*/function () {
  function ConfigurationLoadedEventHandler(messageBus, featureService, dataQ, pauseResumeMgr, handleMetadata, logger, contextMgr, sessionService, sensorDataQ, slaveListener, stateService, performanceMonitor, heartBeatMessageService, sensorGateKeeper, sidRepository, coordinatesMaskingConfigurationUpdater) {
    _classCallCheck(this, ConfigurationLoadedEventHandler);
    this._messageBus = messageBus;
    this._featureService = featureService;
    this._dataQ = dataQ;
    this._pauseResumeMgr = pauseResumeMgr;
    this._handleMetadata = handleMetadata;
    this._logger = logger;
    this._contextMgr = contextMgr;
    this._sessionService = sessionService;
    this._sensorDataQ = sensorDataQ;
    this._slaveListener = slaveListener;
    this._stateService = stateService;
    this._performanceMonitor = performanceMonitor;
    this._heartBeatMessageService = heartBeatMessageService;
    this._sensorGateKeeper = sensorGateKeeper;
    this._sidRepository = sidRepository;
    this._coordinatesMaskingConfigurationUpdater = coordinatesMaskingConfigurationUpdater;
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ConfigurationLoadedEvent, this._handle.bind(this));
  }
  return _createClass(ConfigurationLoadedEventHandler, [{
    key: "_handle",
    value: function _handle(configurationRepository) {
      Logger_1["default"].info('Configurations were loaded from the server.');
      this._performanceMonitor.stopMonitor('t.timeTillServerConfig');
      this._featureService.updateRunByConfig(configurationRepository);
      this._dataQ.updateWithConfig(configurationRepository);
      this._pauseResumeMgr.onConfigUpdate(configurationRepository);
      this._handleMetadata.onConfigUpdate(configurationRepository);
      this._logger.updateLogConfig(configurationRepository);
      this._contextMgr.onConfigUpdate(configurationRepository);
      this._sessionService.onConfigUpdate(configurationRepository);
      this._sensorDataQ.onConfigUpdate(configurationRepository);
      this._slaveListener.onConfigUpdate(configurationRepository);
      this._heartBeatMessageService.updateConfig(configurationRepository);
      this._sensorGateKeeper.configure();
      this._sidRepository.onConfigUpdate(configurationRepository);
      this._coordinatesMaskingConfigurationUpdater.onConfigUpdate(configurationRepository);
      // Mark the state as started
      this._stateService.updateState(State_1.State.started);
      Logger_1["default"].info('Successfully configured system');
    }
  }]);
}();
exports["default"] = ConfigurationLoadedEventHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/CustomElementDetectedEventHandler.js":
/*!*********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/CustomElementDetectedEventHandler.js ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CustomElementDetectedEventHandler = void 0;
var MessageBusEventType_1 = __webpack_require__(/*! ./MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var CustomElementEventMessage_1 = __webpack_require__(/*! ../core/customelements/CustomElementEventMessage */ "./dist/js-sdk-legacy/src/main/core/customelements/CustomElementEventMessage.js");
/**
 * Instances of this class handle custom element detection related events that are emitted upon detecting
 * custom elements on the root window or in response to mutation events
 */
var CustomElementDetectedEventHandler = /*#__PURE__*/function () {
  /**
   * @param {BrowserContextsCache} browserContextsCache
   * @param {FeatureService} featureService
   * @param {MessageBus} messageBus
   */
  function CustomElementDetectedEventHandler(browserContextsCache, featureService, messageBus) {
    _classCallCheck(this, CustomElementDetectedEventHandler);
    this._browserContextsCache = browserContextsCache;
    this._messageBus = messageBus;
    this._featureService = featureService;
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.CustomElementDetectedEvent, this._handle.bind(this));
  }
  /**
   * Responds to MessageBusEventType.CustomElementDetectedEvent events
   * @param {CustomElementEventMessage} message
   * @private
   */
  return _createClass(CustomElementDetectedEventHandler, [{
    key: "_handle",
    value: function _handle(message) {
      var browserContext = message.browserContext;
      var action = message.message;
      if (action === CustomElementEventMessage_1.CustomElementEventMessageActions.added) {
        this._handleCustomElementAdded(browserContext);
      } else if (action === CustomElementEventMessage_1.CustomElementEventMessageActions.removed) {
        this._handleCustomElementRemoved(browserContext);
      }
    }
    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_handleCustomElementAdded",
    value: function _handleCustomElementAdded(browserContext) {
      if (!this._browserContextsCache.exists(browserContext.Context)) {
        this._browserContextsCache.addBrowserContext(browserContext);
      }
      this._featureService.runFeaturesOnBrowserContext(browserContext);
    }
    /**
     * @param {BrowserContext} browserContext
     * @private
     */
  }, {
    key: "_handleCustomElementRemoved",
    value: function _handleCustomElementRemoved(browserContext) {
      this._featureService.stopFeaturesOnBrowserContextRemove(browserContext);
      this._browserContextsCache.remove(browserContext.Context);
    }
  }]);
}();
exports.CustomElementDetectedEventHandler = CustomElementDetectedEventHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/HeartBeatEvent.js":
/*!**************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/HeartBeatEvent.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.statusTypes = void 0;
exports.statusTypes = {
  Ok: 'oK',
  Error: 'Error'
};
var HeartBeatEvent = /*#__PURE__*/_createClass(function HeartBeatEvent(category, status) {
  _classCallCheck(this, HeartBeatEvent);
  this.category = category;
  this.status = status;
});
exports["default"] = HeartBeatEvent;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js":
/*!*******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MessageBusEventType = void 0;
exports.MessageBusEventType = {
  TouchEvent: 'touchEvent',
  KeyEvent: 'keyEvent',
  ConfigurationLoadedEvent: 'ConfigurationLoadedEvent',
  NewSessionStartedEvent: 'NewSessionStartedEvent',
  WupDispatchRateUpdatedEvent: 'WupDispatchRateUpdatedEvent',
  ApiContextChangeEvent: 'ApiContextChangeEvent',
  ApiResetSessionEvent: 'ApiResetSessionEvent',
  ApiCustomerMetadataEvent: 'ApiCustomerMetadataEvent',
  ApiChangeStateEvent: 'ApiChangeStateEvent',
  ApiSetCsidEvent: 'ApiSetCsidEvent',
  ApiSetPsidEvent: 'ApiSetPsidEvent',
  ApiSetCustomerBrand: 'ApiSetCustomerBrand',
  ServerStateUpdatedEvent: 'ServerStateUpdatedEvent',
  ServerRestoredMuidEvent: 'ServerRestoredMuidEvent',
  ServerNewAgentIdEvent: 'ServerNewAgentIdEvent',
  StateChangedEvent: 'StateChangedEvent',
  MutationSingleEvent: 'MutationSingleEvent',
  MutationAddedNodes: 'MutationAddedNodes',
  MutationRemovedNodes: 'MutationRemovedNodes',
  StandardInputEvent: 'StandardInputEvent',
  StandardInputFocusEvent: 'StandardInputFocusEvent',
  StandardInputBlurEvent: 'StandardInputBlurEvent',
  StandardOnClickEvent: 'StandardOnClickEvent',
  StandardOnSelectEvent: 'StandardOnSelectEvent',
  ElementFocusEvent: 'ElementFocusEvent',
  ElementBlurEvent: 'ElementBlurEvent',
  StandardOnFormSubmitEvent: 'StandardOnFormSubmitEvent',
  SyntheticInputMaskEvent: 'SyntheticInputMaskEvent',
  CutEvent: 'CutEvent',
  CopyEvent: 'CopyEvent',
  PasteEvent: 'PasteEvent',
  DeviceOrientationEvent: 'DeviceOrientationEvent',
  BeforeInstallPromptEvent: 'BeforeInstallPromptEvent',
  FocusEvent: 'FocusEvent',
  BlurEvent: 'BlurEvent',
  ResizeEvent: 'ResizeEvent',
  DOMContentLoadedEvent: 'DOMContentLoadedEvent',
  VisibilityChangeEvent: 'VisibilityChangeEvent',
  ScrollEvent: 'ScrollEvent',
  WindowMessageEvent: 'WindowMessageEvent',
  WorkerSystemStatusEvent: 'WorkerSystemStatusEvent',
  CustomElementDetectedEvent: 'CustomElementDetectedEvent',
  CustomElementAddedEvent: 'CustomElementAddedEvent',
  CustomElementRemovedEvent: 'CustomElementRemovedEvent',
  CustomElementInaccessible: 'CustomElementInaccessible',
  CustomElementSubmitted: 'CustomElementSubmitted',
  BrowserContextAdded: 'BrowserContextAdded',
  RunDefaultFeatures: 'RunDefaultFeatures',
  StopDefaultFeatures: 'StopDefaultFeatures',
  CustomInputElement: 'CustomInputElement',
  BCTracker: {
    ElementsEvent: 'BCTrackerElementsEvent',
    ElementEventsEvent: 'BCTrackerElementEventsEvent',
    KeyEvent: 'BCTrackerKeyEvent',
    TouchEvent: 'BCTrackerTouchEvent',
    MouseEvent: 'BCTrackerMouseEvent'
  }
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/NewSessionStartedEventHandler.js":
/*!*****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/NewSessionStartedEventHandler.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * This class is for handling a new session start event. This event occurs once per session once the session starts.
 * The event is triggered after a new session id is received from the server. This can be due to the server deciding
 * that the session should be reset, or due to a request from the SDK.
 */
var MessageBusEventType_1 = __webpack_require__(/*! ./MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var NewSessionStartedEventHandler = /*#__PURE__*/function () {
  function NewSessionStartedEventHandler(messageBus, featureService, customerApiBridge, contextMgr, clientEventService, sessionInfoService) {
    _classCallCheck(this, NewSessionStartedEventHandler);
    this._messageBus = messageBus;
    this._featureService = featureService;
    this._customerApiBridge = customerApiBridge;
    this._contextMgr = contextMgr;
    this._clientEventService = clientEventService;
    this._sessionInfoService = sessionInfoService;
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.NewSessionStartedEvent, this._handle.bind(this));
  }
  return _createClass(NewSessionStartedEventHandler, [{
    key: "_handle",
    value: function _handle(sessionId) {
      // Mark the session start time on the client side.
      this._sessionInfoService.markStartTime();
      this._featureService.runPerSessionFeatures();
      // Send the legacy session started event
      this._customerApiBridge.notifySessionReset(sessionId);
      this._contextMgr.onSessionReset();
      // Publish the new event
      this._clientEventService.publishNewSessionStartedEvent(sessionId);
    }
  }]);
}();
exports["default"] = NewSessionStartedEventHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/NodesAddedMutationEvent.js":
/*!***********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/NodesAddedMutationEvent.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var NodesAddedMutationEvent = /*#__PURE__*/_createClass(function NodesAddedMutationEvent(browserContext, addedNodes) {
  _classCallCheck(this, NodesAddedMutationEvent);
  this.browserContext = browserContext;
  this.addedNodes = addedNodes;
});
exports["default"] = NodesAddedMutationEvent;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/NodesRemovedMutationEvent.js":
/*!*************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/NodesRemovedMutationEvent.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var NodesRemovedMutationEvent = /*#__PURE__*/_createClass(function NodesRemovedMutationEvent(browserContext, removedNodes) {
  _classCallCheck(this, NodesRemovedMutationEvent);
  this.browserContext = browserContext;
  this.removedNodes = removedNodes;
});
exports["default"] = NodesRemovedMutationEvent;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/RestoredMuidEventHandler.js":
/*!************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/RestoredMuidEventHandler.js ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ./MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var WorkerEvent_1 = __webpack_require__(/*! ./WorkerEvent */ "./dist/js-sdk-legacy/src/main/events/WorkerEvent.js");
var RestoredMuidEventHandler = /*#__PURE__*/function () {
  function RestoredMuidEventHandler(messageBus, muidService, clientEventService, workerCommunicator) {
    _classCallCheck(this, RestoredMuidEventHandler);
    this._messageBus = messageBus;
    this._muidService = muidService;
    this._clientEventService = clientEventService;
    this._workerCommunicator = workerCommunicator;
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.ServerRestoredMuidEvent, this._handler.bind(this), true);
    this._workerCommunicator.addMessageListener(WorkerEvent_1.WorkerEvent.ServerRestoredMuidEvent, this._publish.bind(this), true);
  }
  /**
   * When getting a restored muid event from the Worker
   * the function gets the restored muid and update the client side with the restored one
   * also, event is dispatching notifying the event
   * @param restoredMuid - The restored muid
   */
  return _createClass(RestoredMuidEventHandler, [{
    key: "_handler",
    value: function _handler(restoredMuid) {
      var _this$_muidService;
      //updating session muid in cookie and storage
      (_this$_muidService = this._muidService) === null || _this$_muidService === void 0 || _this$_muidService.updateMuid(restoredMuid);
      this._clientEventService.publishRestoredMuidEvent(restoredMuid);
    }
  }, {
    key: "_publish",
    value: function _publish(muid) {
      this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.ServerRestoredMuidEvent, muid);
    }
  }]);
}();
exports["default"] = RestoredMuidEventHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/StateChangedEventHandler.js":
/*!************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/StateChangedEventHandler.js ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * This class is for handling state changes
 */
var MessageBusEventType_1 = __webpack_require__(/*! ./MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var StateChangedEventHandler = /*#__PURE__*/function () {
  function StateChangedEventHandler(messageBus, clientEventService) {
    _classCallCheck(this, StateChangedEventHandler);
    this._messageBus = messageBus;
    this._clientEventService = clientEventService;
    this._messageBus.subscribe(MessageBusEventType_1.MessageBusEventType.StateChangedEvent, this._handle.bind(this));
  }
  return _createClass(StateChangedEventHandler, [{
    key: "_handle",
    value: function _handle(stateChangedEvent) {
      Logger_1["default"].info("SDK state changed to ".concat(stateChangedEvent.state));
      this._clientEventService.publishStateChangedEvent(stateChangedEvent.state);
    }
  }]);
}();
exports["default"] = StateChangedEventHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/WorkerCommand.js":
/*!*************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/WorkerCommand.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.WorkerCommand = void 0;
exports.WorkerCommand = {
  requestConfigurationsCommand: 'requestConfigurationsCommand',
  startNewSessionCommand: 'startNewSessionCommand',
  resumeSessionCommand: 'resumeSessionCommand',
  changeContextCommand: 'changeContextCommand',
  updateCsidCommand: 'updateCsidCommand',
  updatePsidCommand: 'updatePsidCommand',
  updateLogUrlCommand: 'updateLogUrl',
  sendDataCommand: 'sendDataCommand',
  sendLogCommand: 'sendLogCommand',
  updateBrandCommand: 'updateBrandCommand',
  stateUpdateFromStorage: 'stateUpdateFromStorage',
  setAgentTypeCommand: 'setAgentTypeCommand',
  updateAgentIdCommand: 'updateAgentIdCommand',
  enableWupMessagesHashingCommand: 'enableWupMessagesHashingCommand',
  updateSDKStateCommand: 'updateSDKState'
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/events/WorkerEvent.js":
/*!***********************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/events/WorkerEvent.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.WorkerEvent = void 0;
exports.WorkerEvent = {
  NewSessionStartedEvent: 'NewSessionStartedEvent',
  ConfigurationLoadedEvent: 'ConfigurationLoadedEvent',
  ServerStateUpdatedEvent: 'ServerStateUpdatedEvent',
  HeartBeatStatusEvent: 'HeartBeatStatusEvent',
  ServerRestoredMuidEvent: 'ServerRestoredMuidEvent',
  SetAgentTypeEvent: 'SetAgentTypeEvent',
  ServerNewAgentIdEvent: 'ServerNewAgentIdEvent'
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/flutter/FlutterSdkBridge.js":
/*!*****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/flutter/FlutterSdkBridge.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.FlutterSdkBridge = void 0;
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var FlutterSdkBridge = /*#__PURE__*/function () {
  function FlutterSdkBridge(messageBus) {
    _classCallCheck(this, FlutterSdkBridge);
    this.messageBus = messageBus;
  }
  return _createClass(FlutterSdkBridge, [{
    key: "collectElement",
    value: function collectElement(hashCode, elementId, widthElement, heightElement, dxPosition, dyPosition, widgetType, elementValue, timestamp) {
      this.messageBus.publish(MessageBusEventType_1.MessageBusEventType.BCTracker.ElementsEvent, {
        hashCode: hashCode,
        elementId: elementId,
        widthElement: widthElement,
        heightElement: heightElement,
        dxPosition: dxPosition,
        dyPosition: dyPosition,
        widgetType: widgetType,
        timeStamp: timestamp
      });
    }
  }, {
    key: "collectElementEvent",
    value: function collectElementEvent(hashCode, elementId, eventType, elementValue, timestamp) {
      this.messageBus.publish(MessageBusEventType_1.MessageBusEventType.BCTracker.ElementEventsEvent, {
        hashCode: hashCode,
        elementId: elementId,
        eventType: eventType,
        elementValue: elementValue,
        timeStamp: timestamp
      });
    }
  }, {
    key: "collectTouchEvent",
    value: function collectTouchEvent(hashCode, touchState, x, y, pointer, sourceName, size, radiusMajor, radiusMinor, pressure, orientation, timestamp) {
      this.messageBus.publish(MessageBusEventType_1.MessageBusEventType.BCTracker.TouchEvent, {
        hashCode: hashCode,
        touchState: touchState,
        x: x,
        y: y,
        pointer: pointer,
        radiusMajor: radiusMajor,
        radiusMinor: radiusMinor,
        pressure: pressure,
        timeStamp: timestamp
      });
    }
  }, {
    key: "collectKeyEvent",
    value: function collectKeyEvent(hashCode, elementId, _char, timestamp) {
      this.messageBus.publish(MessageBusEventType_1.MessageBusEventType.BCTracker.KeyEvent, {
        hashCode: hashCode,
        elementId: elementId,
        "char": _char,
        timeStamp: timestamp
      });
    }
  }, {
    key: "collectOnMouseEvent",
    value: function collectOnMouseEvent(hashCode, touchState, x, y, pointer, sourceName, size, radiusMajor, radiusMinor, pressure, orientation, timestamp) {
      this.messageBus.publish(MessageBusEventType_1.MessageBusEventType.BCTracker.MouseEvent, {
        hashCode: hashCode,
        type: touchState,
        screenX: x,
        screenY: y,
        pointer: pointer,
        radiusMajor: radiusMajor,
        radiusMinor: radiusMinor,
        pressure: pressure,
        timeStamp: timestamp
      });
    }
  }]);
}();
exports.FlutterSdkBridge = FlutterSdkBridge;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/flutter/collectors/elements/FlutterElementEventsCollector.js":
/*!**************************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/flutter/collectors/elements/FlutterElementEventsCollector.js ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, o, e, r) { var p = _get(_getPrototypeOf(1 & r ? t.prototype : t), o, e); return 2 & r && "function" == typeof p ? function (t) { return p.apply(e, t); } : p; }
function _get() { return _get = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var p = _superPropBase(e, t); if (p) { var n = Object.getOwnPropertyDescriptor(p, t); return n.get ? n.get.call(arguments.length < 3 ? e : r) : n.value; } }, _get.apply(null, arguments); }
function _superPropBase(t, o) { for (; !{}.hasOwnProperty.call(t, o) && null !== (t = _getPrototypeOf(t));); return t; }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../../../collectors/DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var ElementEventCollector_1 = __webpack_require__(/*! ../../../collectors/events/ElementEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/ElementEventCollector.js");
var FlutterElementEventsCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function FlutterElementEventsCollector(msgBus, dataQueue, utils, contextMgr, maskingService) {
    var _this;
    _classCallCheck(this, FlutterElementEventsCollector);
    _this = _callSuper(this, FlutterElementEventsCollector);
    _defineProperty(_this, "_collectEventElement", function (event) {
      var eventSequence = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var timestamp = _this.getEventTimestamp();
      var relativeTs = _this.getTimestampFromEvent(event);
      var maskedValue = _this._maskingService.maskText(event.elementValue, event.elementId);
      var type = ElementEventCollector_1.ElementEventType[event.eventType];
      if (maskedValue && maskedValue.length > _this._maxElemValLength) {
        maskedValue = '';
      }
      _this._dataQueue.addToQueue('element_events', _this._utils.convertToArrayByMap(ElementEventCollector_1.EventStructure, {
        eventSequence: eventSequence,
        timestamp: timestamp,
        eventType: type,
        isTrusted: -1,
        elementHash: event.hashCode,
        length: maskedValue.length,
        elementValues: maskedValue,
        selected: -1,
        hashedValue: '',
        relativeTime: relativeTs
      }));
    });
    _defineProperty(_this, "_collectElement", function (event) {
      if (!_this._utils.isUndefinedNull(event.hashCode) && !_this._elementWMap.has(event.hashCode)) {
        _this._elementWMap.add(event.hashCode);
        var elemId = _this._maskingService.maskAbsoluteIfRequired(event.elementId, event.elementId);
        _this._dataQueue.addToQueue('elements', [_this._contextMgr.contextHash, event.hashCode, '', elemId || '', '', event.widgetType || '', event.dxPosition || 0, event.dyPosition || 0, event.widthElement || 0, event.heightElement || 0, '', '', '', '', '', '', 0, event.timeStamp, '', '', '']);
      }
    });
    _this._msgBus = msgBus;
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._contextMgr = contextMgr;
    _this._maskingService = maskingService;
    _this._elementWMap = new Set();
    _this._maxElemValLength = 200;
    return _this;
  }
  _inherits(FlutterElementEventsCollector, _DataCollector_1$defa);
  return _createClass(FlutterElementEventsCollector, [{
    key: "startFeature",
    value: function startFeature() {
      _superPropGet(FlutterElementEventsCollector, "startFeature", this, 3)([]);
      this._msgBus.subscribe(MessageBusEventType_1.MessageBusEventType.BCTracker.ElementEventsEvent, this._collectEventElement);
      this._msgBus.subscribe(MessageBusEventType_1.MessageBusEventType.BCTracker.ElementsEvent, this._collectElement);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._msgBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.BCTracker.ElementEventsEvent, this._collectEventElement);
      this._msgBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.BCTracker.ElementsEvent, this._collectElement);
      _superPropGet(FlutterElementEventsCollector, "stopFeature", this, 3)([]);
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = FlutterElementEventsCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/flutter/collectors/key/FlutterKeyEventCollector.js":
/*!****************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/flutter/collectors/key/FlutterKeyEventCollector.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, o, e, r) { var p = _get(_getPrototypeOf(1 & r ? t.prototype : t), o, e); return 2 & r && "function" == typeof p ? function (t) { return p.apply(e, t); } : p; }
function _get() { return _get = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var p = _superPropBase(e, t); if (p) { var n = Object.getOwnPropertyDescriptor(p, t); return n.get ? n.get.call(arguments.length < 3 ? e : r) : n.value; } }, _get.apply(null, arguments); }
function _superPropBase(t, o) { for (; !{}.hasOwnProperty.call(t, o) && null !== (t = _getPrototypeOf(t));); return t; }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../../../collectors/DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var KeyEventCollector_1 = __webpack_require__(/*! ../../../collectors/events/KeyEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/KeyEventCollector.js");
var FlutterKeyEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function FlutterKeyEventCollector(msgBus, dataQueue, utils, maskingService) {
    var _this;
    _classCallCheck(this, FlutterKeyEventCollector);
    _this = _callSuper(this, FlutterKeyEventCollector);
    _defineProperty(_this, "_onKeyEvent", function (event) {
      var eventSequence = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var timestamp = _this.getEventTimestamp();
      var eventKey = event["char"];
      var KeyMaskedParameters = _this._maskingService.maskKey(eventKey, '', event.elementId);
      var character = KeyMaskedParameters.key.length > 1 ? '' : KeyMaskedParameters.key;
      var relativeTs = _this.getTimestampFromEvent(event);
      _this._dataQueue.addToQueue('key_events', _this._utils.convertToArrayByMap(KeyEventCollector_1.EventStructure, {
        eventSequence: eventSequence,
        timestamp: timestamp,
        eventType: 2,
        isTrusted: -1,
        elementHash: event.hashCode,
        charCode: KeyMaskedParameters.charCode,
        character: character,
        keyComboType: -1,
        isCtrl: false,
        isShift: false,
        isAlt: false,
        isMetaKey: false,
        keyLocation: 0,
        code: KeyMaskedParameters.code || '',
        key: KeyMaskedParameters.key || '',
        isRepeat: false,
        keyRegion: "-1",
        relativeTime: relativeTs,
        isSameKey: -1
      }));
    });
    _this._msgBus = msgBus;
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._maskingService = maskingService;
    return _this;
  }
  _inherits(FlutterKeyEventCollector, _DataCollector_1$defa);
  return _createClass(FlutterKeyEventCollector, [{
    key: "startFeature",
    value: function startFeature() {
      _superPropGet(FlutterKeyEventCollector, "startFeature", this, 3)([]);
      this._msgBus.subscribe(MessageBusEventType_1.MessageBusEventType.BCTracker.KeyEvent, this._onKeyEvent);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._msgBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.BCTracker.KeyEvent, this._onKeyEvent);
      _superPropGet(FlutterKeyEventCollector, "stopFeature", this, 3)([]);
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = FlutterKeyEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/flutter/collectors/mouse/FlutterMouseEventCollector.js":
/*!********************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/flutter/collectors/mouse/FlutterMouseEventCollector.js ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, o, e, r) { var p = _get(_getPrototypeOf(1 & r ? t.prototype : t), o, e); return 2 & r && "function" == typeof p ? function (t) { return p.apply(e, t); } : p; }
function _get() { return _get = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var p = _superPropBase(e, t); if (p) { var n = Object.getOwnPropertyDescriptor(p, t); return n.get ? n.get.call(arguments.length < 3 ? e : r) : n.value; } }, _get.apply(null, arguments); }
function _superPropBase(t, o) { for (; !{}.hasOwnProperty.call(t, o) && null !== (t = _getPrototypeOf(t));); return t; }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.FlutterMouseEventType = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../../../collectors/DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var MouseEventCollector_1 = __webpack_require__(/*! ../../../collectors/events/MouseEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/MouseEventCollector.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../../../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var IsTrustedValue_1 = __webpack_require__(/*! ../../../collectors/events/IsTrustedValue */ "./dist/js-sdk-legacy/src/main/collectors/events/IsTrustedValue.js");
var MaskingService_1 = __webpack_require__(/*! ../../../core/masking/MaskingService */ "./dist/js-sdk-legacy/src/main/core/masking/MaskingService.js");
exports.FlutterMouseEventType = {
  mousemove: 0,
  onTapDown: 1,
  onTapUp: 2
};
var FlutterMouseEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function FlutterMouseEventCollector(msgBus, dataQueue, utils, maskingService, domUtils, configuration) {
    var _this;
    _classCallCheck(this, FlutterMouseEventCollector);
    _this = _callSuper(this, FlutterMouseEventCollector);
    _defineProperty(_this, "_onMouseEvent", function (event) {
      var eventType = exports.FlutterMouseEventType[event.type];
      var relativeTs = _this.getTimestampFromEvent(event);
      _this._dataQueue.addToQueue('mouse_events', _this._utils.convertToArrayByMap(MouseEventCollector_1.EventStructure, {
        eventSequence: _this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),
        timestamp: _this.getEventTimestamp(),
        eventType: eventType,
        isTrusted: event.type === 'mousemove' ? IsTrustedValue_1.IsTrustedValue[event.isTrusted] : -1,
        elementHash: event.type === 'mousemove' ? 0 : event.hashCode,
        pageX: _this._resolveCoordinate(event.type, event.pageX),
        pageY: _this._resolveCoordinate(event.type, event.pageY),
        // we get only screen coordinates (and not page and client) for non-'mousemove' events.
        screenX: _this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : _this._roundCoordinate(event.screenX),
        screenY: _this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : _this._roundCoordinate(event.screenY),
        button: 0,
        wheelDelta: 0,
        clientX: _this._resolveCoordinate(event.type, event.clientX),
        clientY: _this._resolveCoordinate(event.type, event.clientY),
        eventDetail: event.type === 'mousemove' ? event.detail || 0 : 0,
        buttonNew: 0,
        relativeTime: relativeTs
      }));
    });
    _this._msgBus = msgBus;
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._maskingService = maskingService;
    _this._domUtils = domUtils;
    _this._maxShadowDepth = configuration.getMaxShadowDepth();
    _this._iframeLoadingTimeout = configuration.getIframeLoadingTimeout();
    return _this;
  }
  // BcTracker listens to mouse events (up, down) only at the widget level.
  // For 'mousemove' events, it listens at the browser's document context level.
  _inherits(FlutterMouseEventCollector, _DataCollector_1$defa);
  return _createClass(FlutterMouseEventCollector, [{
    key: "startFeature",
    value: function startFeature(browserContext) {
      var _this2 = this;
      _superPropGet(FlutterMouseEventCollector, "startFeature", this, 3)([]);
      try {
        var currDocument = browserContext.getDocument();
        this._domUtils.addEventListener(currDocument, 'mousemove', this._onMouseEvent, true);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            _this2._domUtils.addEventListener(iframe.contentDocument, 'mousemove', _this2._onMouseEvent, true);
          });
        });
        this._msgBus.subscribe(MessageBusEventType_1.MessageBusEventType.BCTracker.MouseEvent, this._onMouseEvent);
      } catch (err) {
        Logger_1["default"].error("MouseEvents:startFeature failed. msg: ".concat(err.message), err);
      }
    }
  }, {
    key: "stopFeature",
    value: function stopFeature(browserContext) {
      var _this3 = this;
      try {
        var currDocument = browserContext.getDocument();
        this._domUtils.removeEventListener(currDocument, 'mousemove', this._onMouseEvent, true);
        browserContext.collectAllElementsBySelectorAsync('iframe', this._maxShadowDepth, this._iframeLoadingTimeout).then(function (iframes) {
          iframes.forEach(function (iframe) {
            _this3._domUtils.removeEventListener(iframe.contentDocument, 'mousemove', _this3._onMouseEvent, true);
          });
        });
        this._msgBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.BCTracker.MouseEvent, this._onMouseEvent);
      } catch (err) {
        Logger_1["default"].error("MouseEvents:stopFeature failed. msg: ".concat(err.message), err);
      }
      _superPropGet(FlutterMouseEventCollector, "stopFeature", this, 3)([]);
    }
  }, {
    key: "_resolveCoordinate",
    value: function _resolveCoordinate(eventType, coordinate) {
      if (eventType === 'mousemove') {
        if (this._maskingService.shouldMaskCoordinates()) {
          return MaskingService_1.defaultMaskedCoordinates;
        }
        // we get only screen coordinates (and not page and client) for non-'mousemove' events.
        return this._roundCoordinate(coordinate);
      }
      return 0;
    }
  }, {
    key: "_roundCoordinate",
    value: function _roundCoordinate(coordinate) {
      if (coordinate) {
        return Math.round(coordinate);
      }
      return -1;
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = FlutterMouseEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/flutter/collectors/touch/FlutterTouchEventCollector.js":
/*!********************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/flutter/collectors/touch/FlutterTouchEventCollector.js ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, o, e, r) { var p = _get(_getPrototypeOf(1 & r ? t.prototype : t), o, e); return 2 & r && "function" == typeof p ? function (t) { return p.apply(e, t); } : p; }
function _get() { return _get = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var p = _superPropBase(e, t); if (p) { var n = Object.getOwnPropertyDescriptor(p, t); return n.get ? n.get.call(arguments.length < 3 ? e : r) : n.value; } }, _get.apply(null, arguments); }
function _superPropBase(t, o) { for (; !{}.hasOwnProperty.call(t, o) && null !== (t = _getPrototypeOf(t));); return t; }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.FlutterTouchEventType = void 0;
var DataCollector_1 = __importDefault(__webpack_require__(/*! ../../../collectors/DataCollector */ "./dist/js-sdk-legacy/src/main/collectors/DataCollector.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../../../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var TouchEventCollector_1 = __webpack_require__(/*! ../../../collectors/events/TouchEventCollector */ "./dist/js-sdk-legacy/src/main/collectors/events/TouchEventCollector.js");
var MaskingService_1 = __webpack_require__(/*! ../../../core/masking/MaskingService */ "./dist/js-sdk-legacy/src/main/core/masking/MaskingService.js");
exports.FlutterTouchEventType = {
  onTapDown: 0,
  onTapUp: 2
};
var FlutterTouchEventCollector = /*#__PURE__*/function (_DataCollector_1$defa) {
  function FlutterTouchEventCollector(msgBus, dataQueue, utils, maskingService) {
    var _this;
    _classCallCheck(this, FlutterTouchEventCollector);
    _this = _callSuper(this, FlutterTouchEventCollector);
    _defineProperty(_this, "_onTouchEvent", function (event) {
      var type = exports.FlutterTouchEventType[event.touchState];
      if (type === exports.FlutterTouchEventType.onTapDown || type === exports.FlutterTouchEventType.onTapUp) {
        _this._msgBus.publish(MessageBusEventType_1.MessageBusEventType.TouchEvent, {
          action: type
        });
      }
      var time = _this.getEventTimestamp();
      var eventSeq = _this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
      var relativeTs = _this.getTimestampFromEvent(event);
      if (_this._utils.isUndefinedNull(type)) {
        type = -1;
      }
      _this._dataQueue.addToQueue('touch_events', _this._utils.convertToArrayByMap(TouchEventCollector_1.EventStructure, {
        eventSequence: eventSeq,
        timestamp: time,
        eventType: type,
        isTrusted: -1,
        elementHash: event.hashCode,
        clientX: _this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : event.x ? Math.round(event.x) : 0,
        clientY: _this._maskingService.shouldMaskCoordinates() ? MaskingService_1.defaultMaskedCoordinates : event.y ? Math.round(event.y) : 0,
        touchIndex: event.pointer,
        // duplicating the radius since it comes from mobile devices as diameter
        touchSizeMajor: event.radiusMajor ? event.radiusMajor * 2 : 0,
        touchSizeMinor: event.radiusMinor ? event.radiusMinor * 2 : 0,
        pageX: 0,
        pageY: 0,
        screenX: 0,
        screenY: 0,
        relativeTime: relativeTs,
        touchPressure: event.pressure || -1
      }));
    });
    _this._msgBus = msgBus;
    _this._dataQueue = dataQueue;
    _this._utils = utils;
    _this._maskingService = maskingService;
    return _this;
  }
  _inherits(FlutterTouchEventCollector, _DataCollector_1$defa);
  return _createClass(FlutterTouchEventCollector, [{
    key: "startFeature",
    value: function startFeature() {
      _superPropGet(FlutterTouchEventCollector, "startFeature", this, 3)([]);
      this._msgBus.subscribe(MessageBusEventType_1.MessageBusEventType.BCTracker.TouchEvent, this._onTouchEvent);
    }
  }, {
    key: "stopFeature",
    value: function stopFeature() {
      this._msgBus.unsubscribe(MessageBusEventType_1.MessageBusEventType.BCTracker.TouchEvent, this._onTouchEvent);
      _superPropGet(FlutterTouchEventCollector, "stopFeature", this, 3)([]);
    }
  }]);
}(DataCollector_1["default"]);
exports["default"] = FlutterTouchEventCollector;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/infrastructure/CDEvent.js":
/*!***************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/infrastructure/CDEvent.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDEvent = /*#__PURE__*/function () {
  function CDEvent() {
    _classCallCheck(this, CDEvent);
    this._listeners = [];
  }
  return _createClass(CDEvent, [{
    key: "subscribe",
    value: function subscribe(listener) {
      this._listeners.push(listener);
    }
  }, {
    key: "publish",
    value: function publish(args) {
      for (var i = 0, len = this._listeners.length; i < len; i++) {
        this._listeners[i](args);
      }
    }
  }, {
    key: "unsubscribe",
    value: function unsubscribe(callback) {
      for (var i = 0, len = this._listeners.length; i < len; i++) {
        if (callback === this._listeners[i]) {
          this._listeners.splice(i, 1);
          break;
        }
      }
    }
  }]);
}();
exports["default"] = CDEvent;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/infrastructure/CDMap.js":
/*!*************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/infrastructure/CDMap.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createLocal = exports.create = void 0;
/*
 * A polyfill for unsupported mode. This polyfill has O(n) on all methods so its a big piece of junk but will due for our needs
 * @constructor
 */
var CDMap = /*#__PURE__*/function () {
  function CDMap() {
    _classCallCheck(this, CDMap);
    this._pairs = [];
    this.size = 0;
  }
  return _createClass(CDMap, [{
    key: "has",
    value: function has(key) {
      return this._indexOf(key) > -1;
    }
  }, {
    key: "get",
    value: function get(key) {
      var index = this._indexOf(key);
      if (index > -1) {
        return this._pairs[index][1];
      }
      return undefined;
    }
  }, {
    key: "set",
    value: function set(key, value) {
      var index = this._indexOf(key);
      if (index > -1) {
        this._pairs[index][1] = value;
      } else {
        this._pairs.push([key, value]);
        this.size++;
      }
    }
  }, {
    key: "delete",
    value: function _delete(key) {
      var index = this._indexOf(key);
      if (index > -1) {
        this._pairs.splice(index, 1);
        this.size--;
        return true;
      }
      return false;
    }
  }, {
    key: "forEach",
    value: function forEach(cb) {
      for (var i = 0; i < this._pairs.length; i++) {
        cb(this._pairs[i][1], this._pairs[i][0]);
      }
    }
  }, {
    key: "clear",
    value: function clear() {
      this._pairs = [];
    }
  }, {
    key: "_indexOf",
    value: function _indexOf(key) {
      for (var i = 0; i < this._pairs.length; i++) {
        if (this._pairs[i][0] === key) {
          return i;
        }
      }
      return -1;
    }
  }]);
}();
var create = function create() {
  var Ctor = self.Map || CDMap;
  return new Ctor();
};
exports.create = create;
var createLocal = function createLocal() {
  return new CDMap();
};
exports.createLocal = createLocal;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/infrastructure/CDPort.js":
/*!**************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/infrastructure/CDPort.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDPort = /*#__PURE__*/function () {
  function CDPort(nativeWorker) {
    _classCallCheck(this, CDPort);
    this._portNativeWorker = nativeWorker;
  }
  /* eslint-disable prefer-rest-params */
  return _createClass(CDPort, [{
    key: "postMessage",
    value: function postMessage() {
      this._portNativeWorker.postMessage.apply(this._portNativeWorker, arguments);
    }
    /* eslint-enable prefer-rest-params */
  }, {
    key: "close",
    value: function close() {
      this._portNativeWorker.terminate();
    }
    // in the original is was set onmessage using a setter but since IE8 does not support setters I changed
  }, {
    key: "setonmessage",
    value: function setonmessage(cb) {
      this._portNativeWorker.onmessage = cb;
    }
  }]);
}();
exports["default"] = CDPort;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/infrastructure/CDSet.js":
/*!*************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/infrastructure/CDSet.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createLocal = exports.create = void 0;
/*
 * A polyfill for unsupported mode. It is not a full polyfill since it does not support Object as a value and more,
 * but enough for our needs...
 * @constructor
 */
var CDSet = /*#__PURE__*/function () {
  function CDSet() {
    _classCallCheck(this, CDSet);
    this._set = [];
    this.size = 0;
  }
  return _createClass(CDSet, [{
    key: "add",
    value: function add(val) {
      this._set.push(val);
      this.size++;
      return this; // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/add
    }
  }, {
    key: "has",
    value: function has(val) {
      return this._set.indexOf(val) > -1;
    }
  }, {
    key: "delete",
    value: function _delete(val) {
      for (var i = 0; i < this._set.length; i++) {
        if (this._set[i] === val) {
          this._set.splice(i, 1);
          this.size--;
          return true; // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/delete
        }
      }
      return false;
    }
  }, {
    key: "forEach",
    value: function forEach(cb) {
      for (var i = 0; i < this._set.length; i++) {
        cb(this._set[i]);
      }
    }
  }, {
    key: "clear",
    value: function clear() {
      this._set = [];
    }
  }]);
}();
var create = function create() {
  var initial_values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var Ctor = self.Set || CDSet;
  var set = new Ctor();
  for (var i = 0; i < initial_values.length; i++) {
    set.add(initial_values[i]);
  }
  return set;
};
exports.create = create;
var createLocal = function createLocal() {
  var initial_values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var set = new CDSet();
  for (var i = 0; i < initial_values.length; i++) {
    set.add(initial_values[i]);
  }
  return set;
};
exports.createLocal = createLocal;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/infrastructure/GlobalExceptionHandler.js":
/*!******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/infrastructure/GlobalExceptionHandler.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
/**
 * Class catches global exceptions from our script and sends log
 */
var GlobalExceptionHandler = /*#__PURE__*/function () {
  function GlobalExceptionHandler(cdUtils, scriptName) {
    _classCallCheck(this, GlobalExceptionHandler);
    this._cdUtils = cdUtils;
    this._scriptName = scriptName;
    this._cdUtils.addEventListener(window, 'error', this._handleException.bind(this));
  }
  /**
   * validates the sid has the predefined value of timestamp-sid
   * @param error
   */
  return _createClass(GlobalExceptionHandler, [{
    key: "_handleException",
    value: function _handleException(errorEvent) {
      if (this._scriptName && this._scriptName === errorEvent.filename) {
        var errorMessage = this._buildErrorMessage(errorEvent);
        Logger_1["default"].error("caught unhandled exception. ".concat(errorMessage));
      }
    }
  }, {
    key: "_buildErrorMessage",
    value: function _buildErrorMessage(errorEvent) {
      if (!errorEvent.error) {
        return errorEvent.message;
      }
      var errorString = errorEvent.error.toString();
      var callStack = errorEvent.error.stack ? errorEvent.error.stack : '';
      return "".concat(errorString, ", Line: ").concat(errorEvent.lineno, ", Column: ").concat(errorEvent.colno, ". Stacktrace: ").concat(callStack);
    }
  }]);
}();
exports["default"] = GlobalExceptionHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/infrastructure/HttpRequestFactory.js":
/*!**************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/infrastructure/HttpRequestFactory.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * Factory for creating an http request object. If XmlHttpRequest with cors support is available it is used. Otherwise if XDomainRequest is supported it is used.
 * If both are not supported we use XmlHttpRequest...
 */
var HttpRequestFactory = /*#__PURE__*/function () {
  function HttpRequestFactory() {
    _classCallCheck(this, HttpRequestFactory);
  }
  return _createClass(HttpRequestFactory, null, [{
    key: "create",
    value: function create() {
      // Notice that the order of the conditions is important!
      // Best option is if we have XMLHttpRequest with CORS support
      if (self.XMLHttpRequest && Object.prototype.hasOwnProperty.call(XMLHttpRequest.prototype, 'withCredentials')) {
        return new XMLHttpRequest();
      }
      if (self.XDomainRequest) {
        // Second option is if we have XDomainRequest which also supports CORS (God bless Microsoft)
        return new XDomainRequest();
      }
      if (!self.XMLHttpRequest) {
        throw new Error('There is no supported http request object');
      }
      // If non of the above is available and the XmlHttpRequest is available we use it without the CORS support
      return new XMLHttpRequest();
    }
  }]);
}();
exports["default"] = HttpRequestFactory;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/services/HeartBeatService.js":
/*!******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/services/HeartBeatService.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var ConfigurationFields_1 = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var WorkerEvent_1 = __webpack_require__(/*! ../events/WorkerEvent */ "./dist/js-sdk-legacy/src/main/events/WorkerEvent.js");
var ApiEventType_1 = __webpack_require__(/*! ../api/ApiEventType */ "./dist/js-sdk-legacy/src/main/api/ApiEventType.js");
/**
 * This class is for posting heartBeat messages to the customer
 */
var HeartBeatService = /*#__PURE__*/function () {
  function HeartBeatService(workerCommunicator, heartBeatErrorsState, heartBeatPostMessageInterval) {
    _classCallCheck(this, HeartBeatService);
    _defineProperty(this, "_dataOrigin", 'BC');
    this._heartBeatErrorsState = heartBeatErrorsState;
    this._heartBeatPostMessageInterval = heartBeatPostMessageInterval;
    workerCommunicator.addMessageListener(WorkerEvent_1.WorkerEvent.HeartBeatStatusEvent, this._handle.bind(this));
  }
  return _createClass(HeartBeatService, [{
    key: "start",
    value: function start() {
      this._clear();
      this._periodicPostMessageIntervalId = setInterval(this._postHeartBeatMessage.bind(this), this._heartBeatPostMessageInterval);
    }
  }, {
    key: "stop",
    value: function stop() {
      this._clear();
    }
  }, {
    key: "updateConfig",
    value: function updateConfig(configurationRepository) {
      this._heartBeatPostMessageInterval = configurationRepository.get(ConfigurationFields_1.ConfigurationFields.heartBeatMessageInterval);
      this.start();
    }
  }, {
    key: "_clear",
    value: function _clear() {
      if (this._periodicPostMessageIntervalId) {
        clearInterval(this._periodicPostMessageIntervalId);
      }
    }
  }, {
    key: "_handle",
    value: function _handle(heartBeatStatusEvent) {
      this._heartBeatErrorsState.updateState(heartBeatStatusEvent);
    }
  }, {
    key: "_postHeartBeatMessage",
    value: function _postHeartBeatMessage() {
      if (this._heartBeatErrorsState.hasErrors()) {
        window.postMessage({
          type: ApiEventType_1.ApiEventType.HeartBeatEvent,
          data: this._heartBeatErrorsState.getErrors(),
          origin: this._dataOrigin
        }, window.location.href);
        return;
      }
      window.postMessage({
        type: ApiEventType_1.ApiEventType.HeartBeatEvent,
        data: 'Ok',
        origin: this._dataOrigin
      }, window.location.href);
    }
  }]);
}();
exports["default"] = HeartBeatService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/services/MutationEmitter.js":
/*!*****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/services/MutationEmitter.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
/**
 * Emit mutation observer events/mutations.
 * Started by Element related data collectors
 */
var MutationEmitter = /*#__PURE__*/function () {
  function MutationEmitter(messageBus) {
    var _this = this;
    _classCallCheck(this, MutationEmitter);
    /**
     *
     * @param mutation
     * @param {BrowserContext} browserContext
     */
    _defineProperty(this, "handleMutationEvent", function (mutation, browserContext) {
      mutation && browserContext && _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.MutationSingleEvent, {
        mutation: mutation,
        browserContext: browserContext
      });
    });
    this._messageBus = messageBus;
    if (_typeof(this._messageBus) !== 'object') {
      throw new Error('Bootstrap aborted! MessageBus missing for MutationEmitter');
    }
    this._documentObservers = new WeakMap();
  }
  /**
   * @param {BrowserContext} browserContext
   */
  return _createClass(MutationEmitter, [{
    key: "startObserver",
    value: function startObserver(browserContext) {
      var _this2 = this;
      var document = browserContext.getDocument();
      if (this._documentObservers.has(document)) return;
      var nextObserver = new window.MutationObserver(function (mutations) {
        try {
          for (var i = 0; i < mutations.length; i++) {
            var mutation = mutations[i];
            if (mutation.addedNodes.length > 0) {
              _this2.handleMutationEvent(mutation, browserContext);
              break;
            }
          }
        } catch (e) {
          Logger_1["default"].error("An error has occurred: ".concat(e.message));
        }
      });
      nextObserver.observe(document, {
        childList: true,
        subtree: true
      });
      this._documentObservers.set(document, {
        instance: nextObserver
      });
    }
    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopObserver",
    value: function stopObserver(browserContext) {
      var document = browserContext.getDocument();
      var observerInstance;
      // eslint-disable-next-line
      if (this._documentObservers.has(document) && (observerInstance = this._documentObservers.get(document))) {
        observerInstance.instance && observerInstance.instance.disconnect();
        this._documentObservers["delete"](document);
      }
    }
  }]);
}();
exports["default"] = MutationEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/services/SameCharService.js":
/*!*****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/services/SameCharService.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SameCharType = void 0;
// import Log from '../technicalServices/log/Logger';
// import { MessageBusEventType } from '../events/MessageBusEventType';
/**
 * saves currently used elements and their data.
 */
exports.SameCharType = {
  "true": 1,
  "false": 0,
  undefined: -1
};
var SameCharService = /*#__PURE__*/function () {
  function SameCharService() {
    _classCallCheck(this, SameCharService);
    this._elementList = new WeakMap();
  }
  return _createClass(SameCharService, [{
    key: "update",
    value: function update(key, value) {
      this._elementList.set(key, value);
    }
  }, {
    key: "compare",
    value: function compare(key, newValue) {
      return exports.SameCharType[newValue === this._elementList.get(key)];
    }
  }]);
}();
exports["default"] = SameCharService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/services/SlaveListener.js":
/*!***************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/services/SlaveListener.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * This class is loaded in the master side. It listens to messages from slaves and sending them messages back.
 * The main messages are data and logs that the slaves send. In addition context change messages that will cause
 * the master to change context.
 * The _slaves array contains all the direct slaves (children iframes) that communicates with the master.
 * @type {SlaveListener}
 */
var CDEvent_1 = __importDefault(__webpack_require__(/*! ../infrastructure/CDEvent */ "./dist/js-sdk-legacy/src/main/infrastructure/CDEvent.js"));
var MasterSlaveMessage_1 = __webpack_require__(/*! ../../slave/MasterSlaveMessage */ "./dist/js-sdk-legacy/src/slave/MasterSlaveMessage.js");
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var SlaveListener = /*#__PURE__*/function () {
  function SlaveListener(dataQ, configurationRepository, utils, logPerfDataQ, contextMgr, sessionService) {
    _classCallCheck(this, SlaveListener);
    this._slaves = [];
    this._dataQ = dataQ;
    this._configurationRepository = configurationRepository;
    this._utils = utils;
    this._logPerfDataQ = logPerfDataQ;
    this._contextMgr = contextMgr;
    this._sessionService = sessionService;
    this.onResetSessionTrigger = new CDEvent_1["default"]();
    this.onMouseChallengeTrigger = new CDEvent_1["default"]();
    this._msgRouter = {
      dataFromSlave: this._onDataFromSlave,
      registerSlave: this._onRegisterSlave,
      logPerfSlave: this._onLogPerfSlave,
      updateMasterContext: this._onUpdateMasterContext,
      resetSessionTriggerFromSlave: this._onResetSessionTriggerFromSlave,
      mouseChallengeTriggerFromSlave: this._onMouseChallengeTriggerFromSlave
    };
  }
  return _createClass(SlaveListener, [{
    key: "listen",
    value: function listen() {
      var _this = this;
      Logger_1["default"].debug('SlaveListener:listen');
      this._utils.addEventListener(window, 'message', function (e) {
        var msgType = e.data.msgType;
        msgType && _this._msgRouter[msgType] && _this._msgRouter[msgType].call(_this, e);
      });
    }
  }, {
    key: "sendToSlaves",
    value: function sendToSlaves(msgType, data) {
      Logger_1["default"].debug('SlaveListener:sendToSlaves');
      this._slaves.forEach(function (slave) {
        slave.source.postMessage({
          msgType: msgType,
          data: data
        }, slave.origin);
      });
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate() {
      Logger_1["default"].debug("SlaveListener:onConfigUpdate, updating ".concat(this._slaves.length, " slaves"));
      this.sendToSlaves(MasterSlaveMessage_1.MasterSlaveMessage.updateSlaveConf, this._configurationRepository.getAll());
    }
  }, {
    key: "notifyStateChange",
    value: function notifyStateChange(stateChangeMessage) {
      Logger_1["default"].info("SlaveListener:notifyStateChange, updating ".concat(this._slaves.length, " slaves that the new state is ").concat(stateChangeMessage.toState));
      this.sendToSlaves(MasterSlaveMessage_1.MasterSlaveMessage.updateSlaveState, stateChangeMessage);
    }
  }, {
    key: "_onDataFromSlave",
    value: function _onDataFromSlave(e) {
      var msg = e.data;
      if (msg.data.eventName === 'flushData') return;
      if (this._isScriptVersionMessage(msg)) {
        msg.data.eventName && this._dataQ.addToQueue(msg.data.eventName, msg.data.data, false);
        return;
      }
      msg.data.eventName && this._dataQ.addToQueue(msg.data.eventName, msg.data.data);
    }
  }, {
    key: "_isScriptVersionMessage",
    value: function _isScriptVersionMessage(msg) {
      if (msg.data.eventName === 'static_fields' && msg.msgType === 'dataFromSlave') {
        return msg.data && msg.data.data && (msg.data.data[0] === 'slave_version_client' || msg.data.data[0] === 'device_source');
      }
      return false;
    }
  }, {
    key: "_onRegisterSlave",
    value: function _onRegisterSlave(e) {
      Logger_1["default"].info("SlaveListener:_onRegisterSlave - slave registered, origin ".concat(e.origin));
      this._slaves.push({
        source: e.source,
        origin: e.origin
      });
      e.source.postMessage({
        msgType: 'updateSlaveConf',
        data: this._configurationRepository.getAll()
      }, e.origin);
    }
  }, {
    key: "_onLogPerfSlave",
    value: function _onLogPerfSlave(e) {
      var msg = e.data;
      if (msg.data.eventName === 'flushData') return;
      // when the slave is unloaded its DataQ sends a flushData message ("data":[{"eventName":"flushData"}])
      // which is not relevant to the main
      msg.data.eventName && this._logPerfDataQ.addToQueue(msg.data.eventName, msg.data.data);
    }
    /**
     * Handle notification from slave about a context update.
     * @param e
     */
  }, {
    key: "_onUpdateMasterContext",
    value: function _onUpdateMasterContext(e) {
      Logger_1["default"].debug('SlaveListener:_onUpdateMasterContext');
      var msg = e.data;
      this._contextMgr.setContext(msg.data);
    }
    /**
     * Handle notification from slave about a reset session detection.
     * @param e
     */
  }, {
    key: "_onResetSessionTriggerFromSlave",
    value: function _onResetSessionTriggerFromSlave(e) {
      Logger_1["default"].debug('SlaveListener:_onResetSessionTriggerFromSlave');
      var msg = e.data;
      this.onResetSessionTrigger.publish(msg.data);
    }
    /**
     * Handle notification from slave about a mouse challenge detection.
     * @param e
     */
  }, {
    key: "_onMouseChallengeTriggerFromSlave",
    value: function _onMouseChallengeTriggerFromSlave(e) {
      Logger_1["default"].debug('SlaveListener:_onMouseChallengeTriggerFromSlave');
      var msg = e.data;
      this.onMouseChallengeTrigger.publish(msg.data);
    }
  }]);
}();
exports["default"] = SlaveListener;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/services/StandardCustomInputEmitter.js":
/*!****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/services/StandardCustomInputEmitter.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var StandardCustomInputEmitter = /*#__PURE__*/function () {
  function StandardCustomInputEmitter(messageBus, eventAggregator, utils) {
    var _this = this;
    _classCallCheck(this, StandardCustomInputEmitter);
    _defineProperty(this, "mousemove", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.CustomInputElement, e);
    });
    _defineProperty(this, "keydown", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.CustomInputElement, e);
    });
    _defineProperty(this, "mouseleave", function (e) {
      _this._eventAggregator.removeEventListener(e.target, 'mousemove', _this.mousemove);
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.CustomInputElement, e);
    });
    _defineProperty(this, "mouseup", function (e) {
      _this._eventAggregator.removeEventListener(e.target, 'mousemove', _this.mousemove);
      _this._eventAggregator.removeEventListener(e.target, 'mouseleave', _this.mouseleave);
    });
    _defineProperty(this, "mousedown", function (e) {
      _this._eventAggregator.addEventListener(e.target, 'mousemove', _this.mousemove);
      _this._eventAggregator.addEventListener(e.target, 'mouseleave', _this.mouseleave);
      _this._eventAggregator.addEventListener(e.target, 'mouseup', _this.mouseup);
      _this._eventAggregator.addEventListener(e.target, 'keydown', _this.keydown);
    });
    _defineProperty(this, "handleFocus", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.CustomInputElement, e);
    });
    _defineProperty(this, "handleMouseEnter", function (e) {
      _this._eventAggregator.addEventListener(e.target, 'mousedown', _this.mousedown);
    });
    _defineProperty(this, "handleOnClickEvents", function () {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.CustomInputElement, _this._mainElm);
    });
    this._messageBus = messageBus;
    this._eventAggregator = eventAggregator;
    this._utils = utils;
    this._elementsBindingWMap = new WeakMap();
    this.customInputEventListener = [{
      event: 'mouseenter',
      handler: this.handleMouseEnter
    }, {
      event: 'focus',
      handler: this.handleFocus
    }];
    this.defaultOnClickEventListener = [{
      event: 'click',
      handler: this.handleOnClickEvents
    }];
    this._mainElm = '';
    this._mainTagName = ['SPAN', 'DIV'];
    this._btnTagName = 'BUTTON';
    this._btnInnerText = ['+', '-'];
  }
  return _createClass(StandardCustomInputEmitter, [{
    key: "start",
    value: function start(elements) {
      var _this2 = this;
      if (elements) {
        elements.forEach(function (element) {
          if (_this2._elementsBindingWMap.has(element)) {
            // already binded
            return;
          }
          if (element !== null && element !== void 0 && element.tagName && _this2._mainTagName.includes(element.tagName)) {
            _this2._mainElm = element;
            _this2.customInputEventListener.forEach(function (defaultEvent) {
              _this2._eventAggregator.addEventListener(element, defaultEvent.event, defaultEvent.handler);
            });
            _this2._elementsBindingWMap.set(element, {
              isBinded: true,
              listeners: [_this2.handleMouseEnter, _this2.handleFocus],
              isUsingJQuery: false
            });
          }
          if (element !== null && element !== void 0 && element.tagName && element.tagName === _this2._btnTagName || element !== null && element !== void 0 && element.innerText && _this2._btnInnerText.includes(element.innerText)) {
            _this2.defaultOnClickEventListener.forEach(function (defaultEvent) {
              _this2._eventAggregator.addEventListener(element, defaultEvent.event, defaultEvent.handler);
            });
            _this2._elementsBindingWMap.set(element, {
              isBinded: true,
              listeners: [_this2.handleOnClickEvents],
              isUsingJQuery: false
            });
          }
        });
      }
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (element) {
        var elementBinding = _this3._elementsBindingWMap.get(element);
        if (!(elementBinding !== null && elementBinding !== void 0 && elementBinding.isBinded)) {
          return;
        }
        if (element !== null && element !== void 0 && element.tagName && _this3._mainTagName.includes(element.tagName)) {
          _this3.customInputEventListener.forEach(function (defaultEvent) {
            _this3._eventAggregator.removeEventListener(element, defaultEvent.event, defaultEvent.handler);
          });
        }
        if (element !== null && element !== void 0 && element.tagName && element.tagName === _this3._btnTagName || element !== null && element !== void 0 && element.innerText && _this3._btnInnerText.includes(element.innerText)) {
          _this3.defaultOnClickEventListener.forEach(function (defaultEvent) {
            _this3._eventAggregator.removeEventListener(element, defaultEvent.event, defaultEvent.handler);
          });
        }
        _this3._elementsBindingWMap["delete"](element);
      });
    }
  }]);
}();
exports["default"] = StandardCustomInputEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/services/StandardInputEventsEmitter.js":
/*!****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/services/StandardInputEventsEmitter.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var StandardInputEventsEmitter = /*#__PURE__*/function () {
  /**
   * Constructs a new Input Events Emitter that supports emitting
   * input, focus and blur events
   */
  function StandardInputEventsEmitter(messageBus, EventAggregator, utils) {
    var _this = this;
    _classCallCheck(this, StandardInputEventsEmitter);
    /**
     *
     * @param e
     */
    _defineProperty(this, "handleInputEvents", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.StandardInputEvent, e);
    });
    /**
     *
     * @param e
     */
    _defineProperty(this, "handleFocusEvents", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.StandardInputFocusEvent, e);
    });
    /**
     *
     * @param e
     */
    _defineProperty(this, "handleBlurEvents", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.StandardInputBlurEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
    // Stores already binded elements
    this._elementBindingWMap = new WeakMap();
    this._utils = utils;
    this.defaultInputEventListener = [{
      event: 'input',
      handler: this.handleInputEvents
    }, {
      event: 'focus',
      handler: this.handleFocusEvents
    }, {
      event: 'blur',
      handler: this.handleBlurEvents
    }];
  }
  return _createClass(StandardInputEventsEmitter, [{
    key: "start",
    value: function start(elements, context, shouldSkipElement) {
      var _this2 = this;
      elements.forEach(function (elem) {
        if (_this2._elementBindingWMap.has(elem)) {
          // already binded
          return;
        }
        var finalEvents = [];
        // Custom behavior of input event binding for special elements that should not report input event
        // This logic is currently related to input events only and supports the SyntheticParsely (parselyjs) assertion
        if (typeof shouldSkipElement !== 'undefined') {
          if (typeof shouldSkipElement.func === 'function' && Array.isArray(shouldSkipElement.allowedEvents) && shouldSkipElement.allowedEvents.length > 0) {
            // If provided func asserts this element should be skipped, move forward with allowed events only
            if (shouldSkipElement.func(context, elem)) {
              _this2.defaultInputEventListener.forEach(function (event) {
                if (shouldSkipElement.allowedEvents.includes(event.event)) {
                  finalEvents.push(event);
                }
              });
            } else {
              finalEvents = Array.from(_this2.defaultInputEventListener);
            }
          }
        } else {
          finalEvents = Array.from(_this2.defaultInputEventListener);
        }
        finalEvents.forEach(function (defaultEvent) {
          _this2._eventAggregator.addEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this2._elementBindingWMap.set(elem, {
          isBinded: true,
          listeners: [_this2.handleInputEvents, _this2.handleFocusEvents, _this2.handleBlurEvents],
          isUsingJQuery: false
        });
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (elem) {
        var elementBinding = _this3._elementBindingWMap.get(elem);
        if (!elementBinding || !elementBinding.isBinded) {
          return;
        }
        _this3.defaultInputEventListener.forEach(function (defaultEvent) {
          _this3._eventAggregator.removeEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this3._elementBindingWMap["delete"](elem);
      });
    }
    /**
     * Includes support for standard EventAggregator and jQuery utils legacy event listener
     * @param element
     * @param isUseJQuery
     */
  }, {
    key: "addElementEvents",
    value: function addElementEvents(element) {
      var _this4 = this;
      var isUseJQuery = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      if (this._elementBindingWMap.has(element)) {
        // already binded
        return;
      }
      if (isUseJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          Logger_1["default"].error('Unable to add event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultInputEventListener.forEach(function (defaultEvent) {
          _this4._utils.JQueryUtils.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultInputEventListener.forEach(function (defaultEvent) {
          _this4._eventAggregator.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap.set(element, {
        isBinded: true,
        listeners: [this.handleInputEvents, this.handleFocusEvents, this.handleBlurEvents],
        isUsingJQuery: isUseJQuery
      });
    }
  }, {
    key: "removeElementEvents",
    value: function removeElementEvents(element) {
      var _this5 = this;
      var elementBinding = this._elementBindingWMap.get(element);
      if (!elementBinding || !elementBinding.isBinded) {
        return;
      }
      if (elementBinding.isUsingJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          Logger_1["default"].error('Unable to remove event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultInputEventListener.forEach(function (defaultEvent) {
          _this5._utils.JQueryUtils.removeEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultInputEventListener.forEach(function (defaultEvent) {
          _this5._eventAggregator.removeEventListener(elements, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap["delete"](element);
    }
  }]);
}();
exports["default"] = StandardInputEventsEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/services/StandardOnChangeEventsEmitter.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/services/StandardOnChangeEventsEmitter.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var StandardOnChangeEventsEmitter = /*#__PURE__*/function () {
  /**
   * Constructs a new OnChange Events Emitter that supports emitting
   * change events
   */
  function StandardOnChangeEventsEmitter(messageBus, EventAggregator, CDUtils) {
    var _this = this;
    _classCallCheck(this, StandardOnChangeEventsEmitter);
    /**
     *
     * @param e
     */
    _defineProperty(this, "handleOnChangeEvents", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.StandardOnSelectEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
    // Stores already binded elements
    this._elementBindingWMap = new WeakMap();
    this._utils = CDUtils;
    this.defaultOnChangeEventListener = [{
      event: 'change',
      handler: this.handleOnChangeEvents
    }];
  }
  return _createClass(StandardOnChangeEventsEmitter, [{
    key: "start",
    value: function start(elements) {
      var _this2 = this;
      elements.forEach(function (elem) {
        if (_this2._elementBindingWMap.has(elem)) {
          // already binded
          return;
        }
        _this2.defaultOnChangeEventListener.forEach(function (defaultEvent) {
          _this2._eventAggregator.addEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this2._elementBindingWMap.set(elem, {
          isBinded: true,
          listeners: [_this2.handleOnChangeEvents],
          isUsingJQuery: false
        });
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (elem) {
        var elementBinding = _this3._elementBindingWMap.get(elem);
        if (!elementBinding || !elementBinding.isBinded) {
          return;
        }
        _this3.defaultOnChangeEventListener.forEach(function (defaultEvent) {
          _this3._eventAggregator.removeEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this3._elementBindingWMap["delete"](elem);
      });
    }
  }, {
    key: "addElementEvents",
    value: function addElementEvents(element) {
      var _this4 = this;
      var isUseJQuery = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      if (this._elementBindingWMap.has(element)) {
        // already binded
        return;
      }
      if (isUseJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          Logger_1["default"].error('Unable to add event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultOnChangeEventListener.forEach(function (defaultEvent) {
          _this4._utils.JQueryUtils.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultOnChangeEventListener.forEach(function (defaultEvent) {
          _this4._eventAggregator.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap.set(element, {
        isBinded: true,
        listeners: [this.handleOnChangeEvents],
        isUsingJQuery: isUseJQuery
      });
    }
  }, {
    key: "removeElementEvents",
    value: function removeElementEvents(element) {
      var _this5 = this;
      var elementBinding = this._elementBindingWMap.get(element);
      if (!elementBinding || !elementBinding.isBinded) {
        return;
      }
      if (elementBinding.isUsingJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          Logger_1["default"].error('Unable to remove event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultOnChangeEventListener.forEach(function (defaultEvent) {
          _this5._utils.JQueryUtils.removeEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultOnChangeEventListener.forEach(function (defaultEvent) {
          _this5._eventAggregator.removeEventListener(elements, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap["delete"](element);
    }
  }]);
}();
exports["default"] = StandardOnChangeEventsEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/services/StandardOnClickEventsEmitter.js":
/*!******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/services/StandardOnClickEventsEmitter.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var StandardOnClickEventsEmitter = /*#__PURE__*/function () {
  /**
   * Constructs a new OnClick Events Emitter that supports emitting
   * click events
   */
  function StandardOnClickEventsEmitter(messageBus, EventAggregator, utils) {
    var _this = this;
    _classCallCheck(this, StandardOnClickEventsEmitter);
    _defineProperty(this, "handleOnClickEvents", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.StandardOnClickEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
    // Stores already binded elements
    this._elementBindingWMap = new WeakMap();
    this._utils = utils;
    this.defaultOnClickEventListener = [{
      event: 'click',
      handler: this.handleOnClickEvents
    }];
  }
  return _createClass(StandardOnClickEventsEmitter, [{
    key: "start",
    value: function start(elements) {
      var _this2 = this;
      elements.forEach(function (elem) {
        if (_this2._elementBindingWMap.has(elem)) {
          // already binded
          return;
        }
        _this2.defaultOnClickEventListener.forEach(function (defaultEvent) {
          _this2._eventAggregator.addEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this2._elementBindingWMap.set(elem, {
          isBinded: true,
          listeners: [_this2.handleOnClickEvents],
          isUsingJQuery: false
        });
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (elem) {
        var elementBinding = _this3._elementBindingWMap.get(elem);
        if (!elementBinding || !elementBinding.isBinded) {
          return;
        }
        _this3.defaultOnClickEventListener.forEach(function (defaultEvent) {
          _this3._eventAggregator.removeEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this3._elementBindingWMap["delete"](elem);
      });
    }
  }, {
    key: "addElementEvents",
    value: function addElementEvents(element) {
      var _this4 = this;
      var isUseJQuery = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      if (this._elementBindingWMap.has(element)) {
        // already binded
        return;
      }
      if (isUseJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          Logger_1["default"].error('Unable to add event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultOnClickEventListener.forEach(function (defaultEvent) {
          _this4._utils.JQueryUtils.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultOnClickEventListener.forEach(function (defaultEvent) {
          _this4._eventAggregator.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap.set(element, {
        isBinded: true,
        listeners: [this.handleOnClickEvents],
        isUsingJQuery: isUseJQuery
      });
    }
  }, {
    key: "removeElementEvents",
    value: function removeElementEvents(element) {
      var _this5 = this;
      var elementBinding = this._elementBindingWMap.get(element);
      if (!elementBinding || !elementBinding.isBinded) {
        return;
      }
      if (elementBinding.isUsingJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          Logger_1["default"].error('Unable to remove event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultOnClickEventListener.forEach(function (defaultEvent) {
          _this5._utils.JQueryUtils.removeEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultOnClickEventListener.forEach(function (defaultEvent) {
          _this5._eventAggregator.removeEventListener(elements, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap["delete"](element);
    }
  }]);
}();
exports["default"] = StandardOnClickEventsEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/services/StandardOnFormEventsEmitter.js":
/*!*****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/services/StandardOnFormEventsEmitter.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
var StandardOnFormEventsEmitter = /*#__PURE__*/function () {
  /**
   * Constructs a new OnForm Events Emitter that supports emitting
   * submit events
   */
  function StandardOnFormEventsEmitter(messageBus, EventAggregator, CDUtils) {
    var _this = this;
    _classCallCheck(this, StandardOnFormEventsEmitter);
    /**
     *
     * @param e
     */
    _defineProperty(this, "handleOnFormSubmitEvents", function (e) {
      _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.StandardOnFormSubmitEvent, e);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
    // Stores already binded elements
    this._elementBindingWMap = new WeakMap();
    this._utils = CDUtils;
    this.defaultOnFormEventListener = [{
      event: 'submit',
      handler: this.handleOnFormSubmitEvents
    }];
  }
  return _createClass(StandardOnFormEventsEmitter, [{
    key: "start",
    value: function start(elements) {
      var _this2 = this;
      elements.forEach(function (elem) {
        if (_this2._elementBindingWMap.has(elem)) {
          // already binded
          return;
        }
        _this2.defaultOnFormEventListener.forEach(function (defaultEvent) {
          _this2._eventAggregator.addEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this2._elementBindingWMap.set(elem, {
          isBinded: true,
          listeners: [_this2.handleOnFormSubmitEvents],
          isUsingJQuery: false
        });
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      var _this3 = this;
      elements.forEach(function (elem) {
        var elementBinding = _this3._elementBindingWMap.get(elem);
        if (!elementBinding || !elementBinding.isBinded) {
          return;
        }
        _this3.defaultOnFormEventListener.forEach(function (defaultEvent) {
          _this3._eventAggregator.removeEventListener(elem, defaultEvent.event, defaultEvent.handler);
        });
        _this3._elementBindingWMap["delete"](elem);
      });
    }
  }, {
    key: "addElementEvents",
    value: function addElementEvents(element) {
      var _this4 = this;
      var isUseJQuery = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      if (this._elementBindingWMap.has(element)) {
        // already binded
        return;
      }
      if (isUseJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          Logger_1["default"].error('Unable to add event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultOnFormEventListener.forEach(function (defaultEvent) {
          _this4._utils.JQueryUtils.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultOnFormEventListener.forEach(function (defaultEvent) {
          _this4._eventAggregator.addEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap.set(element, {
        isBinded: true,
        listeners: [this.handleOnFormSubmitEvents],
        isUsingJQuery: isUseJQuery
      });
    }
  }, {
    key: "removeElementEvents",
    value: function removeElementEvents(element) {
      var _this5 = this;
      var elementBinding = this._elementBindingWMap.get(element);
      if (!elementBinding || !elementBinding.isBinded) {
        return;
      }
      if (elementBinding.isUsingJQuery) {
        if (!this._utils.JQueryUtils.isJQueryAvailable()) {
          Logger_1["default"].error('Unable to remove event listeners for element using jQuery because jQuery is not available');
          return;
        }
        this.defaultOnFormEventListener.forEach(function (defaultEvent) {
          _this5._utils.JQueryUtils.removeEventListener(element, defaultEvent.event, defaultEvent.handler);
        });
      } else {
        this.defaultOnFormEventListener.forEach(function (defaultEvent) {
          _this5._eventAggregator.removeEventListener(elements, defaultEvent.event, defaultEvent.handler);
        });
      }
      this._elementBindingWMap["delete"](element);
    }
  }]);
}();
exports["default"] = StandardOnFormEventsEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/services/SyntheticAutotabInputEventsHandler.js":
/*!************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/services/SyntheticAutotabInputEventsHandler.js ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var SyntheticInputEventsHandlerBase_1 = __importDefault(__webpack_require__(/*! ./SyntheticInputEventsHandlerBase */ "./dist/js-sdk-legacy/src/main/services/SyntheticInputEventsHandlerBase.js"));
/**
 * Produce synthetic input events from keypress events
 */
var SyntheticAutotabInputEventsHandler = /*#__PURE__*/function (_SyntheticInputEvents) {
  function SyntheticAutotabInputEventsHandler() {
    _classCallCheck(this, SyntheticAutotabInputEventsHandler);
    return _callSuper(this, SyntheticAutotabInputEventsHandler, arguments);
  }
  _inherits(SyntheticAutotabInputEventsHandler, _SyntheticInputEvents);
  return _createClass(SyntheticAutotabInputEventsHandler, [{
    key: "start",
    value: function start(elements, context) {
      var _this = this;
      elements.forEach(function (elem) {
        if (!_this.isJQueryDataSupported(context) || !_this.hasjQueryAutoTab(elem, context)) return;
        _this.registerElement(elem, context);
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      this.unregisterElements(elements);
    }
    /**
     * The purpose of this method is to try and fetch jQuery registered
     * events and report if autotab is detected.
     * @returns {boolean}
     */
  }, {
    key: "hasjQueryAutoTab",
    value: function hasjQueryAutoTab(element, frame) {
      var jQueryEvents = frame.jQuery._data(element, 'events');
      if (typeof jQueryEvents === 'undefined') return false;
      var targetEvents = Object.keys(frame.jQuery._data(element, 'events'));
      for (var i = 0; i < targetEvents.length; i++) {
        if (targetEvents[i].indexOf('autotab') !== -1) {
          return true;
        }
      }
      return false;
    }
  }, {
    key: "handleKeypressEvents",
    value: function handleKeypressEvents(event, frame) {
      if (!this.isJQueryDataSupported(frame) || !this.hasjQueryAutoTab(event.target, frame)) return;
      var jQueryMask = 'autotab';
      var inputType = 'insertText';
      var data = event.key;
      if (event.keyCode === 8) {
        // Prevent double input events report in case of autotab that reports both input event
        // and key event in case of pressing the backspace (keyCode 8)
        return;
      }
      this.publishEvent(event, jQueryMask, inputType, data);
    }
  }]);
}(SyntheticInputEventsHandlerBase_1["default"]);
exports["default"] = SyntheticAutotabInputEventsHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/services/SyntheticInputEventsHandlerBase.js":
/*!*********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/services/SyntheticInputEventsHandlerBase.js ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
/**
 * Produce synthetic input events from keypress events
 */
var SyntheticInputEventsHandlerBase = /*#__PURE__*/function () {
  function SyntheticInputEventsHandlerBase(messageBus, EventAggregator, CDUtils) {
    _classCallCheck(this, SyntheticInputEventsHandlerBase);
    _defineProperty(this, "isJQueryDataSupported", function (frame) {
      return !(!frame.jQuery || !frame.jQuery._data);
    });
    this._messageBus = messageBus;
    this._eventAggregator = EventAggregator;
    this._elementBindingWMap = new WeakMap();
    this._utils = CDUtils;
    this.defaultEventListener = [{
      event: 'keypress',
      handler: this.handleKeypressEvents.bind(this)
    }];
  }
  return _createClass(SyntheticInputEventsHandlerBase, [{
    key: "handleKeypressEvents",
    value: function handleKeypressEvents(event, frame) {}
  }, {
    key: "registerElement",
    value: function registerElement(element, frame) {
      var _this = this;
      if (this._elementBindingWMap.has(element)) {
        // already binded
        return;
      }
      var _listeners = {};
      this.defaultEventListener.forEach(function (defaultEvent) {
        var _listener = function _listener(e) {
          defaultEvent.handler(e, frame);
        };
        _listeners[defaultEvent.event] = _listener;
        _this._eventAggregator.addEventListener(element, defaultEvent.event, _listener);
      });
      this._elementBindingWMap.set(element, {
        isBinded: true,
        listeners: _listeners
      });
    }
  }, {
    key: "unregisterElements",
    value: function unregisterElements(elements) {
      var _this2 = this;
      elements.forEach(function (elem) {
        var elementBinding = _this2._elementBindingWMap.get(elem);
        if (!elementBinding || !elementBinding.isBinded) {
          return;
        }
        _this2.defaultEventListener.forEach(function (defaultEvent) {
          _this2._eventAggregator.removeEventListener(elem, defaultEvent.event, elementBinding.listeners[defaultEvent.event]);
        });
        _this2._elementBindingWMap["delete"](elem);
      });
    }
  }, {
    key: "publishEvent",
    value: function publishEvent(event, jqueryMask, inputType, data) {
      var inputEvent = {
        bubbles: true,
        cancelBubble: false,
        cancelable: false,
        composed: true,
        currentTarget: null,
        data: data,
        dataTransfer: null,
        defaultPrevented: false,
        detail: 0,
        eventPhase: 0,
        inputType: inputType,
        isComposing: false,
        isTrusted: true,
        jqueryMask: jqueryMask,
        returnValue: true,
        sourceCapabilities: null,
        srcElement: Object.assign(event.target || event.srcElement, {}),
        target: Object.assign(event.target, {}),
        timeStamp: event.timeStamp,
        type: 'input',
        view: null,
        which: 0
      };
      this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.SyntheticInputMaskEvent, inputEvent);
    }
  }]);
}();
exports["default"] = SyntheticInputEventsHandlerBase;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/services/SyntheticMaskInputEventsHandler.js":
/*!*********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/services/SyntheticMaskInputEventsHandler.js ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var SyntheticInputEventsHandlerBase_1 = __importDefault(__webpack_require__(/*! ./SyntheticInputEventsHandlerBase */ "./dist/js-sdk-legacy/src/main/services/SyntheticInputEventsHandlerBase.js"));
/**
 * Produce synthetic input events from keypress events
 */
var SyntheticMaskInputEventsHandler = /*#__PURE__*/function (_SyntheticInputEvents) {
  function SyntheticMaskInputEventsHandler() {
    _classCallCheck(this, SyntheticMaskInputEventsHandler);
    return _callSuper(this, SyntheticMaskInputEventsHandler, arguments);
  }
  _inherits(SyntheticMaskInputEventsHandler, _SyntheticInputEvents);
  return _createClass(SyntheticMaskInputEventsHandler, [{
    key: "start",
    value: function start(elements, frame) {
      var _this = this;
      frame = frame || window.self;
      elements.forEach(function (elem) {
        if (!_this.isJQueryDataSupported(frame) || !_this.hasMaskEventSupported(elem, frame)) return;
        _this.registerElement(elem, frame);
      });
    }
  }, {
    key: "stop",
    value: function stop(elements) {
      this.unregisterElements(elements);
    }
    /**
     * Detect whether the requested element has the "events" property
     * defined by the jQuery _data method
     * @param element
     * @param frame
     * @returns {boolean}
     */
  }, {
    key: "hasMaskEventSupported",
    value: function hasMaskEventSupported(element, frame) {
      var jQueryEvents = frame.jQuery._data(element, 'events');
      if (typeof jQueryEvents === 'undefined') return false;
      var targetEvents = Object.keys(jQueryEvents);
      for (var i = 0; i < targetEvents.length; i++) {
        if (targetEvents[i] === 'unmask') {
          return true;
        }
      }
      return false;
    }
    /**
     *
     * @param event
     * @param frame
     */
  }, {
    key: "handleKeypressEvents",
    value: function handleKeypressEvents(event, frame) {
      if (!this.isJQueryDataSupported(frame) || !this.hasMaskEventSupported(event.target, frame)) return;
      var jQueryMask = 'maskedInput';
      var inputType = 'insertText';
      var data = event.key;
      this.publishEvent(event, jQueryMask, inputType, data);
    }
  }]);
}(SyntheticInputEventsHandlerBase_1["default"]);
exports["default"] = SyntheticMaskInputEventsHandler;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/services/WindowMessageEventEmitter.js":
/*!***************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/services/WindowMessageEventEmitter.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var MessageBusEventType_1 = __webpack_require__(/*! ../events/MessageBusEventType */ "./dist/js-sdk-legacy/src/main/events/MessageBusEventType.js");
/**
 * Registers and emits window "message" events which are registered
 * on windows/frames
 */
var WindowMessageEventEmitter = /*#__PURE__*/function () {
  // User arguments() to dynamically extract the params names and have the container inject the dependencies based on
  // their keys
  function WindowMessageEventEmitter(messageBus, EventAggregator) {
    var _this = this;
    _classCallCheck(this, WindowMessageEventEmitter);
    _defineProperty(this, "handleWindowMessage", function (message) {
      message && _this._messageBus.publish(MessageBusEventType_1.MessageBusEventType.WindowMessageEvent, {
        message: message
      });
    });
    this._messageBus = messageBus;
    this._EventAggregator = EventAggregator;
    this._windowListeners = new WeakMap();
    this.defaultPostMessageEventListener = [{
      event: 'message',
      handler: this.handleWindowMessage
    }];
  }
  /**
   * @param {BrowserContext} browserContext
   */
  return _createClass(WindowMessageEventEmitter, [{
    key: "startObserver",
    value: function startObserver(browserContext) {
      var _this2 = this;
      if (this._windowListeners.has(browserContext.Context)) return;
      this.defaultPostMessageEventListener.forEach(function (defaultEvent) {
        _this2._EventAggregator.addEventListener(browserContext.Context, defaultEvent.event, defaultEvent.handler);
      });
      this._windowListeners.set(browserContext.Context, {
        isBinded: true,
        listeners: [this.handleWindowMessage]
      });
    }
    /**
     * @param {BrowserContext} browserContext
     */
  }, {
    key: "stopObserver",
    value: function stopObserver(browserContext) {
      var _this3 = this;
      var windowBinding = this._windowListeners.get(browserContext.Context);
      if (!windowBinding || !windowBinding.isBinded) {
        return;
      }
      this.defaultPostMessageEventListener.forEach(function (defaultEvent) {
        _this3._EventAggregator.removeEventListener(browserContext.Context, defaultEvent.event, defaultEvent.handler);
      });
      this._windowListeners["delete"](browserContext.Context);
    }
  }]);
}();
exports["default"] = WindowMessageEventEmitter;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/system/EventAggregator.js":
/*!***************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/system/EventAggregator.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var isPassiveSupported = false;
(function () {
  try {
    // Test via a getter in the options object to see if the passive property is accessed
    // browsers throw exception if addEventListener gets an object and not boolean for third param
    var opts = Object.defineProperty({}, 'passive', {
      get: function get() {
        isPassiveSupported = true;
      }
    });
    window.addEventListener('test', null, opts);
  } catch (e) {
    // no support for passive
  }
})();
/**
 * Static class for performing the actual binding between the element[s] and the handler
 */
var EventAggregator = /*#__PURE__*/function () {
  function EventAggregator() {
    _classCallCheck(this, EventAggregator);
  }
  return _createClass(EventAggregator, null, [{
    key: "addEventListener",
    value: function addEventListener(target, type, handler) {
      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      var isPassive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
      var isOnce = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;
      if (isPassiveSupported) {
        target.addEventListener(type, handler, {
          capture: isCapture,
          passive: isPassive,
          once: isOnce
        });
      } else if (target.addEventListener) {
        target.addEventListener(type, handler, isCapture);
      } else {
        target.attachEvent('on' + type, handler); // isCapture not supported in attachEvent
      }
    }
  }, {
    key: "removeEventListener",
    value: function removeEventListener(target, type, handler) {
      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      target.removeEventListener ? target.removeEventListener(type, handler, isCapture) : target.detachEvent('on' + type, handler);
    }
  }]);
}();
exports["default"] = EventAggregator;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/CDUtils.js":
/*!******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/CDUtils.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



var _CDUtils;
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var HttpRequestFactory_1 = __importDefault(__webpack_require__(/*! ../infrastructure/HttpRequestFactory */ "./dist/js-sdk-legacy/src/main/infrastructure/HttpRequestFactory.js"));
var ConfigurationDefaultValues_1 = __webpack_require__(/*! ../../worker/communication/ConfigurationDefaultValues */ "./dist/js-sdk-legacy/src/worker/communication/ConfigurationDefaultValues.js");
function isPassiveSupported() {
  var isPassive = false;
  try {
    // Test via a getter in the options object to see if the passive property is accessed
    // browsers throw exception if addEventListener gets an object and not boolean for third param
    var opts = Object.defineProperty({}, 'passive', {
      get: function get() {
        isPassive = true;
      }
    });
    window.addEventListener('test', null, opts);
  } catch (e) {
    // no support for passive
  }
  return isPassive;
}
/**
 * This function brings the original implementation of a function. Used for cases
 * that the website is overriding one of the window functions such as Date.now (PurePoint).
 * The function is only good for functions and objects on the window and not on the document since
 * it is not waiting for the iframe document to be in readyState == 4. If we will wait we will have to
 * make this function async and it breaks the flow of the code.
 */
var getNativeWindowFn = function () {
  var iFrame = null;
  return function (objectName, objectImplementation, callback) {
    var getNativeCode = function getNativeCode() {
      return objectImplementation;
    };
    var testNativeCode = function testNativeCode() {
      return objectImplementation.toString().indexOf('[native code]') > -1;
    };
    if (!testNativeCode()) {
      var timerInterval = 0;
      // a timer function to check if the contentWindow's readyState is complete
      var _timerFunction = function timerFunction() {
        if (iFrame.contentWindow) {
          var contentWindow = iFrame.contentWindow;
          var objPropsArray = objectName.split('.');
          var returnedObject = contentWindow;
          for (var objPropIndex = 0; objPropIndex < objPropsArray.length; objPropIndex++) {
            returnedObject = returnedObject[objPropsArray[objPropIndex]];
          }
          // document.documentElement.removeChild(iFrame);
          callback(returnedObject);
        } else if (timerInterval < 45) {
          // This part should never happen, since the iFrame.contentWindow should always exist, but...
          setTimeout(_timerFunction, timerInterval);
          timerInterval++;
        } else {
          // The iFrame is not loaded
          callback(getNativeCode()); // return the current obj
        }
      };
      if (!iFrame) {
        iFrame = document.createElement('IFRAME');
        //use sandbox to allow the minimum level of capability necessary for the content of the iframe
        //to do it's job
        iFrame.setAttribute('sandbox', 'allow-same-origin');
        iFrame.style.display = 'none';
        document.documentElement.appendChild(iFrame);
      }
      _timerFunction();
    } else {
      callback(getNativeCode());
    }
  };
}();
var CDUtils = /*#__PURE__*/function () {
  function CDUtils() {
    _classCallCheck(this, CDUtils);
  }
  return _createClass(CDUtils, null, [{
    key: "isUndefinedNull",
    value: function isUndefinedNull(x) {
      return x === null || x === undefined || typeof x === 'undefined';
    }
  }, {
    key: "isBoolean",
    value: function isBoolean(x) {
      return typeof x === 'boolean';
    }
  }, {
    key: "isNumber",
    value: function isNumber(x) {
      return typeof x === 'number';
    }
  }, {
    key: "addEventListener",
    value: function addEventListener(target, type, handler) {
      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      var isPassive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
      var isOnce = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;
      if (this.isPassiveSupported) {
        target.addEventListener(type, handler, {
          capture: isCapture,
          passive: isPassive,
          once: isOnce
        });
      } else if (target.addEventListener) {
        target.addEventListener(type, handler, isCapture);
      } else {
        target.attachEvent('on' + type, handler); // isCapture not supported in attachEvent
      }
    }
  }, {
    key: "removeEventListener",
    value: function removeEventListener(target, type, handler) {
      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      target.removeEventListener ? target.removeEventListener(type, handler, isCapture) : target.detachEvent('on' + type, handler);
    }
  }, {
    key: "hasProtocol",
    value: function hasProtocol(serverURL) {
      return serverURL.toLowerCase().startsWith('http://') || serverURL.toLowerCase().startsWith('https://');
    }
  }, {
    key: "clearTextFromNumbers",
    value: function clearTextFromNumbers(text) {
      if (text) {
        return text.replace(/(\d)/g, '*');
      }
      return '';
    }
  }, {
    key: "getDropDownListValues",
    value: function getDropDownListValues(selectElem, maskingService) {
      var options = [];
      for (var i = 0; i < selectElem.length; i++) {
        var optionTxt = selectElem.options[i].text || selectElem.options[i].value || '';
        options.push(maskingService.maskText(optionTxt, selectElem.id));
      }
      return options;
    }
  }, {
    key: "getDocUrl",
    value: function getDocUrl() {
      var winLocation = window.location;
      // we do not take the 'search' part since it may contain private data
      return winLocation.protocol + '//' + winLocation.hostname + (winLocation.port ? ':' + winLocation.port : '')
      // in case the pathname contains a series of numbers we fear that it may contain private data and we replace it
      + CDUtils.clearTextFromNumbers(winLocation.pathname);
    }
  }, {
    key: "getHash",
    value: function getHash(e) {
      // https://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/
      var r = 0;
      for (var i = 0, len = e.length; i < len; i++) {
        r = (r << 5) - r + e.charCodeAt(i);
        r &= r;
      }
      return r;
    }
  }, {
    key: "getTruncatedHash",
    value: function getTruncatedHash(e, index) {
      if (!e) {
        return '';
      }
      var hash = this.murmurhash3(e);
      return hash.toString().substring(index);
    }
    /**
     * Provide a digest method for the given algorithm.
     * @param algorithm
     * @returns {null|digestMethod} - the digest method for the given algorithm or null if not supported
     */
  }, {
    key: "getDigestMethod",
    value: function getDigestMethod(algorithm) {
      if (algorithm === 'SHA-256') {
        // window.crypto.subtle.digest is available in secure mode only
        if (window.crypto.subtle && window.crypto.subtle.digest) {
          var digestMethod = window.crypto.subtle.digest.bind(crypto.subtle);
          return digestMethod;
        }
      }
      return null;
    }
    /**
     * This function is used to hash the given key using SHA-256 algorithm.
     * @param key
     * @returns {Promise|Promise<string>|*}
     */
  }, {
    key: "digest_sha256",
    value: function digest_sha256(key) {
      var digestMethod = CDUtils.getDigestMethod('SHA-256');
      var msgUint8 = new TextEncoder().encode(key);
      if (digestMethod) {
        return digestMethod("SHA-256", msgUint8).then(function (hashBuffer) {
          var hashArray = Array.from(new Uint8Array(hashBuffer)); // convert buffer to byte array
          var hashHex = hashArray.map(function (b) {
            return b.toString(16).padStart(2, "0");
          }).join("");
          return hashHex;
        })["catch"](function () {
          return "";
        });
      } else {
        // The window.crypto.subtly.digest method IS NOT AVAILABLE in non-secure modes
        return new Promise(function (resolve) {
          resolve("");
        });
      }
    }
  }, {
    key: "murmurhash3",
    value: function murmurhash3(key, seed) {
      var h1;
      var h1b;
      var k1;
      var i;
      var remainder = key.length & 3; // key.length % 4
      var bytes = key.length - remainder;
      h1 = seed;
      var c1 = 0xcc9e2d51;
      var c2 = 0x1b873593;
      i = 0;
      while (i < bytes) {
        k1 = key.charCodeAt(i) & 0xff | (key.charCodeAt(++i) & 0xff) << 8 | (key.charCodeAt(++i) & 0xff) << 16 | (key.charCodeAt(++i) & 0xff) << 24;
        ++i;
        k1 = (k1 & 0xffff) * c1 + (((k1 >>> 16) * c1 & 0xffff) << 16) & 0xffffffff;
        k1 = k1 << 15 | k1 >>> 17;
        k1 = (k1 & 0xffff) * c2 + (((k1 >>> 16) * c2 & 0xffff) << 16) & 0xffffffff;
        h1 ^= k1;
        h1 = h1 << 13 | h1 >>> 19;
        h1b = (h1 & 0xffff) * 5 + (((h1 >>> 16) * 5 & 0xffff) << 16) & 0xffffffff;
        h1 = (h1b & 0xffff) + 0x6b64 + (((h1b >>> 16) + 0xe654 & 0xffff) << 16);
      }
      k1 = 0;
      switch (remainder) {
        case 3:
          k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;
          break;
        case 2:
          k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;
          break;
        case 1:
          k1 ^= key.charCodeAt(i) & 0xff;
          k1 = (k1 & 0xffff) * c1 + (((k1 >>> 16) * c1 & 0xffff) << 16) & 0xffffffff;
          k1 = k1 << 15 | k1 >>> 17;
          k1 = (k1 & 0xffff) * c2 + (((k1 >>> 16) * c2 & 0xffff) << 16) & 0xffffffff;
          h1 ^= k1;
          break;
        default:
        // Well this shouldn't happen!!!
      }
      h1 ^= key.length;
      h1 ^= h1 >>> 16;
      h1 = (h1 & 0xffff) * 0x85ebca6b + (((h1 >>> 16) * 0x85ebca6b & 0xffff) << 16) & 0xffffffff;
      h1 ^= h1 >>> 13;
      h1 = (h1 & 0xffff) * 0xc2b2ae35 + (((h1 >>> 16) * 0xc2b2ae35 & 0xffff) << 16) & 0xffffffff;
      h1 ^= h1 >>> 16;
      return h1 >>> 0;
    }
  }, {
    key: "generateUUID",
    value: function generateUUID() {
      var d = CDUtils.dateNow();
      var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = (d + Math.random() * 16) % 16 | 0;
        d = Math.floor(d / 16);
        return (c === 'x' ? r : r & 0x3 | 0x8).toString(16);
      });
      return uuid;
    }
    /**
     * Converts a json with event data to an array according to the order given in the arrMap.
     * Returns a new array
     * @param arrMap - the array with the prop names with the order
     * @param jsonData - the data to convert to array
     */
  }, {
    key: "convertToArrayByMap",
    value: function convertToArrayByMap(arrMap, jsonData) {
      var converted = [null];
      for (var i = 0, len = arrMap.length; i < len; i++) {
        converted[i + 1] = jsonData[arrMap[i]];
      }
      return converted;
    }
  }, {
    key: "getPostUrl",
    value: function getPostUrl(url, method, data, onSuccess, onError, withCredentials, timeout) {
      var httpRequest = HttpRequestFactory_1["default"].create();
      if (httpRequest instanceof self.XMLHttpRequest) {
        httpRequest.open(method, url, true);
        if (timeout !== undefined) {
          httpRequest.timeout = timeout;
        }
        httpRequest.withCredentials = withCredentials !== false;
        if (method === 'POST') {
          // get messages should not have content type, this causes options message
          httpRequest.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
        }
        httpRequest.onreadystatechange = function () {
          if (httpRequest.readyState === 4) {
            // 204 is no response, only relevant for non wups
            if (httpRequest.status === 204) {
              return;
            }
            if (httpRequest.status === 200) {
              onSuccess && onSuccess(httpRequest.responseText);
            } else {
              onError && onError(httpRequest.responseText);
            }
          }
        };
        httpRequest.ontimeout = function () {
          onError && onError('timeout', data);
        };
        httpRequest.send(data);
      } else {
        httpRequest.onload = function () {
          onSuccess && onSuccess(httpRequest.responseText);
        };
        httpRequest.onerror = function () {
          onError && onError();
        };
        httpRequest.onprogress = function () {};
        httpRequest.ontimeout = function () {};
        httpRequest.open(method, url, true);
        // This is a workaround in IE<10 bug that aborts Cross-Domain XHR sometimes. See Commit a2ccf977b75cabce7582b4cbb45a06caa5d08f86
        setTimeout(function () {
          httpRequest.send(data);
        }, 0);
      }
    }
  }, {
    key: "minutesToMilliseconds",
    value: function minutesToMilliseconds(minutes) {
      return minutes * 60 * 1000;
    }
  }, {
    key: "cutDecimalPointDigits",
    value: function cutDecimalPointDigits(number, lenOfDigits) {
      var prod = Math.pow(10, lenOfDigits);
      return Math.round(number * prod) / prod;
    }
  }]);
}();
_CDUtils = CDUtils;
_defineProperty(CDUtils, "scriptVersion", "@@scriptVersion");
_defineProperty(CDUtils, "isPassiveSupported", isPassiveSupported());
_defineProperty(CDUtils, "dateNow", Date.now);
_defineProperty(CDUtils, "setZeroTimeout", function () {
  // this is inside the returned function closure
  var timeouts = [];
  var windowId = 'Window_' + _CDUtils.generateUUID();
  // this is inside the returned function closure
  function receiveMessage(e) {
    if (e.data === windowId) {
      e.stopPropagation && e.stopPropagation();
      e.returnValue && (e.returnValue = false); // IE8
      e.cancelBubble && (e.cancelBubble = true); // IE8
      timeouts.shift()(); // executes the function stored in first element of timeouts array.
    }
  }
  _CDUtils.addEventListener(window, 'message', receiveMessage, true);
  // this is the function that will be called when setZeroTimeout is called
  return function (func) {
    timeouts.push(func);
    // We are using postMessage and not setTimeout with 0 since in FF there is a minimum time of 4ms
    window.postMessage(windowId, self.location.href);
  };
}());
_defineProperty(CDUtils, "asyncCall", function (thisParam) {
  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    args[_key - 1] = arguments[_key];
  }
  var me = this;
  _CDUtils.setZeroTimeout(function () {
    me.apply(thisParam || window, args);
  });
});
_defineProperty(CDUtils, "asyncTimeoutCall", function (thisParam) {
  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
    args[_key2 - 1] = arguments[_key2];
  }
  var me = this;
  setTimeout(function () {
    me.apply(thisParam || window, args);
  }, 0);
});
_defineProperty(CDUtils, "StorageUtils", {
  counter: 0,
  // safari outputs console error for security error on trying to reach storage when disabled
  getAndUpdateEventSequenceNumber: function getAndUpdateEventSequenceNumber() {
    return this.counter++;
  },
  deserialize: function deserialize(value) {
    if (typeof value !== 'string') {
      return null;
    }
    try {
      return JSON.parse(value);
    } catch (e) {
      return value || null;
    }
  },
  getFromLocalStorage: function getFromLocalStorage(key) {
    var useVal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;
    try {
      var data = this.deserialize(window.localStorage.getItem(key));
      if (!data) {
        return null;
      }
      // If time has expired we abort at this point with a null result
      var isExpired = data.exp && _CDUtils.dateNow() - data.time > data.exp;
      if (isExpired) {
        this.removeFromLocalStorage(key);
        return null;
      }
      if (useVal === undefined || useVal) {
        return data.val;
      }
      return data;
    } catch (e) {
      return null;
    }
  },
  saveToLocalStorage: function saveToLocalStorage(key, value, expiration) {
    var dataObj = {
      val: value
    };
    if (expiration) {
      dataObj.exp = expiration;
      dataObj.time = _CDUtils.dateNow();
    }
    try {
      // fails on safari private browsing
      window.localStorage.setItem(key, JSON.stringify(dataObj));
    } catch (e) {
      return null;
    }
    return dataObj;
  },
  removeFromLocalStorage: function removeFromLocalStorage(key) {
    try {
      window.localStorage.removeItem(key);
    } catch (e) {
      return null;
    }
  },
  setExpirationInLocalStorage: function setExpirationInLocalStorage(key, expirationTime) {
    var val = this.getFromLocalStorage(key);
    if (val === '' || val === null) {
      return ConfigurationDefaultValues_1.ConfigurationDefaultValues.VALUE_DID_NOT_EXIST;
    }
    return this.saveToLocalStorage(key, val, expirationTime) ? ConfigurationDefaultValues_1.ConfigurationDefaultValues.SUCCESS_IN_CHANGED_EXPIRATION : ConfigurationDefaultValues_1.ConfigurationDefaultValues.FAILURE_IN_CHANGED_EXPIRATION;
  },
  getFromSessionStorage: function getFromSessionStorage(key) {
    try {
      var data = this.deserialize(window.sessionStorage.getItem(key));
      if (!data) {
        return null;
      }
      return data;
    } catch (e) {
      return null;
    }
  },
  saveToSessionStorage: function saveToSessionStorage(key, value) {
    try {
      if (!value) {
        return window.sessionStorage.removeItem(key);
      }
      // fails on safari private browsing
      window.sessionStorage.setItem(key, JSON.stringify(value));
      return value;
    } catch (e) {
      return null;
    }
  },
  removeFromSessionStorage: function removeFromSessionStorage(key) {
    try {
      window.sessionStorage.removeItem(key);
    } catch (e) {
      return null;
    }
  },
  getCookie: function getCookie(key) {
    var result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie);
    return result ? decodeURIComponent(result[1]) : '';
  },
  setCookie: function setCookie(key, value, miliSec, isSecureSameSite) {
    // we are trying to set the cookie on the domain that will include also sub-domains.
    // But if the upper domain is a top level domain (e.g co.il) we will fail so we set on the current
    // host. See https://developers.livechatinc.com/blog/setting-cookies-to-subdomains-in-javascript/
    // Prepare the expires attribute of the cookie string
    var expiresAttribute = '';
    if (miliSec) {
      var d = new Date();
      d.setTime(d.getTime() + miliSec);
      expiresAttribute = '; expires=' + d.toUTCString();
    }
    var i = 0;
    var domainName = location.hostname;
    var domainParts = domainName.split('.');
    var domainAttribute = '';
    var isCookieSetSuccessfully = false;
    // Go over the domain sub labels until we either reach the end of the parts list or are able to get the cookie which means it was set successfully
    while (i <= domainParts.length - 1 && !isCookieSetSuccessfully) {
      // Get domain parts starting from end
      domainName = domainParts.slice(-1 - ++i).join('.');
      // If its localhost we don't define a domain attribute because it doesn't work and is not needed
      if (domainName === 'localhost') {
        domainAttribute = '';
      } else if (domainName !== '') {
        domainAttribute = '; domain=.' + domainName;
      }
      isCookieSetSuccessfully = this.setCookieWithAttributes(key, value, expiresAttribute, domainAttribute, isSecureSameSite);
    }
    // In case we failed setting the cookie until now we remove the domain attribute
    // so that the default host of the current document be used
    if (!isCookieSetSuccessfully) {
      domainAttribute = '';
      isCookieSetSuccessfully = this.setCookieWithAttributes(key, value, expiresAttribute, domainAttribute, isSecureSameSite);
    }
    return isCookieSetSuccessfully;
  },
  setCookieWithAttributes: function setCookieWithAttributes(key, value, expiresAttribute, domainAttribute, isSecureSameSite) {
    var sameSite = 'SameSite=None;';
    var secure = 'Secure';
    var cookieString = encodeURIComponent(key) + '=' + encodeURIComponent(value) + expiresAttribute + domainAttribute + '; path=/;';
    document.cookie = isSecureSameSite ? cookieString + " ".concat(sameSite, " ").concat(secure) : cookieString;
    return this.getCookie(key) === value;
  },
  setExpirationInCookie: function setExpirationInCookie(key, expirationTime) {
    var val = this.getCookie(key);
    if (val === '' || val === null) {
      return ConfigurationDefaultValues_1.ConfigurationDefaultValues.VALUE_DID_NOT_EXIST;
    }
    return this.setCookie(key, val, expirationTime) ? ConfigurationDefaultValues_1.ConfigurationDefaultValues.SUCCESS_IN_CHANGED_EXPIRATION : ConfigurationDefaultValues_1.ConfigurationDefaultValues.FAILURE_IN_CHANGED_EXPIRATION;
  },
  removeCookie: function removeCookie(key) {
    try {
      document.cookie = key + '=; Max-Age=0';
    } catch (e) {
      return null;
    }
  },
  validateBcId: function validateBcId(bcId) {
    // first part - optional timestamp and then the structure for GUID
    if (/^([0-9]{13,}-)?[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(bcId)) {
      return bcId;
    }
    return null;
  }
});
_defineProperty(CDUtils, "getNativeWindowFn", getNativeWindowFn);
_defineProperty(CDUtils, "JQueryUtils", {
  /**
   * Check if JQuery scripts are loaded
   * @returns {boolean}
   */
  isJQueryAvailable: function isJQueryAvailable() {
    return window.jQuery !== undefined;
  },
  /**
   * Add an event listener using jQuery
   * @param element
   * @param type
   * @param handler
   */
  addEventListener: function addEventListener(element, type, handler) {
    jQuery(element).on(type, handler);
  },
  /**
   * Remove an event listener using jQuery
   * @param element
   * @param type
   * @param handler
   */
  removeEventListener: function removeEventListener(element, type, handler) {
    jQuery(element).off(type, handler);
  }
});
exports["default"] = CDUtils;
(function dateNowFixer() {
  if (!Date.now) {
    CDUtils.dateNow = function now() {
      return new Date().getTime();
    };
  } else {
    getNativeWindowFn('Date.now', Date.now, function (dateNow) {
      CDUtils.dateNow = dateNow;
    });
  }
})();

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/DOMUtils.js":
/*!*******************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/DOMUtils.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
function isPassiveSupported() {
  var isPassive = false;
  try {
    // Test via a getter in the options object to see if the passive property is accessed
    // browsers throw exception if addEventListener gets an object and not boolean for third param
    var opts = Object.defineProperty({}, 'passive', {
      get: function get() {
        isPassive = true;
      }
    });
    window.addEventListener('test', null, opts);
  } catch (e) {
    // no support for passive
  }
  return isPassive;
}
var DOMUtils = /*#__PURE__*/function () {
  function DOMUtils() {
    _classCallCheck(this, DOMUtils);
  }
  return _createClass(DOMUtils, null, [{
    key: "addEventListener",
    value: function addEventListener(target, type, handler) {
      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      var isPassive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
      var isOnce = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;
      if (this.isPassiveSupported) {
        target.addEventListener(type, handler, {
          capture: isCapture,
          passive: isPassive,
          once: isOnce
        });
      } else if (target.addEventListener) {
        target.addEventListener(type, handler, isCapture);
      } else {
        target.attachEvent('on' + type, handler); // isCapture not supported in attachEvent
      }
    }
  }, {
    key: "removeEventListener",
    value: function removeEventListener(target, type, handler) {
      var isCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      target.removeEventListener ? target.removeEventListener(type, handler, isCapture) : target.detachEvent('on' + type, handler);
    }
    // getting the HTML so that it will also work on FF
  }, {
    key: "outerHTML",
    value: function outerHTML(node) {
      return node.outerHTML || new XMLSerializer().serializeToString(node);
    }
  }, {
    key: "onDocumentBody",
    value: function onDocumentBody(frame, callback) {
      if (frame.document.body) {
        callback();
      } else {
        window.addEventListener ? window.addEventListener('DOMContentLoaded', callback, true) : window.attachEvent('onload', callback); // Old IE does not support DOMContentLoaded
      }
    }
  }, {
    key: "onPageLoad",
    value: function onPageLoad(frame, callback) {
      DOMUtils.addEventListener(frame, 'load', callback, true);
      if (frame.contentWindow && frame.contentWindow.document.readyState === 'complete' || frame.document && frame.document.readyState === 'complete') {
        // since we still want to listen every time a frame is loaded
        callback();
      }
    }
  }, {
    key: "awaitWindowDocumentReady",
    value: function awaitWindowDocumentReady(contentWindow) {
      var _this = this;
      return new Promise(function (resolve, reject) {
        try {
          _this.onWindowDocumentReady(contentWindow, function () {
            resolve();
          });
        } catch (error) {
          reject(error);
        }
      });
    }
  }, {
    key: "onWindowDocumentReady",
    value: function onWindowDocumentReady(contentWindow, callback) {
      var eventType = window.addEventListener ? 'DOMContentLoaded' : 'load';
      // We consider both states good since they both mean the dom was already loaded and we can work on the document
      if (contentWindow.document.readyState === 'complete' || contentWindow.document.readyState === 'interactive') {
        callback();
      } else {
        var onLoaded = function onLoadedWindowEvent() {
          DOMUtils.removeEventListener(contentWindow, eventType, onLoaded, true);
          callback();
        };
        DOMUtils.addEventListener(contentWindow, eventType, onLoaded, true);
      }
    }
  }, {
    key: "isWindowDocumentReady",
    value: function isWindowDocumentReady(contentWindow) {
      return contentWindow && contentWindow.document.readyState === 'complete';
    }
  }, {
    key: "canAccessIFrame",
    value: function canAccessIFrame(iframe) {
      var html = null;
      try {
        // deal with older browsers
        var doc = iframe.contentDocument || iframe.contentWindow.document;
        html = doc.body.innerHTML;
      } catch (err) {
        // do nothing
      }
      return html !== null;
    }
    // Some browsers (for example IE11) have prefixed implementation of matches function but a pollyfill is not good enough
    // since in some cases the matches function is still missing (for example, removed nodes received from mutation observer)
    // so we use this function instead...
  }, {
    key: "matches",
    value: function matches(element, selector) {
      var matchesFunc = element.matches || element.matchesSelector || element.mozMatchesSelector || element.msMatchesSelector || element.oMatchesSelector || element.webkitMatchesSelector || function (s) {
        // Get the document from the element
        var currentDocument = this.document || this.ownerDocument;
        // If we don't have a document we can't match...
        if (!currentDocument) {
          return false;
        }
        var matches = currentDocument.querySelectorAll(s);
        var i = matches.length;
        while (--i >= 0) {
          // Get the current item and check if it equals the element
          // If item property is not available we use the index access (some old browsers have issues sometimes)
          var currentItem = matches.item ? matches.item(i) : matches[i];
          if (currentItem === this) {
            break;
          }
        }
        return i > -1;
      };
      return matchesFunc.call(element, selector);
    }
    //Check if the WebWorker supports fetch API: return true || false
  }, {
    key: "isWebWorkerFetchSupported",
    value: function isWebWorkerFetchSupported() {
      var request = "Request" in self;
      var fetchInSelf = "fetch" in self;
      //IE does not support the "Request" object at all, so the if statement is for IE browsers
      if (!request) return false;
      var keepAliveInRequestPrototype = "keepalive" in Request.prototype;
      return fetchInSelf && keepAliveInRequestPrototype;
    }
  }, {
    key: "isSubtleCryptoSupported",
    value: function isSubtleCryptoSupported() {
      var subtleCrypto = 'SubtleCrypto';
      return subtleCrypto in self;
    }
  }]);
}();
_defineProperty(DOMUtils, "isPassiveSupported", isPassiveSupported());
exports["default"] = DOMUtils;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/DataQ.js":
/*!****************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/DataQ.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ./log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
/**
 * Used for sending messages from main code to worker code
 * @param serverWorkerCommunicator
 * @param contextManager
 * @param intervalConfigKey
 * @param msgToWorker
 * @param passToWorkerInterval
 * @constructor
 */
var DataQ = /*#__PURE__*/function () {
  function DataQ(domUtils, serverWorkerCommunicator, contextManager, intervalConfigKey, msgToWorker, passToWorkerInterval) {
    var _this = this;
    _classCallCheck(this, DataQ);
    _defineProperty(this, "_dataOrigin", 'BC');
    this._serverWorkerCommunicator = serverWorkerCommunicator;
    this._contextManager = contextManager;
    this._passToWorkerInterval = passToWorkerInterval || 0; // 0 means no interval, pass directly
    this._intervalConfigKey = intervalConfigKey;
    this._msgToWorker = msgToWorker;
    this._Q = [];
    if (this._passToWorkerInterval) {
      this._intervalId = setInterval(this._sendQToServerWorker.bind(this), this._passToWorkerInterval);
    }
    // Make sure no data is left unsent when refreshing/moving window the window,
    // the worker is suppose to still be running
    domUtils.addEventListener(window, 'beforeunload', function () {
      _this._onUnload();
    }, true);
  }
  return _createClass(DataQ, [{
    key: "addToQueue",
    value: function addToQueue(name, data, addCtxId, isImmediateWup) {
      addCtxId = !!(addCtxId === undefined || addCtxId === null || addCtxId === true);
      // the data is not array when sending logs
      addCtxId && data.push && (data[0] = this._contextManager.contextHash); // always in the 0 index
      if (this._passToWorkerInterval !== 0) {
        this._Q.push({
          eventName: name,
          data: data,
          shouldFlush: isImmediateWup,
          origin: this._dataOrigin
        });
        // Discovered in #TCI-121 - Bradesco report about performance issues with our system in Firefox
        // Therefore we try and limit the Q size
        if (isImmediateWup) {
          this._sendQToServerWorker();
        }
      } else {
        this._serverWorkerCommunicator.sendAsync(this._msgToWorker, {
          eventName: name,
          data: data,
          shouldFlush: isImmediateWup,
          origin: this._dataOrigin
        });
      }
    }
  }, {
    key: "updateWithConfig",
    value: function updateWithConfig(configurationRepository) {
      var newInterval = configurationRepository.get(this._intervalConfigKey);
      if (newInterval !== undefined && newInterval !== this._passToWorkerInterval) {
        this._passToWorkerInterval = newInterval;
        clearInterval(this._intervalId);
        this._intervalId = null;
        if (this._passToWorkerInterval !== 0) {
          this._intervalId = setInterval(this._sendQToServerWorker.bind(this), this._passToWorkerInterval);
        }
      }
    }
  }, {
    key: "flushAllMessages",
    value: function flushAllMessages() {
      // empty the queue and send the data to be first
      this._Q.push({
        eventName: 'flushData'
      });
      this._sendQToServerWorker();
    }
  }, {
    key: "registerOnPreSendToWorker",
    value: function registerOnPreSendToWorker(onPreSendToWorker) {
      this._onPreSendToWorker = onPreSendToWorker;
    }
  }, {
    key: "_sendQToServerWorker",
    value: function _sendQToServerWorker() {
      try {
        if (this._onPreSendToWorker) {
          this._onPreSendToWorker();
        }
        if (this._Q.length) {
          this._serverWorkerCommunicator.sendAsync(this._msgToWorker, this._Q);
          this._Q = []; // faster then splice...
        }
      } catch (error) {
        Logger_1["default"].error("Failed sending data to worker. ".concat(error));
        this._sendQInSingleMessagesToServerWorker();
      }
    }
    /**
     * Adds the data to the Queue like addToQueue() does, but without triggering any ServerCommunicator.sendAsync invocation.
     * Designed to be used by DevDebugDataQ which adds the aggregated debug-info data during onPreSentToWorker interception.
     */
  }, {
    key: "appendData",
    value: function appendData(name, data) {
      this._Q.push({
        eventName: name,
        data: data,
        shouldFlush: false,
        origin: this._dataOrigin
      });
    }
    /**
     * Sends the Q in single messages. Used in case of an error in sending one of the messages due to its content.
     * In this case we don't want to loss all the data so we separate the sending to single message at a time
     * @private
     */
  }, {
    key: "_sendQInSingleMessagesToServerWorker",
    value: function _sendQInSingleMessagesToServerWorker() {
      for (var i = 0; i < this._Q.length; i++) {
        try {
          this._serverWorkerCommunicator.sendAsync(this._msgToWorker, this._Q[i]);
        } catch (error) {
          Logger_1["default"].error("Failed sending single message data to worker. ".concat(error));
        }
      }
      this._Q = [];
    }
    /**
     * Clear queues and notify worker on window closing to verify all data will be sent to server
     */
  }, {
    key: "_onUnload",
    value: function _onUnload() {
      this.flushAllMessages();
    }
  }, {
    key: "filterOut",
    value: function filterOut(filter) {
      this._Q = this._Q.filter(filter);
    }
  }]);
}();
exports["default"] = DataQ;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/ElementStrengthen.js":
/*!****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/ElementStrengthen.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ElementStrengthen = exports.ElementStrengthenInstance = void 0;
var Logger_1 = __importDefault(__webpack_require__(/*! ../technicalServices/log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var ElementStrengthen = /*#__PURE__*/function () {
  function ElementStrengthen() {
    _classCallCheck(this, ElementStrengthen);
    this._weights = {
      input: 5,
      fieldset: 4,
      form: 3,
      textarea: 3,
      label: 2
    };
    this._interactiveElementsTag = ['input', 'fieldset', 'textarea', 'label'];
    this._classlist = ['container', 'wrapper', 'section', 'content', 'main-content', 'main_content'];
    this._containerTagName = ['main', 'article', 'aside', 'div'];
  }
  return _createClass(ElementStrengthen, [{
    key: "isElementVisible",
    value: function isElementVisible(el) {
      if (!(el instanceof HTMLElement)) return false;
      if (el.hasAttribute('hidden')) return false;
      var style = window.getComputedStyle(el);
      if (style.display === 'none' || style.visibility === 'hidden' || parseFloat(style.opacity) === 0) {
        return false;
      }
      // if it has no offset size AND no client rects, it's not visible
      var hasSize = el.offsetWidth > 0 || el.offsetHeight > 0;
      var hasClientRect = el.getClientRects().length > 0;
      if (!hasSize && !hasClientRect) {
        return false;
      }
      // ensure none of its ancestors hide it
      var parent = el.parentElement;
      while (parent) {
        var pStyle = window.getComputedStyle(parent);
        if (pStyle.display === 'none' || pStyle.visibility === 'hidden' || parent.hasAttribute('hidden')) {
          return false;
        }
        parent = parent.parentElement;
      }
      return true;
    }
  }, {
    key: "isInExcludedArea",
    value: function isInExcludedArea(element) {
      var currentElement = element;
      while (currentElement) {
        if (currentElement.tagName) {
          var tagName = currentElement.tagName.toLowerCase();
          if (tagName === 'footer' || tagName === 'header' || tagName === 'nav') {
            return true;
          }
        }
        currentElement = currentElement.parentElement;
      }
      return false;
    }
  }, {
    key: "isContainer",
    value: function isContainer(element) {
      var _this = this;
      var tagName = element.tagName.toLowerCase();
      var classList = element.className.split(' ');
      var ariaLabel = element.getAttribute('aria-label') ? "_".concat(element.getAttribute('aria-label')) : '';
      var dataAttributes = Array.from(element.attributes).filter(function (attr) {
        return attr.name.startsWith('data-');
      }).map(function (attr) {
        return "_".concat(attr.name);
      });
      if (this._containerTagName.includes(tagName)) {
        return true;
      }
      return classList.some(function (cls) {
        return _this._classlist.includes(cls);
      }) || element.hasAttribute('role') && element.getAttribute('role') === 'region' || ariaLabel.length > 0 || dataAttributes.length > 0;
    }
  }, {
    key: "isCustomElement",
    value: function isCustomElement(element) {
      if (typeof element.localName === 'string') {
        return element.localName.indexOf('-') > 0;
      }
      return false;
    }
  }, {
    key: "calculateScore",
    value: function calculateScore(element) {
      var weights = this._weights;
      var bonus = 0;
      if (element.id && element.id.includes('username')) {
        bonus = 20;
      } else if (element.name && element.name.includes('username')) {
        bonus = 10;
      }
      return weights[element.tagName.toLowerCase()] + bonus + (element.type === 'text' ? 10 : 0);
    }
  }, {
    key: "findInteractiveArea",
    value: function findInteractiveArea(document) {
      var _this2 = this;
      var interactiveElements = document.querySelectorAll(this._interactiveElementsTag);
      var areas = {};
      interactiveElements.forEach(function (element) {
        var _parent$className, _element$id;
        if (!_this2.isElementVisible(element) || _this2.isInExcludedArea(element)) return;
        var parent = element.parentElement;
        var parentKey = "".concat(parent.tagName, ".").concat(((_parent$className = parent.className) === null || _parent$className === void 0 ? void 0 : _parent$className.split(' ')[0]) || '');
        if (!areas[parentKey]) {
          areas[parentKey] = {
            score: 0,
            parent: parent,
            types: new Set()
          };
        }
        areas[parentKey].types.add(element.tagName.toLowerCase());
        areas[parentKey].score += _this2.calculateScore(element);
        areas[parentKey].score += (_element$id = element.id) !== null && _element$id !== void 0 && _element$id.includes('maincontent') ? 20 : 0;
        areas[parentKey].score -= element.disabled ? 20 : 0;
      });
      var maxArea = Object.values(areas).reduce(function (max, area) {
        return area.score + area.types.size * 2 > max.score ? area : max;
      }, {
        score: 0
      });
      return maxArea.parent;
    }
  }, {
    key: "findPotentialContainer",
    value: function findPotentialContainer(interactiveArea) {
      var currentElement = interactiveArea;
      var potentialContainer = null;
      while (currentElement && currentElement.tagName.toLowerCase() !== 'body') {
        if (this.isContainer(currentElement)) {
          var _currentElement;
          potentialContainer = currentElement;
          var tagName = (_currentElement = currentElement) === null || _currentElement === void 0 || (_currentElement = _currentElement.tagName) === null || _currentElement === void 0 ? void 0 : _currentElement.toLowerCase();
          var classList = currentElement.className.split(' ');
          if (tagName === 'div' && (classList.includes('containerWrapper') || classList.includes('container'))) {
            return currentElement;
          }
          if (this._containerTagName.includes(tagName) && tagName !== 'div') {
            return currentElement;
          }
        }
        currentElement = currentElement.parentElement;
      }
      return potentialContainer;
    }
  }, {
    key: "interactiveContainer",
    value: function interactiveContainer() {
      var interactiveArea = this.findInteractiveArea(document);
      if (interactiveArea) {
        var container = this.findPotentialContainer(interactiveArea);
        if (container) {
          return container;
        }
      } else {
        return Logger_1["default"].info("No significant interactive area.");
      }
    }
  }, {
    key: "getUniqueElementId",
    value: function getUniqueElementId(element, uniqueIDConfiguration) {
      var numToLimit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 30;
      if (!element || !uniqueIDConfiguration) return '';
      var componentsFormat = uniqueIDConfiguration.componentsFormat,
        hierarchyFormat = uniqueIDConfiguration.hierarchyFormat;
      if (!uniqueIDConfiguration.isTagEnabled(element.tagName)) {
        return '-1';
      }
      var interactiveArea = this.findInteractiveArea(document);
      var potentialContainer = interactiveArea ? this.findPotentialContainer(interactiveArea) : null;
      var containerInfo = potentialContainer ? "".concat(potentialContainer.tagName.toLowerCase(), "_").concat(potentialContainer.className || '') : '';
      var hierarchyPath = this._buildFullHierarchyPath(element, hierarchyFormat, numToLimit);
      var valuesMap = {
        "{tagName}": element.tagName.toLowerCase(),
        "{index}": "[".concat(this._getSiblingIndex(element), "]"),
        "{id}": element.id || '',
        "{className}": element.className || '',
        "{ariaLabel}": element.getAttribute('aria-label') || '',
        "{hierarchyPath}": hierarchyPath,
        "{containerInfo}": containerInfo
      };
      var uniqueID = componentsFormat;
      // Replace placeholders in the components format
      for (var _i = 0, _Object$entries = Object.entries(valuesMap); _i < _Object$entries.length; _i++) {
        var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),
          key = _Object$entries$_i[0],
          value = _Object$entries$_i[1];
        uniqueID = uniqueID.replace(key, value);
      }
      uniqueID = uniqueID
      // strip any {} placeholders
      .replace(/\{[^}]+\}/g, '')
      // collapse runs of _ or : into a single _
      .replace(/[_:]+/g, '_')
      // trim any leading OR trailing underscore (grouped alternation)
      .replace(/(^_|_$)/g, '');
      return uniqueID;
    }
  }, {
    key: "_getSiblingIndex",
    value: function _getSiblingIndex(element) {
      var _element$parentNode;
      return String(Array.from(((_element$parentNode = element.parentNode) === null || _element$parentNode === void 0 ? void 0 : _element$parentNode.children) || []).indexOf(element));
    }
  }, {
    key: "_buildFullHierarchyPath",
    value: function _buildFullHierarchyPath(element, hierarchyFormat, numToLimit) {
      var pathComponents = [];
      var currentElement = element.parentNode; // Start from parentNode
      var depth = 0;
      while (currentElement && ((_currentElement$tagNa = currentElement.tagName) === null || _currentElement$tagNa === void 0 ? void 0 : _currentElement$tagNa.toLowerCase()) !== 'body' && depth < numToLimit) {
        var _currentElement$tagNa, _currentElement$tagNa2;
        var tagName = (_currentElement$tagNa2 = currentElement.tagName) === null || _currentElement$tagNa2 === void 0 ? void 0 : _currentElement$tagNa2.toLowerCase();
        var index = this._getSiblingIndex(currentElement);
        // Replace placeholders in the hierarchy format
        var hierarchy = hierarchyFormat.replace("{tagName}", tagName ? tagName : '').replace("{index}", index >= 0 ? "[".concat(index, "]") : '');
        // Add additional attributes for uniqueness
        var attributes = [];
        if (currentElement.id) attributes.push(currentElement.id);
        if (currentElement.name) attributes.push(currentElement.name);
        if (currentElement.className) attributes.push(currentElement.className);
        if (attributes.length > 0) {
          hierarchy += "".concat(attributes.join(''));
        }
        pathComponents.unshift(hierarchy);
        currentElement = currentElement.parentNode instanceof ShadowRoot ? currentElement.parentNode.host : currentElement.parentElement;
        depth++;
      }
      return pathComponents.join('');
    }
  }, {
    key: "getUniqueElementXpath",
    value: function getUniqueElementXpath(element) {
      var numToLimit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Infinity;
      if (!element) return '';
      var path = [];
      var depth = 0;
      // Loop instead of recursion for better performance
      while (element && depth < numToLimit) {
        var tagName = element.tagName ? element.tagName.toLowerCase() : element.nodeName.toLowerCase();
        // If the element has an ID, use it, otherwise calculate sibling index
        if (element.id) {
          path.unshift("".concat(tagName, "#").concat(element.id));
        } else {
          var siblingIndex = 1;
          var sibling = element;
          // Find the position of this element among its siblings
          while (sibling.previousElementSibling) {
            sibling = sibling.previousElementSibling;
            siblingIndex++;
          }
          path.unshift("".concat(tagName, ":").concat(siblingIndex));
        }
        // Traverse through the shadow DOM host if the element is in a shadow root
        if (element.assignedSlot) {
          element = element.assignedSlot;
        } else if (element.parentNode instanceof ShadowRoot) {
          element = element.parentNode.host;
        } else {
          element = element.parentElement;
        }
        depth++;
      }
      return path.join('/');
    }
  }]);
}();
exports.ElementStrengthen = ElementStrengthen;
var ElementStrengthenInstance = Object.freeze(new ElementStrengthen());
exports.ElementStrengthenInstance = ElementStrengthenInstance;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/Hash.js":
/*!***************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/Hash.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports) {



/*
 * Based on https://github.com/karanlyons/murmurHash3.js/blob/a33d0723127e2e5415056c455f8aed2451ace208/murmurHash3.js
 */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.x64hash128 = void 0;
function getUTF8Bytes(input) {
  // Benchmark: https://jsbench.me/b6klaaxgwq/1
  // If you want to just count bytes, see solutions at https://jsbench.me/ehklab415e/1
  var result = new Uint8Array(input.length);
  for (var i = 0; i < input.length; i++) {
    // `charCode` is faster than encoding, so we prefer that when it's possible
    var charCode = input.charCodeAt(i);
    // In case of non-ASCII symbols we use proper encoding
    if (charCode > 127) {
      return new TextEncoder().encode(input);
    }
    result[i] = charCode;
  }
  return result;
}
/**
 * Adds two 64-bit values (provided as tuples of 32-bit values)
 * and updates (mutates) first value to write the result
 */
function x64Add(m, n) {
  var m0 = m[0] >>> 16,
    m1 = m[0] & 0xffff,
    m2 = m[1] >>> 16,
    m3 = m[1] & 0xffff;
  var n0 = n[0] >>> 16,
    n1 = n[0] & 0xffff,
    n2 = n[1] >>> 16,
    n3 = n[1] & 0xffff;
  var o0 = 0,
    o1 = 0,
    o2 = 0,
    o3 = 0;
  o3 += m3 + n3;
  o2 += o3 >>> 16;
  o3 &= 0xffff;
  o2 += m2 + n2;
  o1 += o2 >>> 16;
  o2 &= 0xffff;
  o1 += m1 + n1;
  o0 += o1 >>> 16;
  o1 &= 0xffff;
  o0 += m0 + n0;
  o0 &= 0xffff;
  m[0] = o0 << 16 | o1;
  m[1] = o2 << 16 | o3;
}
/**
 * Multiplies two 64-bit values (provided as tuples of 32-bit values)
 * and updates (mutates) first value to write the result
 */
function x64Multiply(m, n) {
  var m0 = m[0] >>> 16,
    m1 = m[0] & 0xffff,
    m2 = m[1] >>> 16,
    m3 = m[1] & 0xffff;
  var n0 = n[0] >>> 16,
    n1 = n[0] & 0xffff,
    n2 = n[1] >>> 16,
    n3 = n[1] & 0xffff;
  var o0 = 0,
    o1 = 0,
    o2 = 0,
    o3 = 0;
  o3 += m3 * n3;
  o2 += o3 >>> 16;
  o3 &= 0xffff;
  o2 += m2 * n3;
  o1 += o2 >>> 16;
  o2 &= 0xffff;
  o2 += m3 * n2;
  o1 += o2 >>> 16;
  o2 &= 0xffff;
  o1 += m1 * n3;
  o0 += o1 >>> 16;
  o1 &= 0xffff;
  o1 += m2 * n2;
  o0 += o1 >>> 16;
  o1 &= 0xffff;
  o1 += m3 * n1;
  o0 += o1 >>> 16;
  o1 &= 0xffff;
  o0 += m0 * n3 + m1 * n2 + m2 * n1 + m3 * n0;
  o0 &= 0xffff;
  m[0] = o0 << 16 | o1;
  m[1] = o2 << 16 | o3;
}
/**
 * Provides left rotation of the given int64 value (provided as tuple of two int32)
 * by given number of bits. Result is written back to the value
 */
function x64Rotl(m, bits) {
  var m0 = m[0];
  bits %= 64;
  if (bits === 32) {
    m[0] = m[1];
    m[1] = m0;
  } else if (bits < 32) {
    m[0] = m0 << bits | m[1] >>> 32 - bits;
    m[1] = m[1] << bits | m0 >>> 32 - bits;
  } else {
    bits -= 32;
    m[0] = m[1] << bits | m0 >>> 32 - bits;
    m[1] = m0 << bits | m[1] >>> 32 - bits;
  }
}
/**
 * Provides a left shift of the given int32 value (provided as tuple of [0, int32])
 * by given number of bits. Result is written back to the value
 */
function x64LeftShift(m, bits) {
  bits %= 64;
  if (bits === 0) {
    return;
  } else if (bits < 32) {
    m[0] = m[1] >>> 32 - bits;
    m[1] = m[1] << bits;
  } else {
    m[0] = m[1] << bits - 32;
    m[1] = 0;
  }
}
/**
 * Provides a XOR of the given int64 values(provided as tuple of two int32).
 * Result is written back to the first value
 */
function x64Xor(m, n) {
  m[0] ^= n[0];
  m[1] ^= n[1];
}
var F1 = [0xff51afd7, 0xed558ccd];
var F2 = [0xc4ceb9fe, 0x1a85ec53];
/**
 * Calculates murmurHash3's final x64 mix of that block and writes result back to the input value.
 * (`[0, h[0] >>> 1]` is a 33 bit unsigned right shift. This is the
 * only place where we need to right shift 64bit ints.)
 */
function x64Fmix(h) {
  var shifted = [0, h[0] >>> 1];
  x64Xor(h, shifted);
  x64Multiply(h, F1);
  shifted[1] = h[0] >>> 1;
  x64Xor(h, shifted);
  x64Multiply(h, F2);
  shifted[1] = h[0] >>> 1;
  x64Xor(h, shifted);
}
var C1 = [0x87c37b91, 0x114253d5];
var C2 = [0x4cf5ad43, 0x2745937f];
var M = [0, 5];
var N1 = [0, 0x52dce729];
var N2 = [0, 0x38495ab5];
/**
 * Given a string and an optional seed as an int, returns a 128 bit
 * hash using the x64 flavor of MurmurHash3, as an unsigned hex.
 * All internal functions mutates passed value to achieve minimal memory allocations and GC load
 *
 * Benchmark https://jsbench.me/p4lkpaoabi/1
 */
function x64hash128(input, seed) {
  var key = getUTF8Bytes(input);
  seed = seed || 0;
  var length = [0, key.length];
  var remainder = length[1] % 16;
  var bytes = length[1] - remainder;
  var h1 = [0, seed];
  var h2 = [0, seed];
  var k1 = [0, 0];
  var k2 = [0, 0];
  var i;
  for (i = 0; i < bytes; i = i + 16) {
    k1[0] = key[i + 4] | key[i + 5] << 8 | key[i + 6] << 16 | key[i + 7] << 24;
    k1[1] = key[i] | key[i + 1] << 8 | key[i + 2] << 16 | key[i + 3] << 24;
    k2[0] = key[i + 12] | key[i + 13] << 8 | key[i + 14] << 16 | key[i + 15] << 24;
    k2[1] = key[i + 8] | key[i + 9] << 8 | key[i + 10] << 16 | key[i + 11] << 24;
    x64Multiply(k1, C1);
    x64Rotl(k1, 31);
    x64Multiply(k1, C2);
    x64Xor(h1, k1);
    x64Rotl(h1, 27);
    x64Add(h1, h2);
    x64Multiply(h1, M);
    x64Add(h1, N1);
    x64Multiply(k2, C2);
    x64Rotl(k2, 33);
    x64Multiply(k2, C1);
    x64Xor(h2, k2);
    x64Rotl(h2, 31);
    x64Add(h2, h1);
    x64Multiply(h2, M);
    x64Add(h2, N2);
  }
  k1[0] = 0;
  k1[1] = 0;
  k2[0] = 0;
  k2[1] = 0;
  var val = [0, 0];
  switch (remainder) {
    case 15:
      val[1] = key[i + 14];
      x64LeftShift(val, 48);
      x64Xor(k2, val);
    // fallthrough
    case 14:
      val[1] = key[i + 13];
      x64LeftShift(val, 40);
      x64Xor(k2, val);
    // fallthrough
    case 13:
      val[1] = key[i + 12];
      x64LeftShift(val, 32);
      x64Xor(k2, val);
    // fallthrough
    case 12:
      val[1] = key[i + 11];
      x64LeftShift(val, 24);
      x64Xor(k2, val);
    // fallthrough
    case 11:
      val[1] = key[i + 10];
      x64LeftShift(val, 16);
      x64Xor(k2, val);
    // fallthrough
    case 10:
      val[1] = key[i + 9];
      x64LeftShift(val, 8);
      x64Xor(k2, val);
    // fallthrough
    case 9:
      val[1] = key[i + 8];
      x64Xor(k2, val);
      x64Multiply(k2, C2);
      x64Rotl(k2, 33);
      x64Multiply(k2, C1);
      x64Xor(h2, k2);
    // fallthrough
    case 8:
      val[1] = key[i + 7];
      x64LeftShift(val, 56);
      x64Xor(k1, val);
    // fallthrough
    case 7:
      val[1] = key[i + 6];
      x64LeftShift(val, 48);
      x64Xor(k1, val);
    // fallthrough
    case 6:
      val[1] = key[i + 5];
      x64LeftShift(val, 40);
      x64Xor(k1, val);
    // fallthrough
    case 5:
      val[1] = key[i + 4];
      x64LeftShift(val, 32);
      x64Xor(k1, val);
    // fallthrough
    case 4:
      val[1] = key[i + 3];
      x64LeftShift(val, 24);
      x64Xor(k1, val);
    // fallthrough
    case 3:
      val[1] = key[i + 2];
      x64LeftShift(val, 16);
      x64Xor(k1, val);
    // fallthrough
    case 2:
      val[1] = key[i + 1];
      x64LeftShift(val, 8);
      x64Xor(k1, val);
    // fallthrough
    case 1:
      val[1] = key[i];
      x64Xor(k1, val);
      x64Multiply(k1, C1);
      x64Rotl(k1, 31);
      x64Multiply(k1, C2);
      x64Xor(h1, k1);
    // fallthrough
  }
  x64Xor(h1, length);
  x64Xor(h2, length);
  x64Add(h1, h2);
  x64Add(h2, h1);
  x64Fmix(h1);
  x64Fmix(h2);
  x64Add(h1, h2);
  x64Add(h2, h1);
  return ("00000000" + (h1[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (h1[1] >>> 0).toString(16)).slice(-8) + ("00000000" + (h2[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (h2[1] >>> 0).toString(16)).slice(-8);
}
exports.x64hash128 = x64hash128;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/MessageBus.js":
/*!*********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/MessageBus.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function get() {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
  __setModuleDefault(result, mod);
  return result;
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDMap = __importStar(__webpack_require__(/*! ../infrastructure/CDMap */ "./dist/js-sdk-legacy/src/main/infrastructure/CDMap.js"));
var CDSet = __importStar(__webpack_require__(/*! ../infrastructure/CDSet */ "./dist/js-sdk-legacy/src/main/infrastructure/CDSet.js"));
/**
 *
 */
var MessageBus = /*#__PURE__*/function () {
  function MessageBus() {
    _classCallCheck(this, MessageBus);
    this.subscribers = CDMap.create();
  }
  /**
   *
   * @param messageType
   * @param handler
   * @param isOneTime
   */
  return _createClass(MessageBus, [{
    key: "subscribe",
    value: function subscribe(messageType, handler) {
      var isOneTime = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      var listenersSet;
      var foundHandler = false;
      if (this.subscribers.has(messageType)) {
        listenersSet = this.subscribers.get(messageType);
        listenersSet && listenersSet.forEach(function (listener) {
          if (handler === listener.handler) {
            foundHandler = true;
          }
        });
      } else {
        listenersSet = CDSet.create();
        this.subscribers.set(messageType, listenersSet);
      }
      if (!foundHandler) {
        listenersSet.add({
          handler: handler,
          isOneTime: isOneTime
        });
      }
    }
    /**
     *
     * @param messageType
     * @param handler
     */
  }, {
    key: "unsubscribe",
    value: function unsubscribe(messageType, handler) {
      if (messageType && this.subscribers.has(messageType)) {
        var listenersSet = this.subscribers.get(messageType);
        listenersSet && listenersSet.forEach(function (listener) {
          if (handler === listener.handler) {
            listenersSet["delete"](listener);
          }
        });
        if (listenersSet.size === 0) {
          this.subscribers["delete"](messageType);
        }
      }
    }
    /**
     *
     * @param messageType
     * @param message
     */
  }, {
    key: "publish",
    value: function publish(messageType, message) {
      if (!messageType) {
        throw new Error('invalid argument messageType must be defined');
      }
      this._notifySubscribers(messageType, message);
    }
    /**
     *
     * @param messageType
     * @param message
     */
  }, {
    key: "_notifySubscribers",
    value: function _notifySubscribers(messageType, message) {
      var listenersSet = this.subscribers.get(messageType);
      listenersSet && listenersSet.forEach(function (listener) {
        listener.handler(message);
        if (listener.isOneTime) {
          listenersSet["delete"](listener);
        }
      });
    }
  }]);
}();
exports["default"] = MessageBus;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/PerfMonitor.js":
/*!**********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/PerfMonitor.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function get() {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
  __setModuleDefault(result, mod);
  return result;
};
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDMap = __importStar(__webpack_require__(/*! ../infrastructure/CDMap */ "./dist/js-sdk-legacy/src/main/infrastructure/CDMap.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ./log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var CDUtils_1 = __importDefault(__webpack_require__(/*! ./CDUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/CDUtils.js"));
var PerfMonitor = /*#__PURE__*/function () {
  function PerfMonitor(perfDataQ) {
    _classCallCheck(this, PerfMonitor);
    this._perfDataQ = perfDataQ;
    this._now = window.performance && window.performance.now ? window.performance.now.bind(window.performance) : CDUtils_1["default"].dateNow.bind(Date);
    this._monitors = CDMap.create();
  }
  return _createClass(PerfMonitor, [{
    key: "startMonitor",
    value: function startMonitor(counterName) {
      Logger_1["default"].debug("PerfMonitor:startMonitor on ".concat(counterName));
      this._monitors.set(counterName, this._now());
    }
  }, {
    key: "stopMonitor",
    value: function stopMonitor(counterName) {
      var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'main';
      if (this._monitors.has(counterName)) {
        var time = this._now() - this._monitors.get(counterName);
        this._perfDataQ.addToQueue('perf', {
          orig: origin,
          name: counterName,
          val: time
        });
        Logger_1["default"].debug("PerfMonitor:stopMonitor on ".concat(counterName, ": time = ").concat(time));
        this._monitors["delete"](counterName);
      }
    }
  }, {
    key: "cancelMonitor",
    value: function cancelMonitor(counterName) {
      Logger_1["default"].debug("PerfMonitor:cancelMonitor on ".concat(counterName));
      if (this._monitors.has(counterName)) {
        this._monitors["delete"](counterName);
      }
    }
    /**
     * report a monitor directly without storing in _monitors
     */
  }, {
    key: "reportMonitor",
    value: function reportMonitor(counterName, time) {
      var origin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'main';
      Logger_1["default"].debug("PerfMonitor:reportMonitor on ".concat(counterName));
      this._perfDataQ.addToQueue('perf', {
        orig: origin,
        name: counterName,
        val: time
      });
    }
  }]);
}();
exports["default"] = PerfMonitor;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/SiteMapper.js":
/*!*********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/SiteMapper.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ./log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
/**
 * This class is meant for working with configuration of the type { triggers:[], mappings:[] }
 * (see https://docs.google.com/a/biocatch.com/document/d/1onukKn6caLeiA20miRg_lFQB1-oyyv7HPF7z8IBTifw/edit?usp=sharing )
 * for more details.
 * The class will call the _onMatchCB with the matched mapping when a match is found.
 * Currently the class is being used by the ContextMgr for reporting contexts and by the SessionService for
 * resetting the session number in case the customer does not call the startNewSession API.
 */
var SiteMapper = /*#__PURE__*/function () {
  function SiteMapper(mutationObserver, cdUtils, domUtils, siteMappingKey, matchCallback) {
    var stopOnFirstMappingMatch = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;
    var maxMappings = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 200;
    _classCallCheck(this, SiteMapper);
    this._mutationObserver = mutationObserver;
    this._siteMapKey = siteMappingKey;
    this._keyUrl = siteMappingKey + '_isUrlNonMasked';
    // Determines if after a first mapping match we continue to process additional mappings or not
    this._stopOnFirstMappingMatch = stopOnFirstMappingMatch;
    this._siteMap = null;
    this._observers = [];
    this._utils = cdUtils;
    this._domUtils = domUtils;
    this._onMatchCB = matchCallback;
    this._maxMappings = maxMappings;
    this._maxTriggers = 10;
  }
  return _createClass(SiteMapper, [{
    key: "updateObserver",
    value: function updateObserver(observerCallback) {
      this._onMatchCB = observerCallback;
    }
  }, {
    key: "_observeChange",
    value: function _observeChange(selector, handler) {
      if (selector) {
        try {
          var result = window.document.querySelector(selector);
          if (result) {
            var obs = new this._mutationObserver(function (mutations) {
              if (mutations.length > 0) {
                handler();
              }
            });
            // we need the subtree in order to follow changes on textNodes
            obs.observe(result, {
              childList: true,
              characterData: true,
              attributes: true,
              subtree: true
            });
            this._observers.push(obs);
          } else {
            Logger_1["default"].error("Selector:".concat(JSON.stringify(selector), " not found on page. Check ").concat(this._siteMapKey, " configuration"));
          }
        } catch (ex) {
          Logger_1["default"].error("SiteMapper._observeChange: ".concat(ex.message), ex);
        }
      }
    }
  }, {
    key: "initTracking",
    value: function initTracking() {
      var _this = this;
      var testQuerySelector = function testQuerySelector() {
        try {
          for (var j = 0; j < _this._siteMap.mappings.length; j++) {
            var mapping = _this._siteMap.mappings[j];
            // if no url check selector, if no selector, only url
            if (!mapping.url || _this._url.indexOf(mapping.url) > -1) {
              if (mapping.selector) {
                var result = window.document.querySelector(mapping.selector);
                if (result) {
                  if (mapping.byText) {
                    // selector & byText both expressions should be true
                    if (result.innerText !== undefined && result.innerText.indexOf(mapping.byText) !== -1 || result.value === mapping.byText || result.textContent === mapping.byText) {
                      // by text can be either in inner text or in the value field(entered by user)
                      _this._onMatchCB(mapping);
                      if (_this._stopOnFirstMappingMatch) {
                        return;
                      }
                    }
                  } else {
                    // only selector - which exists
                    _this._onMatchCB(mapping);
                    if (_this._stopOnFirstMappingMatch) {
                      return;
                    }
                  }
                }
              } else if (_this._url.indexOf(mapping.url) > -1) {
                // only url
                _this._onMatchCB(mapping);
                if (_this._stopOnFirstMappingMatch) {
                  return;
                }
              }
            }
          }
        } catch (ex) {
          Logger_1["default"].error("SiteMapper:testQuerySelector failed. ex: ".concat(ex.message), ex);
        }
      };
      if (!this._siteMap) {
        var siteMap = this._utils.StorageUtils.getFromSessionStorage(this._siteMapKey);
        if (siteMap && siteMap.triggers.length <= this._maxTriggers && siteMap.mappings.length <= this._maxMappings) {
          this._siteMap = siteMap;
        }
        this._isNonMaskedUrl = this._utils.StorageUtils.getFromSessionStorage(this._keyUrl);
      }
      if (this._siteMap) {
        this._url = this._isNonMaskedUrl ? window.document.location.href : this._utils.getDocUrl();
        this._domUtils.onDocumentBody(window, function () {
          // run module for mutationObserver
          if (_this._mutationObserver) {
            _this._siteMap.triggers.forEach(function (trigger) {
              if (!trigger.url || _this._url.indexOf(trigger.url) > -1) {
                _this._observeChange(trigger.selector, testQuerySelector);
              }
            });
          }
          testQuerySelector();
        });
      }
    }
  }, {
    key: "onConfigUpdate",
    value: function onConfigUpdate(configurationRepository) {
      try {
        if (!this._siteMap && configurationRepository.get(this._siteMapKey)) {
          this.stopTracking();
          var siteMap = configurationRepository.get(this._siteMapKey) && JSON.parse(configurationRepository.get(this._siteMapKey));
          this._isNonMaskedUrl = configurationRepository.get('useNonMaskedUrlInMappings');
          if (siteMap && siteMap.triggers.length <= this._maxTriggers && siteMap.mappings.length <= this._maxMappings) {
            this._siteMap = siteMap;
            // save config
            this._utils.StorageUtils.saveToSessionStorage(this._siteMapKey, this._siteMap);
            this._utils.StorageUtils.saveToSessionStorage(this._keyUrl, this._isNonMaskedUrl);
            this.initTracking();
          } else {
            Logger_1["default"].warn("Configuration ".concat(this._siteMapKey, " contains an illegal amount of triggers or mappings. Max Allowed Triggers: ").concat(this._maxTriggers, ", ") + "Max Allowed Mappings: ".concat(this._maxMappings));
          }
        }
      } catch (ex) {
        Logger_1["default"].error("An error occurred while loading ".concat(this._siteMapKey, " configuration. Make sure the configuration value is valid. ").concat(ex.message), ex);
      }
    }
  }, {
    key: "stopTracking",
    value: function stopTracking() {
      for (var i = 0; i < this._observers.length; i++) {
        this._observers[i].disconnect();
      }
      this._observers = [];
      this._siteMap = null;
    }
  }]);
}();
exports["default"] = SiteMapper;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/StorageUtilsWrapper.js":
/*!******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/StorageUtilsWrapper.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var ConfigurationFields_1 = __webpack_require__(/*! ../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var StorageUtilsWrapper = /*#__PURE__*/function () {
  function StorageUtilsWrapper(utils, configurationRepository) {
    _classCallCheck(this, StorageUtilsWrapper);
    this.isSecureSameSite = configurationRepository.get(ConfigurationFields_1.ConfigurationFields.enableSameSiteNoneAndSecureCookies);
    this._utils = utils;
  }
  return _createClass(StorageUtilsWrapper, [{
    key: "getCookie",
    value: function getCookie(key) {
      return this._utils.StorageUtils.getCookie(key);
    }
  }, {
    key: "setCookie",
    value: function setCookie(key, value, miliSec) {
      return this._utils.StorageUtils.setCookie(key, value, miliSec, this.isSecureSameSite);
    }
    //returns 0 upon set success, -1 upon set failure, 0 if cookie dose not exist
  }, {
    key: "setExpirationInCookie",
    value: function setExpirationInCookie(key, expirationTime) {
      return this._utils.StorageUtils.setExpirationInCookie(key, expirationTime);
    }
  }, {
    key: "getFromLocalStorage",
    value: function getFromLocalStorage(key) {
      return this._utils.StorageUtils.getFromLocalStorage(key);
    }
  }, {
    key: "saveToLocalStorage",
    value: function saveToLocalStorage(key, value, expiration) {
      return this._utils.StorageUtils.saveToLocalStorage(key, value, expiration);
    }
    //returns 0 upon set success, -1 upon set failure, 0 if cookie dose not exist
  }, {
    key: "setExpirationInLocalStorage",
    value: function setExpirationInLocalStorage(key, expirationTime) {
      return this._utils.StorageUtils.setExpirationInLocalStorage(key, expirationTime);
    }
  }, {
    key: "removeFromLocalStorage",
    value: function removeFromLocalStorage(key) {
      return this._utils.StorageUtils.removeFromLocalStorage(key);
    }
  }, {
    key: "removeCookie",
    value: function removeCookie(key) {
      return this._utils.StorageUtils.removeCookie(key);
    }
  }]);
}();
exports["default"] = StorageUtilsWrapper;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/URLBuilder.js":
/*!*********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/URLBuilder.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDUtils_1 = __importDefault(__webpack_require__(/*! ./CDUtils */ "./dist/js-sdk-legacy/src/main/technicalServices/CDUtils.js"));
var URLBuilder = /*#__PURE__*/function () {
  function URLBuilder() {
    _classCallCheck(this, URLBuilder);
  }
  return _createClass(URLBuilder, null, [{
    key: "build",
    value: function build(serverURL, cid) {
      var route = '/client/v3.1/web/wup';
      var protocol = 'https';
      if (!serverURL) {
        throw new Error('Invalid server URL. Parameter is empty');
      }
      var newURL;
      if (CDUtils_1["default"].hasProtocol(serverURL)) {
        newURL = serverURL.toString().concat(route, '?cid=', cid);
      } else {
        newURL = protocol.concat('://', serverURL, route, '?cid=', cid);
      }
      return newURL;
    }
  }, {
    key: "buildCustomServerUrl",
    value: function buildCustomServerUrl(serverURL) {
      var protocol = 'https';
      var newURL;
      //if serverURL is empty we throw an error
      if (!serverURL) {
        throw new Error('Invalid server URL. Parameter is empty');
      }
      if (CDUtils_1["default"].hasProtocol(serverURL)) {
        newURL = serverURL;
      } else {
        //https protocol is added when serverURL does not include one
        newURL = protocol.concat('://', serverURL);
      }
      return newURL;
    }
  }]);
}();
exports["default"] = URLBuilder;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/URLFieldsExtractor.js":
/*!*****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/URLFieldsExtractor.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var URLFieldsExtractor = /*#__PURE__*/function () {
  function URLFieldsExtractor() {
    _classCallCheck(this, URLFieldsExtractor);
  }
  return _createClass(URLFieldsExtractor, null, [{
    key: "extract",
    value: function extract(wupServerURL) {
      if (!wupServerURL) {
        throw new Error('Invalid wupServerURL. Parameter is empty');
      }
      var urlFields = {};
      urlFields.cid = this.getCID(wupServerURL);
      urlFields.serverURL = this.getServerURL(wupServerURL);
      if (!urlFields.serverURL) {
        throw new Error("Invalid field. Failed extracting the address parameter: ".concat(wupServerURL));
      }
      if (!urlFields.cid) {
        throw new Error("Invalid field. Failed extracting the cid parameter: ".concat(wupServerURL));
      }
      return urlFields;
    }
  }, {
    key: "getCID",
    value: function getCID(wupServerURL) {
      var cid = URLFieldsExtractor.extractCid(wupServerURL);
      if (!cid) {
        return null;
      }
      return cid;
    }
  }, {
    key: "extractCid",
    value: function extractCid(url) {
      var cidIndex = url.indexOf('cid=');
      if (cidIndex === -1) {
        return null;
      }
      cidIndex += 4;
      var nextParamIndex = url.indexOf('&', cidIndex);
      nextParamIndex = nextParamIndex === -1 ? undefined : nextParamIndex;
      var cid = url.substring(cidIndex, nextParamIndex);
      return cid;
    }
  }, {
    key: "getServerURL",
    value: function getServerURL(url) {
      var routeIndex = url.indexOf('/client/v', url);
      routeIndex = routeIndex === -1 ? null : routeIndex;
      if (!routeIndex) {
        return null;
      }
      var serverURL = url.substring(0, routeIndex);
      return serverURL;
    }
  }]);
}();
exports["default"] = URLFieldsExtractor;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/UniqueIDConfiguration.js":
/*!********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/UniqueIDConfiguration.js ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UniqueIDConfiguration = void 0;
var Logger_1 = __importDefault(__webpack_require__(/*! ./log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var UniqueIDConfiguration = /*#__PURE__*/function () {
  function UniqueIDConfiguration(componentsFormat, hierarchyFormat, enabledTags) {
    _classCallCheck(this, UniqueIDConfiguration);
    this.componentsFormat = componentsFormat;
    this.hierarchyFormat = hierarchyFormat;
    this.enabledTags = enabledTags;
  }
  /**
    * Cleans a format string by removing words that are NOT inside `{}` while retaining separators.
    * @param {string} format
    * @returns {string}
    */
  return _createClass(UniqueIDConfiguration, [{
    key: "isTagEnabled",
    value:
    /**
     * Validates if the given tag is enabled in the configuration.
     * @param {string} tagName
     * @returns {boolean}
     */
    function isTagEnabled(tagName) {
      if (typeof tagName !== 'string') {
        return false;
      }
      return this.enabledTags.length > 0 && this.enabledTags.includes(tagName.toLowerCase());
    }
  }], [{
    key: "cleanFormat",
    value: function cleanFormat(format) {
      if (!format) return '';
      // Retain valid placeholders enclosed in curly brackets and separators
      var regexPattern = /{[^}]+}|[:_]/g;
      return (format.match(regexPattern) || []).join('');
    }
  }, {
    key: "parse",
    value: function parse(config) {
      try {
        // If config is a string, parse it as JSON
        if (typeof config === 'string') {
          config = JSON.parse(config);
        }
        // Ensure config is an object before proceeding
        if (_typeof(config) !== 'object' || config === null) {
          throw new Error("Invalid configuration format");
        }
        return new UniqueIDConfiguration(UniqueIDConfiguration.cleanFormat(config.componentsFormat), UniqueIDConfiguration.cleanFormat(config.hierarchyFormat), config.enabledTags);
      } catch (error) {
        Logger_1["default"].error("Failed to parse UniqueIDConfiguration:", error);
        return null;
      }
    }
  }]);
}();
exports.UniqueIDConfiguration = UniqueIDConfiguration;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/WorkerCommunicator.js":
/*!*****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/WorkerCommunicator.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function get() {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
  __setModuleDefault(result, mod);
  return result;
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CDMap = __importStar(__webpack_require__(/*! ../infrastructure/CDMap */ "./dist/js-sdk-legacy/src/main/infrastructure/CDMap.js"));
var CDSet = __importStar(__webpack_require__(/*! ../infrastructure/CDSet */ "./dist/js-sdk-legacy/src/main/infrastructure/CDSet.js"));
// The WorkerCommunicator can communicate between the main and the worker and also can
// exist in the worker and communicate with the main. All depends on the implementation
// of messagePort. messagePort is an object that must implement onmessage and potMessage functions
var WorkerCommunicator = /*#__PURE__*/function () {
  function WorkerCommunicator() {
    _classCallCheck(this, WorkerCommunicator);
    this._msgListeners = CDMap.create();
  }
  return _createClass(WorkerCommunicator, [{
    key: "setMessagingPort",
    value: function setMessagingPort(messagePort) {
      var _this = this;
      this._messagePort = messagePort;
      messagePort.setonmessage(function (e) {
        var msg = e.data;
        var oneTimeListeners = [];
        // call the relevant msg listeners by the msgType
        var listenersSet = _this._msgListeners.get(msg.msgType);
        listenersSet && listenersSet.forEach(function (listener) {
          listener.callback(msg.data);
          if (listener.isOneTime) {
            oneTimeListeners.push(listener);
          }
        });
        // Remove one time listeners out side of the main foreach since otherwise you get unexpected results (think about it)
        oneTimeListeners.forEach(function (item) {
          listenersSet["delete"](item);
        });
      });
    }
    // All the parameters after data are optional. Using them is just a shortcut for calling addMessageListener separately
  }, {
    key: "sendAsync",
    value: function sendAsync(msgType, data, responseMsgType, onResponse, isOneTime) {
      if (onResponse && responseMsgType) {
        this.addMessageListener(responseMsgType, onResponse, isOneTime);
      }
      this._messagePort.postMessage({
        msgType: msgType,
        data: data
      });
    }
  }, {
    key: "addMessageListener",
    value: function addMessageListener(msgType, callback, isOneTime) {
      var listenersSet = null;
      if (this._msgListeners.has(msgType)) {
        listenersSet = this._msgListeners.get(msgType);
      } else {
        listenersSet = CDSet.create();
        this._msgListeners.set(msgType, listenersSet);
      }
      listenersSet.add({
        callback: callback,
        isOneTime: isOneTime
      });
    }
  }]);
}();
exports["default"] = WorkerCommunicator;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/WorkerWrapper.js":
/*!************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/WorkerWrapper.js ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * Wraps a worker implementation
 */
var CDPort_1 = __importDefault(__webpack_require__(/*! ../infrastructure/CDPort */ "./dist/js-sdk-legacy/src/main/infrastructure/CDPort.js"));
var WorkerWrapper = /*#__PURE__*/function () {
  function WorkerWrapper(nativeWorker) {
    _classCallCheck(this, WorkerWrapper);
    this._nativeWorker = nativeWorker;
    this.port = new CDPort_1["default"](this._nativeWorker);
  }
  return _createClass(WorkerWrapper, [{
    key: "close",
    value: function close() {
      this.port.close();
    }
  }]);
}();
exports["default"] = WorkerWrapper;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/WorkerWrapperFactory.js":
/*!*******************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/WorkerWrapperFactory.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/**
 * Factory for creating a worker port. Factory create which wraps a dedicated inlined worker or a worker from url according to useUrlWorker configuration.
 */
var WorkerWrapper_1 = __importDefault(__webpack_require__(/*! ./WorkerWrapper */ "./dist/js-sdk-legacy/src/main/technicalServices/WorkerWrapper.js"));
var Logger_1 = __importDefault(__webpack_require__(/*! ./log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var WorkerWrapperFactory = /*#__PURE__*/function () {
  function WorkerWrapperFactory(useUrlWorker, workerUrl) {
    _classCallCheck(this, WorkerWrapperFactory);
    this._useUrlWorker = useUrlWorker;
    this._workerUrl = workerUrl;
  }
  return _createClass(WorkerWrapperFactory, [{
    key: "create",
    value: function create() {
      return this._useUrlWorker ? this._createWorkerFromUrl() : this._createInlineWorker();
    }
  }, {
    key: "_createInlineWorker",
    value: function _createInlineWorker() {
      console.log("Creating worker ".concat(this._workerUrl));
      var nativeWorker = new Worker(this._workerUrl);
      Logger_1["default"].info('Created a dedicated worker.');
      return new WorkerWrapper_1["default"](nativeWorker);
    }
  }, {
    key: "_createWorkerFromUrl",
    value: function _createWorkerFromUrl() {
      try {
        var nativeWorker = new Worker(this._workerUrl);
        Logger_1["default"].info("Created worker from url - ".concat(this._workerUrl));
        return new WorkerWrapper_1["default"](nativeWorker);
      } catch (e) {
        Logger_1["default"].error('Failed to construct worker from url.');
        throw e;
      }
    }
  }]);
}();
exports["default"] = WorkerWrapperFactory;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/categories/CategoryService.js":
/*!*************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/categories/CategoryService.js ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



/**
 * CategoryService
 *
 * This class is used to semantically categorize HTML form fields (like inputs)
 * based on their attribute values and associated <label> text, using configurable
 * keyword-to-category mapping rules.
 *
 * Purpose:
 * - Automatically assign a "category" (like Email, Password, SSN, etc.) to a form field.
 * - Useful for ds.
 *
 * Uses two configuration JSONs:
 *
 * 1. `elementAttributes.json`:
 *    - Specifies which HTML attributes to extract and analyze from input elements.
 *    - Structure:
 *      {
 *        "attributes": [
 *          "name", "id", "placeholder", "aria-label", "title", ...
 *        ]
 *      }
 *    - These attributes are scanned for keywords.
 *
 * 2. `elementCategories.json`:
 *    - Maps known keywords/phrases to numeric category IDs.
 *    - Structure:
 *      {
 *        "email": 18,
 *        "password": 7,
 *        "social security number": 10,
 *        "change address": 3,
 *        ...
 *      }
 *    - Keywords can be in multiple languages and formats.
 *    - The number is a category ID that your system defines meaning for (e.g., 7 = password).
 *
 * How it works:
 * - The constructor loads category rules and attribute names (custom or default).
 * - The `categoryField()` method:
 *    1. Collects all configured attribute values and associated label text.
 *    2. Splits all strings into words.
 *    3. Matches each word against the category map.
 *    4. Counts matches per category.
 *    5. Returns the most frequently matched category ID (or "0" if nothing matches).
 *
 * Configurable:
 * - You can pass custom `elementCategories` and `elementAttributes` as objects.
 * - If omitted or invalid, it falls back to the local JSON files.
 *
 * Safe and Efficient:
 * - Ignores hidden inputs.
 * - Gracefully handles missing or empty configs.
 * - Uses Map for fast lookups.
 *
 * Example Use Case:
 * Categorize a field like:
 *   <input placeholder="Enter your email" />
 * It would return "18" if "email" is mapped to category 18.
 */
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var CategoryService = /*#__PURE__*/function () {
  function CategoryService() {
    var _elementAttributes$at;
    var elementCategories = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    var elementAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    _classCallCheck(this, CategoryService);
    var defaultElementCategories = __webpack_require__(/*! ./elementCategories.json */ "./dist/js-sdk-legacy/src/main/technicalServices/categories/elementCategories.json");
    var defaultElementAttributes = __webpack_require__(/*! ./elementAttributes.json */ "./dist/js-sdk-legacy/src/main/technicalServices/categories/elementAttributes.json");
    var categories = elementCategories && Object.keys(elementCategories).length ? elementCategories : defaultElementCategories;
    var hasValidAttributes = (elementAttributes === null || elementAttributes === void 0 || (_elementAttributes$at = elementAttributes.attributes) === null || _elementAttributes$at === void 0 ? void 0 : _elementAttributes$at.length) > 0;
    var attributes = hasValidAttributes ? elementAttributes : defaultElementAttributes;
    this.CATEGORY_RULES = new Map(Object.entries(categories));
    this.ATTRIBUTE_NAMES = attributes;
  }
  /**
   * Identifies the category of an input element based on attributes and value patterns.
   * @param {HTMLElement} element - The input element to categorize.
   * @returns {string} - The determined category.
   */
  return _createClass(CategoryService, [{
    key: "categoryField",
    value: function categoryField(element) {
      var _document$querySelect,
        _this = this,
        _reduce$;
      if (!(element instanceof HTMLElement) || element.type === "hidden") return "0";
      var attrs = this.ATTRIBUTE_NAMES.attributes.map(function (attr) {
        var _element$getAttribute;
        return (_element$getAttribute = element.getAttribute(attr)) === null || _element$getAttribute === void 0 ? void 0 : _element$getAttribute.toLowerCase();
      }).filter(Boolean);
      var label = (_document$querySelect = document.querySelector("label[for=\"".concat(element.id, "\"]"))) === null || _document$querySelect === void 0 || (_document$querySelect = _document$querySelect.innerText) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.toLowerCase();
      if (label) attrs.push(label);
      var categoryCount = new Map();
      attrs.flatMap(function (attr) {
        return attr.split(/\s+/);
      }).forEach(function (word) {
        var category = _this.CATEGORY_RULES.get(word);
        if (category) {
          categoryCount.set(category, (categoryCount.get(category) || 0) + 1);
        }
      });
      if (!categoryCount.size) return "0";
      return (_reduce$ = _toConsumableArray(categoryCount.entries()).reduce(function (max, entry) {
        return entry[1] > max[1] ? entry : max;
      }, ["0", 0])[0]) === null || _reduce$ === void 0 ? void 0 : _reduce$.toString();
    }
  }]);
}();
exports["default"] = CategoryService;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/categories/elementAttributes.json":
/*!*****************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/categories/elementAttributes.json ***!
  \*****************************************************************************************/
/***/ (function(module) {

module.exports = /*#__PURE__*/JSON.parse('{"attributes":["name","id","placeholder","aria-label","data-label","aria-describedby","title","autocomplete","data-placeholder","data-hint","aria-placeholder","aria-labelledby","formcontrolname","role","data-type","data-field","data-name","inputmode","data-test-id","data-value","data-format"]}');

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/categories/elementCategories.json":
/*!*****************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/categories/elementCategories.json ***!
  \*****************************************************************************************/
/***/ (function(module) {

module.exports = /*#__PURE__*/JSON.parse('{"username":"0001","user name":"0001","user-name":"0001","user_id":"0001","userid":"0001","user-id":"0001","login name":"0001","loginname":"0001","login_id":"0001","loginid":"0001","login-user":"0001","login_user":"0001","account name":"0001","accountname":"0001","account_name":"0001","account id":"0006","accountid":"0006","account_id":"0001","uname":"0001","member id":"0120","password":"0002","pass word":"0002","pass-word":"0002","passwd":"0002","pwd":"0002","p/w":"0002","pword":"0002","pass_code":"0002","passcode":"0002","password_input":"0002","pass input":"0002","password field":"0002","passwordfield":"0002","user password":"0002","userpassword":"0002","account password":"0002","accountpassword":"0002","login password":"0002","loginpassword":"0002","secret password":"0002","otp":"0003","one time password":"0003","one-time password":"0003","onetime password":"0003","one time pin":"0003","one-time pin":"0003","otp code":"0003","otpcode":"0003","verification code":"0128","verify code":"0003","verificationcode":"0003","auth code":"0003","authcode":"0003","authentication code":"0003","2fa code":"0003","two factor code":"0003","two-factor code":"0003","2fa":"0003","security code":"0128","pin code":"0003","amount":"0004","payment amount":"0004","transfer amount":"0004","total amount":"0004","money":"0004","value":"0004","sum":"0004","price":"0004","fee":"0004","charge":"0004","cost":"0004","amount due":"0004","balance":"0004","payable amount":"0004","bill amount":"0004","transaction amount":"0004","withdrawal amount":"0004","deposit amount":"0004","loan amount":"0004","subtotal":"0004","new payee":"0005","add payee":"0005","payee name":"0005","payee":"0005","recipient name":"0005","recipient":"0005","beneficiary":"0005","beneficiary name":"0005","payee account":"0005","payee_account":"0005","recipient account":"0005","recipient_account":"0005","payee id":"0005","payeeid":"0005","beneficiary id":"0005","beneficiaryid":"0005","new recipient":"0005","add beneficiary":"0005","payee details":"0005","recipient details":"0005","account number":"0006","acc number":"0006","acct number":"0006","account no":"0006","account #":"0006","account#":"0006","accountnum":"0006","accountnum#":"0006","bank account":"0006","bankaccount":"0006","bank account number":"0006","bankaccountnumber":"0006","accountnumbr":"0006","acct no":"0006","acct#":"0006","acctno":"0006","account identifier":"0006","account code":"0006","change password":"0007","update password":"0007","reset password":"0007","new password":"0007","set password":"0007","create password":"0007","re-enter password":"0007","confirm password":"0007","modify password":"0007","password change":"0007","password reset":"0007","password update":"0007","change passcode":"0007","update passcode":"0007","reset passcode":"0007","change pwd":"0007","update pwd":"0007","reset pwd":"0007","change secret":"0007","update secret":"0007","change phone":"0008","update phone":"0008","new phone":"0008","phone update":"0008","change number":"0008","phone number change":"0008","update number":"0008","modify phone":"0008","modify number":"0008","phone change":"0008","phone edit":"0008","edit phone":"0008","replace phone":"0008","replace number":"0008","new phone number":"0008","add phone number":"0008","set phone number":"0008","set phone":"0008","phone update request":"0008","update mobile":"0008","change email":"0009","update email":"0009","new email":"0009","email update":"0009","change e-mail":"0009","e-mail update":"0009","email address change":"0009","update email address":"0009","change email address":"0009","modify email":"0009","modify e-mail":"0009","edit email":"0009","email change":"0009","replace email":"0009","new email address":"0009","set email":"0009","update mail":"0009","change mail":"0009","mail update":"0009","email modifications":"0009","change address":"0010","update address":"0010","new address":"0010","address update":"0010","edit address":"0010","modify address":"0010","replace address":"0010","address change":"0010","address edit":"0010","address modification":"0010","set address":"0010","update location":"0010","change location":"0010","new location":"0010","location update":"0010","shipping address change":"0010","billing address change":"0010","change street":"0010","update street":"0010","change home address":"0010","login":"0011","sign in":"0011","sign-in":"0011","signin":"0011","submit login":"0011","login button":"0011","log in":"0011","log-in":"0011","login submit":"0011","submit credentials":"0011","sign in button":"0011","sign in submit":"0011","connect":"0011","access account":"0011","enter":"0011","enter site":"0011","authenticate":"0011","proceed login":"0011","start session":"0011","begin session":"0011","first name":"0100","firstname":"0100","given name":"0100","your first name":"0100","first-name":"0100","forename":"0100","christian name":"0100","personal name":"0100","first":"0100","initial name":"0100","givenname":"0100","firstn":"0100","fname":"0100","first name field":"0100","customer first name":"0100","applicant first name":"0100","user first name":"0100","first name input":"0100","first name enter":"0100","first-name-entry":"0100","last name":"0101","lastname":"0101","surname":"0101","family name":"0101","last-name":"0101","l-name":"0101","lname":"0101","second name":"0102","lastn":"0101","last name field":"0101","customer last name":"0101","applicant last name":"0101","user last name":"0101","surname field":"0101","familyname":"0101","last name input":"0101","last name enter":"0101","surname input":"0101","surname enter":"0101","surname entry":"0101","middle name":"0102","middlename":"0102","middle-name":"0102","middle initial":"0102","middleinitial":"0102","m name":"0102","mname":"0102","middle":"0102","middle n.":"0102","middle name field":"0102","middle name input":"0102","middle name enter":"0102","middle name entry":"0102","mi":"0102","middle initial field":"0102","middleinitial field":"0102","middle initial input":"0102","middle initial entry":"0102","m.i.":"0102","email":"0103","email address":"0103","e-mail":"0103","mail address":"0103","your email":"0103","your e-mail":"0103","email id":"0103","emailid":"0103","email_id":"0103","mail id":"0103","mailid":"0103","mail_id":"0103","emailaddress":"0103","email addr":"0103","email field":"0103","email input":"0103","email enter":"0103","email entry":"0103","emailaccount":"0103","email account":"0103","ssn":"0104","social security number":"0104","social security #":"0104","ssn number":"0104","soc sec number":"0104","social-sec-number":"0104","social security no":"0104","ss no":"0104","ss#":"0104","ss number":"0104","socsec":"0104","social security id":"0104","social security identifier":"0104","social security code":"0104","ssnid":"0104","ssn id":"0104","ssn field":"0104","ssn input":"0104","ssn enter":"0104","ssn entry":"0104","phone number":"0105","phone":"0105","mobile number":"0105","mobile":"0105","telephone":"0105","cell number":"0105","cellphone":"0105","your phone":"0105","contact number":"0105","contact #":"0105","phone no":"0105","phone#":"0105","tel":"0105","tel number":"0105","telephone number":"0105","mobile phone":"0105","cell":"0105","cell phone":"0105","phone field":"0105","phone input":"0105","street address":"0106","address":"0106","home address":"0106","residential address":"0106","mailing address":"0106","your address":"0106","street":"0106","street address line":"0106","streetaddr":"0106","address line":"0106","street address field":"0106","street address input":"0106","address field":"0106","address input":"0106","address enter":"0106","address entry":"0106","house address":"0106","road address":"0106","streetname":"0106","street line":"0106","dob":"0107","date of birth":"0107","birth date":"0107","full dob":"0107","your birthdate":"0107","birthdate":"0107","birth date full":"0107","full date of birth":"0107","dob full":"0107","dob field":"0107","dob input":"0107","dob enter":"0107","birthdate field":"0107","birthday":"0107","birthday full":"0107","birthday date":"0107","date-of-birth":"0107","birth date input":"0107","birth date entry":"0107","dob complete":"0107","dob day":"0108","birth day":"0108","day of birth":"0108","birth day of month":"0108","day of month":"0108","dob-day":"0108","birth day field":"0108","birth day input":"0108","day field":"0108","day input":"0108","dob day field":"0108","birth day entry":"0108","day birth":"0108","day dob":"0108","birth-day":"0108","dayofbirth":"0108","day-of-birth":"0108","date day":"0108","day value":"0108","dob d":"0108","dob month":"0109","birth month":"0109","month of birth":"0109","month born":"0109","dob-month":"0109","birth month field":"0109","month field":"0109","month input":"0109","month entry":"0109","dob mth":"0109","dob m":"0109","month dob":"0109","birth-month":"0109","monthofbirth":"0109","month-of-birth":"0109","month value":"0109","month dob field":"0109","month dob input":"0109","birth mth":"0109","dob month value":"0109","dob year":"0110","birth year":"0110","year of birth":"0110","year born":"0110","dob-year":"0110","birth year field":"0110","year field":"0110","year input":"0110","year entry":"0110","dob yr":"0110","birth-year":"0110","yearofbirth":"0110","year-of-birth":"0110","yr of birth":"0110","dob y":"0110","birthyear":"0110","year value":"0110","dob year field":"0110","year dob":"0110","dob yyyy":"0110","annual income":"0111","income":"0111","yearly income":"0111","salary":"0111","earnings":"0111","yearly salary":"0111","annual salary":"0111","monthly income":"0111","income per year":"0111","yearly earnings":"0111","income yearly":"0111","total income":"0111","gross income":"0111","net income":"0111","income amount":"0111","income field":"0111","income input":"0111","salary amount":"0111","salary field":"0111","salary input":"0111","zip code":"0112","postal code":"0112","zipcode":"0112","zip":"0112","post code":"0112","zip-code":"0112","zip number":"0112","zip no":"0112","postal":"0112","postal no":"0112","postal number":"0112","postalcode":"0112","post code number":"0112","zip field":"0112","zip input":"0112","zip entry":"0112","postcode field":"0112","postal code field":"0112","zip_digit":"0112","zipcode field":"0112","city":"0113","town":"0113","city name":"0113","town name":"0113","your city":"0113","municipality":"0113","city/town":"0113","citytown":"0113","city or town":"0113","locality":"0113","village":"0113","hometown":"0113","city field":"0113","city input":"0113","city entry":"0113","city value":"0113","town field":"0113","town input":"0113","cityname":"0113","city location":"0113","state":"0114","province":"0114","territory":"0114","region":"0114","your state":"0114","state/region":"0114","state name":"0114","province name":"0114","province/state":"0114","county":"0114","state field":"0114","state input":"0114","state entry":"0114","region field":"0114","region input":"0114","regional":"0114","state value":"0114","state id":"0114","statecode":"0114","statecode field":"0114","country":"0115","nation":"0115","country name":"0115","your country":"0115","country/region":"0115","nationality":"0115","nation name":"0115","country field":"0115","country input":"0115","country entry":"0115","country code":"0115","countrycode":"0115","country id":"0115","country identifier":"0115","country of residence":"0115","residing country":"0115","country value":"0115","countryname":"0115","home country":"0115","birth country":"0115","address line 1":"0116","street line 1":"0116","address1":"0116","street address 1":"0116","address first line":"0116","addr line 1":"0116","address line1":"0116","streetline1":"0116","addressl1":"0116","street addr 1":"0116","line1 address":"0116","address primary":"0116","primary address":"0116","address_part1":"0116","address part 1":"0116","house number":"0116","house no":"0116","block":"0116","building number":"0116","building no":"0116","address line 2":"0117","street line 2":"0117","address2":"0117","street address 2":"0117","address second line":"0117","addr line 2":"0117","address line2":"0117","streetline2":"0117","addressl2":"0117","street addr 2":"0117","line2 address":"0117","secondary address":"0117","secondary addr":"0117","address_part2":"0117","address part 2":"0117","apartment":"0117","apt number":"0117","suite":"0117","unit":"0117","floor":"0117","submit application":"0118","application submit":"0118","apply button":"0118","submit form":"0118","send application":"0118","apply now":"0118","application button":"0118","submit app":"0118","apply":"0118","submit application button":"0118","application submit button":"0118","send form":"0118","submit request":"0118","send request":"0118","proceed":"0118","continue application":"0118","submit":"0118","continue":"0118","next":"0118","finish application":"0118","iban":"0119","international bank account number":"0119","iban number":"0119","iban no":"0119","bank iban":"0119","iban code":"0119","iban field":"0119","iban input":"0119","iban entry":"0119","iban#":"0119","account iban":"0119","account_iban":"0119","iban id":"0119","iban identifier":"0119","iban value":"0119","iban digits":"0119","iban account":"0119","iban acct":"0119","acct iban":"0119","iban code number":"0119","membership id":"0120","membership number":"0120","member number":"0120","membership no":"0120","member no":"0120","membership#":"0120","member#":"0120","membershipid":"0120","memberid":"0120","member identifier":"0120","membership identifier":"0120","membership code":"0120","membership code number":"0120","membership account":"0120","account membership":"0120","membership field":"0120","member field":"0120","membership input":"0120","member input":"0120","mother name":"0121","mother\'s name":"0121","mom name":"0121","mom\'s name":"0121","maternal name":"0121","mothername":"0121","momname":"0121","mother full name":"0121","mother fullname":"0121","mums name":"0121","mother field":"0121","mother input":"0121","mother entry":"0121","mom field":"0121","mom input":"0121","mother\'s full name":"0121","maternal fullname":"0121","mothername field":"0121","mother first name":"0121","mother last name":"0121","routing number":"0122","bank routing number":"0122","routing no":"0122","routing #":"0122","routing code":"0122","bank routing code":"0122","routingnum":"0122","routingnum#":"0122","routing number field":"0122","routing field":"0122","routing input":"0122","routing entry":"0122","aba number":"0122","aba routing":"0122","aba code":"0122","aba routing number":"0122","aba routing no":"0122","transit number":"0122","bank transit number":"0122","transit code":"0122","sort code":"0123","bank sort code":"0123","sortcode":"0123","sort-code":"0123","sort code number":"0123","bank sort code number":"0123","sort code field":"0123","sort code input":"0123","sort code entry":"0123","sort no":"0123","sort#":"0123","bank sort#":"0123","bank sort no":"0123","sort identifier":"0123","bank code":"0123","bank sort identifier":"0123","bank code number":"0123","bank sort":"0123","clearing code":"0123","sort digits":"0123","passport number":"0124","passport no":"0124","passport id":"0124","passport #":"0124","passportnum":"0124","passport#":"0124","passport identifier":"0124","passport code":"0124","passport field":"0124","passport input":"0124","passport entry":"0124","passport document number":"0124","passportdocument":"0124","passport doc no":"0124","passport doc#":"0124","passport serial":"0124","passport serial number":"0124","passport num field":"0124","travel document number":"0124","passport digits":"0124","driving licence number":"0125","driver\'s license number":"0125","driver licence number":"0125","dl number":"0125","drivers license":"0125","driving license":"0125","licence number":"0125","driver license no":"0125","driver license #":"0125","driverlicense":"0125","driving licence no":"0125","dl no":"0125","license number":"0125","driving licence id":"0125","driver id":"0125","driver\'s licence id":"0125","driving permit number":"0125","driving licence field":"0125","dl field":"0125","dl input":"0125","business name":"0126","company name":"0126","organization name":"0126","business":"0126","company":"0126","organization":"0126","enterprise name":"0126","enterprise":"0126","corporate name":"0126","corporate":"0126","businessname":"0126","companyname":"0126","company title":"0126","firm name":"0126","firm":"0126","business title":"0126","business field":"0126","company field":"0126","organization field":"0126","company input":"0126","card number":"0127","credit card number":"0127","debit card number":"0127","card no":"0127","card #":"0127","cardnum":"0127","card#":"0127","card digits":"0127","card id":"0127","card identifier":"0127","cc number":"0127","cc#":"0127","creditcard":"0127","debitcard":"0127","card number field":"0127","card input":"0127","card entry":"0127","payment card number":"0127","card account number":"0127","card acct number":"0127","cvv":"0128","cvc":"0128","card security code":"0128","card cvv":"0128","card cvc":"0128","cvv2":"0128","cvv code":"0128","cvc code":"0128","card code":"0128","card verification value":"0128","card verification code":"0128","card verification":"0128","security number":"0128","card security number":"0128","cvv field":"0128","cvv input":"0128","cvv entry":"0128","cvc2":"0128","card expiration":"0129","expiry date":"0129","expiration date":"0129","card expiry":"0129","expiration":"0129","exp date":"0129","exp":"0129","card exp":"0129","card expiration date":"0129","card expiry date":"0129","expiry":"0129","cardexp":"0129","card exp date":"0129","expdate":"0129","expiration field":"0129","expiry field":"0129","expiration input":"0129","expiry input":"0129","expiration entry":"0129","exp date field":"0129","employer name":"0130","company you work for":"0130","workplace":"0130","work name":"0130","employer":"0130","employername":"0130","company employer":"0130","work employer":"0130","organization employer":"0130","employer field":"0130","employer input":"0130","employer entry":"0130","job employer":"0130","employer company":"0130","employer organization":"0130","employer details":"0130","employer info":"0130","employer id":"0130","employer title":"0130","employer company name":"0130","security question 1":"0131","security q1":"0131","security question one":"0131","security question first":"0131","first security question":"0131","securityquestion1":"0131","securityquestionone":"0131","sec q1":"0131","sec question 1":"0131","sq1":"0131","security qn1":"0131","sec ques 1":"0131","security question field 1":"0131","security question input 1":"0131","security question 1 field":"0131","question 1":"0131","security quest 1":"0131","personal question 1":"0131","secret question 1":"0131","challenge question 1":"0131","security question 2":"0132","security q2":"0132","security question two":"0132","security question second":"0132","second security question":"0132","securityquestion2":"0132","securityquestiontwo":"0132","sec q2":"0132","sec question 2":"0132","sq2":"0132","security qn2":"0132","sec ques 2":"0132","security question field 2":"0132","security question input 2":"0132","security question 2 field":"0132","question 2":"0132","security quest 2":"0132","personal question 2":"0132","secret question 2":"0132","challenge question 2":"0132"}');

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/dev_collectors/DevDebugDataQ.js":
/*!***************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/dev_collectors/DevDebugDataQ.js ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DevDebugDataQ = void 0;
var Logger_1 = __importDefault(__webpack_require__(/*! ../log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
/**
 *
 * A DataQ wrapper designed to seamlessly encapsulate `client_debug_info` static collectors.
 *
 * This class allows debug-level features to queue their data for deferred, aggregated reporting,
 * while still supporting production-level static fields that should be sent immediately.
 *
 * Aggregation ensures that multiple debug-level features can report together,
 * without flooding the queue. The aggregation is flushed once per WUP cycle,
 * as registered via `_onPreSendToWorker`.
 *
 * ### Usage for debug-level features:
 * 1. Use this wrapper in place of the regular DataQ.
 * 2. Ensure the feature is defined in the `debugInfoCollectionLevels` configuration as `"debug"`.
 * 3. When the feature collects data, it should call `addToQueue` with:
 *    - name: `"static_fields"`
 *    - data: `[featureName, ...dataValues]`
 *    - addCtxId: typically `false`
 *    - isImmediateWup: as appropriate
 *
 * ### To promote a feature from 'debug' to 'prod':
 * - Change its collection level in `debugInfoCollectionLevels` from `"debug"` to `"prod"`.
 * - Move the feature to use the regular DataQ directly.
 * - Remove it from the debug-level config list (`debugInfoCollectionLevels`) in codebase JSON.
 *
 *
 * ### Important Note:
 * - Each feature is also controlled by its own independent feature-enablement (kill-switch) configuration.
 *   - For example, even if a feature is defined as `"debug"` in `debugInfoCollectionLevels`,
 *     it will only collect data if its `enableXFeature` flag is also turned on.
 * - This class **only** acts on the result of collectors that already decided to run.
 *   It does not control whether features are enabled or not.
 */
var DevDebugDataQ = /*#__PURE__*/function () {
  function DevDebugDataQ(configurationRepository, dataQ) {
    _classCallCheck(this, DevDebugDataQ);
    this._configurationRepository = configurationRepository;
    this._dataQ = dataQ;
    this._aggregatedDebugInfoData = {};
    // Convenient states used for tracking if new data added to aggregatedDebugInfoData object since the last time DataQ was sent to server.
    // This prevents duplication of client_debug_info fields on the same wup.
    this._changeId = -1;
    this._flushId = -1;
    this._dataQ.registerOnPreSendToWorker(this._onPreSendToWorker.bind(this));
    this.defaultCollectionLevels = {
      emuid: 'debug',
      // TODO: add here every new static_feature should be reported as client_debug_info field.
      storage_directory: 'debug',
      screen_high_res: 'debug',
      adblock_lists: 'debug',
      webgl: 'debug',
      drm: 'debug',
      speech_voices: 'debug',
      font_emoji_info: 'debug',
      font_math_info: 'debug',
      font_width_info: 'debug',
      navigator_pdfViewerEnabled: 'debug',
      navigator_webdriver: 'debug',
      navigator_userAgentData: 'debug',
      navigator_appVersion: 'debug',
      navigator_platform: 'debug',
      navigator_vendor: 'debug',
      navigator_productSub: 'debug',
      navigator_vendorSub: 'debug',
      navigator_onLine: 'debug',
      navigator_getHighEntropyValues: 'debug',
      navigator_prototype: 'debug'
    };
    /**
     * A set static_fields features should never be promoted to production.
     * features appears on this list - will be considered as collectionLevel debug, regardless
     * any configuration specified at debugInfoCollectionLevels configuration.
     */
    this._fixedDebugFeatures = [
    /**
     * Once emuid will mature - it will replace entirely the existing muid.
     * muid used in several places besides static_field collection.
     * Therefore, Emuid cannot be promoted to production as standalone static field.
     */
    'emuid'];
  }
  return _createClass(DevDebugDataQ, [{
    key: "addToQueue",
    value: function addToQueue(name, data, addCtxId, isImmediateWup) {
      var devDebugCollectionLevels = this._resolveDebugInfoCollectionLevels();
      var feature = data[0];
      var collectionLevel = this._fixedDebugFeatures.includes(feature) ? 'debug' : devDebugCollectionLevels[feature];
      if (collectionLevel === 'debug') {
        // Aggregate debug data by feature
        this._aggregatedDebugInfoData[feature] = data.slice(1); // omit feature name from data array
        this._changeId++;
      } else if (collectionLevel === 'prod') {
        // Forward directly to the queue for production-level features
        this._dataQ.addToQueue(name, data, addCtxId, isImmediateWup);
      } else {
        // If collectionLevel is 'none' or unrecognized, the feature is ignored
        Logger_1["default"].warn("Received collectionLevel = ".concat(collectionLevel, " for ").concat(feature));
      }
    }
  }, {
    key: "_onPreSendToWorker",
    value: function _onPreSendToWorker() {
      if (this._changeId === this._flushId) {
        // No change since last time client_debug_info sent to the DataQ.
        return;
      }
      // Don't add to queue and empty client_debug_info object when there is no data.
      if (Object.keys(this._aggregatedDebugInfoData).length === 0) return;
      this._appendAggregatedDebugInfoDataToQueue();
      this._flushId = this._changeId;
    }
    /**
     * Sends all aggregated `client_debug_info` fields to the queue at once.
     *
     * This is triggered before the DataQ flushes, but only if new debug fields were added.
     *
     * IMPORTANT:
     * - All aggregated data is kept in memory and re-sent in *every* future WUP where a new feature is added.
     * - This is required because the server-side logic *overwrites* existing static fields rather than merging them.
     * - Therefore, we must always send the full `client_debug_info` object (including previously-sent values)
     *   to preserve the complete state.
     *
     * It ensures that:
     * - A single 'client_debug_info' static_field entry is sent per WUP.
     * - Features are not sent partially (which would be lost on the server).
     */
  }, {
    key: "_appendAggregatedDebugInfoDataToQueue",
    value: function _appendAggregatedDebugInfoDataToQueue() {
      // Pass a clone, to prevent usage of the same instance list within the dataQ
      var aggregatedDataClone = JSON.parse(JSON.stringify(this._aggregatedDebugInfoData));
      this._dataQ.appendData('static_fields', ['client_debug_info', aggregatedDataClone]);
    }
    /**
     * Returns a debugInfoCollectionLevels json from remote configuration or local fallback.
     *
     * The result object will be in same structure as this.defaultCollectionLevels:
     * Each key is feature name,
     * Each value - 'prod' / 'debug' / 'none'
     *
     * For example:
     * {
     *   featureX: 'debug',
     *   featureY: 'none',
     *   featureZ : 'prod',
     * }
     */
  }, {
    key: "_resolveDebugInfoCollectionLevels",
    value: function _resolveDebugInfoCollectionLevels() {
      var remoteConfigValue = this._configurationRepository.get('debugInfoCollectionLevels');
      if (remoteConfigValue) {
        try {
          /**
           * The server returns the configuration as string, so it needs to be parsed to object.
           */
          return JSON.parse(remoteConfigValue);
        } catch (e) {
          Logger_1["default"].error('Invalid debugInfoCollectionLevels config, falling back to defaults', e);
          return this.defaultCollectionLevels;
        }
      } else {
        return this.defaultCollectionLevels;
      }
    }
  }]);
}();
exports.DevDebugDataQ = DevDebugDataQ;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/log/LogBridge.js":
/*!************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/log/LogBridge.js ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var LogAggregator_1 = __importDefault(__webpack_require__(/*! ../../../worker/LogAggregator */ "./dist/js-sdk-legacy/src/worker/LogAggregator.js"));
var LogBridge = /*#__PURE__*/function () {
  function LogBridge(logAggregator, url) {
    var msgPrefix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
    _classCallCheck(this, LogBridge);
    this.sn = 0;
    this.url = url;
    this.logAggregator = logAggregator;
    this.msgPrefix = msgPrefix;
  }
  return _createClass(LogBridge, [{
    key: "log",
    value: function log(msg, logLevel, sessionIdentifiers) {
      this.logAggregator.add({
        eventName: 'log',
        data: _objectSpread(_objectSpread({
          msg: this.msgPrefix + msg
        }, sessionIdentifiers), {}, {
          url: this.url,
          level: logLevel,
          sn: this.sn++
        })
      });
    }
  }, {
    key: "setLogLevel",
    value: function setLogLevel(logLevel) {
      if (this.logAggregator instanceof LogAggregator_1["default"]) {
        this.logAggregator.setLogLevel(logLevel);
      }
    }
  }, {
    key: "clearLogEntriesByLogLevel",
    value: function clearLogEntriesByLogLevel(logLevel) {
      this.logAggregator.filterOutByLogLevel(logLevel);
    }
  }]);
}();
exports["default"] = LogBridge;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/log/LogDataQ.js":
/*!***********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/log/LogDataQ.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var DataQ_1 = __importDefault(__webpack_require__(/*! ../DataQ */ "./dist/js-sdk-legacy/src/main/technicalServices/DataQ.js"));
var LogDataQ = /*#__PURE__*/function (_DataQ_1$default) {
  function LogDataQ() {
    _classCallCheck(this, LogDataQ);
    return _callSuper(this, LogDataQ, arguments);
  }
  _inherits(LogDataQ, _DataQ_1$default);
  return _createClass(LogDataQ, [{
    key: "add",
    value: function add(message) {
      this.addToQueue(message.eventName, message.data);
    }
  }, {
    key: "filterOutByLogLevel",
    value: function filterOutByLogLevel(logLevel) {
      this.filterOut(function (value) {
        return value.data.level >= logLevel;
      });
    }
  }]);
}(DataQ_1["default"]);
exports["default"] = LogDataQ;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/log/LogLevel.js":
/*!***********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/log/LogLevel.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LogLevel = void 0;
exports.LogLevel = {
  DEBUG: 10,
  INFO: 20,
  WARN: 30,
  ERROR: 40,
  CRITICAL: 50,
  OFF: 80
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js":
/*!*********************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Logger = void 0;
// eslint-disable-next-line max-classes-per-file
var LogLevel_1 = __webpack_require__(/*! ./LogLevel */ "./dist/js-sdk-legacy/src/main/technicalServices/log/LogLevel.js");
var ConfigurationFields_1 = __webpack_require__(/*! ../../core/configuration/ConfigurationFields */ "./dist/js-sdk-legacy/src/main/core/configuration/ConfigurationFields.js");
var Log = /*#__PURE__*/function () {
  function Log() {
    _classCallCheck(this, Log);
  }
  return _createClass(Log, null, [{
    key: "setLogger",
    value: function setLogger(logger) {
      this._logger = logger;
    }
  }, {
    key: "attachSessionIdentifiers",
    value: function attachSessionIdentifiers(sessionIdentifiers) {
      if (!this._logger) {
        return;
      }
      return this._logger.attachSessionIdentifiers(sessionIdentifiers);
    }
  }, {
    key: "isDebug",
    value: function isDebug() {
      if (!this._logger) {
        return;
      }
      return this._logger.isDebug();
    }
  }, {
    key: "error",
    value: function error(msg, ex) {
      if (!this._logger) {
        return;
      }
      this._logger.error(msg, ex || null);
    }
  }, {
    key: "warn",
    value: function warn(msg, ex) {
      if (!this._logger) {
        return;
      }
      this._logger.warn(msg, ex || null);
    }
  }, {
    key: "trace",
    value: function trace(msg) {
      if (!this._logger) {
        return;
      }
      this._logger.trace(msg);
    }
  }, {
    key: "debug",
    value: function debug(msg) {
      if (!this._logger) {
        return;
      }
      this._logger.debug(msg);
    }
  }, {
    key: "info",
    value: function info(msg) {
      if (!this._logger) {
        return;
      }
      this._logger.info(msg);
    }
  }]);
}();
exports["default"] = Log;
var Logger = /*#__PURE__*/function () {
  function Logger(logBridge, logLevel) {
    _classCallCheck(this, Logger);
    this._logBridge = logBridge;
    this._logLevel = logLevel || LogLevel_1.LogLevel.INFO;
    this._sessionIdentifiers = {};
  }
  return _createClass(Logger, [{
    key: "attachSessionIdentifiers",
    value: function attachSessionIdentifiers(sessionIdentifiers) {
      // add the provided identifiers to the existing ones.
      Object.assign(this._sessionIdentifiers, sessionIdentifiers);
    }
  }, {
    key: "trace",
    value: function trace(msg) {
      this._sendToLogBridge(msg, LogLevel_1.LogLevel.DEBUG); // The server does not support trace
    }
  }, {
    key: "debug",
    value: function debug(msg) {
      this._sendToLogBridge(msg, LogLevel_1.LogLevel.DEBUG);
    }
  }, {
    key: "info",
    value: function info(msg) {
      this._sendToLogBridge(msg, LogLevel_1.LogLevel.INFO);
    }
  }, {
    key: "warn",
    value: function warn(msg, ex) {
      this._sendToLogBridge(msg, LogLevel_1.LogLevel.WARN, ex);
    }
  }, {
    key: "error",
    value: function error(msg, ex) {
      this._sendToLogBridge(msg, LogLevel_1.LogLevel.ERROR, ex);
    }
  }, {
    key: "isDebug",
    value: function isDebug() {
      return this._logLevel === LogLevel_1.LogLevel.DEBUG;
    }
  }, {
    key: "updateLogConfig",
    value: function updateLogConfig(configurationRepository) {
      this._logLevel = configurationRepository.get(ConfigurationFields_1.ConfigurationFields.logLevel) || this._logLevel;
      this._logBridge.setLogLevel(this._logLevel);
      this._logBridge.clearLogEntriesByLogLevel(this._logLevel);
    }
  }, {
    key: "_sendToLogBridge",
    value: function _sendToLogBridge(msg, logLevel, ex) {
      if (logLevel >= this._logLevel) {
        if (ex && ex.stack) {
          msg += " ;stack: ".concat(ex.stack);
        }
        this._logBridge.log(msg, logLevel, this._sessionIdentifiers);
      }
    }
  }]);
}();
exports.Logger = Logger;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/security/CryptoServiceAESGCM.js":
/*!***************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/security/CryptoServiceAESGCM.js ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var KeyStore_1 = __importDefault(__webpack_require__(/*! ./KeyStore */ "./dist/js-sdk-legacy/src/main/technicalServices/security/KeyStore.js"));
/**
 * CryptoServiceAESGCM is responsible for handling encryption and decryption
 * using the AES-GCM algorithm. It relies on KeyStore for secure key management.
 */
var CryptoServiceAESGCM = /*#__PURE__*/function () {
  /**
   * Constructs the CryptoServiceAESGCM instance with KeyStore.
   *
   * @param {KeyStore} keyStore - An instance of KeyStore for managing cryptographic keys.
   */
  function CryptoServiceAESGCM(encryptionKeyName) {
    var keyStore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    _classCallCheck(this, CryptoServiceAESGCM);
    if (!encryptionKeyName) {
      throw new Error("encryptionKeyName is required.");
    }
    this.encryptionKeyName = encryptionKeyName; // Default key identifier
    this.keyStore = keyStore !== null && keyStore !== void 0 ? keyStore : new KeyStore_1["default"]();
    this.isInitialized = false; // Track initialization state
  }
  /**
   * Initializes the KeyStore instance.
   *
   * @returns {Promise<void>} Resolves when the KeyStore is successfully initialized.
   */
  return _createClass(CryptoServiceAESGCM, [{
    key: "init",
    value: (function () {
      var _init = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              if (this.isInitialized) {
                _context.n = 2;
                break;
              }
              _context.n = 1;
              return this.keyStore.init();
            case 1:
              this.isInitialized = true;
            case 2:
              return _context.a(2);
          }
        }, _callee, this);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
    /**
     * Encrypts the provided data using AES-GCM encryption.
     *
     * @param {string} data - The plaintext data to encrypt.
     * @returns {Promise<{ encryptedData: number[], iv: number[] }>} An object containing the encrypted data and the initialization vector (IV).
     * @throws {Error} If encryption fails.
     */
    )
  }, {
    key: "encrypt",
    value: (function () {
      var _encrypt = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(data) {
        var key, iv, encodedData, encryptedBuffer, encryptedData, _t;
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.p = _context2.n) {
            case 0:
              _context2.n = 1;
              return this.init();
            case 1:
              _context2.p = 1;
              _context2.n = 2;
              return this.keyStore.getKey(this.encryptionKeyName);
            case 2:
              key = _context2.v;
              // Generate a random 12-byte IV for AES-GCM (recommended size)
              iv = window.crypto.getRandomValues(new Uint8Array(12)); // Encode the plaintext data as UTF-8
              encodedData = new TextEncoder().encode(data); // Perform the encryption
              _context2.n = 3;
              return window.crypto.subtle.encrypt({
                name: "AES-GCM",
                iv: iv
              }, key, encodedData);
            case 3:
              encryptedBuffer = _context2.v;
              // Convert ArrayBuffer to Uint8Array for easier handling
              encryptedData = new Uint8Array(encryptedBuffer);
              return _context2.a(2, {
                encryptedData: Array.from(encryptedData),
                iv: Array.from(iv)
              });
            case 4:
              _context2.p = 4;
              _t = _context2.v;
              Logger_1["default"].error("Encryption failed:", _t);
              throw new Error("Encryption error occurred.");
            case 5:
              return _context2.a(2);
          }
        }, _callee2, this, [[1, 4]]);
      }));
      function encrypt(_x) {
        return _encrypt.apply(this, arguments);
      }
      return encrypt;
    }()
    /**
     * Decrypts the provided encrypted data using AES-GCM decryption.
     *
     * @param {number[]} encryptedDataArray - The encrypted data as an array of numbers.
     * @param {number[]} ivArray - The initialization vector (IV) as an array of numbers.
     * @returns {Promise<string>} The decrypted plaintext data.
     * @throws {Error} If decryption fails.
     */
    )
  }, {
    key: "decrypt",
    value: (function () {
      var _decrypt = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(encryptedDataArray, ivArray) {
        var key, encryptedData, iv, decryptedBuffer, decryptedData, _t2;
        return _regenerator().w(function (_context3) {
          while (1) switch (_context3.p = _context3.n) {
            case 0:
              _context3.n = 1;
              return this.init();
            case 1:
              _context3.p = 1;
              _context3.n = 2;
              return this.keyStore.getKey(this.encryptionKeyName);
            case 2:
              key = _context3.v;
              // Convert arrays back to Uint8Array
              encryptedData = new Uint8Array(encryptedDataArray).buffer;
              iv = new Uint8Array(ivArray); // Perform the decryption
              _context3.n = 3;
              return window.crypto.subtle.decrypt({
                name: "AES-GCM",
                iv: iv
              }, key, encryptedData);
            case 3:
              decryptedBuffer = _context3.v;
              // Decode the decrypted data from UTF-8
              decryptedData = new TextDecoder().decode(decryptedBuffer);
              return _context3.a(2, decryptedData);
            case 4:
              _context3.p = 4;
              _t2 = _context3.v;
              Logger_1["default"].error("Decryption failed:", _t2);
              throw new Error("Decryption error occurred.");
            case 5:
              return _context3.a(2);
          }
        }, _callee3, this, [[1, 4]]);
      }));
      function decrypt(_x2, _x3) {
        return _decrypt.apply(this, arguments);
      }
      return decrypt;
    }())
  }]);
}();
exports["default"] = CryptoServiceAESGCM;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/security/KeyStore.js":
/*!****************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/security/KeyStore.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
var IndexedDBStorage_1 = __importDefault(__webpack_require__(/*! ../storage/IndexedDBStorage */ "./dist/js-sdk-legacy/src/main/technicalServices/storage/IndexedDBStorage.js"));
/**
 * KeyStore manages cryptographic keys securely using IndexedDB.
 * This class provides methods to retrieve and delete cryptographic keys, with private utilities for key management.
 */
var KeyStore = /*#__PURE__*/function () {
  /**
   * Constructs the KeyStore instance with IndexedDBStorage as a dependency.
   *
   * @param {IndexedDBStorage} indexedDBStorage - An instance of IndexedDBStorage.
   */
  function KeyStore(indexedDBStorage) {
    _classCallCheck(this, KeyStore);
    this.storage = indexedDBStorage !== null && indexedDBStorage !== void 0 ? indexedDBStorage : new IndexedDBStorage_1["default"]({
      storeName: "keystore"
    });
  }
  /**
   * Initializes the IndexedDBStorage instance.
   *
   * @returns {Promise<void>} Resolves when the storage is successfully initialized.
   */
  return _createClass(KeyStore, [{
    key: "init",
    value: (function () {
      var _init = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              _context.n = 1;
              return this.storage.init();
            case 1:
              return _context.a(2);
          }
        }, _callee, this);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
    /**
     * Retrieves a cryptographic key from the IndexedDB. If the key is not found, it generates a new key, saves it, and returns it.
     *
     * IndexedDB is a browser-managed, secure storage mechanism. By design, it ensures that data stored in it is isolated to the origin
     * and accessible only to scripts from the same domain. This provides a secure environment for storing cryptographic keys.
     *
     * IndexedDB also supports the Web Crypto API's `CryptoKey` objects. This allows the keys to remain non-exportable, meaning they
     * cannot be extracted from the browser's secure environment. Instead, the keys are securely handled by the Web Crypto API
     * within the browser's context, ensuring confidentiality and mitigating the risk of unauthorized access. For more details, see
     * the [MDN documentation on CryptoKey](https://developer.mozilla.org/en-US/docs/Web/API/CryptoKey).
     *
     * See the [MDN documentation on IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API).
     *
     * @param {string} keyId - The unique identifier for the key.
     * @returns {Promise<CryptoKey>} Resolves with the CryptoKey.
     */
    )
  }, {
    key: "getKey",
    value: (function () {
      var _getKey = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(keyId) {
        var record, newKey, _t;
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.p = _context2.n) {
            case 0:
              _context2.p = 0;
              _context2.n = 1;
              return this.storage.getRecord(keyId);
            case 1:
              record = _context2.v;
              if (record) {
                _context2.n = 4;
                break;
              }
              _context2.n = 2;
              return this._generateKey();
            case 2:
              newKey = _context2.v;
              _context2.n = 3;
              return this._saveKey(keyId, newKey);
            case 3:
              return _context2.a(2, newKey);
            case 4:
              return _context2.a(2, record);
            case 5:
              _context2.p = 5;
              _t = _context2.v;
              Logger_1["default"].error("Failed to import key:", _t);
              throw new Error("Key retrieval failed.");
            case 6:
              return _context2.a(2);
          }
        }, _callee2, this, [[0, 5]]);
      }));
      function getKey(_x) {
        return _getKey.apply(this, arguments);
      }
      return getKey;
    }()
    /**
     * Deletes a cryptographic key from the IndexedDB.
     *
     * @param {string} keyId - The unique identifier for the key.
     * @returns {Promise<void>} Resolves when the key is successfully deleted.
     */
    )
  }, {
    key: "deleteKey",
    value: (function () {
      var _deleteKey = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(keyId) {
        return _regenerator().w(function (_context3) {
          while (1) switch (_context3.n) {
            case 0:
              _context3.n = 1;
              return this.storage.deleteRecord(keyId);
            case 1:
              return _context3.a(2);
          }
        }, _callee3, this);
      }));
      function deleteKey(_x2) {
        return _deleteKey.apply(this, arguments);
      }
      return deleteKey;
    }()
    /**
     * Generates a new AES-GCM encryption key and stores it in the instance.
     * This method ensures that a secure, random key is used for encryption.
     *
     * Setting `exportable` to `false` ensures that the key cannot be extracted
     * or exported from the Web Crypto API. This prevents unauthorized access
     * to the raw key material, even if an attacker gains access to the IndexedDB
     * storage or the application's code. By making the key non-exportable, the
     * encryption key remains secure and can only be used within the context of
     * the browser's cryptographic environment.
     *
     * @private
     * @returns {Promise<CryptoKey>} The generated cryptographic key.
     * @throws {Error} If key generation fails.
     */
    )
  }, {
    key: "_generateKey",
    value: (function () {
      var _generateKey2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4() {
        var _t2;
        return _regenerator().w(function (_context4) {
          while (1) switch (_context4.p = _context4.n) {
            case 0:
              _context4.p = 0;
              _context4.n = 1;
              return window.crypto.subtle.generateKey({
                name: "AES-GCM",
                length: 256 // 256-bit key for strong encryption
              }, false,
              // Non-exportable for added security
              ["encrypt", "decrypt"]);
            case 1:
              return _context4.a(2, _context4.v);
            case 2:
              _context4.p = 2;
              _t2 = _context4.v;
              Logger_1["default"].error("Failed to generate key:", _t2);
              throw new Error("Key generation failed.");
            case 3:
              return _context4.a(2);
          }
        }, _callee4, null, [[0, 2]]);
      }));
      function _generateKey() {
        return _generateKey2.apply(this, arguments);
      }
      return _generateKey;
    }()
    /**
     * Saves a cryptographic cryptoKey in the IndexedDB.
     *
     * @private
     * @param {string} keyId - The unique identifier for the key.
     * @param {CryptoKey} cryptoKey - The cryptographic key to store.
     * @returns {Promise<void>} Resolves when the key is successfully saved.
     */
    )
  }, {
    key: "_saveKey",
    value: (function () {
      var _saveKey2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(keyId, cryptoKey) {
        var _t3;
        return _regenerator().w(function (_context5) {
          while (1) switch (_context5.p = _context5.n) {
            case 0:
              _context5.p = 0;
              _context5.n = 1;
              return this.storage.addRecord(keyId, cryptoKey);
            case 1:
              _context5.n = 3;
              break;
            case 2:
              _context5.p = 2;
              _t3 = _context5.v;
              Logger_1["default"].error("Failed to save key:", _t3);
              throw new Error("Key saving failed.");
            case 3:
              return _context5.a(2);
          }
        }, _callee5, this, [[0, 2]]);
      }));
      function _saveKey(_x3, _x4) {
        return _saveKey2.apply(this, arguments);
      }
      return _saveKey;
    }()
    /**
     * Clears all keys from the IndexedDB.
     *
     * @private
     * @returns {Promise<void>} Resolves when all keys are successfully cleared.
     */
    )
  }, {
    key: "_clearKeys",
    value: (function () {
      var _clearKeys2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6() {
        return _regenerator().w(function (_context6) {
          while (1) switch (_context6.n) {
            case 0:
              _context6.n = 1;
              return this.storage.clearStore();
            case 1:
              return _context6.a(2);
          }
        }, _callee6, this);
      }));
      function _clearKeys() {
        return _clearKeys2.apply(this, arguments);
      }
      return _clearKeys;
    }()
    /**
     * Releases the IndexedDBStorage resources by closing the connection.
     */
    )
  }, {
    key: "release",
    value: function release() {
      this.storage.release();
    }
  }]);
}();
exports["default"] = KeyStore;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/storage/EncryptedIndexedDBStorage.js":
/*!********************************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/storage/EncryptedIndexedDBStorage.js ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var IndexedDBStorage_1 = __importDefault(__webpack_require__(/*! ./IndexedDBStorage */ "./dist/js-sdk-legacy/src/main/technicalServices/storage/IndexedDBStorage.js"));
var CryptoServiceAESGCM_1 = __importDefault(__webpack_require__(/*! ../security/CryptoServiceAESGCM */ "./dist/js-sdk-legacy/src/main/technicalServices/security/CryptoServiceAESGCM.js"));
/**
 * EncryptedIndexedDBStorage handles encrypted storage and retrieval of data in IndexedDB.
 * It uses IndexedDBStorage for database operations and CryptoService for encryption/decryption.
 */
var EncryptedIndexedDBStorage = /*#__PURE__*/function () {
  /**
   * Constructs the EncryptedIndexedDBStorage instance.
   *
   * @param {Object} config - Configuration for IndexedDBStorage.
   * @param {string} config.storeName - The store name for IndexedDBStorage.
   * @param {string} config.primaryKey - The primary key for the IndexedDBStorage.
   * @param {number} config.version - The version of the IndexedDB database.
   * @param {AESGCM_CryptoService} cryptoService - An instance of CryptoService for encryption/decryption operations.
   */
  function EncryptedIndexedDBStorage(_ref) {
    var storeName = _ref.storeName;
    var cryptoService = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    _classCallCheck(this, EncryptedIndexedDBStorage);
    this.indexedDBStorage = new IndexedDBStorage_1["default"]({
      storeName: storeName
    });
    this.cryptoService = cryptoService !== null && cryptoService !== void 0 ? cryptoService : new CryptoServiceAESGCM_1["default"](storeName);
    this.initialized = false;
  }
  /**
   * Initializes the IndexedDB storage and ensures the encryption key exists.
   *
   * @returns {Promise<void>}
   */
  return _createClass(EncryptedIndexedDBStorage, [{
    key: "init",
    value: (function () {
      var _init = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              if (!this.initialized) {
                _context.n = 1;
                break;
              }
              return _context.a(2);
            case 1:
              _context.n = 2;
              return this.indexedDBStorage.init();
            case 2:
              _context.n = 3;
              return this.cryptoService.init();
            case 3:
              this.initialized = true;
            case 4:
              return _context.a(2);
          }
        }, _callee, this);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
    /**
     * Releases database resources.
     */
    )
  }, {
    key: "release",
    value: function release() {
      this.indexedDBStorage.release();
      this.encryptionKeyStorage.release();
      this.initialized = false;
    }
    /**
     * Adds a record to the database after encrypting it.
     *
     * @param {string} key - The key to associate with the record.
     * @param {Object} value - The record to be encrypted and stored.
     * @returns {Promise<string>} A success message upon successful encryption and storage.
     */
  }, {
    key: "addRecord",
    value: (function () {
      var _addRecord = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(key, value) {
        var encryptedValue;
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.n) {
            case 0:
              _context2.n = 1;
              return this.init();
            case 1:
              _context2.n = 2;
              return this._encryptRecord(value);
            case 2:
              encryptedValue = _context2.v;
              return _context2.a(2, this.indexedDBStorage.addRecord(key, encryptedValue));
          }
        }, _callee2, this);
      }));
      function addRecord(_x, _x2) {
        return _addRecord.apply(this, arguments);
      }
      return addRecord;
    }()
    /**
     * Retrieves a record from the database and decrypts it.
     *
     * @param {string} key - The key of the record to retrieve.
     * @returns {Promise<Object|null>} The decrypted record, or null if not found.
     */
    )
  }, {
    key: "getRecord",
    value: (function () {
      var _getRecord = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(key) {
        var encryptedValue;
        return _regenerator().w(function (_context3) {
          while (1) switch (_context3.n) {
            case 0:
              _context3.n = 1;
              return this.init();
            case 1:
              _context3.n = 2;
              return this.indexedDBStorage.getRecord(key);
            case 2:
              encryptedValue = _context3.v;
              if (encryptedValue) {
                _context3.n = 3;
                break;
              }
              return _context3.a(2, null);
            case 3:
              return _context3.a(2, this._decryptRecord(encryptedValue));
          }
        }, _callee3, this);
      }));
      function getRecord(_x3) {
        return _getRecord.apply(this, arguments);
      }
      return getRecord;
    }()
    /**
     * Updates a record in the database after encrypting it.
     *
     * @param {string} key - The key of the record to update.
     * @param {Object} value - The record to be encrypted and updated.
     * @returns {Promise<string>} A success message upon successful encryption and update.
     */
    )
  }, {
    key: "updateRecord",
    value: (function () {
      var _updateRecord = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(key, value) {
        var encryptedValue;
        return _regenerator().w(function (_context4) {
          while (1) switch (_context4.n) {
            case 0:
              _context4.n = 1;
              return this.init();
            case 1:
              _context4.n = 2;
              return this._encryptRecord(value);
            case 2:
              encryptedValue = _context4.v;
              return _context4.a(2, this.indexedDBStorage.updateRecord(key, encryptedValue));
          }
        }, _callee4, this);
      }));
      function updateRecord(_x4, _x5) {
        return _updateRecord.apply(this, arguments);
      }
      return updateRecord;
    }()
    /**
     * Deletes a record from the database.
     *
     * @param {string} key - The key of the record to delete.
     * @returns {Promise<string>} A success message upon successful deletion.
     */
    )
  }, {
    key: "deleteRecord",
    value: (function () {
      var _deleteRecord = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(key) {
        return _regenerator().w(function (_context5) {
          while (1) switch (_context5.n) {
            case 0:
              _context5.n = 1;
              return this.init();
            case 1:
              return _context5.a(2, this.indexedDBStorage.deleteRecord(key));
          }
        }, _callee5, this);
      }));
      function deleteRecord(_x6) {
        return _deleteRecord.apply(this, arguments);
      }
      return deleteRecord;
    }()
    /**
     * Retrieves all records from the database and decrypts them.
     *
     * @returns {Promise<Object[]>} An array of decrypted records.
     */
    )
  }, {
    key: "getAllRecords",
    value: (function () {
      var _getAllRecords = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6() {
        var _this = this;
        var encryptedRecords;
        return _regenerator().w(function (_context6) {
          while (1) switch (_context6.n) {
            case 0:
              _context6.n = 1;
              return this.init();
            case 1:
              _context6.n = 2;
              return this.indexedDBStorage.getAllRecords();
            case 2:
              encryptedRecords = _context6.v;
              return _context6.a(2, Promise.all(encryptedRecords.map(function (record) {
                return _this._decryptRecord(record);
              })));
          }
        }, _callee6, this);
      }));
      function getAllRecords() {
        return _getAllRecords.apply(this, arguments);
      }
      return getAllRecords;
    }()
    /**
     * Clears all records from the database.
     *
     * @returns {Promise<string>} A success message upon successful clearance.
     */
    )
  }, {
    key: "clearStore",
    value: (function () {
      var _clearStore = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7() {
        return _regenerator().w(function (_context7) {
          while (1) switch (_context7.n) {
            case 0:
              _context7.n = 1;
              return this.init();
            case 1:
              return _context7.a(2, this.indexedDBStorage.clearStore());
          }
        }, _callee7, this);
      }));
      function clearStore() {
        return _clearStore.apply(this, arguments);
      }
      return clearStore;
    }()
    /**
     * Encrypts a record using the CryptoService.
     *
     * @private
     * @param {Object} record - The record to be encrypted.
     * @returns {Promise<Object>} The encrypted record.
     */
    )
  }, {
    key: "_encryptRecord",
    value: (function () {
      var _encryptRecord2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee8(record) {
        var _yield$this$cryptoSer, encryptedData, iv;
        return _regenerator().w(function (_context8) {
          while (1) switch (_context8.n) {
            case 0:
              _context8.n = 1;
              return this.cryptoService.encrypt(JSON.stringify(record));
            case 1:
              _yield$this$cryptoSer = _context8.v;
              encryptedData = _yield$this$cryptoSer.encryptedData;
              iv = _yield$this$cryptoSer.iv;
              return _context8.a(2, {
                encryptedData: encryptedData,
                iv: iv
              });
          }
        }, _callee8, this);
      }));
      function _encryptRecord(_x7) {
        return _encryptRecord2.apply(this, arguments);
      }
      return _encryptRecord;
    }()
    /**
     * Decrypts a record using the CryptoService.
     *
     * @private
     * @param {Object} encryptedRecord - The record to be decrypted.
     * @returns {Promise<Object>} The decrypted record.
     */
    )
  }, {
    key: "_decryptRecord",
    value: (function () {
      var _decryptRecord2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee9(encryptedRecord) {
        var encryptedData, iv, decryptedData;
        return _regenerator().w(function (_context9) {
          while (1) switch (_context9.n) {
            case 0:
              encryptedData = encryptedRecord.encryptedData, iv = encryptedRecord.iv;
              _context9.n = 1;
              return this.cryptoService.decrypt(encryptedData, iv);
            case 1:
              decryptedData = _context9.v;
              return _context9.a(2, JSON.parse(decryptedData));
          }
        }, _callee9, this);
      }));
      function _decryptRecord(_x8) {
        return _decryptRecord2.apply(this, arguments);
      }
      return _decryptRecord;
    }())
  }]);
}();
exports["default"] = EncryptedIndexedDBStorage;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/main/technicalServices/storage/IndexedDBStorage.js":
/*!***********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/main/technicalServices/storage/IndexedDBStorage.js ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o("next", 0), o("throw", 1), o("return", 2); } }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var Logger_1 = __importDefault(__webpack_require__(/*! ../log/Logger */ "./dist/js-sdk-legacy/src/main/technicalServices/log/Logger.js"));
/**
 * Singleton IndexedDBStorage with centralized schema management and fixed database name.
 */
var IndexedDBStorage = /*#__PURE__*/function () {
  function IndexedDBStorage(_ref) {
    var storeName = _ref.storeName;
    _classCallCheck(this, IndexedDBStorage);
    if (!storeName) {
      throw new Error("Store name must be provided.");
    }
    if (IndexedDBStorage.instances.has(storeName)) {
      return IndexedDBStorage.instances.get(storeName);
    }
    if (!IndexedDBStorage.DB_CONFIG.STORE_SCHEMAS[storeName]) {
      throw new Error("Store \"".concat(storeName, "\" is not defined in the schema."));
    }
    this.storeName = storeName;
    this.db = null;
    this.initialized = false;
    IndexedDBStorage.instances.set(storeName, this);
  }
  /**
   * Initializes the database and ensures schema consistency.
   *
   * @returns {Promise<void>} Resolves when the database is initialized.
   */
  return _createClass(IndexedDBStorage, [{
    key: "init",
    value: (function () {
      var _init = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        return _regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              if (!this.initialized) {
                _context.n = 1;
                break;
              }
              return _context.a(2);
            case 1:
              _context.n = 2;
              return this._openDB();
            case 2:
              this.db = _context.v;
              this.initialized = true;
            case 3:
              return _context.a(2);
          }
        }, _callee, this);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
    /**
     * Opens the database and manages schema creation/updates.
     *
     * @private
     * @returns {Promise<IDBDatabase>} Resolves with the database instance.
     */
    )
  }, {
    key: "_openDB",
    value: function _openDB() {
      return new Promise(function (resolve, reject) {
        var request = indexedDB.open(IndexedDBStorage.DB_CONFIG.NAME, IndexedDBStorage.DB_CONFIG.VERSION);
        request.onupgradeneeded = function (event) {
          var db = event.target.result;
          Logger_1["default"].debug("Database upgrade: Version ".concat(event.oldVersion, " -> ").concat(event.newVersion));
          // Create or update object stores
          for (var _i = 0, _Object$entries = Object.entries(IndexedDBStorage.DB_CONFIG.STORE_SCHEMAS); _i < _Object$entries.length; _i++) {
            var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 1),
              storeName = _Object$entries$_i[0];
            if (!db.objectStoreNames.contains(storeName)) {
              Logger_1["default"].debug("Creating object store: ".concat(storeName));
              db.createObjectStore(storeName);
            } else {
              Logger_1["default"].debug("Object store exists: ".concat(storeName));
            }
          }
        };
        request.onsuccess = function (event) {
          Logger_1["default"].debug("Database \"".concat(IndexedDBStorage.DB_CONFIG.NAME, "\" opened successfully."));
          resolve(event.target.result);
        };
        request.onerror = function (event) {
          Logger_1["default"].error("Error opening database \"".concat(IndexedDBStorage.DB_CONFIG.NAME, "\":"), event.target.error);
          reject(event.target.error);
        };
      });
    }
    /**
     * Opens a transaction and accesses the specified object store.
     *
     * @param {string} mode - The transaction mode, e.g., "readwrite" or "readonly".
     * @returns {IDBObjectStore} The object store instance.
     */
  }, {
    key: "_openObjectStore",
    value: function _openObjectStore(mode) {
      if (!this.db) {
        throw new Error("Database is not initialized. Call init() first.");
      }
      var transaction = this.db.transaction([this.storeName], mode);
      return transaction.objectStore(this.storeName);
    }
    /**
     * Adds a record to the specified object store.
     *
     * @param {Object} record - The record to add.
     * @returns {Promise<string>} Resolves when the record is added.
     */
  }, {
    key: "addRecord",
    value: (function () {
      var _addRecord = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(key, value) {
        var _this = this;
        return _regenerator().w(function (_context2) {
          while (1) switch (_context2.n) {
            case 0:
              _context2.n = 1;
              return this.init();
            case 1:
              return _context2.a(2, new Promise(function (resolve, reject) {
                var store = _this._openObjectStore("readwrite");
                var request = store.put(value, key);
                request.onsuccess = function () {
                  return resolve("Record added successfully.");
                };
                request.onerror = function (event) {
                  return reject("Add record error: ".concat(event.target.error));
                };
              }));
          }
        }, _callee2, this);
      }));
      function addRecord(_x, _x2) {
        return _addRecord.apply(this, arguments);
      }
      return addRecord;
    }()
    /**
     * Retrieves a record from the specified object store.
     *
     * @param {string|number} key - The key of the record to retrieve.
     * @returns {Promise<Object|null>} Resolves with the retrieved record or null if not found.
     */
    )
  }, {
    key: "getRecord",
    value: (function () {
      var _getRecord = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(key) {
        var _this2 = this;
        return _regenerator().w(function (_context3) {
          while (1) switch (_context3.n) {
            case 0:
              _context3.n = 1;
              return this.init();
            case 1:
              return _context3.a(2, new Promise(function (resolve, reject) {
                var store = _this2._openObjectStore("readonly");
                var request = store.get(key);
                request.onsuccess = function (event) {
                  return resolve(event.target.result || null);
                };
                request.onerror = function (event) {
                  return reject("Get record error: ".concat(event.target.error));
                };
              }));
          }
        }, _callee3, this);
      }));
      function getRecord(_x3) {
        return _getRecord.apply(this, arguments);
      }
      return getRecord;
    }()
    /**
     * Updates a record in the specified object store.
     *
     * @param {Object} record - The record to update.
     * @returns {Promise<string>} Resolves when the record is updated.
     */
    )
  }, {
    key: "updateRecord",
    value: (function () {
      var _updateRecord = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(key, value) {
        var _this3 = this;
        return _regenerator().w(function (_context4) {
          while (1) switch (_context4.n) {
            case 0:
              _context4.n = 1;
              return this.init();
            case 1:
              return _context4.a(2, new Promise(function (resolve, reject) {
                var store = _this3._openObjectStore("readwrite");
                var request = store.put(value, key);
                request.onsuccess = function () {
                  return resolve("Record updated successfully.");
                };
                request.onerror = function (event) {
                  return reject("Update record error: ".concat(event.target.error));
                };
              }));
          }
        }, _callee4, this);
      }));
      function updateRecord(_x4, _x5) {
        return _updateRecord.apply(this, arguments);
      }
      return updateRecord;
    }()
    /**
     * Deletes a record from the specified object store.
     *
     * @param {string|number} key - The key of the record to delete.
     * @returns {Promise<string>} Resolves when the record is deleted.
     */
    )
  }, {
    key: "deleteRecord",
    value: (function () {
      var _deleteRecord = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(key) {
        var _this4 = this;
        return _regenerator().w(function (_context5) {
          while (1) switch (_context5.n) {
            case 0:
              _context5.n = 1;
              return this.init();
            case 1:
              return _context5.a(2, new Promise(function (resolve, reject) {
                var store = _this4._openObjectStore("readwrite");
                var request = store["delete"](key);
                request.onsuccess = function () {
                  return resolve("Record deleted successfully.");
                };
                request.onerror = function (event) {
                  return reject("Delete record error: ".concat(event.target.error));
                };
              }));
          }
        }, _callee5, this);
      }));
      function deleteRecord(_x6) {
        return _deleteRecord.apply(this, arguments);
      }
      return deleteRecord;
    }()
    /**
     * Retrieves all records from the specified object store.
     *
     * @returns {Promise<Object[]>} Resolves with an array of all records.
     */
    )
  }, {
    key: "getAllRecords",
    value: (function () {
      var _getAllRecords = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6() {
        var _this5 = this;
        return _regenerator().w(function (_context6) {
          while (1) switch (_context6.n) {
            case 0:
              _context6.n = 1;
              return this.init();
            case 1:
              return _context6.a(2, new Promise(function (resolve, reject) {
                var store = _this5._openObjectStore("readonly");
                var request = store.getAll();
                request.onsuccess = function (event) {
                  return resolve(event.target.result);
                };
                request.onerror = function (event) {
                  return reject("Get all records error: ".concat(event.target.error));
                };
              }));
          }
        }, _callee6, this);
      }));
      function getAllRecords() {
        return _getAllRecords.apply(this, arguments);
      }
      return getAllRecords;
    }()
    /**
     * Clears all records from the specified object store.
     *
     * @returns {Promise<string>} Resolves when all records are cleared.
     */
    )
  }, {
    key: "clearStore",
    value: (function () {
      var _clearStore = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7() {
        var _this6 = this;
        return _regenerator().w(function (_context7) {
          while (1) switch (_context7.n) {
            case 0:
              _context7.n = 1;
              return this.init();
            case 1:
              return _context7.a(2, new Promise(function (resolve, reject) {
                var store = _this6._openObjectStore("readwrite");
                var request = store.clear();
                request.onsuccess = function () {
                  return resolve("All records cleared successfully.");
                };
                request.onerror = function (event) {
                  return reject("Clear store error: ".concat(event.target.error));
                };
              }));
          }
        }, _callee7, this);
      }));
      function clearStore() {
        return _clearStore.apply(this, arguments);
      }
      return clearStore;
    }()
    /**
     * Releases the database connection.
     */
    )
  }, {
    key: "release",
    value: function release() {
      if (this.db) {
        this.db.close();
        this.db = null;
        this.initialized = false;
        IndexedDBStorage.instances["delete"](this.storeName);
        Logger_1["default"].debug("Database \"".concat(IndexedDBStorage.DB_CONFIG.NAME, "\" connection for store \"").concat(this.storeName, "\" closed."));
      }
    }
  }]);
}();
// Singleton instance per store
_defineProperty(IndexedDBStorage, "instances", new Map());
// Unified database configuration
_defineProperty(IndexedDBStorage, "DB_CONFIG", {
  NAME: "bio",
  VERSION: 1,
  STORE_SCHEMAS: {
    emuid: {},
    keystore: {}
  }
});
exports["default"] = IndexedDBStorage;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/slave/MasterSlaveMessage.js":
/*!************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/slave/MasterSlaveMessage.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MasterSlaveMessage = void 0;
exports.MasterSlaveMessage = {
  dataFromSlave: 'dataFromSlave',
  registerSlave: 'registerSlave',
  logPerfSlave: 'logPerfSlave',
  updateSlaveConf: 'updateSlaveConf',
  updateSlaveState: 'updateSlaveState',
  updateMasterContext: 'updateMasterContext',
  resetSessionTriggerFromSlave: 'resetSessionTriggerFromSlave',
  mouseChallengeTriggerFromSlave: 'mouseChallengeTriggerFromSlave',
  onBeforeUnload: 'onbeforeunload',
  slaveHandShake: 'SlaveHandShake',
  cdHandShake: 'CDHandShake',
  slaveAlive: 'slaveAlive',
  iosHandshake: 'iosHandshake',
  channelMessageIdAck: 'channelMessageIdAck',
  startMessagingIntervalToChannel: 'startMessagingIntervalToChannel',
  isChannelSupportsAckMessageLogic: "isChannelSupportsAckMessageLogic"
};

/***/ }),

/***/ "./dist/js-sdk-legacy/src/worker/LogAggregator.js":
/*!********************************************************!*\
  !*** ./dist/js-sdk-legacy/src/worker/LogAggregator.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
/*
Aggregates log messages
 */
var LogLevel_1 = __webpack_require__(/*! ../main/technicalServices/log/LogLevel */ "./dist/js-sdk-legacy/src/main/technicalServices/log/LogLevel.js");
var LogAggregator = /*#__PURE__*/function () {
  function LogAggregator() {
    _classCallCheck(this, LogAggregator);
    this.reset();
  }
  return _createClass(LogAggregator, [{
    key: "setLogLevel",
    value: function setLogLevel(logLevel) {
      this._logLevel = logLevel;
    }
  }, {
    key: "add",
    value: function add(message) {
      var messageData = message.data;
      if (!messageData) {
        throw new Error('Unable to add log message. Missing data field');
      }
      //We add message to log if:
      // 1. messsage has no level (performance ("perf") events that are posted to worker for logging)
      // 2. logLevel of the message >= the level of the log
      if (!messageData.level || messageData.level >= this._logLevel) {
        this._Q.push(messageData);
      }
    }
    /**
     * Takes current data from the aggregator and removes it from the aggregator.
     * Aggregator is reset to initial empty state
     * @returns {Array}
     */
  }, {
    key: "take",
    value: function take() {
      var currentQ = this._Q;
      this.reset();
      return currentQ;
    }
  }, {
    key: "reset",
    value: function reset() {
      this._Q = [];
      this.setLogLevel(typeof this._logLevel === "undefined" ? LogLevel_1.LogLevel.INFO : this._logLevel);
    }
  }, {
    key: "isEmpty",
    value: function isEmpty() {
      return this._Q.length === 0;
    }
  }, {
    key: "filterOutByLogLevel",
    value: function filterOutByLogLevel(logLevel) {
      this._Q = this._Q.filter(
      // eslint-disable-next-line no-unused-vars
      function (value, index, arr) {
        return value.level >= logLevel;
      });
    }
  }]);
}();
exports["default"] = LogAggregator;

/***/ }),

/***/ "./dist/js-sdk-legacy/src/worker/communication/ConfigurationDefaultValues.js":
/*!***********************************************************************************!*\
  !*** ./dist/js-sdk-legacy/src/worker/communication/ConfigurationDefaultValues.js ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ConfigurationDefaultValues = void 0;
exports.ConfigurationDefaultValues = {
  DEFAULT_RETRY_NUM: 5,
  MIN_RETRY_NUM: 1,
  MAX_RETRY_NUM: 1000,
  DEFAULT_RETRY_INTERVAL: 1000,
  MIN_RETRY_INTERVAL: 100,
  MAX_RETRY_INTERVAL: 10000,
  DEFAULT_GROWTH_PER_FAILURE: 3500,
  MIN_GROWTH_PER_FAILURE: 0,
  MAX_GROWTH_PER_FAILURE: 10000,
  DEFAULT_INTERVAL_LIMIT: 16000,
  MIN_INTERVAL_LIMIT: 100,
  MAX_INTERVAL_LIMIT: 300000,
  MAX_REQUEST_DELAY: 6000,
  DEFAULT_CDS_NUM_EXPIRATION_TIME: 60,
  MIN_CDS_NUM_EXPIRATION_TIME: 1,
  MAX_CDS_NUM_EXPIRATION_TIME: 44640,
  VALUE_DID_NOT_EXIST: 1,
  SUCCESS_IN_CHANGED_EXPIRATION: 0,
  FAILURE_IN_CHANGED_EXPIRATION: -1
};

/***/ }),

/***/ "./dist/src/client/BioCatchClient.js":
/*!*******************************************!*\
  !*** ./dist/src/client/BioCatchClient.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BioCatchClient = void 0;
var BCProtocolType_1 = __webpack_require__(/*! ../types/BCProtocolType */ "./dist/src/types/BCProtocolType.js");
var SupportedBrowserChecker_1 = __webpack_require__(/*! ./SupportedBrowserChecker */ "./dist/src/client/SupportedBrowserChecker.js");
/**
 * TypeScript implementation of BioCatchClient
 * This class provides the same functionality as the original JavaScript BioCatchClient
 * but with full TypeScript type safety and interfaces.
 */
var BioCatchClient = /*#__PURE__*/function () {
  function BioCatchClient(clientOrDependencies, dynamicCdApiLoader, configMapper, serverUrlResolver, remoteConfigurationLoadedCallback) {
    _classCallCheck(this, BioCatchClient);
    _defineProperty(this, "client", void 0);
    _defineProperty(this, "dynamicCdApiLoader", void 0);
    _defineProperty(this, "configMapper", void 0);
    _defineProperty(this, "serverUrlResolver", void 0);
    _defineProperty(this, "remoteConfigurationLoadedCallback", void 0);
    // Handle both constructor signatures
    if (this.isDependenciesObject(clientOrDependencies)) {
      this.client = clientOrDependencies.client;
      this.dynamicCdApiLoader = clientOrDependencies.dynamicCdApiLoader;
      this.configMapper = clientOrDependencies.configMapper;
      this.serverUrlResolver = clientOrDependencies.serverUrlResolver;
      this.remoteConfigurationLoadedCallback = clientOrDependencies.remoteConfigurationLoadedCallback;
    } else {
      if (!dynamicCdApiLoader || !configMapper || !serverUrlResolver) {
        throw new Error('All dependencies must be provided when using individual parameters');
      }
      this.client = clientOrDependencies;
      this.dynamicCdApiLoader = dynamicCdApiLoader;
      this.configMapper = configMapper;
      this.serverUrlResolver = serverUrlResolver;
      this.remoteConfigurationLoadedCallback = remoteConfigurationLoadedCallback;
    }
    console.log("initalizeBioCatchClient");
    this.initialize();
  }
  return _createClass(BioCatchClient, [{
    key: "isDependenciesObject",
    value: function isDependenciesObject(obj) {
      return obj && _typeof(obj) === 'object' && 'client' in obj && 'dynamicCdApiLoader' in obj;
    }
  }, {
    key: "initialize",
    value: function initialize() {
      // Apply polyfills (we'll need to implement or import this)
      this.applyPolyfills();
      // Check browser support - abort if unsupported
      if (!SupportedBrowserChecker_1.SupportedBrowserChecker.isSupported()) {
        console.warn('BioCatch SDK: Browser not supported');
        return;
      }
      // Check if we're in a browser environment
      if (typeof window === 'undefined') {
        console.warn('BioCatch SDK: Not in browser environment, skipping initialization');
        return;
      }
      // Initialize based on whether cdApi is already available
      if ('cdApi' in window && window.cdApi) {
        this.client.autoStart(this.remoteConfigurationLoadedCallback);
      } else {
        window.bcClient = this.createProxyInterface();
      }
    }
  }, {
    key: "applyPolyfills",
    value: function applyPolyfills() {
      // For gradual migration, we can import the existing polyfills from JS legacy
      // This allows us to reuse the existing implementation while migrating
      try {
        // In the actual implementation, you would:
        // import applyPolyfills from '../../js-sdk-legacy/src/main/common/polyfills/PolyfillsApplier';
        // applyPolyfills();
        // For now, we'll add a basic polyfill check
        if (typeof window !== 'undefined') {
          // Basic polyfill implementations can go here
          console.debug('BioCatch SDK: Polyfills applied');
        }
      } catch (error) {
        console.warn('BioCatch SDK: Failed to apply polyfills', error);
      }
    }
    /**
     * Creates a proxy interface that provides the public API
     * This interface is disconnected from the actual BioCatchClient instance
     * to make it harder to inspect or debug internal members
     */
  }, {
    key: "createProxyInterface",
    value: function createProxyInterface() {
      var _this = this;
      return {
        start: function start(wupServerUrl, customerID, customerSessionID, configurations) {
          var protocolType = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : BCProtocolType_1.BCProtocolType.V3;
          // Prioritize the extended options and cid provided by the start params over the raw url
          var resolvedServerUrl = _this.serverUrlResolver.resolve(wupServerUrl, customerID, protocolType);
          // Translate the configurations json to StartupConfigurations object
          var startupConfigurations = _this.configMapper.mapStartupConfigurations(resolvedServerUrl, configurations);
          // Attach to the window the cdApi so the sdk could work as it used to
          _this.dynamicCdApiLoader.attachCdApi(window, customerSessionID);
          _this.client.manualStart(startupConfigurations, resolvedServerUrl, _this.remoteConfigurationLoadedCallback);
        },
        stop: function stop() {
          _this.client.stop();
        },
        pause: function pause() {
          _this.client.pause();
        },
        resume: function resume() {
          _this.client.resume();
        },
        updateCustomerSessionID: function updateCustomerSessionID(customerID) {
          _this.client.updateCustomerSessionID(customerID);
        },
        changeContext: function changeContext(contextName) {
          _this.client.changeContext(contextName);
        },
        startNewSession: function startNewSession(customerSessionID) {
          _this.client.startNewSession(customerSessionID);
        },
        setCoordinatesMasking: function setCoordinatesMasking(isEnable) {
          _this.client.setCoordinatesMasking(isEnable);
        },
        setCustomerBrand: function setCustomerBrand(brand) {
          _this.client.setCustomerBrand(brand);
        }
      };
    }
  }]);
}();
exports.BioCatchClient = BioCatchClient;

/***/ }),

/***/ "./dist/src/client/JSBridge.js":
/*!*************************************!*\
  !*** ./dist/src/client/JSBridge.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



/**
 * Example: Bridging TypeScript BioCatchClient with existing JavaScript dependencies
 *
 * This file shows how to use the new TypeScript BioCatchClient while still
 * leveraging the existing JavaScript dependencies during the gradual migration.
 */
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createBioCatchClientFromJS = void 0;
var BioCatchClient_1 = __webpack_require__(/*! ./BioCatchClient */ "./dist/src/client/BioCatchClient.js");
/**
 * Wrapper to adapt existing JavaScript Client to TypeScript interface
 */
var ClientAdapter = /*#__PURE__*/function () {
  function ClientAdapter(jsClient) {
    _classCallCheck(this, ClientAdapter);
    _defineProperty(this, "jsClient", void 0);
    this.jsClient = jsClient;
  }
  return _createClass(ClientAdapter, [{
    key: "autoStart",
    value: function autoStart(remoteConfigurationLoadedCallback) {
      this.jsClient.autoStart(remoteConfigurationLoadedCallback);
    }
  }, {
    key: "manualStart",
    value: function manualStart(startupConfigurations, resolvedServerUrl, remoteConfigurationLoadedCallback) {
      this.jsClient.manualStart(startupConfigurations, resolvedServerUrl, remoteConfigurationLoadedCallback);
    }
  }, {
    key: "stop",
    value: function stop() {
      this.jsClient.stop();
    }
  }, {
    key: "pause",
    value: function pause() {
      this.jsClient.pause();
    }
  }, {
    key: "resume",
    value: function resume() {
      this.jsClient.resume();
    }
  }, {
    key: "updateCustomerSessionID",
    value: function updateCustomerSessionID(customerID) {
      this.jsClient.updateCustomerSessionID(customerID);
    }
  }, {
    key: "changeContext",
    value: function changeContext(contextName) {
      this.jsClient.changeContext(contextName);
    }
  }, {
    key: "startNewSession",
    value: function startNewSession(customerSessionID) {
      this.jsClient.startNewSession(customerSessionID);
    }
  }, {
    key: "setCoordinatesMasking",
    value: function setCoordinatesMasking(isEnable) {
      this.jsClient.setCoordinatesMasking(isEnable);
    }
  }, {
    key: "setCustomerBrand",
    value: function setCustomerBrand(brand) {
      this.jsClient.setCustomerBrand(brand);
    }
  }]);
}();
/**
 * Wrapper to adapt existing JavaScript DynamicCdApiLoader to TypeScript interface
 */
var DynamicCdApiLoaderAdapter = /*#__PURE__*/function () {
  function DynamicCdApiLoaderAdapter(jsLoader) {
    _classCallCheck(this, DynamicCdApiLoaderAdapter);
    _defineProperty(this, "jsLoader", void 0);
    this.jsLoader = jsLoader;
  }
  return _createClass(DynamicCdApiLoaderAdapter, [{
    key: "attachCdApi",
    value: function attachCdApi(window, customerSessionID) {
      this.jsLoader.attachCdApi(window, customerSessionID);
    }
  }]);
}();
/**
 * Adapter for JavaScript StartupConfigurations to match TypeScript interface
 */
var StartupConfigurationsAdapter = /*#__PURE__*/function () {
  function StartupConfigurationsAdapter(jsConfig) {
    _classCallCheck(this, StartupConfigurationsAdapter);
    _defineProperty(this, "jsConfig", void 0);
    this.jsConfig = jsConfig;
  }
  return _createClass(StartupConfigurationsAdapter, [{
    key: "getWupServerURL",
    value: function getWupServerURL() {
      return this.jsConfig.getWupServerURL();
    }
  }, {
    key: "getLogServerURL",
    value: function getLogServerURL() {
      return this.jsConfig.getLogServerURL();
    }
  }, {
    key: "getEnableFramesProcessing",
    value: function getEnableFramesProcessing() {
      return this.jsConfig.getEnableFramesProcessing();
    }
  }, {
    key: "getEnableCustomElementsProcessing",
    value: function getEnableCustomElementsProcessing() {
      return this.jsConfig.getEnableCustomElementsProcessing();
    }
  }, {
    key: "getEnableSameSiteNoneAndSecureCookies",
    value: function getEnableSameSiteNoneAndSecureCookies() {
      return this.jsConfig.getEnableSameSiteNoneAndSecureCookies();
    }
  }, {
    key: "getUseUrlWorker",
    value: function getUseUrlWorker() {
      return this.jsConfig.getUseUrlWorker();
    }
  }, {
    key: "getWorkerUrl",
    value: function getWorkerUrl() {
      return this.jsConfig.getWorkerUrl();
    }
  }, {
    key: "getIsWupServerURLProxy",
    value: function getIsWupServerURLProxy() {
      return this.jsConfig.getIsWupServerURLProxy();
    }
  }, {
    key: "getClientSettings",
    value: function getClientSettings() {
      return this.jsConfig.getClientSettings();
    }
  }, {
    key: "getCollectionSettings",
    value: function getCollectionSettings() {
      return this.jsConfig.getCollectionSettings();
    }
  }, {
    key: "getEnableStartupCustomerSessionId",
    value: function getEnableStartupCustomerSessionId() {
      return this.jsConfig.getEnableStartupCustomerSessionId();
    }
  }, {
    key: "getMutationMaxChunkSize",
    value: function getMutationMaxChunkSize() {
      return this.jsConfig.getMutationMaxChunkSize();
    }
  }, {
    key: "getMutationChunkDelayMs",
    value: function getMutationChunkDelayMs() {
      return this.jsConfig.getMutationChunkDelayMs();
    }
  }, {
    key: "getPasswordIdMaskingList",
    value: function getPasswordIdMaskingList() {
      return this.jsConfig.getPasswordIdMaskingList() || [];
    }
  }, {
    key: "getEnableUnmaskedValues",
    value: function getEnableUnmaskedValues() {
      return this.jsConfig.getEnableUnmaskedValues ? this.jsConfig.getEnableUnmaskedValues() : false;
    }
  }, {
    key: "getAllowedUnmaskedValuesList",
    value: function getAllowedUnmaskedValuesList() {
      return this.jsConfig.getAllowedUnmaskedValuesList ? this.jsConfig.getAllowedUnmaskedValuesList() : [];
    }
  }, {
    key: "getEnableCoordinatesMasking",
    value: function getEnableCoordinatesMasking() {
      return this.jsConfig.getEnableCoordinatesMasking ? this.jsConfig.getEnableCoordinatesMasking() : false;
    }
  }, {
    key: "getIsFlutterApp",
    value: function getIsFlutterApp() {
      return this.jsConfig.getIsFlutterApp ? this.jsConfig.getIsFlutterApp() : false;
    }
  }, {
    key: "getEnableMinifiedWupUri",
    value: function getEnableMinifiedWupUri() {
      return this.jsConfig.isMinifiedWupUriEnabled ? this.jsConfig.isMinifiedWupUriEnabled() : true;
    }
  }, {
    key: "getEnableMinifiedLogUri",
    value: function getEnableMinifiedLogUri() {
      return this.jsConfig.isMinifiedLogUriEnabled ? this.jsConfig.isMinifiedLogUriEnabled() : false;
    }
  }, {
    key: "getMaxShadowDepth",
    value: function getMaxShadowDepth() {
      return this.jsConfig.getMaxShadowDepth ? this.jsConfig.getMaxShadowDepth() : 0;
    }
  }, {
    key: "getEnableGraphCard",
    value: function getEnableGraphCard() {
      return this.jsConfig.getEnableGraphCard ? this.jsConfig.getEnableGraphCard() : false;
    }
  }, {
    key: "getEnableBrowserDisplayDetect",
    value: function getEnableBrowserDisplayDetect() {
      return this.jsConfig.getEnableBrowserDisplayDetect ? this.jsConfig.getEnableBrowserDisplayDetect() : false;
    }
  }, {
    key: "getEnableMathDetect",
    value: function getEnableMathDetect() {
      return this.jsConfig.getEnableMathDetect ? this.jsConfig.getEnableMathDetect() : false;
    }
  }]);
}();
/**
 * Wrapper to adapt existing JavaScript ConfigMapper to TypeScript interface
 */
var ConfigMapperAdapter = /*#__PURE__*/function () {
  function ConfigMapperAdapter(jsMapper) {
    _classCallCheck(this, ConfigMapperAdapter);
    _defineProperty(this, "jsMapper", void 0);
    this.jsMapper = jsMapper;
  }
  return _createClass(ConfigMapperAdapter, [{
    key: "mapStartupConfigurations",
    value: function mapStartupConfigurations(wupServerUrl, configurations) {
      var jsConfig = this.jsMapper.mapStartupConfigurations(wupServerUrl, configurations);
      return new StartupConfigurationsAdapter(jsConfig);
    }
  }]);
}();
/**
 * Wrapper to adapt existing JavaScript ServerUrlResolver to TypeScript interface
 */
var ServerUrlResolverAdapter = /*#__PURE__*/function () {
  function ServerUrlResolverAdapter(jsResolver) {
    _classCallCheck(this, ServerUrlResolverAdapter);
    _defineProperty(this, "jsResolver", void 0);
    this.jsResolver = jsResolver;
  }
  return _createClass(ServerUrlResolverAdapter, [{
    key: "resolve",
    value: function resolve(wupServerUrl, customerID, protocolType) {
      return this.jsResolver.resolve(wupServerUrl, customerID, protocolType);
    }
  }]);
}();
/**
 * Factory function to create TypeScript BioCatchClient using existing JavaScript dependencies
 *
 * @param jsClient - Existing JavaScript Client instance
 * @param jsDynamicCdApiLoader - Existing JavaScript DynamicCdApiLoader instance
 * @param jsConfigMapper - Existing JavaScript ConfigMapper instance
 * @param jsServerUrlResolver - Existing JavaScript ServerUrlResolver instance
 * @param remoteConfigurationLoadedCallback - Optional callback function
 * @returns TypeScript BioCatchClient instance
 */
function createBioCatchClientFromJS(jsClient, jsDynamicCdApiLoader, jsConfigMapper, jsServerUrlResolver, remoteConfigurationLoadedCallback) {
  var clientAdapter = new ClientAdapter(jsClient);
  var loaderAdapter = new DynamicCdApiLoaderAdapter(jsDynamicCdApiLoader);
  var mapperAdapter = new ConfigMapperAdapter(jsConfigMapper);
  var resolverAdapter = new ServerUrlResolverAdapter(jsServerUrlResolver);
  return new BioCatchClient_1.BioCatchClient(clientAdapter, loaderAdapter, mapperAdapter, resolverAdapter, remoteConfigurationLoadedCallback);
}
exports.createBioCatchClientFromJS = createBioCatchClientFromJS;
/**
 * Example usage:
 *
 * ```typescript
 * // Import existing JavaScript modules
 * import Client from '../js-sdk-legacy/src/main/Client';
 * import { DynamicCdApiLoader } from '../js-sdk-legacy/src/main/core/DynamicCdApiLoader';
 * import { ConfigMapper } from '../js-sdk-legacy/src/main/core/ConfigMapper';
 * import { ServerUrlResolver } from '../js-sdk-legacy/src/main/core/ServerUrlResolver';
 *
 * // Create instances
 * const client = new Client();
 * const dynamicCdApiLoader = new DynamicCdApiLoader();
 * const configMapper = new ConfigMapper();
 * const serverUrlResolver = new ServerUrlResolver();
 *
 * // Create TypeScript BioCatchClient
 * const tsClient = createBioCatchClientFromJS(
 *   client,
 *   dynamicCdApiLoader,
 *   configMapper,
 *   serverUrlResolver,
 *   () => console.log('Configuration loaded')
 * );
 * ```
 */

/***/ }),

/***/ "./dist/src/client/SupportedBrowserChecker.js":
/*!****************************************************!*\
  !*** ./dist/src/client/SupportedBrowserChecker.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports) {



function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SupportedBrowserChecker = void 0;
/**
 * Utility class to check if the browser supports required features
 */
var SupportedBrowserChecker = /*#__PURE__*/function () {
  function SupportedBrowserChecker() {
    _classCallCheck(this, SupportedBrowserChecker);
  }
  return _createClass(SupportedBrowserChecker, null, [{
    key: "isSupported",
    value:
    /**
     * Checks if the current browser supports all required features
     * @returns {boolean} true if browser is supported, false otherwise
     */
    function isSupported() {
      // Check if we're in a browser environment
      if (typeof window === 'undefined') {
        // In Node.js environment (testing/SSR), assume supported
        return true;
      }
      // Check for required browser features
      if (typeof WeakMap === 'undefined' || !window.Worker || !window.MutationObserver) {
        return false;
      }
      return true;
    }
  }]);
}();
exports.SupportedBrowserChecker = SupportedBrowserChecker;

/***/ }),

/***/ "./dist/src/index.js":
/*!***************************!*\
  !*** ./dist/src/index.js ***!
  \***************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.initializeBioCatchClient = exports.BioCatchClient = void 0;
// Auto-initialization entry point - exactly matching js-sdk-legacy main.js
var DynamicCdApiLoader_1 = __webpack_require__(/*! ../js-sdk-legacy/src/main/core/DynamicCdApiLoader */ "./dist/js-sdk-legacy/src/main/core/DynamicCdApiLoader.js");
var ConfigMapper_1 = __webpack_require__(/*! ../js-sdk-legacy/src/main/core/ConfigMapper */ "./dist/js-sdk-legacy/src/main/core/ConfigMapper.js");
var ServerUrlResolver_1 = __webpack_require__(/*! ../js-sdk-legacy/src/main/core/ServerUrlResolver */ "./dist/js-sdk-legacy/src/main/core/ServerUrlResolver.js");
var Client_1 = __importDefault(__webpack_require__(/*! ../js-sdk-legacy/src/main/Client */ "./dist/js-sdk-legacy/src/main/Client.js"));
var JSBridge_1 = __webpack_require__(/*! ./client/JSBridge */ "./dist/src/client/JSBridge.js");
var BioCatchClient_1 = __webpack_require__(/*! ./client/BioCatchClient */ "./dist/src/client/BioCatchClient.js");
Object.defineProperty(exports, "BioCatchClient", ({
  enumerable: true,
  get: function get() {
    return BioCatchClient_1.BioCatchClient;
  }
}));
function initializeBioCatchClient() {
  console.log(" BioCatch SDK - initializeBioCatchClient called");
  // BioCatchClient constructor will auto-start the SDK if external cdApi is provided.
  // Otherwise - will attach a 'bcTracker' member object from type BioCatchClient to the window which can be used for "manual-start".
  var client = (0, JSBridge_1.createBioCatchClientFromJS)(new Client_1["default"](), new DynamicCdApiLoader_1.DynamicCdApiLoader(), new ConfigMapper_1.ConfigMapper(), new ServerUrlResolver_1.ServerUrlResolver());
  console.log(" BioCatch SDK - BioCatch client created:", client);
  return client;
}
exports.initializeBioCatchClient = initializeBioCatchClient;
// Immediately call initialization - matching legacy pattern exactly
console.log(" BioCatch SDK - Starting auto-initialization...");
initializeBioCatchClient();
console.log(" BioCatch SDK - Auto-initialization completed");

/***/ }),

/***/ "./dist/src/types/BCProtocolType.js":
/*!******************************************!*\
  !*** ./dist/src/types/BCProtocolType.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports) {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BCProtocolType = void 0;
/**
 * BioCatch Protocol Types
 */
var BCProtocolType;
(function (BCProtocolType) {
  BCProtocolType[BCProtocolType["V3"] = 3] = "V3";
  BCProtocolType[BCProtocolType["V4"] = 4] = "V4";
})(BCProtocolType = exports.BCProtocolType || (exports.BCProtocolType = {}));

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/global */
/******/ 	!function() {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	}();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./dist/src/index.js");
/******/ 	cdwpb = __webpack_exports__;
/******/ 	
/******/ })()
;
//# sourceMappingURL=main.debug.bundle.js.map